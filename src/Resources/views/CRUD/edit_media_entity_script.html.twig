{#
This file is part of the Networking package.

(c) net working AG <info@networking.ch>
moved all relation fields to the networking crud folder

For the full copyright and license information, please view the LICENSE
file that was distributed with this source code.

This code manage the many-to-[one|many] Media association field popup
#}
{% autoescape false %}
    <!-- media edit many association -->
    <script type="text/javascript">
        var dialogTitle = '{{ admin.label|trans({}, admin.translationDomain) }}';
        var updateUrl = '{{ url('sonata_admin_short_object_information', {
            'objectId': 'OBJECT_ID',
            'uniqid': admin.uniqid,
            'code': admin.code
        }) }}'
        var formElementUrl = "{{ url('sonata_admin_retrieve_form_element', {
            'elementId': id,
            'subclass':  sonata_admin.admin.hasActiveSubClass()?sonata_admin.admin.getActiveSubclassCode():'',
            'objectId':  sonata_admin.admin.root.id(sonata_admin.admin.root.subject),
            'uniqid':    sonata_admin.admin.root.uniqid,
            'code':      sonata_admin.admin.root.code,
            'locale':    app.request.locale
        }) }}"
        var mediaSelect_{{ id }} = new MediaSelect('{{ id }}', dialogTitle, updateUrl, formElementUrl);

        //set up event handlers for opening list view
        function open_media_list_{{ id }}(link) {
            // remove the html event
            link.onclick = null;

            // add the jQuery event to the a element
            jQuery(link).on('click', function (event) {
                event.preventDefault();
                mediaSelect_{{ id }}.field_dialog_form_list(this);
            }).trigger('click');

            return false;
        }

        //set up event handlers for opening dialog for form add view
        function start_field_dialog_form_add_{{ id }}(link) {
            // remove the html event
            link.onclick = null;
            // add the jQuery event to the a element
            jQuery(link).on('click', function (event) {
                event.preventDefault();
                mediaSelect_{{ id }}.field_dialog_form_add(this)
            }).trigger('click');
            return false;
        }

        //set up event handlers for removing an element
        function remove_selected_element_{{ id }}(link) {
            // remove the html event
            link.onclick = null;
            // add the jQuery event to the a element
            jQuery(link).on('click', function (event) {
                event.preventDefault();
                mediaSelect_{{ id }}.field_remove_element(this)
            }).trigger('click');
            return false;
            return false;
        }

    </script>
    <!-- / edit media association -->
{% endautoescape %}
