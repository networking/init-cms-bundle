(()=>{"use strict";var e,t={8328(e,t,a){var i=a(3751),n=a(1870),o=a(641),l=a(33);const s={class:"imageEditorApp py-10"},r={class:"imageContainer d-flex justify-content-center align-items-center"},d=["src"],c={class:"middle"},m={class:"text"},g=["innerHTML"],u={id:"imageModal",class:"modal fade",tabindex:"-1",role:"dialog"},h={class:"modal-dialog modal-fullscreen",role:"document"},b={class:"modal-content"},v={class:"modal-header"},p={class:"modal-title"},f={class:"modal-body align-center"},k={class:"row"},_={class:"col-md-6 align-center"},L=["src"],w={class:"col-md-6 align-center"},y=["src"],M={class:"modal-footer"},x={type:"button",class:"btn btn-sm btn-light","data-bs-dismiss":"modal"},E={id:"confirmModal",class:"modal fade",tabindex:"-1",role:"dialog"},I={class:"modal-dialog",role:"document"},C={class:"modal-content"},$={class:"modal-header"},O={class:"modal-title"},U={class:"modal-body"},T={class:"modal-footer"};var j=a(1083),A=a(971);const B=["gif","jpg","jpeg","png"];let S=document.getElementById("image-container"),R={headers:{"X-Requested-With":"XMLHttpRequest"}};const D={name:"Editor",mounted(){this.imageURL=S.getAttribute("data-image-src"),this.id=S.getAttribute("data-image-id"),this.context=S.getAttribute("data-image-context"),this.provider=S.getAttribute("data-image-provider"),this.fileExtension=this.imageURL.slice((this.imageURL.lastIndexOf(".")-1>>>0)+2),this.imageModal=new bootstrap.Modal(document.getElementById("imageModal"),{keyboard:!1}),this.confirmModal=new bootstrap.Modal(document.getElementById("confirmModal"),{keyboard:!1}),this.editorModal=new bootstrap.Modal(document.getElementById("editorModal"),{keyboard:!1})},data(){return this.$i18n.locale="de",{locale:"de",imageURL:"",id:"",context:"",provider:"",imageEditor:"",newImage:"",alert:!1,alertMessage:!1,alertType:!1,fileExtension:"",imageModal:{},confirmModal:{},editorModal:{},config:{}}},watch:{locale(e){this.$i18n.locale=e}},methods:{editImage(){if(this.alertMessage=!1,!B.includes(this.fileExtension.toLowerCase()))return this.alert=!0,this.alertType="error",void(this.alertMessage=this.$i18n.t("not_allowed_extension"));this.alert=!1,this.alertType=!1,this.alertMessage=!1,this.open(this.imageURL)},open(e){this.config.source=e,this.imageEditor=new A.A(document.querySelector("#imageEditor"),{source:e,language:this.locale}),this.editorModal.show(),this.imageEditor.render({onClose:e=>{this.imageEditor.terminate(),this.editorModal.hide()},onBeforeSave:e=>!1,onSave:(e,t)=>{this.download(e)}})},download({fullName:e,mimeType:t,imageCanvas:a}){return this.newImage=a.toDataURL(),this.alert=!1,this.alertType=!1,this.alertMessage=!1,this.imageModal.show(),this.editorModal.hide(),!1},cloneImage(){this.imageModal.hide(),j.A.post("/admin/cms/media/clone",{id:this.id,clone:!0,provider:this.provider,context:this.context,file:this.newImage},R).then(e=>{this.alert=!0,e.data.success?(this.alertMessage=this.$t("message.cloned",{url:e.data.url}),this.alertType="success"):(this.alertMessage=e.data.error,this.alertType="error")}).catch(function(e){console.log(e)})},updateImage(){this.imageModal.hide(),this.confirmModal.show()},rejectUpdate(){this.imageModal.show(),this.confirmModal.hide()},confirmUpdate(){this.confirmModal.hide(),j.A.post("/admin/cms/media/clone",{id:this.id,clone:!1,provider:this.provider,context:this.context,file:this.newImage},R).then(e=>{e.data.success?window.location.href=e.data.url:(this.alert=!0,this.alertMessage=e.data.error,this.alertType="error")}).catch(function(e){console.log(e)})}}};const Q=(0,a(6262).A)(D,[["render",function(e,t,a,n,j,A){return(0,o.uX)(),(0,o.CE)("div",s,[(0,o.Lk)("div",r,[(0,o.Q3)('            <img :src="imageURL" class="img-responsive image" @contextmenu.prevent="$refs.menu.open">'),(0,o.Lk)("img",{src:j.imageURL,class:"img-fluid center-block image"},null,8,d),(0,o.Lk)("div",c,[(0,o.Lk)("div",m,[(0,o.Lk)("a",{href:"",class:"btn btn-default",onClick:t[0]||(t[0]=(0,i.D$)((...e)=>A.editImage&&A.editImage(...e),["prevent"]))},[t[5]||(t[5]=(0,o.Lk)("i",{class:"fa fa-magic fa-small"},null,-1)),(0,o.eW)(" "+(0,l.v_)(e.$t("edit_image")),1)])])])]),j.alert?((0,o.uX)(),(0,o.CE)("div",{key:0,class:(0,l.C4)(["alert mt-10",["error"===j.alertType?"alert-danger":"alert-success"]]),role:"alert",innerHTML:j.alertMessage},null,10,g)):(0,o.Q3)("v-if",!0),(0,o.Lk)("div",u,[(0,o.Lk)("div",h,[(0,o.Lk)("div",b,[(0,o.Lk)("div",v,[(0,o.Lk)("h4",p,(0,l.v_)(e.$t("created_image")),1),(0,o.Q3)("begin::Close"),t[6]||(t[6]=(0,o.Lk)("div",{class:"btn btn-icon btn-sm btn-active-light-primary ms-2","data-bs-dismiss":"modal","aria-label":"Close"},[(0,o.Lk)("i",{class:"ki-outline ki-cross fs-1"})],-1))]),(0,o.Lk)("div",f,[(0,o.Lk)("div",k,[(0,o.Lk)("div",_,[(0,o.Lk)("h3",null,(0,l.v_)(e.$t("original_image")),1),(0,o.Lk)("p",null,[(0,o.Lk)("img",{src:j.imageURL,class:"img-fluid center-block"},null,8,L)])]),(0,o.Lk)("div",w,[(0,o.Lk)("h3",null,(0,l.v_)(e.$t("new_image")),1),(0,o.Lk)("p",null,[(0,o.Lk)("img",{src:j.newImage,class:"img-fluid center-block"},null,8,y)])])])]),(0,o.Lk)("div",M,[(0,o.Lk)("button",x,(0,l.v_)(e.$t("cancel")),1),(0,o.Lk)("button",{type:"button",class:"btn btn-sm btn-warning",onClick:t[1]||(t[1]=(0,i.D$)((...e)=>A.updateImage&&A.updateImage(...e),["prevent"]))},(0,l.v_)(e.$t("replace_image")),1),(0,o.Lk)("button",{type:"button",class:"btn btn-sm btn-primary",onClick:t[2]||(t[2]=(0,i.D$)((...e)=>A.cloneImage&&A.cloneImage(...e),["prevent"]))},(0,l.v_)(e.$t("create_new_image")),1)])]),(0,o.Q3)(" /.modal-content ")]),(0,o.Q3)(" /.modal-dialog ")]),(0,o.Q3)(" /.modal "),(0,o.Lk)("div",E,[(0,o.Lk)("div",I,[(0,o.Lk)("div",C,[(0,o.Lk)("div",$,[(0,o.Lk)("h4",O,(0,l.v_)(e.$t("are_you_sure")),1),(0,o.Q3)("begin::Close"),t[7]||(t[7]=(0,o.Lk)("div",{class:"btn btn-icon btn-sm btn-active-light-primary ms-2","data-bs-dismiss":"modal","aria-label":"Close"},[(0,o.Lk)("i",{class:"ki-outline ki-cross fs-1"})],-1))]),(0,o.Lk)("div",U,[(0,o.Lk)("p",null,(0,l.v_)(e.$t("message.cannot_be_undone")),1)]),(0,o.Lk)("div",T,[(0,o.Lk)("button",{type:"button",class:"btn btn-sm btn-warning",onClick:t[3]||(t[3]=(0,i.D$)((...e)=>A.confirmUpdate&&A.confirmUpdate(...e),["prevent"]))},(0,l.v_)(e.$t("continue")),1),(0,o.Lk)("button",{type:"button",class:"btn btn-sm btn-light",onClick:t[4]||(t[4]=(0,i.D$)((...e)=>A.rejectUpdate&&A.rejectUpdate(...e),["prevent"]))},(0,l.v_)(e.$t("cancel")),1)])]),(0,o.Q3)(" /.modal-content ")]),(0,o.Q3)(" /.modal-dialog ")]),(0,o.Q3)(" /.modal "),t[8]||(t[8]=(0,o.Lk)("div",{id:"editorModal",class:"modal fade",tabindex:"-1",role:"dialog"},[(0,o.Lk)("div",{class:"modal-dialog modal-fullscreen",role:"document"},[(0,o.Lk)("div",{class:"modal-content"},[(0,o.Lk)("div",{id:"imageEditor",class:"h-100"})])])],-1))])}]]),N=(0,n.hU)({locale:"en",messages:{en:{not_allowed_extension:"Unfortunately the image cannot be edited",created_image:"Created Image",create_new_image:"Create a new image",replace_image:"Replace current image",are_you_sure:"Are You Sure?",edit_image:"Edit image",continue:"Yes, continue",cancel:"Cancel",original_image:"Original Image",new_image:"New Image",message:{cloned:'Image has been created, follow this <a href="{url}">link to view the new image</a>',cannot_be_undone:"This action will replace the current image, you can not undo this action"}},de:{not_allowed_extension:"Bild kann leider nicht bearbeitet werden",created_image:"Erstelltes Bild",create_new_image:"Ein neues Bild erstellen",replace_image:"Aktuelles Bild ersetzen",are_you_sure:"Sind Sie Sicher",edit_image:"Bild bearbeiten",continue:"Ja, weiter",cancel:"Abrechen",original_image:"Originalbild",new_image:"Neues Bild",message:{cloned:'Das Bild wurde erstellt, folgen Sie diesem <a href="{url}">Link, um das neue Bild anzusehen</a>.',cannot_be_undone:"Diese Aktion ersetzt das aktuelle Bild, Sie können diese Aktion nicht rückgängig machen."}}}});(0,i.Ef)(Q).use(N).mount("#image-editor")}},a={};function i(e){var n=a[e];if(void 0!==n)return n.exports;if(void 0===t[e]){var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}var l=a[e]={id:e,loaded:!1,exports:{}};return t[e](l,l.exports,i),l.loaded=!0,l.exports}i.m=t,e=[],i.O=(t,a,n,o)=>{if(!a){var l=1/0;for(c=0;c<e.length;c++){for(var[a,n,o]=e[c],s=!0,r=0;r<a.length;r++)(!1&o||l>=o)&&Object.keys(i.O).every(e=>i.O[e](a[r]))?a.splice(r--,1):(s=!1,o<l&&(l=o));if(s){e.splice(c--,1);var d=n();void 0!==d&&(t=d)}}return t}o=o||0;for(var c=e.length;c>0&&e[c-1][2]>o;c--)e[c]=e[c-1];e[c]=[a,n,o]},i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var a in t)i.o(t,a)&&!i.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e={977:0};i.O.j=t=>0===e[t];var t=(t,a)=>{var n,o,[l,s,r]=a,d=0;if(l.some(t=>0!==e[t])){for(n in s)i.o(s,n)&&(i.m[n]=s[n]);if(r)var c=r(i)}for(t&&t(a);d<l.length;d++)o=l[d],i.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return i.O(c)},a=self.webpackChunkinit_cms_bundle=self.webpackChunkinit_cms_bundle||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})(),i.nc=void 0;var n=i.O(void 0,[58,817],()=>i(8328));n=i.O(n)})();
//# sourceMappingURL=imageEditor.8d4fc98a.js.map