{"version":3,"file":"twoFactorSignin.11ed3022.js","mappings":"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","sources":["webpack://init-cms-bundle/./assets/cms/authentication/sign-in/two-factor.js"],"sourcesContent":["\"use strict\";\n\n// Class Definition\nlet KTSigninTwoFactor = function() {\n    // Elements\n    var form;\n    var submitButton;\n\n    const lang = localStorage.getItem(\"kt_auth_lang\")??document.getElementsByTagName('html')[0].getAttribute('lang');\n\n    const texts = {\n        'en': {\n            'login_success': 'You have been successfully verified!',\n            'login_error': 'Sorry, please enter valid securtiy code and try again.',\n            'ok': 'Ok, got it!'\n        },\n        'de': {\n            'login_success': 'Sie wurden erfolgreich verifiziert!',\n            'login_error': 'Entschuldigung, bitte geben Sie einen gültigen Sicherheitscode ein und versuchen Sie es erneut.',\n            'ok': 'Ok, verstanden!'\n        },\n        'fr': {\n            'login_success': 'Vous avez été vérifié avec succès !',\n            'login_error': 'Désolé, veuillez saisir un code de sécurité valide et réessayer.',\n            'ok': 'Ok, compris!'\n        },\n        'it': {\n            'login_success': 'Sei stato verificato con successo!',\n            'login_error': 'Spiacente, inserire un codice di sicurezza valido e riprovare.',\n            'ok': 'Ok, capito!'\n        },\n    }\n\n    let translate = function (text) {\n\n        switch (lang) {\n            case 'German':\n            case 'de':\n                return texts['de'][text];\n            case 'Italian':\n            case 'it':\n                return texts['it'][text];\n            case 'French':\n            case 'fr':\n                return texts['fr'][text];\n            default:\n                return texts['en'][text];\n\n        }\n    }\n\n    // Handle form\n    var handleForm = function(e) {        \n        // Handle form submit\n        submitButton.addEventListener('click', function (e) {\n            e.preventDefault();\n\n            let validated = true;\n\n            let inputs = [].slice.call(form.querySelectorAll('[data-inputmask]'));\n            inputs.map(function (input) {\n                if (input.value === '' || input.value.length === 0) {\n                    validated = false;\n                }\n            });\n\n            if (validated === true) {\n                // Show loading indication\n                submitButton.setAttribute('data-kt-indicator', 'on');\n\n                // Disable button to avoid multiple click \n                submitButton.disabled = true;\n\n                let code = inputs.reduce((acc, input) => acc + input.value, '')\n\n                axios.post('/admin', { _code: code }, {...axiosConfig}).then((response) => {\n                    submitButton.disabled = false;\n                    submitButton.removeAttribute('data-kt-indicator');\n                    Swal.fire({\n                        text: translate('login_success'),\n                        icon: \"success\",\n                        timer: 1000,\n                        showConfirmButton: false,\n                    }).then(function (result) {\n                       location.href = window.location.href;\n                    });\n                }).catch((error) => {\n                    submitButton.disabled = false;\n                    submitButton.removeAttribute('data-kt-indicator');\n                    inputs.forEach((input) => input.value = '')\n                    swal.fire({\n                        text: \"Please enter valid securtiy code and try again.\",\n                        icon: \"error\",\n                        buttonsStyling: false,\n                        confirmButtonText: \"Ok, got it!\",\n                        customClass: {\n                            confirmButton: \"btn fw-bold btn-light-primary\"\n                        }\n                    }).then(function() {\n                        KTUtil.scrollTop();\n                    });\n                })\n            } else {\n                swal.fire({\n                    text: translate('login_error'),\n                    icon: \"error\",\n                    buttonsStyling: false,\n                    confirmButtonText: translate('ok'),\n                    customClass: {\n                        confirmButton: \"btn fw-bold btn-light-primary\"\n                    }\n                }).then(function() {\n                    KTUtil.scrollTop();\n                });\n            }\n        });\n    }\n\n    var handleType = function() {\n        var input1 = form.querySelector(\"[name=code_1]\");\n        var input2 = form.querySelector(\"[name=code_2]\");\n        var input3 = form.querySelector(\"[name=code_3]\");\n        var input4 = form.querySelector(\"[name=code_4]\");\n        var input5 = form.querySelector(\"[name=code_5]\");\n        var input6 = form.querySelector(\"[name=code_6]\");\n\n        input1.focus();\n\n        input1.addEventListener(\"keyup\", function() {\n            if (this.value.length === 1) {\n                input2.focus();\n            }\n        });\n\n        input2.addEventListener(\"keyup\", function() {\n            if (this.value.length === 1) {\n                input3.focus();\n            }\n        });\n\n        input3.addEventListener(\"keyup\", function() {\n            if (this.value.length === 1) {\n                input4.focus();\n            }\n        });\n\n        input4.addEventListener(\"keyup\", function() {\n            if (this.value.length === 1) {\n                input5.focus();\n            }\n        });\n\n        input5.addEventListener(\"keyup\", function() {\n            if (this.value.length === 1) {\n                input6.focus();\n            }\n        });\n        \n        input6.addEventListener(\"keyup\", function() {\n            if (this.value.length === 1) {\n                input6.blur();\n            }\n        });\n\n        document.addEventListener(\"paste\", (event) => {\n            event.preventDefault();\n\n            let paste = (event.clipboardData || window.clipboardData).getData(\"text\");\n\n            let code = paste.split('').slice(0, 6);\n\n            code.forEach((value, index) => {\n                let input = form.querySelector(`[name=code_${index + 1}]`);\n                input.value = value;\n            })\n        })\n    }    \n\n    // Public functions\n    return {\n        // Initialization\n        init: function() {\n            form = document.querySelector('#kt_sing_in_two_factor_form');\n            submitButton = document.querySelector('#kt_sing_in_two_factor_submit');\n\n            handleForm();\n            handleType();\n        }\n    };\n}();\n\n// On document ready\nKTUtil.onDOMContentLoaded(function() {\n    KTSigninTwoFactor.init();\n});"],"names":["KTSigninTwoFactor","form","submitButton","lang","localStorage","getItem","document","getElementsByTagName","getAttribute","texts","translate","text","init","input1","input2","input3","input4","input5","input6","querySelector","addEventListener","e","preventDefault","validated","inputs","slice","call","querySelectorAll","map","input","value","length","setAttribute","disabled","code","reduce","acc","axios","post","_code","axiosConfig","then","response","removeAttribute","Swal","fire","icon","timer","showConfirmButton","result","location","href","window","catch","error","forEach","swal","buttonsStyling","confirmButtonText","customClass","confirmButton","KTUtil","scrollTop","focus","this","blur","event","clipboardData","getData","split","index","onDOMContentLoaded"],"sourceRoot":""}