(()=>{"use strict";const e=class{constructor(e,t){e&&(this.options={},this.element=e,void 0!==t&&(this.options=t),this.processing=!1,this.init())}init(){this.options=KTUtil.deepExtend({},{minLength:2,keypress:!0,enter:!0,layout:"menu",responsive:null,showOnFocus:!0},this.options),this.processing=!1,this.contentElement=this._getElement("content"),this.formElement=this._getElement("form"),this.inputElement=this._getElement("input"),this.spinnerElement=this._getElement("spinner"),this.clearElement=this._getElement("clear"),this.toggleElement=this._getElement("toggle"),this.submitElement=this._getElement("submit"),this.toolbarElement=this._getElement("toolbar"),this.resultsElement=this._getElement("results"),this.suggestionElement=this._getElement("suggestion"),this.emptyElement=this._getElement("empty"),this.element.setAttribute("data-kt-search","true"),this.layout=this._getOption("layout"),"menu"===this.layout?this.menuObject=new KTMenu(this.contentElement):this.menuObject=null,this._update(),this._handlers(),KTUtil.data(this.element).set("search",this)}_handlers=function(){this.inputElement.addEventListener("focus",this._focus.bind(this)),this.inputElement.addEventListener("blur",this._blur.bind(this)),!0===this._getOption("keypress")&&this.inputElement.addEventListener("input",this._input.bind(this)),this.submitElement&&this.submitElement.addEventListener("click",this._search.bind(this)),!0===this._getOption("enter")&&this.inputElement.addEventListener("keypress",this._enter.bind(this)),this.clearElement&&this.clearElement.addEventListener("click",this._clear.bind(this)),this.menuObject&&(this.toggleElement&&(this.toggleElement.addEventListener("click",this._show.bind(this)),this.menuObject.on("kt.menu.dropdown.show",(e=>{KTUtil.visible(this.toggleElement)&&(this.toggleElement.classList.add("active"),this.toggleElement.classList.add("show"))})),this.menuObject.on("kt.menu.dropdown.hide",(e=>{KTUtil.visible(this.toggleElement)&&(this.toggleElement.classList.remove("active"),this.toggleElement.classList.remove("show"))}))),this.menuObject.on("kt.menu.dropdown.shown",(()=>{this.inputElement.focus()}))),window.addEventListener("resize",(()=>{KTUtil.throttle(undefined,(()=>{this._update()}),200)}))};_focus(){this.element.classList.add("focus"),(!0===this._getOption("show-on-focus")||this.inputElement.value.length>=minLength)&&this._show()}_blur(){this.element.classList.remove("focus")}_enter(e){13==(e.charCode||e.keyCode||0)&&(e.preventDefault(),this._search())}_input(){if(this._getOption("min-length")){var e=parseInt(this._getOption("min-length"));this.inputElement.value.length>=e?(clearTimeout(this.timer),this.timer=setTimeout((()=>{this._search()}),1e3)):0===this.inputElement.value.length&&this._clear()}}_search(){!1===this.processing&&(this.spinnerElement&&this.spinnerElement.classList.remove("d-none"),this.clearElement&&this.clearElement.classList.add("d-none"),this.toolbarElement&&this.formElement.contains(this.toolbarElement)&&this.toolbarElement.classList.add("d-none"),this.inputElement.focus(),this.processing=!0,KTEventHandler.trigger(this.element,"kt.search.process",this))}_complete(){this.spinnerElement&&this.spinnerElement.classList.add("d-none"),this.clearElement&&this.clearElement.classList.remove("d-none"),0===this.inputElement.value.length&&this._clear(),this.inputElement.focus(),this._show(),this.processing=!1}_clear(){!1!==KTEventHandler.trigger(this.element,"kt.search.clear",this)&&(this.inputElement.value="",this.inputElement.focus(),this.clearElement&&this.clearElement.classList.add("d-none"),this.toolbarElement&&this.formElement.contains(this.toolbarElement)&&this.toolbarElement.classList.remove("d-none"),!1===this._getOption("show-on-focus")&&this._hide(),KTEventHandler.trigger(this.element,"kt.search.cleared",this))}_update(){if("menu"===this.layout){var e=this._getResponsiveFormMode();"on"===e&&!1===this.contentElement.contains(this.formElement)?(this.contentElement.prepend(this.formElement),this.formElement.classList.remove("d-none")):"off"===e&&!0===this.contentElement.contains(this.formElement)&&(this.element.prepend(this.formElement),this.formElement.classList.add("d-none"))}}_show(){this.menuObject&&(this._update(),this.menuObject.show(this.element))}_hide(){this.menuObject&&(this._update(),this.menuObject.hide(this.element))}_getOption(e){if(!0===this.element.hasAttribute("data-kt-search-"+e)){var t=this.element.getAttribute("data-kt-search-"+e),n=KTUtil.getResponsiveValue(t);return null!==n&&"true"===String(n)?n=!0:null!==n&&"false"===String(n)&&(n=!1),n}var s=KTUtil.snakeToCamel(e);return this.options[s]?KTUtil.getResponsiveValue(this.options[s]):null}_getElement(e){return this.element.querySelector('[data-kt-search-element="'+e+'"]')}_getResponsiveFormMode(){var e=this._getOption("responsive"),t=KTUtil.getViewPort().width;if(!e)return null;var n=KTUtil.getBreakpoint(e);return n||(n=parseInt(e)),t<n?"on":"off"}_destroy(){KTUtil.data(this.element).remove("search")}show(){return this._show()}hide(){return this._hide()}update(){return this._update()}search(){return this._search()}complete(){return this._complete()}clear(){return this._clear()}isProcessing(){return this.processing}getQuery(){return this.inputElement.value}getMenu(){return this.menuObject}getFormElement(){return this.formElement}getInputElement(){return this.inputElement}getContentElement(){return this.contentElement}getElement(){return this.element}destroy(){return this._destroy()}on(e,t){return KTEventHandler.on(this.element,e,t)}one(e,t){return KTEventHandler.one(this.element,e,t)}off(e,t){return KTEventHandler.off(this.element,e,t)}};var t,n,s,i,l=(i=function(e){axios.get("/admin/search",{...axiosConfig,params:{q:e.getQuery()}}).then((function(t){n.innerHTML=t.data,n.classList.remove("d-none"),s.classList.add("d-none"),e.complete()})).catch((function(t){n.classList.add("d-none"),s.classList.remove("d-none"),e.complete()}))},{init:function(){(t=document.querySelector("#kt_cms_search"))&&(t.querySelector('[data-kt-search-element="wrapper"]'),t.querySelector('[data-kt-search-element="form"]'),n=t.querySelector('[data-kt-search-element="results"]'),s=t.querySelector('[data-kt-search-element="empty"]'),new e(t).on("kt.search.process",i))}});KTUtil.onDOMContentLoaded((function(){l.init()}))})();
//# sourceMappingURL=globalSearch.6a6cc876.js.map