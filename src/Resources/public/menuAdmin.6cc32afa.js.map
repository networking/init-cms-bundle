{"version":3,"file":"menuAdmin.6cc32afa.js","mappings":"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","sources":["webpack://init-cms-bundle/webpack/runtime/chunk loaded","webpack://init-cms-bundle/./assets/cms/menu-admin.js","webpack://init-cms-bundle/webpack/bootstrap","webpack://init-cms-bundle/webpack/runtime/compat get default export","webpack://init-cms-bundle/webpack/runtime/define property getters","webpack://init-cms-bundle/webpack/runtime/hasOwnProperty shorthand","webpack://init-cms-bundle/webpack/runtime/make namespace object","webpack://init-cms-bundle/webpack/runtime/jsonp chunk loading","webpack://init-cms-bundle/webpack/startup"],"sourcesContent":["var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","import \"jstree\"\nimport \"bootstrap\"\n\nconst CMSMenuAdmin = (() => {\n\tconst showHideTree = (treeSwitch) => {\n\t\tconst treeId = treeSwitch.dataset.treeId\n\t\ttrees.find((tree) => {\n\t\t\tif (tree.attr(\"id\") === treeId) {\n\t\t\t\tif (localStorage.getItem(\"tree_\" + treeId) !== \"false\") {\n\t\t\t\t\treturn tree.jstree(true).open_all()\n\t\t\t\t}\n\t\t\t\treturn tree.jstree(true).close_all()\n\t\t\t}\n\t\t\treturn false\n\t\t})\n\t}\n\tconst updateMenuSort = (nodes, doReload) => {\n\t\tlet ret = []\n\t\tlet left = 2\n\n\t\tnodes.forEach((node) => {\n\t\t\tleft = flattenArray(node, 1, left, ret, node.data.rootId)\n\t\t})\n\n\t\tret = ret.sort((a, b) => a.left - b.left)\n\n\t\taxios.post(updateUrl, { nodes: ret }, axiosConfig).then((response) => {\n\t\t\tCMSAdmin.createInitCmsMessageBox(\"success\", response.data.message)\n\t\t\tmenuDialog.hide()\n\t\t\tif (doReload) {\n\t\t\t\treloadList()\n\t\t\t}\n\t\t})\n\t}\n\tconst postMenuLoad = () => {\n\t\tif (ready) {\n\t\t\treturn\n\t\t}\n\n\t\tdocument.querySelectorAll(\"[data-tree-id]\").forEach((item) => {\n\t\t\titem.checked =\n\t\t\t\tlocalStorage.getItem(`tree_${item.dataset.treeId}`) !== \"false\"\n\t\t\tshowHideTree(item)\n\t\t})\n\t\tready = true\n\t}\n\tconst setUpSortTree = () => {\n\t\t$(\"div.menu_tree\").each((_e, ui) => {\n\t\t\tconst tree = $(ui)\n\n\t\t\ttrees.push(tree)\n\n\t\t\tconst treeData = tree.data(\"tree\")\n\t\t\tconst plugins = [\"dnd\", \"types\", \"changed\"]\n\n\t\t\tif (tree.attr(\"id\") !== \"placement_menu\") {\n\t\t\t\tplugins.push(\"externalUrl\")\n\t\t\t\tplugins.push(\"delete\")\n\t\t\t}\n\t\t\ttree.jstree({\n\t\t\t\ttypes: {\n\t\t\t\t\tdefault: {\n\t\t\t\t\t\ticon: \"la la-file text-primary fs-2x\",\n\t\t\t\t\t},\n\t\t\t\t\tfile: {\n\t\t\t\t\t\ticon: \"la la-file text-primary fs-2x\",\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tplugins: plugins,\n\t\t\t\tcore: {\n\t\t\t\t\tthemes: {\n\t\t\t\t\t\tvariant: \"large\",\n\t\t\t\t\t},\n\n\t\t\t\t\tcheck_callback: true,\n\t\t\t\t\tdata: (_node, cb) => {\n\t\t\t\t\t\tcb(treeData)\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t})\n\n\t\t\tconst treeSwitch = document.querySelector(\n\t\t\t\t`[data-tree-id=\"${tree.attr(\"id\")}\"]`,\n\t\t\t)\n\n\t\t\ttree.on(\"move_node.jstree\", (_e, data) => {\n\t\t\t\tupdateMenuSort(\n\t\t\t\t\tdata.new_instance.get_json(),\n\t\t\t\t\t$(data.new_instance.element[0]).attr(\"id\") === \"placement_menu\",\n\t\t\t\t)\n\t\t\t})\n\n\t\t\tif (tree.attr(\"id\") !== \"placement_menu\") {\n\t\t\t\ttree.on(\"after_close.jstree\", () => {\n\t\t\t\t\ttreeSwitch.checked = false\n\t\t\t\t})\n\n\t\t\t\ttree.on(\"ready.jstree\", () => {\n\t\t\t\t\tpostMenuLoad()\n\t\t\t\t})\n\t\t\t}\n\t\t})\n\t}\n\tconst selectLastTab = (lastTab) => {\n\t\tif (!lastTab) {\n\t\t\treturn\n\t\t}\n\t\tconst tabTriggerEl = document.querySelector(`a[href=\"${lastTab}\"]`)\n\n\t\tif (!tabTriggerEl) {\n\t\t\treturn\n\t\t}\n\t\tconst tab = new bootstrap.Tab(tabTriggerEl)\n\n\t\ttab.show()\n\t}\n\tlet lastTab = localStorage.getItem(\"lastTab\")\n\tlet lastEdited\n\tlet menuDialog\n\tlet tabs\n\tlet listUrl\n\tlet updateUrl\n\tlet ready = false\n\tconst trees = []\n\n\tconst reloadList = () => {\n\t\taxios\n\t\t\t.get(tabs.dataset.listUrl, {\n\t\t\t\tlocale: document.querySelector(\"#filter_locale_value\").value,\n\t\t\t\t...axiosConfig,\n\t\t\t})\n\t\t\t.then((response) => {\n\t\t\t\ttabs.innerHTML = response.data.html\n\n\t\t\t\tif (Object.hasOwn(response.data, \"last_edited\") > -1) {\n\t\t\t\t\tsetLastEdited(response.data.last_edited)\n\t\t\t\t}\n\t\t\t\tready = false\n\t\t\t\tsetUpSortTree()\n\t\t\t\tselectLastTab(lastTab)\n\t\t\t})\n\t}\n\n\tconst setLastTab = (tab) => {\n\t\tlastTab = tab\n\t\tlocalStorage.setItem(\"lastTab\", lastTab)\n\t}\n\n\tconst initializeDialog = () => {\n\t\tif (!menuDialog) {\n\t\t\tmenuDialog = new bootstrap.Modal(document.querySelector(\"#menu_dialog\"), {\n\t\t\t\theight: \"auto\",\n\t\t\t\twidth: 650,\n\t\t\t\tshow: false,\n\t\t\t})\n\t\t}\n\t}\n\n\tconst createAjaxDialog = (event) => {\n\t\tevent.preventDefault()\n\n\t\tlet link = event.target\n\n\t\tif (!link.getAttribute(\"href\")) {\n\t\t\tlink = link.closest(\"a\")\n\t\t}\n\n\t\tconst locale = document.querySelector(\"#filter_locale_value\").value\n\t\taxios\n\t\t\t.get(link.getAttribute(\"href\"), { locale: locale, ...axiosConfig })\n\t\t\t.then((response) => {\n\t\t\t\tdocument\n\t\t\t\t\t.querySelector(\"#menu_dialog\")\n\t\t\t\t\t.querySelector(\".modal-content\").innerHTML = response.data\n\t\t\t\tmenuDialog.show()\n\t\t\t\tCMSAdmin.createSelect2()\n\t\t\t})\n\t}\n\n\tconst submitAjaxForm = (event) => {\n\t\tevent.preventDefault()\n\t\tevent.stopPropagation()\n\n\t\tconst form = event.target\n\n\t\tform.elements.forEach((item) => {\n\t\t\titem.classList.remove(\"is-invalid\")\n\t\t})\n\t\t// form.classList.add('was-validated')\n\t\taxios\n\t\t\t.post(form.action, new FormData(form), axiosConfig)\n\t\t\t.then((response) => {\n\t\t\t\tvar data = response.data\n\t\t\t\tif (data.result === \"ok\") {\n\t\t\t\t\tif (data.is_new_menu_item && data.html) {\n\t\t\t\t\t\tdocument\n\t\t\t\t\t\t\t.querySelector(\"#menu_dialog\")\n\t\t\t\t\t\t\t.querySelector(\".modal-content\").innerHTML = data.html\n\t\t\t\t\t} else {\n\t\t\t\t\t\tmenuDialog.hide()\n\t\t\t\t\t\tCMSAdmin.createInitCmsMessageBox(data.status, data.message)\n\t\t\t\t\t}\n\t\t\t\t\treloadList()\n\t\t\t\t}\n\n\t\t\t\tif (data.result === \"reload\") {\n\t\t\t\t\twindow.location.reload()\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch((error) => {\n\t\t\t\tvar data = error.response.data\n\n\t\t\t\tif (typeof data !== \"object\") {\n\t\t\t\t\tmenuDialog.html(data)\n\t\t\t\t}\n\n\t\t\t\tdata.violations.forEach((item) => {\n\t\t\t\t\tconst path = item.propertyPath\n\t\t\t\t\tconst message = item.title\n\t\t\t\t\tlet field = form.querySelector(`[name=\"${path}\"]`)\n\n\t\t\t\t\tfield.setAttribute(\"required\", \"required\")\n\n\t\t\t\t\tif (\n\t\t\t\t\t\tfield.nextElementSibling?.classList.contains(\"select2-container\")\n\t\t\t\t\t) {\n\t\t\t\t\t\tfield = field.nextElementSibling\n\t\t\t\t\t}\n\n\t\t\t\t\tfield.classList.add(\"is-invalid\")\n\n\t\t\t\t\tif (\n\t\t\t\t\t\tfield.nextElementSibling?.classList.contains(\"invalid-feedback\")\n\t\t\t\t\t) {\n\t\t\t\t\t\tfield.nextElementSibling.innerHtml = message\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\t\t\t\t\tfield.insertAdjacentHTML(\n\t\t\t\t\t\t\"afterend\",\n\t\t\t\t\t\t`<div class=\"invalid-feedback\">${message}</div>`,\n\t\t\t\t\t)\n\t\t\t\t})\n\t\t\t})\n\t}\n\n\tvar setLastEdited = (id) => {\n\t\tlastEdited = id\n\t}\n\n\tconst flattenArray = (item, depth, left, ret, pid) => {\n\t\tlet right = left + 1,\n\t\t\tid = item.data.id\n\n\t\tif (item.children.length > 0) {\n\t\t\tdepth++\n\t\t\titem.children.forEach((node) => {\n\t\t\t\tright = flattenArray(node, depth, right, ret, id)\n\t\t\t})\n\t\t\tdepth--\n\t\t}\n\n\t\tif (id) {\n\t\t\tret.push({\n\t\t\t\tname: item.text,\n\t\t\t\titem_id: id,\n\t\t\t\tparent_id: pid,\n\t\t\t\tdepth: depth,\n\t\t\t\tleft: left,\n\t\t\t\tright: right,\n\t\t\t})\n\t\t}\n\n\t\tleft = right + 1\n\t\treturn left\n\t}\n\n\tconst handleShowHideTree = (event) => {\n\t\tconst treeSwitch = event.target\n\t\tconst treeId = treeSwitch.dataset.treeId\n\t\tlocalStorage.setItem(`tree_${treeId}`, treeSwitch.checked)\n\t\tshowHideTree(treeSwitch)\n\t}\n\n\tconst initMenu = () => {\n\t\ttabs = document.querySelector(\"#menuTabs\")\n\n\t\tlastTab = localStorage.getItem(\"lastTab\")\n\t\tlastEdited = tabs.dataset.lastEdited\n\t\tlistUrl = tabs.dataset.listUrl\n\t\tupdateUrl = tabs.dataset.updateUrl\n\n\t\tdocument.querySelectorAll(\"[data-tree-id]\").forEach((item) => {\n\t\t\titem.checked =\n\t\t\t\tlocalStorage.getItem(`tree_${item.dataset.treeId}`) !== \"false\"\n\t\t})\n\t\tsetUpSortTree()\n\t\tKTUtil.on(\n\t\t\tdocument.querySelector(\"#menuTabs\"),\n\t\t\t\".menu-dialog-link\",\n\t\t\t\"click\",\n\t\t\tcreateAjaxDialog,\n\t\t)\n\t\tKTUtil.on(\n\t\t\tdocument.querySelector(\"#menu_dialog\"),\n\t\t\t\"form\",\n\t\t\t\"submit\",\n\t\t\tsubmitAjaxForm,\n\t\t)\n\t\tKTUtil.on(\n\t\t\tdocument.querySelector(\"#menuTabs\"),\n\t\t\t\".tree-show-all\",\n\t\t\t\"click\",\n\t\t\thandleShowHideTree,\n\t\t)\n\n\t\tdocument.body.addEventListener(\"shown.bs.tab\", (e) => {\n\t\t\tsetLastTab($(e.target).attr(\"href\"))\n\t\t})\n\n\t\tsetTimeout(() => {\n\t\t\tif (lastEdited) {\n\t\t\t\tconst lastEditedNode = document.querySelector(\n\t\t\t\t\t`#menu-item-${lastEdited}`,\n\t\t\t\t)\n\t\t\t\tlastTab = `#menu_${lastEditedNode.dataset.rootId}`\n\t\t\t\tsetLastTab(lastTab)\n\t\t\t}\n\n\t\t\tselectLastTab(lastTab)\n\t\t}, 500)\n\t}\n\n\treturn {\n\t\tinit: () => {\n\t\t\tinitMenu()\n\t\t\tinitializeDialog()\n\t\t},\n\t\treload: () => {\n\t\t\treloadList()\n\t\t},\n\t}\n})()\n\n;(($) => {\n\tconst externalUrl = document.createElement(\"a\")\n\texternalUrl.className = \"external-url float-end\"\n\t$.jstree.defaults.externalUrl = $.noop\n\t$.jstree.plugins.externalUrl = function (_options, parent) {\n\t\tthis.teardown = function () {\n\t\t\tif (this.settings.externalUrl) {\n\t\t\t\tthis.element.find(\".external-url\").remove()\n\t\t\t}\n\t\t\tparent.teardown.call(this)\n\t\t}\n\t\tthis.redraw_node = function (obj, deep, callback, force_draw) {\n\t\t\tobj = parent.redraw_node.call(this, obj, deep, callback, force_draw)\n\t\t\tvar node = this.get_node(obj)\n\t\t\tvar tmp = externalUrl.cloneNode(true)\n\t\t\ttmp.href = node.data.externalUrl\n\t\t\ttmp.innerHTML = node.data.path\n\t\t\tobj.insertBefore(tmp, obj.childNodes[2])\n\t\t\treturn obj\n\t\t}\n\t}\n\n\tconst link = document.createElement(\"a\")\n\tlink.className = \"delete-tag menu-dialog-link float-end \"\n\tlink.innerHTML = '<i class=\"la la-trash fs-2 mx-3\"></i>'\n\n\t$.jstree.defaults.delete = $.noop\n\t$.jstree.plugins.delete = function (_options, parent) {\n\t\tthis.teardown = function () {\n\t\t\tif (this.settings.delete) {\n\t\t\t\tthis.element.find(\".delete-tag\").remove()\n\t\t\t}\n\t\t\tparent.teardown.call(this)\n\t\t}\n\t\tthis.redraw_node = function (obj, deep, callback, force_draw) {\n\t\t\tobj = parent.redraw_node.call(this, obj, deep, callback, force_draw)\n\n\t\t\tvar tmp = link.cloneNode(true)\n\t\t\tvar node = this.get_node(obj)\n\t\t\ttmp.href = node.data.deleteUrl\n\t\t\tobj.insertBefore(tmp, obj.childNodes[2])\n\t\t\treturn obj\n\t\t}\n\t}\n})($)\n\n// On document ready\nKTUtil.onDOMContentLoaded(() => {\n\tCMSMenuAdmin.init()\n})\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Check if module exists (development only)\n\tif (__webpack_modules__[moduleId] === undefined) {\n\t\tvar e = new Error(\"Cannot find module '\" + moduleId + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t707: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkinit_cms_bundle\"] = self[\"webpackChunkinit_cms_bundle\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [460,692,58,603], () => (__webpack_require__(8236)))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["deferred","CMSMenuAdmin","showHideTree","treeSwitch","treeId","dataset","trees","find","tree","attr","localStorage","getItem","jstree","open_all","close_all","setUpSortTree","$","each","_e","ui","push","treeData","data","plugins","types","default","icon","file","core","themes","variant","check_callback","_node","cb","document","querySelector","on","nodes","doReload","ret","left","forEach","node","flattenArray","rootId","sort","a","b","axios","post","updateUrl","axiosConfig","then","response","CMSAdmin","createInitCmsMessageBox","message","menuDialog","hide","reloadList","updateMenuSort","new_instance","get_json","element","checked","ready","querySelectorAll","item","selectLastTab","lastTab","tabTriggerEl","bootstrap","Tab","show","lastEdited","tabs","listUrl","get","locale","value","innerHTML","html","Object","hasOwn","setLastEdited","last_edited","setLastTab","tab","setItem","createAjaxDialog","event","preventDefault","link","target","getAttribute","closest","createSelect2","submitAjaxForm","stopPropagation","form","elements","classList","remove","action","FormData","result","is_new_menu_item","status","window","location","reload","catch","error","violations","path","propertyPath","title","field","setAttribute","nextElementSibling","contains","add","innerHtml","insertAdjacentHTML","id","depth","pid","right","children","length","name","text","item_id","parent_id","handleShowHideTree","init","KTUtil","body","addEventListener","e","setTimeout","lastEditedNode","Modal","height","width","externalUrl","createElement","className","defaults","noop","_options","parent","this","teardown","settings","call","redraw_node","obj","deep","callback","force_draw","get_node","tmp","cloneNode","href","insertBefore","childNodes","delete","deleteUrl","onDOMContentLoaded","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","__webpack_modules__","Error","code","module","m","O","chunkIds","fn","priority","notFulfilled","Infinity","i","fulfilled","j","keys","every","key","splice","r","n","getter","__esModule","d","definition","o","defineProperty","enumerable","prop","prototype","hasOwnProperty","Symbol","toStringTag","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","self","bind","__webpack_exports__"],"sourceRoot":""}