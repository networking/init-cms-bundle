{"version":3,"file":"imageEditor.37858d47.css","mappings":";;;AACA,gBACI,iBACJ,CAEA,OAII,0BAA2B,CAF3B,aAAc,CADd,SAIJ,CAEA,eAJI,mBAaJ,CATA,QAKI,QAAS,CAHT,SAAU,CACV,iBAAkB,CAKlB,iBAAkB,CAJlB,OAAQ,CAER,8BAAgC,CAChC,kCAEJ,CAEA,6BACI,UACJ,CAEA,8BACI,SACJ,C","sources":["webpack://init-cms-bundle/./assets/js/components/Editor.vue"],"sourcesContent":["<style>\n.imageContainer {\n    position: relative;\n}\n\n.image {\n    opacity: 1;\n    display: block;\n    transition: .5s ease;\n    backface-visibility: hidden;\n}\n\n.middle {\n    transition: .5s ease;\n    opacity: 0;\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    -ms-transform: translate(-50%, -50%);\n    text-align: center;\n}\n\n.imageContainer:hover .image {\n    opacity: 0.3;\n}\n\n.imageContainer:hover .middle {\n    opacity: 1;\n}\n</style>\n<template>\n    <div class=\"imageEditorApp\">\n        <div class=\"imageContainer\">\n<!--            <img :src=\"imageURL\" class=\"img-responsive image\" @contextmenu.prevent=\"$refs.menu.open\">-->\n            <img :src=\"imageURL\" class=\"img-fluid center-block image\">\n            <div class=\"middle\">\n                <div class=\"text\"><a href=\"\" class=\"btn btn-default\" @click.prevent=\"editImage\"><i class=\"fa fa-magic fa-small\"></i> {{ $t('edit_image')}}</a></div>\n            </div>\n        </div>\n        <br>\n        <div class=\"alert \" :class=\"[alertType === 'error'?'alert-danger':'alert-success']\" v-if=\"alert\" role=\"alert\" v-html=\"alertMessage\"></div>\n        <br>\n        <div id=\"imageModal\" class=\"modal fade\" tabindex=\"-1\" role=\"dialog\">\n            <div class=\"modal-dialog  modal-full\" role=\"document\">\n                <div class=\"modal-content\">\n                    <div class=\"modal-header\">\n\n                        <h4 class=\"modal-title\">{{ $t('created_image') }}</h4>\n\n                        <!--begin::Close-->\n                        <div class=\"btn btn-icon btn-sm btn-active-light-primary ms-2\" data-bs-dismiss=\"modal\" aria-label=\"Close\">\n                            <i class=\"ki-outline ki-cross fs-1\"></i>\n                        </div>\n                    </div>\n                    <div class=\"modal-body align-center\">\n                        <div class=\"row\">\n                            <div class=\"col-md-6 align-center\">\n                                <h3>{{ $t('original_image') }}</h3>\n                                <p><img :src=\"imageURL\" class=\"img-fluid center-block\"/></p></div>\n                            <div class=\"col-md-6 align-center\">\n                                <h3>{{ $t('new_image') }}</h3>\n                                <p><img :src=\"newImage\" class=\"img-fluid center-block\"/></p></div>\n                        </div>\n                    </div>\n                    <div class=\"modal-footer\">\n                        <button type=\"button\" class=\"btn btn-sm btn-light\" data-dismiss=\"modal\">{{ $t('cancel') }}</button>\n                        <button type=\"button\" class=\"btn btn-sm btn-warning\" @click.prevent=\"updateImage\">{{ $t('replace_image') }}</button>\n                        <button type=\"button\" class=\"btn btn-sm btn-primary\" @click.prevent=\"cloneImage\">{{ $t('create_new_image') }}</button>\n                    </div>\n                </div><!-- /.modal-content -->\n            </div><!-- /.modal-dialog -->\n        </div><!-- /.modal -->\n        <div id=\"confirmModal\" class=\"modal fade\" tabindex=\"-1\" role=\"dialog\">\n        <div class=\"modal-dialog\" role=\"document\">\n            <div class=\"modal-content\">\n                <div class=\"modal-header\">\n                    <h4 class=\"modal-title\">{{ $t('are_you_sure') }}</h4>\n                    <!--begin::Close-->\n                    <div class=\"btn btn-icon btn-sm btn-active-light-primary ms-2\" data-bs-dismiss=\"modal\" aria-label=\"Close\">\n                        <i class=\"ki-outline ki-cross fs-1\"></i>\n                    </div>\n                </div>\n                <div class=\"modal-body\">\n                    <p>\n                        {{ $t('message.cannot_be_undone') }}\n                        </p>\n                </div>\n                <div class=\"modal-footer\">\n                    <button type=\"button\" class=\"btn btn-sm btn-warning\" @click.prevent=\"confirmUpdate\">{{ $t('continue') }}</button>\n                    <button type=\"button\" class=\"btn btn-sm btn-light\" @click.prevent=\"rejectUpdate\">{{ $t('cancel') }}</button>\n                </div>\n            </div><!-- /.modal-content -->\n        </div><!-- /.modal-dialog -->\n    </div><!-- /.modal -->\n    </div>\n</template>\n<script>\n    import axios from 'axios';\n    import FilerobotImageEditor from './imageEditor';\n\n    const ALLOWED_FILE_EXTENTIONS = ['gif', 'jpg', 'jpeg', 'png'];\n    const LANGUAGES = ['de', 'en'];\n    let imageContainer = document.getElementById('image-container');\n    let axiosConfig = {headers: {'X-Requested-With': 'XMLHttpRequest'}};\n    let langauge = imageContainer.getAttribute('data-lang');\n    if(!LANGUAGES.includes(langauge)){\n        langauge = 'en';\n    }\n\n    export default {\n        name: 'Editor',\n        mounted() {\n            let config = {\n                colorScheme: 'light',\n                tools: ['adjust', 'effects', 'filters', 'rotate','crop','resize'],\n                language: langauge,\n                translations: {\n                    en: {\n                        'toolbar.download': 'Save',\n                    },\n                    de: {\n                        \"header.image_editor_title\": \"Bild bearbiten\",\n                        \"toolbar.download\": \"Speichern\",\n                        \"toolbar.save\": \"Speichern\",\n                        \"toolbar.apply\": \"Anwenden\",\n                        \"toolbar.cancel\": \"Abbrechen\",\n                        \"toolbar.go_back\": \"Zurück\",\n                        \"toolbar.adjust\": \"Anpassen\",\n                        \"toolbar.effects\": \"Effekte\",\n                        \"toolbar.filters\": \"Filter\",\n                        \"toolbar.orientation\": \"Orientierung\",\n                        \"toolbar.crop\": \"Zuschneiden\",\n                        \"toolbar.resize\": \"Größe ändern\",\n                        \"toolbar.watermark\": \"Wasserzeichen\",\n                        \"adjust.brightness\": \"Helligkeit\",\n                        \"adjust.contrast\": \"Kontrast\",\n                        \"adjust.exposure\": \"Belichtung\",\n                        \"adjust.saturation\": \"Farbsättigung\",\n                        \"orientation.rotate_l\": \"Nach links drehen\",\n                        \"orientation.rotate_r\": \"Nach rechts drehen\",\n                        \"orientation.flip_h\": \"Horizontal spiegeln\",\n                        \"orientation.flip_v\": \"Vertikal spiegeln\",\n                        \"pre_resize.title\": \"Möchten Sie die Auflösung reduzieren, bevor Sie das Bild bearbeiten?\",\n                        \"pre_resize.keep_original_resolution\": \"Originalauflösung beibehalten\",\n                        \"pre_resize.resize_n_continue\": \"Größe ändern & fortsetzen\",\n                        \"footer.reset\": \"Zurücksetzen\",\n                        \"footer.undo\": \"Rückgängig machen\",\n                        \"footer.redo\": \"Wiederholen\",\n                        \"spinner.label\": \"Verarbeitung...\",\n                        \"warning.too_big_resolution\": \"Die Auflösung des Bildes ist zu groß für das Web. Es kann zu Problemen mit der Leistung des Bildbearbeitungsprogramms führen.\",\n                        \"common.width\": \"breite\",\n                        \"common.height\": \"höhe\",\n                        \"common.custom\": \"benutzerdefiniert\",\n                        \"common.original\": \"Original\",\n                        \"common.square\": \"quadratisch\",\n                        \"common.opacity\": \"Opazität\",\n                        \"common.apply_watermark\": \"Wasserzeichen anwenden\"\n\n                    }\n                }\n            }\n            this.imageEditor = new FilerobotImageEditor(config, this.download);\n            this.imageURL = imageContainer.getAttribute('data-image-src');\n            this.id = imageContainer.getAttribute('data-image-id');\n            this.context = imageContainer.getAttribute('data-image-context');\n            this.provider = imageContainer.getAttribute('data-image-provider');\n            this.fileExtension = this.imageURL.slice((this.imageURL.lastIndexOf(\".\") - 1 >>> 0) + 2);\n\n            this.imageModal = new bootstrap.Modal(document.getElementById('imageModal'), {\n                keyboard: false\n            })\n\n            this.confirmModal = new bootstrap.Modal(document.getElementById('confirmModal'), {\n                keyboard: false\n            })\n        },\n        data() {\n            this.$i18n.locale = langauge;\n            return {\n                locale: 'en',\n                imageURL: '',\n                id: '',\n                context: '',\n                provider: '',\n                imageEditor: '',\n                newImage: '',\n                alert: false,\n                alertMessage: false,\n                alertType: false,\n                fileExtension: '',\n                imageModal: {},\n                confirmModal: {}\n            }\n        },\n        watch: {\n            locale (val) {\n                this.$i18n.locale = val\n            }\n        },\n        methods: {\n            editImage(){\n                this.alertMessage = false;\n                if(!ALLOWED_FILE_EXTENTIONS.includes(this.fileExtension)){\n                    this.alert = true;\n                    this.alertType = 'error';\n                    this.alertMessage = this.$i18n.t('not_allowed_extension');\n                    return;\n                }\n\n                this.alert = false;\n                this.alertType = false;\n                this.alertMessage = false;\n                this.imageEditor.open(this.imageURL);\n            },\n            download({ status,  imageName, imageMime, canvas }){\n                this.newImage = canvas.toDataURL();\n                this.alert = false;\n                this.alertType = false;\n                this.alertMessage = false;\n                this.imageModal.show()\n                return false;\n            },\n            cloneImage(){\n                this.imageModal.hide()\n                axios\n                    .post('/admin/cms/media/clone', {\n                        'id': this.id,\n                        'clone': true,\n                        'provider': this.provider,\n                        'context': this.context,\n                        'file': this.newImage\n                    }, axiosConfig).\n                then(response => {\n                    this.alert = true;\n\n                    if(response.data.success){\n                        this.alertMessage = this.$t('message.cloned', {'url': response.data.url});\n                        this.alertType = 'success';\n                    }else{\n                        this.alertMessage = response.data.error;\n                        this.alertType = 'error';\n                    }\n                }).catch(function (error) {\n                    console.log(error);\n                });\n            },\n            updateImage(){\n\n                this.imageModal.hide()\n                this.confirmModal.show()\n            },\n            rejectUpdate(){\n\n                this.imageModal.show()\n                this.confirmModal.hide()\n            },\n            confirmUpdate(){\n                this.confirmModal.hide()\n\n                axios\n                    .post('/admin/cms/media/clone', {\n                        'id': this.id,\n                        'clone': false,\n                        'provider': this.provider,\n                        'context': this.context,\n                        'file': this.newImage\n                    }, axiosConfig).\n                then(response => {\n                    if(response.data.success){\n                        window.location.href = response.data.url;\n                    }else{\n                        this.alert = true;\n                        this.alertMessage = response.data.error;\n                        this.alertType = 'error';\n                    }\n                }).catch(function (error) {\n                    console.log(error);\n                });\n            }\n        }\n    };\n</script>\n"],"names":[],"sourceRoot":""}