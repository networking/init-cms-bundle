{"version":3,"file":"menuAdmin.d2be19c6.js","mappings":"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","sources":["webpack://init-cms-bundle/webpack/runtime/chunk loaded","webpack://init-cms-bundle/./assets/cms/menu-admin.js","webpack://init-cms-bundle/webpack/bootstrap","webpack://init-cms-bundle/webpack/runtime/compat get default export","webpack://init-cms-bundle/webpack/runtime/define property getters","webpack://init-cms-bundle/webpack/runtime/hasOwnProperty shorthand","webpack://init-cms-bundle/webpack/runtime/make namespace object","webpack://init-cms-bundle/webpack/runtime/jsonp chunk loading","webpack://init-cms-bundle/webpack/startup"],"sourcesContent":["var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","import 'jstree'\nimport 'bootstrap'\n\n\nvar CMSMenuAdmin = function () {\n\n    let lastTab = localStorage.getItem('lastTab');\n    let lastEdited;\n    let menuDialog;\n    let tabs;\n    let listUrl;\n    let updateUrl;\n    let ready = false;\n    let trees = [];\n\n    var reloadList = () => {\n        axios.get(tabs.dataset.listUrl, {'locale': document.querySelector('#filter_locale_value').value, ...axiosConfig}\n        ).then(function (response) {\n            tabs.innerHTML = response.data.html;\n\n            if(response.data.hasOwnProperty('last_edited') > -1) {\n                setLastEdited(response.data.last_edited)\n            }\n            ready = false;\n            setUpSortTree();\n            selectLastTab(lastTab)\n        })\n    }\n\n    var selectLastTab = (lastTab) => {\n        if(!lastTab) {\n            return;\n        }\n        let tabTriggerEl = document.querySelector('a[href=\"' + lastTab + '\"]')\n\n        if(!tabTriggerEl) {\n            return;\n        }\n        var tab = new bootstrap.Tab(tabTriggerEl)\n\n        tab.show()\n    }\n\n    var setLastTab = (tab) => {\n        lastTab = tab;\n        localStorage.setItem('lastTab', lastTab);\n    }\n\n    var initializeDialog = () => {\n        if (!menuDialog) {\n            menuDialog = new bootstrap.Modal(document.querySelector('#menu_dialog'), {height:'auto', width:650, show: false})\n        }\n    }\n\n    var createAjaxDialog = (event)=> {\n        event.preventDefault();\n\n        let link = event.target;\n\n        if(!link.getAttribute('href')) {\n            link = link.closest('a');\n        }\n\n\n        let locale = document.querySelector('#filter_locale_value').value\n        axios.get(\n            link.getAttribute('href'),\n            {'locale': locale, ...axiosConfig}\n        ).then(function (response) {\n            document.querySelector('#menu_dialog').querySelector('.modal-content').innerHTML = response.data;\n            menuDialog.show();\n            CMSAdmin.createSelect2();\n        })\n    }\n\n\n    var submitAjaxForm = (event) => {\n        event.preventDefault();\n        event.stopPropagation();\n\n        let form = event.target;\n\n        form.elements.forEach((item) => {\n            item.classList.remove('is-invalid')\n        })\n        // form.classList.add('was-validated')\n        axios.post(form.action, new FormData(form), axiosConfig)\n            .then(function (response) {\n                var data = response.data;\n                if (data.result == 'ok') {\n\n                    if (data.is_new_menu_item && data.html) {\n                        document.querySelector('#menu_dialog').querySelector('.modal-content').innerHTML = data.html;\n                    } else {\n                        menuDialog.hide();\n                        CMSAdmin.createInitCmsMessageBox(data.status, data.message);\n                    }\n                    reloadList();\n                }\n\n                if(data.result === 'reload'){\n                    window.location.reload();\n                }\n\n            })\n            .catch(function (error) {\n                var data = error.response.data;\n\n                if (typeof data !== 'object') {\n                    menuDialog.html(data);\n                }\n\n                data.violations.forEach((item) => {\n                    let path = item.propertyPath\n                    let message = item.title\n                    let field = form.querySelector('[name=\"' + path + '\"]')\n                    field.classList.add('is-invalid')\n                    field.setAttribute('required', 'required')\n\n                    if(field.nextElementSibling && field.nextElementSibling.classList.contains('invalid-feedback')){\n                        field.nextElementSibling.innerHtml = message;\n                        return\n                    }\n                    field.insertAdjacentHTML('afterend', '<div class=\"invalid-feedback\">' + message + '</div>')\n                })\n            })\n    }\n\n    var setUpSortTree = () => {\n        $('div.menu_tree').each(function (e, ui) {\n            let tree = $(ui);\n\n            trees.push(tree)\n\n            let treeData = tree.data('tree');\n            let plugins = ['dnd', 'types','changed'];\n\n            if (tree.attr('id') !== 'placement_menu') {\n                plugins.push('externalUrl');\n                plugins.push('delete');\n            }\n            tree.jstree({\n                \"types\": {\n                    \"default\": {\n                        \"icon\": \"la la-file text-primary fs-2x\"\n                    },\n                    \"file\": {\n                        \"icon\": \"la la-file text-primary fs-2x\"\n                    }\n                },\n                \"plugins\": plugins,\n                'core': {\n                    \"themes\": {\n                        \"variant\": \"large\",\n                    },\n\n                    \"check_callback\": true,\n                    data: function (node, cb) {\n                        cb(treeData)\n                    }\n                }\n            });\n\n            let treeSwitch = document.querySelector('[data-tree-id=\"' + tree.attr('id') + '\"]')\n\n            tree.on(\"move_node.jstree\", function (e, data) {\n                updateMenuSort(data.new_instance.get_json(), ($(data.new_instance.element[0]).attr('id') === 'placement_menu'))\n            });\n\n            if (tree.attr('id') !== 'placement_menu') {\n                tree.on('after_close.jstree', function (e, data) {\n                    treeSwitch.checked = false\n                })\n\n\n                tree.on('ready.jstree', function () {\n                    postMenuLoad();\n                });\n            }\n        });\n    }\n\n\n    var postMenuLoad = () => {\n\n        if(ready) return;\n\n        document.querySelectorAll('[data-tree-id]').forEach(function (item) {\n            item.checked = localStorage.getItem('tree_' + item.dataset.treeId) !== 'false'\n            showHideTree(item)\n        })\n        ready = true\n    }\n\n    var setLastEdited = (id) => {\n        lastEdited = id;\n    }\n\n    var flattenArray = (item, depth, left, ret, pid) => {\n        var right = left + 1,\n            id = item.data.id,\n            pid;\n\n\n        if (item.children.length > 0) {\n            depth++;\n            item.children.forEach(function (node) {\n                right = flattenArray(node, depth, right, ret, id);\n            });\n            depth--;\n        }\n\n        if (id) {\n            ret.push({\n                \"name\": item.text,\n                \"item_id\": id,\n                \"parent_id\": pid,\n                \"depth\": depth,\n                \"left\": left,\n                \"right\": right\n            });\n        }\n\n        left = right + 1;\n        return left;\n    }\n\n    var updateMenuSort = (nodes, doReload) => {\n        var ret = [];\n        var left = 2;\n\n\n\n        nodes.forEach(function (node) {\n            left = flattenArray(node, 1, left, ret, node.data.rootId);\n        })\n\n        ret = ret.sort(function (a, b) {\n            return (a.left - b.left);\n        });\n\n        axios.post(updateUrl, {\"nodes\": ret}, axiosConfig)\n            .then(function (response) {\n                CMSAdmin.createInitCmsMessageBox('success', response.data.message);\n                menuDialog.hide();\n                if (doReload) {\n                    reloadList()\n                }\n            })\n    }\n\n    var handleShowHideTree = (event) => {\n        let treeSwitch = event.target;\n        let treeId = treeSwitch.dataset.treeId;\n        localStorage.setItem('tree_' + treeId, treeSwitch.checked)\n        showHideTree(treeSwitch)\n    }\n\n    var showHideTree = (treeSwitch) => {\n        let treeId = treeSwitch.dataset.treeId;\n        trees.find((tree) => {\n            if(tree.attr('id') === treeId) {\n                if(localStorage.getItem('tree_' + treeId) !== 'false') {\n                    return tree.jstree(true).open_all()\n                }\n                return tree.jstree(true).close_all()\n            }\n        })\n\n    }\n\n    var initMenu = () => {\n        tabs = document.querySelector('#menuTabs')\n\n        lastTab = localStorage.getItem('lastTab');\n        lastEdited = tabs.dataset.lastEdited;\n        listUrl = tabs.dataset.listUrl\n        updateUrl = tabs.dataset.updateUrl\n\n        document.querySelectorAll('[data-tree-id]').forEach(function (item) {\n            item.checked = localStorage.getItem('tree_' + item.dataset.treeId) !== 'false'\n        })\n        setUpSortTree();\n        KTUtil.on(document.querySelector('#menuTabs'), '.menu-dialog-link', 'click', createAjaxDialog);\n        KTUtil.on(document.querySelector('#menu_dialog'), 'form', 'submit', submitAjaxForm);\n        KTUtil.on(document.querySelector('#menuTabs'), '.tree-show-all', 'click', handleShowHideTree);\n\n        document.body.addEventListener('shown.bs.tab',  (e) => {\n            setLastTab($(e.target).attr('href'));\n        });\n\n        setTimeout( () => {\n            if (lastEdited) {\n                let lastEditedNode = document.querySelector('#menu-item-' + lastEdited);\n                lastTab = '#menu_' + lastEditedNode.dataset.rootId;\n                setLastTab(lastTab);\n            }\n\n            selectLastTab(lastTab)\n        }, 500);\n    }\n\n    return {\n        init: function () {\n            initMenu();\n            initializeDialog();\n        },\n        reload: function () {\n            reloadList();\n        }\n    }\n}();\n\n(function ($, undefined) {\n    \"use strict\";\n\n    var externalUrl = document.createElement('a');\n    externalUrl.className = \"external-url float-end\";\n    $.jstree.defaults.externalUrl = $.noop;\n    $.jstree.plugins.externalUrl = function (options, parent) {\n        this.teardown = function () {\n            if (this.settings.externalUrl) {\n                this.element.find(\".external-url\").remove();\n            }\n            parent.teardown.call(this);\n        };\n        this.redraw_node = function (obj, deep, callback, force_draw) {\n\n            obj = parent.redraw_node.call(this, obj, deep, callback, force_draw);\n            var node = this.get_node(obj);\n            var tmp = externalUrl.cloneNode(true);\n            tmp.href = node.data.externalUrl;\n            tmp.innerHTML = node.data.path\n            obj.insertBefore(tmp, obj.childNodes[2]);\n            return obj;\n        };\n    };\n\n    var link = document.createElement('a');\n    link.className = \"delete-tag menu-dialog-link float-end \";\n    link.innerHTML = '<i class=\"la la-trash fs-2 mx-3\"></i>';\n\n    $.jstree.defaults.delete = $.noop;\n    $.jstree.plugins.delete = function (options, parent) {\n\n        this.teardown = function () {\n            if (this.settings.delete) {\n                this.element.find(\".delete-tag\").remove();\n            }\n            parent.teardown.call(this);\n        };\n        this.redraw_node = function (obj, deep, callback, force_draw) {\n\n            obj = parent.redraw_node.call(this, obj, deep, callback, force_draw);\n\n            var tmp = link.cloneNode(true);\n            var node = this.get_node(obj);\n            tmp.href = node.data.deleteUrl;\n            obj.insertBefore(tmp, obj.childNodes[2]);\n            return obj;\n        };\n    };\n\n\n})($);\n\n\n\n// On document ready\nKTUtil.onDOMContentLoaded(function () {\n    CMSMenuAdmin.init();\n});","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Check if module exists (development only)\n\tif (__webpack_modules__[moduleId] === undefined) {\n\t\tvar e = new Error(\"Cannot find module '\" + moduleId + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t707: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkinit_cms_bundle\"] = self[\"webpackChunkinit_cms_bundle\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [460,692,58,603], () => (__webpack_require__(8236)))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["deferred","CMSMenuAdmin","lastEdited","menuDialog","tabs","listUrl","updateUrl","lastTab","localStorage","getItem","ready","trees","reloadList","axios","get","dataset","document","querySelector","value","axiosConfig","then","response","innerHTML","data","html","hasOwnProperty","setLastEdited","last_edited","setUpSortTree","selectLastTab","tabTriggerEl","bootstrap","Tab","show","setLastTab","tab","setItem","createAjaxDialog","event","preventDefault","link","target","getAttribute","closest","locale","CMSAdmin","createSelect2","submitAjaxForm","stopPropagation","form","elements","forEach","item","classList","remove","post","action","FormData","result","is_new_menu_item","hide","createInitCmsMessageBox","status","message","window","location","reload","catch","error","violations","path","propertyPath","title","field","add","setAttribute","nextElementSibling","contains","innerHtml","insertAdjacentHTML","$","each","e","ui","tree","push","treeData","plugins","attr","jstree","node","cb","treeSwitch","on","updateMenuSort","new_instance","get_json","element","checked","postMenuLoad","querySelectorAll","treeId","showHideTree","id","flattenArray","depth","left","ret","pid","right","children","length","text","nodes","doReload","rootId","sort","a","b","handleShowHideTree","find","open_all","close_all","init","KTUtil","body","addEventListener","setTimeout","lastEditedNode","Modal","height","width","externalUrl","createElement","className","defaults","noop","options","parent","this","teardown","settings","call","redraw_node","obj","deep","callback","force_draw","get_node","tmp","cloneNode","href","insertBefore","childNodes","delete","deleteUrl","onDOMContentLoaded","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","__webpack_modules__","Error","code","module","m","O","chunkIds","fn","priority","notFulfilled","Infinity","i","fulfilled","j","Object","keys","every","key","splice","r","n","getter","__esModule","d","definition","o","defineProperty","enumerable","prop","prototype","Symbol","toStringTag","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","self","bind","__webpack_exports__"],"sourceRoot":""}