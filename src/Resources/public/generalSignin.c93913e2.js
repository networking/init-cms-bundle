(()=>{"use strict";var e,t={198(e,t,r){var i=r(4461);async function n(e,t=""){!t||t instanceof FormData||(t=JSON.stringify(t));const r=await fetch(e,{method:"POST",credentials:"same-origin",headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/json"},body:t});if(200===r.status||201===r.status)return r.json();{const e=await r.json();if(e.message)throw new Error(e.message);throw new Error(e.error)}}let o=function(){let e,t,r,o,a,s,l;const c=localStorage.getItem("kt_auth_lang")??document.getElementsByTagName("html")[0].getAttribute("lang"),d={en:{email_invalid:"The value is not a valid email address",email_empty:"Email address is required",password_empty:"The password is required",login_success:"You have successfully logged in!",login_error:"Sorry, looks like there are some errors detected, please try again.",ok:"Ok, got it!"},de:{email_invalid:"Der Wert ist keine gültige E-Mail-Adresse",email_empty:"E-Mail-Adresse ist erforderlich",password_empty:"Das Passwort ist erforderlich",login_success:"Sie haben sich erfolgreich angemeldet!",login_error:"Entschuldigung, es scheint, dass einige Fehler erkannt wurden, bitte versuchen Sie es erneut.",ok:"Ok, verstanden!"},fr:{email_invalid:"La valeur n'est pas une adresse e-mail valide",email_empty:"L'adresse e-mail est requise",password_empty:"Le mot de passe est requis",login_success:"Vous vous êtes connecté avec succès!",login_error:"Désolé, il semble qu'il y ait des erreurs détectées, veuillez réessayer.",ok:"Ok, compris!"},it:{email_invalid:"Il valore non è un indirizzo e-mail valido",email_empty:"L'indirizzo e-mail è richiesto",password_empty:"La password è richiesta",login_success:"L'accesso è stato effettuato con successo!",login_error:"Spiacente, sembra che siano stati rilevati degli errori, si prega di riprovare.",ok:"Ok, capito!"}};let u=function(e){switch(c){case"German":case"de":return d.de[e];case"Italian":case"it":return d.it[e];case"French":case"fr":return d.fr[e];default:return d.en[e]}},m=async function(e){try{if(await PublicKeyCredential.isConditionalMediationAvailable()){const t=await async function(e){let t={requireUserVerification:"preferred"};e&&(t.username=e);const r=await n("/admin/assertion/options",t);if(e&&void 0===r.allowCredentials)throw new Error("no_credentials");let o;try{o=await(0,i.HS)(r)}catch(e){throw e}return n("/admin/assertion",o)}(e);if(t&&"ok"===t.status)return location.href=document.querySelector("#redirect_route").value;throw new Error(t)}}catch(e){let t=e.message;if("Error"===e.name&&(t=u("login_error")),"NotAllowedError"===e.name)return a.click();if("no_credentials"===e.message)return a.click();Swal.fire({text:t,icon:"error",buttonsStyling:!1,confirmButtonText:u("ok"),customClass:{confirmButton:"btn btn-primary"}})}};return{init:function(){if(e=document.querySelector("#kt_sign_in_form"),t=document.querySelector("#kt_sign_in_submit"),l=document.querySelector("#kt_sign_in_with_username_and_password_container"),document.querySelector("meta[name='webauthn-enabled']").getAttribute("content")&&window.PublicKeyCredential&&PublicKeyCredential.isConditionalMediationAvailable){let i;o=document.querySelector("#kt_sign_in_with_passkey"),a=document.querySelector("#kt_sign_in_with_username_and_password"),s=document.querySelector("#kt_sign_in_with_passkey_container");let n=1e3,c=document.querySelector("#username");const d=()=>{clearTimeout(i),c.value&&(i=setTimeout(f,n))};c.addEventListener("keyup",d);function f(){o.click()}o.addEventListener("click",function(e){e.preventDefault();try{m(c.value)}catch(e){e.name}}),a.addEventListener("click",function(e){e.preventDefault(),c.removeEventListener("keyup",d),s.classList.add("d-none"),l.classList.remove("d-none")})}r=FormValidation.formValidation(e,{fields:{_username:{validators:{notEmpty:{message:u("email_empty")}}},_password:{validators:{notEmpty:{message:u("password_empty")}}}},plugins:{trigger:new FormValidation.plugins.Trigger,bootstrap:new FormValidation.plugins.Bootstrap5({rowSelector:".fv-row",eleInvalidClass:"",eleValidClass:""})}}),function(e){try{return new URL(e),!0}catch(e){return!1}}(t.closest("form").getAttribute("action"))&&async function(){t.addEventListener("click",function(i){i.preventDefault(),r.validate().then(function(r){if("Valid"===r){t.setAttribute("data-kt-indicator","on"),t.disabled=!0;let r=new FormData(e),i={};r.forEach((e,t)=>{i[t]=e}),axios.post(CMSRouting.generate("cms_api_login"),i,{...axiosConfig}).then(e=>{t.disabled=!1,t.removeAttribute("data-kt-indicator");let r=e.data.redirect;Swal.fire({text:u("login_success"),icon:"success",timer:1e3,showConfirmButton:!1}).then(()=>{let e=window.location.protocol+"//"+window.location.host;-1!==r.indexOf(e)&&-1!==r.indexOf("http")||(r=e+r),location.href=r})}).catch(e=>{t.disabled=!1,t.removeAttribute("data-kt-indicator");let r=e.response.data;Swal.fire({text:r.error,icon:"error",buttonsStyling:!1,confirmButtonText:u("ok"),customClass:{confirmButton:"btn btn-primary"}}),t.disabled=!1})}else Swal.fire({text:u("login_error"),icon:"error",buttonsStyling:!1,confirmButtonText:u("ok"),customClass:{confirmButton:"btn btn-primary"}})})})}()}}}();document.addEventListener("DOMContentLoaded",()=>{o.init()})}},r={};function i(e){var n=r[e];if(void 0!==n)return n.exports;if(void 0===t[e]){var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}var a=r[e]={exports:{}};return t[e](a,a.exports,i),a.exports}i.m=t,e=[],i.O=(t,r,n,o)=>{if(!r){var a=1/0;for(d=0;d<e.length;d++){for(var[r,n,o]=e[d],s=!0,l=0;l<r.length;l++)(!1&o||a>=o)&&Object.keys(i.O).every(e=>i.O[e](r[l]))?r.splice(l--,1):(s=!1,o<a&&(a=o));if(s){e.splice(d--,1);var c=n();void 0!==c&&(t=c)}}return t}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[r,n,o]},i.d=(e,t)=>{for(var r in t)i.o(t,r)&&!i.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={883:0};i.O.j=t=>0===e[t];var t=(t,r)=>{var n,o,[a,s,l]=r,c=0;if(a.some(t=>0!==e[t])){for(n in s)i.o(s,n)&&(i.m[n]=s[n]);if(l)var d=l(i)}for(t&&t(r);c<a.length;c++)o=a[c],i.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return i.O(d)},r=self.webpackChunkinit_cms_bundle=self.webpackChunkinit_cms_bundle||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var n=i.O(void 0,[461],()=>i(198));n=i.O(n)})();
//# sourceMappingURL=generalSignin.c93913e2.js.map