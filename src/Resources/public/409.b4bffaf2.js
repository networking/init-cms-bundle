/*! For license information please see 409.b4bffaf2.js.LICENSE.txt */
"use strict";(self.webpackChunkinit_cms_bundle=self.webpackChunkinit_cms_bundle||[]).push([[409],{443(e,t,i){i.d(t,{A:()=>l});var n=i(8266),o=(i(1460),i(5022)),a=i(4692);class r{constructor(e){e.dataset.modelListInitialized||(this.element=e,this.id=this.element.id,this.listLink=e.querySelector(".open-select-media"),this.collectionContainer=e.dataset.cmsSortableContainer,this.selectMediaEventId="",this.searchMediaEventId="",this.checkMediaInputId="",this.perPageEventId="",this.selected=new Set,this.previousSelected=new Set,this.galleryDialog=null,this.galleryDialogContainer=null,o.A.init(),KTUtil.on(this.element,"#gallery_dialog","hide.bs.modal",()=>{this.removeListeners(),this.galleryDialogContainer.querySelector(".modal-content").innerHTML=""}),this.initialize(),KTUtil.on(this.element,"[data-collection-remove-btn]","click",e=>{e.preventDefault();let t=e.target;t.classList.contains("btn")||(t=t.closest(".btn")),t.closest(".collection-item").remove(),t.dispatchEvent(new CustomEvent("afterRemoveItem",{bubbles:!0}))}))}initialize(){this.element.dataset.modelListInitialized=!0,this.listLink.addEventListener("click",this.createListDialog.bind(this)),this.createModal()}createModal(){let e=document.createElement("div");e.setAttribute("id","gallery_dialog"),e.setAttribute("class","modal fade"),e.setAttribute("tabindex","-1"),e.setAttribute("role","dialog"),e.setAttribute("aria-hidden","true"),e.innerHTML='\n            <div class="modal-dialog mw-1000px" role="document">\n                <div class="modal-content">\n                </div>\n            </div>\n        ',document.body.appendChild(e),this.galleryDialogContainer=document.querySelector("#gallery_dialog"),this.galleryDialog=new bootstrap.Modal(this.galleryDialogContainer,{height:"auto",width:650,show:!1}),document.body.addEventListener("hidden.bs.modal",e=>{this.removeListeners()})}setupTree(){let e=this.galleryDialogContainer.querySelector("#tagsContainer"),t=a(e);e.dataset.selected;let i=t.data("tagsJson");t.jstree({types:{default:{icon:"fa fa-folder text-primary fs-2x"},file:{icon:"fa fa-file text-primary fs-2x"}},plugins:["sort","types"],sort:function(e,t){let i=this.get_node(e),n=this.get_node(t);return i.data.show_first?-1:n.data.show_first||i.text.toLowerCase()>n.text.toLowerCase()?1:-1},core:{themes:{variant:"large"},data:function(e,t){t(i)}}})}removeListeners(){KTUtil.off(this.galleryDialogContainer,"click",this.selectMediaEventId),KTUtil.off(this.galleryDialogContainer,"submit",this.searchMediaEventId),KTUtil.off(this.galleryDialogContainer,"change",this.checkMediaInputId),KTUtil.off(this.galleryDialogContainer,"change",this.perPageEventId)}addSearchListeners(){""!==this.selectMediaEventId&&this.removeListeners(),this.selectMediaEventId=KTUtil.on(this.galleryDialogContainer,"a","click",this.clickLinkInDialog.bind(this)),this.checkMediaInputId=KTUtil.on(this.galleryDialogContainer,"input[data-object-id]","change",this.selectMedia.bind(this)),this.searchMediaEventId=KTUtil.on(this.galleryDialogContainer,"form","submit",this.searchMedia.bind(this)),KTUtil.on(this.galleryDialogContainer,".confirm-select","click",this.submitSelectedMedia.bind(this))}addPerPageListeners(){this.perPageEventId=KTUtil.on(this.galleryDialogContainer,".per-page","change",e=>{e.preventDefault();let t=e.target.value,i=e.target.dataset.page,n=e.target.dataset.sortOrder,o=e.target.dataset.sortBy,a=e.target.dataset.tags,r=e.target.dataset.name;this.refreshList({"filter[_per_page]":t,"filter[_page]":i,"filter[_sort_order]":n,"filter[_sort_by]":o,"filter[tags][value]":a,"filter[name][value]":r})})}createListDialog(e){e.preventDefault();let t=window.location.protocol+"//"+window.location.host,i=this.listLink.getAttribute("href");-1===i.indexOf(t)&&this.listLink.setAttribute("href",t+i);let o=new URL(this.listLink.getAttribute("href"));this.element.querySelectorAll("[data-selected]").forEach(e=>{this.selected.add(e.dataset.selected),this.previousSelected.add(e.dataset.selected)}),o.searchParams.append("selected",Array.from(this.selected)),o.searchParams.append("galleryMode","gallery"),fetch(o,{method:"GET",headers:{"X-Requested-With":"XMLHttpRequest"}}).then(e=>e.text()).then(e=>{this.galleryDialog.show(),this.galleryDialogContainer.querySelector(".modal-content").innerHTML=e,this.setupTree(),this.addSearchListeners(),n.x.initToolTips(this.galleryDialogContainer),this.addPerPageListeners()})}clickLinkInDialog(e){e.preventDefault();let t=e.target;if(t.classList.contains("select-media")){let e=this.galleryDialogContainer.querySelector(`input[data-object-id="${t.dataset.objectId}"]`);return void this.selectMedia(e)}if(t.classList.contains("tag_link")){var i=t.dataset.pk;return void this.refreshList({"filter[tags][value]":i})}if(t.classList.contains("show_all_media"))return void this.refreshList({"filter[tags][value]":""});let o=t.getAttribute("href");if(!o||"#"===o)return;let a=window.location.protocol+"//"+window.location.host;-1===o.indexOf(a)&&(o=a+o);let r=new URL(o);r.searchParams.append("selected",Array.from(this.selected)),r.searchParams.append("galleryMode","gallery"),r.searchParams.append("multiSelect","true"),fetch(r,{method:"GET",headers:{"X-Requested-With":"XMLHttpRequest"}}).then(e=>e.text()).then(e=>{this.galleryDialogContainer.querySelector(".modal-content").innerHTML=e,this.addSearchListeners(),this.addPerPageListeners(),this.setupTree(),n.x.initToolTips(this.galleryDialogContainer)})}refreshList(e){e||(e={});let t=new FormData(document.querySelector("#search-form"));for(const i in e)t.append(i,e[i]);t.set("galleryMode","gallery"),t.set("multiSelect","true"),t.set("selected",Array.from(this.selected)),e=Object.fromEntries(t.entries());let i=this.galleryDialogContainer.querySelector("#tagsContainer");axios.get(i.dataset.refreshListUrl,{...axiosConfig,params:e}).then(e=>{document.querySelector("#item_list").innerHTML=e.data,n.x.initToolTips(this.galleryDialogContainer)})}selectMedia(e){if(e instanceof Event?(e.preventDefault(),e=e.target):e.checked=!e.checked,!e.checked)return e.closest(".overlay").classList.remove("overlay-block"),void this.selected.delete(e.dataset.objectId);this.selected.add(e.dataset.objectId),e.closest(".overlay").classList.add("overlay-block")}searchMedia(e){e.preventDefault();let t=e.target,i=new URL(t.action),n=Object.fromEntries(new FormData(t).entries());for(const e in n)i.searchParams.append(e,n[e]);i.searchParams.append("selected",Array.from(this.selected)),i.searchParams.append("galleryMode","gallery"),i.searchParams.append("multiSelect","true"),axios.get(i.toString(),{...axiosConfig}).then(e=>{this.galleryDialogContainer.querySelector(".modal-content").innerHTML=e.data,this.addSearchListeners(),this.addPerPageListeners(),this.setupTree()})}submitSelectedMedia(e){e.preventDefault(),this.galleryDialogContainer.querySelectorAll("input[data-object-id]").forEach((e,t)=>{let i=e.dataset.objectId;e.checked&&!this.previousSelected.has(i)&&(this.addItemToCollection(e.dataset),this.previousSelected.add(i)),!e.checked&&this.previousSelected.has(i)&&(document.querySelector('[data-selected="'+i+'"]').remove(),this.previousSelected.delete(i))}),document.dispatchEvent(new CustomEvent("afterRemoveItem")),n.x.initSpecialFields(),this.galleryDialog.hide()}addItemToCollection(e){let t=`<a href="/admin/cms/media/${e.objectId}/edit" target="new">\n                                            <img  src="${e.path}" width="75" height="60"></a> &nbsp;&nbsp;`,i=0;const n=this.collectionContainer,o=document.querySelector(n);let a=[...document.querySelectorAll(`div[id^="${o.id}_"]`)].pop();a&&(i=parseInt(a.id.replace(`${o.id}_`,""))),i+=1;let r=o.dataset.prototype;const l=o.dataset.prototypeName||"__name__",s=new RegExp(`${o.id}_${l}`,"g"),d=`${o.id}_${i}`;r=r.replace(s,d);const c=o.id.split("_"),h=new RegExp(`${c[c.length-1]}\\]\\[${l}`,"g");r=r.replace(h,`${c[c.length-1]}][${i}`),o.insertAdjacentHTML("beforeend",r),document.querySelector(`#${d}`).closest(".collection-item").dataset.selected=e.objectId,document.querySelector(`#${d}_media`).value=e.objectId,document.querySelector(`#field_widget_${d}_media`).querySelector(".inner-field-short-description").innerHTML=t,document.dispatchEvent(new CustomEvent("afterAddItem",{bubbles:!0,detail:{proto:r,counter:i}}))}addMediaDialog(e){e.preventDefault();let t=this.addLink.getAttribute("href");fetch(t,{method:"GET",headers:{"X-Requested-With":"XMLHttpRequest"}}).then(e=>e.text()).then(e=>{this.galleryDialogContainer.querySelector(".modal-content").innerHTML=e,this.addUploadListeners(),this.dialog.show()})}updatePreview(){if(""===this.field.value)return void(this.preview.innerHTML="");let e=this.preview.dataset.previewUrl.replace("__objectId__",this.field.value);fetch(e,{method:"GET",headers:{"X-Requested-With":"XMLHttpRequest"}}).then(e=>e.text()).then(e=>{this.preview.innerHTML=e})}removeSelectedElement(e){(e.preventDefault(),this.field.options)&&this.field.options.map(e=>{e.selected=!1});this.field.value="",this.updatePreview()}}const l={init(){document.querySelectorAll("[data-gallery-entity]").forEach(e=>{new r(e)})}}},709(e,t,i){i.d(t,{A:()=>r});var n=i(8266),o=(i(1460),i(4692));class a{constructor(e){e.dataset.modelListInitialized||(this.element=e,this.id=e.dataset.fieldId,this.field=document.querySelector("#"+this.id),this.preview=e.querySelector("#field_widget_"+this.id),this.createModal(),this.listLink=e.querySelector("#field_list_link_"+this.id),this.addLink=e.querySelector("#field_add_link_"+this.id),this.removeLink=e.querySelector("#field_remove_link_"+this.id),this.objectId=this.field.value,this.selectMediaEventId="",this.searchMediaEventId="",this.addMediaEventId="",this.perPageEventId="",KTUtil.on(this.element,"#"+this.id,"change",this.updatePreview.bind(this)),KTUtil.on(this.element,"#field_dialog_"+this.id,"hide.bs.modal",()=>{this.removeListeners(),this.dialogContainer.querySelector(".modal-content").innerHTML=""}),this.initialize())}initialize(){this.element.dataset.modelListInitialized=!0,this.listLink.addEventListener("click",this.createListDialog.bind(this)),this.removeLink.addEventListener("click",this.removeSelectedElement.bind(this)),this.addLink.addEventListener("click",this.addMediaDialog.bind(this))}createModal(){let e=document.createElement("div");e.setAttribute("id","field_dialog_"+this.id),e.setAttribute("class","modal fade"),e.setAttribute("tabindex","-1"),e.setAttribute("role","dialog"),e.setAttribute("aria-hidden","true"),e.innerHTML='\n            <div class="modal-dialog mw-1000px" role="document">\n                <div class="modal-content">\n                </div>\n            </div>\n        ',document.body.appendChild(e),this.dialogContainer=document.querySelector("#field_dialog_"+this.id),this.dialog=new bootstrap.Modal(this.dialogContainer,{height:"auto",width:650,show:!1})}setupTree(){let e=this.dialogContainer.querySelector("#tagsContainer"),t=o(e);e.dataset.selected;let i=t.data("tagsJson");t.jstree({types:{default:{icon:"fa fa-folder text-primary fs-2x"},file:{icon:"fa fa-file text-primary fs-2x"}},plugins:["sort","types"],sort:function(e,t){let i=this.get_node(e),n=this.get_node(t);return i.data.show_first?-1:n.data.show_first||i.text.toLowerCase()>n.text.toLowerCase()?1:-1},core:{themes:{variant:"large"},data:function(e,t){t(i)}}})}removeListeners(){KTUtil.off(this.dialogContainer,"click",this.selectMediaEventId),KTUtil.off(this.dialogContainer,"submit",this.searchMediaEventId),KTUtil.off(this.dialogContainer,"submit",this.addMediaEventId),KTUtil.off(this.dialogContainer,"change",this.perPageEventId)}addSearchListeners(){""!==this.searchMediaEventId&&KTUtil.off(this.dialogContainer,"submit",this.searchMediaEventId),this.searchMediaEventId=KTUtil.on(this.dialogContainer,"form","submit",this.searchMedia.bind(this))}addUploadListeners(){""!==this.addMediaEventId&&KTUtil.off(this.dialogContainer,"submit",this.addMediaEventId),this.addMediaEventId=KTUtil.on(this.dialogContainer,"form","submit",this.uploadMedia.bind(this)),this.dialogContainer.querySelectorAll('[data-bs-dismiss="modal"]').forEach(e=>{e.addEventListener("click",e=>{e.preventDefault(),this.dialog.hide()})})}addClickOnLinkListeners(){""!==this.selectMediaEventId&&KTUtil.off(this.dialogContainer,"click",this.selectMediaEventId),this.selectMediaEventId=KTUtil.on(this.dialogContainer,"a","click",this.clickLinkInDialog.bind(this))}addPerPageListeners(){this.perPageEventId=KTUtil.on(this.dialogContainer,".per-page","change",e=>{e.preventDefault();let t=e.target.value,i=e.target.dataset.page,n=e.target.dataset.sortOrder,o=e.target.dataset.sortBy,a=e.target.dataset.tags,r=e.target.dataset.name;this.refreshList({"filter[_per_page]":t,"filter[_page]":i,"filter[_sort_order]":n,"filter[_sort_by]":o,"filter[tags][value]":a,"filter[name][value]":r})})}createListDialog(e){e.preventDefault();let t=this.listLink.getAttribute("href");fetch(t,{method:"GET",headers:{"X-Requested-With":"XMLHttpRequest"}}).then(e=>e.text()).then(e=>{this.dialogContainer.querySelector(".modal-content").innerHTML=e,this.addSearchListeners(),this.addClickOnLinkListeners(),this.addPerPageListeners(),this.dialog.show(),this.setupTree(),n.x.initToolTips(this.dialogContainer)})}clickLinkInDialog(e){e.preventDefault();let t=e.target;if(t.classList.contains("select-media"))return void this.selectMedia(e);if(t.classList.contains("tag_link")){var i=t.dataset.pk;return void this.refreshList({"filter[tags][value]":i})}if(t.classList.contains("show_all_media"))return void this.refreshList({"filter[tags][value]":""});t.getAttribute("href")||(t=t.closest("a"));let o=t.getAttribute("href");o&&"#"!==o&&fetch(o,{method:"GET",headers:{"X-Requested-With":"XMLHttpRequest"}}).then(e=>e.text()).then(e=>{this.dialogContainer.querySelector(".modal-content").innerHTML=e,this.addSearchListeners(),this.addUploadListeners(),this.addClickOnLinkListeners(),n.x.initSpecialFields(),this.setupTree(),n.x.initToolTips(this.dialogContainer)})}refreshList(e){e||(e={});let t=new FormData(document.querySelector("#search-form"));for(const i in e)t.append(i,e[i]);t.set("galleryMode","gallery"),e=Object.fromEntries(t.entries());let i=this.dialogContainer.querySelector("#tagsContainer");axios.get(i.dataset.refreshListUrl,{...axiosConfig,params:e}).then(e=>{document.querySelector("#item_list").innerHTML=e.data,n.x.initToolTips(this.dialogContainer)})}selectMedia(e){e.preventDefault();let t=e.target;this.field.value=t.dataset.objectId,this.updatePreview(),this.dialog.hide()}searchMedia(e){e.preventDefault();let t=e.target,i=new URL(t.action),n=Object.fromEntries(new FormData(t).entries());for(const e in n)i.searchParams.append(e,n[e]);axios.get(i.toString(),{...axiosConfig}).then(e=>{this.dialogContainer.querySelector(".modal-content").innerHTML=e.data,this.addSearchListeners(),this.setupTree()})}addMediaDialog(e){e.preventDefault();let t=this.addLink.getAttribute("href");fetch(t,{method:"GET",headers:{"X-Requested-With":"XMLHttpRequest"}}).then(e=>e.text()).then(e=>{this.dialogContainer.querySelector(".modal-content").innerHTML=e,this.addUploadListeners(),this.addClickOnLinkListeners(),this.dialog.show()})}uploadMedia(e){e.preventDefault(),e.stopPropagation();let t=e.target,i=new FormData(t);axios.post(t.getAttribute("action"),i,{...axiosConfig}).then(e=>{if("ok"==e.data.result)return this.field.value=e.data.objectId,this.updatePreview(),void this.dialog.hide();this.dialogContainer.querySelector(".modal-content").innerHTML=e.data,this.addUploadListeners(),n.x.createSelect2()}).catch(e=>{})}updatePreview(){if(""===this.field.value)return void(this.preview.innerHTML="");let e=this.preview.dataset.previewUrl.replace("__objectId__",this.field.value);fetch(e,{method:"GET",headers:{"X-Requested-With":"XMLHttpRequest"}}).then(e=>e.text()).then(e=>{this.preview.innerHTML=e})}removeSelectedElement(e){(e.preventDefault(),this.field.options)&&this.field.options.map(e=>{e.selected=!1});this.field.value="",this.updatePreview()}}const r={init(){document.querySelectorAll(".media-entity").forEach(e=>{new a(e)})}}},3621(e,t,i){i.d(t,{A:()=>a});var n=i(8266);class o{constructor(e){e.dataset.modelListInitialized||(this.element=e,this.id=e.dataset.fieldId,this.isListMode=e.dataset.isListMode,this.fieldReloadUrl=e.dataset.fieldReloadUrl,this.field=document.querySelector(`#${this.id}`),this.preview=e.querySelector(`#field_widget_${this.id}`),this.createModal(),this.listLink=e.querySelector(`#field_list_link_${this.id}`),this.addLink=e.querySelector(`#field_add_link_${this.id}`),this.removeLink=e.querySelector(`#field_remove_link_${this.id}`),this.objectId=this.field.value,this.selectModelEventId="",this.searchModelEventId="",this.perPageEventId="",this.addModelEventId="",KTUtil.on(this.element,`#${this.id}`,"change",this.updatePreview.bind(this)),KTUtil.on(this.element,`#field_dialog_${this.id}`,"hide.bs.modal",this.removeListeners.bind(this)),this.initialize())}initialize(){this.element.dataset.modelListInitialized=!0,this.listLink&&this.listLink.addEventListener("click",this.createListDialog.bind(this)),this.removeLink&&this.removeLink.addEventListener("click",this.removeSelectedElement.bind(this)),this.addLink&&this.addLink.addEventListener("click",this.addDialog.bind(this))}createModal(){const e=document.createElement("div");e.setAttribute("id",`field_dialog_${this.id}`),e.setAttribute("class","modal fade"),e.setAttribute("tabindex","-1"),e.setAttribute("role","dialog"),e.setAttribute("aria-hidden","true"),e.innerHTML='\n            <div class="modal-dialog mw-1000px" role="document">\n                <div class="modal-content">\n                </div>\n            </div>\n        ',document.body.appendChild(e),this.dialogContainer=document.querySelector(`#field_dialog_${this.id}`),this.dialog=new bootstrap.Modal(this.dialogContainer,{height:"auto",width:650,show:!1}),document.body.addEventListener("hidden.bs.modal",e=>{this.removeListeners()})}removeListeners(){KTUtil.off(this.dialogContainer,"click",this.selectModelEventId),KTUtil.off(this.dialogContainer,"submit",this.searchModelEventId),KTUtil.off(this.dialogContainer,"submit",this.addModelEventId)}addClickOnLinkListeners(){""!==this.selectModelEventId&&KTUtil.off(this.dialogContainer,"click",this.selectModelEventId),this.selectModelEventId=KTUtil.on(this.dialogContainer,"a","click",this.clickLinkInDialog.bind(this))}addSearchListeners(){""!==this.selectModelEventId&&KTUtil.off(this.dialogContainer,"submit",this.searchModelEventId),this.searchModelEventId=KTUtil.on(this.dialogContainer,"form","submit",this.searchModel.bind(this))}addSubmitisteners(){""!==this.addModelEventId&&KTUtil.off(this.dialogContainer,"submit",this.addModelEventId),this.addModelEventId=KTUtil.on(this.dialogContainer,"form","submit",this.submitModel.bind(this)),this.dialogContainer.querySelectorAll('[data-bs-dismiss="modal"]').forEach(e=>{e.addEventListener("click",e=>{e.preventDefault(),this.dialog.hide()})})}addPerPageListeners(){""!==this.perPageEventId&&KTUtil.off(this.dialogContainer,"change",this.perPageEventId),this.perPageEventId=KTUtil.on(this.dialogContainer,".per-page","change",e=>{e.preventDefault();const t=new URL(e.target.dataset.url);t.searchParams.append("filter[_page]",1),t.searchParams.append("filter[_per_page]",e.target.value),axios.get(t.toString(),{...axiosConfig}).then(e=>{this.dialogContainer.querySelector(".modal-content").innerHTML=e.data,this.addSearchListeners(),this.addClickOnLinkListeners(),this.addPerPageListeners()})})}createListDialog(e){e.preventDefault();const t=this.listLink.getAttribute("href");fetch(t,{method:"GET",headers:{"X-Requested-With":"XMLHttpRequest"}}).then(e=>e.text()).then(e=>{this.dialogContainer.querySelector(".modal-content").innerHTML=e,this.addSearchListeners(),this.addClickOnLinkListeners(),this.addPerPageListeners(),this.dialog.show()})}clickLinkInDialog(e){e.preventDefault();let t=e.target;if(t.classList.contains("select-model")||t.dataset.objectId)return void this.selectModel(e);if(t.dataset.bsToggle)return;"a"!==t.tagName.toLowerCase()&&(t=t.closest("a"));const i=t.getAttribute("href");!i||i.indexOf("#")>-1||fetch(i,{method:"GET",headers:{"X-Requested-With":"XMLHttpRequest"}}).then(e=>e.text()).then(e=>{this.dialogContainer.querySelector(".modal-content").innerHTML=e,this.addSearchListeners(),this.addClickOnLinkListeners(),this.addPerPageListeners(),n.x.initSpecialFields()})}selectModel(e){e.preventDefault();const t=e.target;this.field.value=t.dataset.objectId,this.updatePreview(),this.dialog.hide()}searchModel(e){e.preventDefault();const t=e.target,i=new URL(t.action),n=Object.fromEntries(new FormData(t).entries());for(const e in n)i.searchParams.append(e,n[e]);axios.get(i.toString(),{...axiosConfig}).then(e=>{this.dialogContainer.querySelector(".modal-content").innerHTML=e.data,this.addSearchListeners(),this.addClickOnLinkListeners(),this.addPerPageListeners()})}addDialog(e){e.preventDefault();const t=this.addLink.getAttribute("href");fetch(t,{method:"GET",headers:{"X-Requested-With":"XMLHttpRequest"}}).then(e=>e.text()).then(e=>{this.dialogContainer.querySelector(".modal-content").innerHTML=e,this.addSubmitisteners(),this.addClickOnLinkListeners(),this.dialog.show()})}submitModel(e){e.preventDefault(),e.stopPropagation();const t=e.target,i=new FormData(t);axios.post(t.getAttribute("action"),i,{...axiosConfig}).then(e=>"ok"===e.data.result&&"true"===this.isListMode?(this.field.value=e.data.objectId,this.updatePreview(),void this.dialog.hide()):"ok"===e.data.result&&"false"===this.isListMode?(this.reloadFormField(e.data.objectId),void this.dialog.hide()):(this.dialogContainer.querySelector(".modal-content").innerHTML=e.data,this.addSubmitisteners(),this.addClickOnLinkListeners(),void n.x.createSelect2())).catch(e=>{const i=e.response.data;Object.hasOwn(i,"violations")&&i.violations.forEach(e=>{const i=e.propertyPath,n=e.title;let o=t.querySelector(`[name="${i}"]`);if(o){if(o.closest(".tab-pane")){const e=o.closest(".tab-pane");document.querySelector(`a[href="#${e.id}"]`).insertAdjacentHTML("beforeend",'<i class="fa fa-exclamation-circle text-danger" aria-hidden="true"></i>')}o.nextElementSibling?.classList.contains("select2-container")&&(o=o.nextElementSibling),o.classList.add("is-invalid"),o.setAttribute("required","required"),o.nextElementSibling?.classList.contains("invalid-feedback")?o.nextElementSibling.innerHtml=n:o.insertAdjacentHTML("afterend",`<div class="invalid-feedback">${n}</div>`)}})})}reloadFormField(e){axios.get(this.fieldReloadUrl,{...axiosConfig}).then(t=>{const i=document.createElement("div");i.innerHTML=t.data,this.preview.innerHTML=i.querySelector(`#field_widget_${this.id}`).innerHTML,this.field=this.preview.querySelector(`#${this.id}`);const o=this.preview.querySelector(`#${this.id} [value="${e}"]`),a=o.tagName.toLowerCase();"input"===a&&o.setAttribute("checked","checked"),"select"===a&&o.setAttribute("selected","selected"),"option"===a&&o.setAttribute("selected","selected"),"select2"===this.field.dataset.control&&(n.x.createSelect2(),this.field.dispatchEvent(new Event("change")))})}updatePreview(){if("false"===this.isListMode)return;if(""===this.field.value)return void(this.preview.innerHTML="");const e=this.preview.dataset.previewUrl.replace("__objectId__",this.field.value);fetch(e,{method:"GET",headers:{"X-Requested-With":"XMLHttpRequest"}}).then(e=>e.text()).then(e=>{this.preview.innerHTML=e})}removeSelectedElement(e){e.preventDefault();const t=this.field.options;this.field.options&&t.forEach(e=>{e.selected=!1}),this.field.value="",this.updatePreview()}}const a={init(){document.querySelectorAll(".model-list").forEach(e=>{new o(e)})}}},1228(e,t,i){i.d(t,{A:()=>a});var n=i(8175);class o{constructor(e){console.log(e),this.element=e,this.draggable=this.element.dataset.cmsSortableDraggable,this.initialize(),document.body.addEventListener("sonata.add_element",()=>{this.initialize()}),document.body.addEventListener("sonata.delete_element",()=>{this.applyPosition()})}addHandles(){this.element.querySelectorAll(this.element.dataset.cmsSortableSelector).forEach(e=>{const t=document.createElement("span");t.setAttribute("class","sonata-ba-sortable-handler"),t.innerHTML='<i class="fa fa-bars"></i>',e.insertBefore(t,e.firstChild)})}initialize(){const e=this.element.querySelector(this.element.dataset.cmsSortableContainer);e&&(new n.A(e,{draggable:this.draggable,animation:150,easing:"cubic-bezier(1, 0, 0, 1)",onEnd:()=>{this.applyPosition()},onStart:e=>{e.oldIndex},onRemove(){this.applyPosition()}}),this.addHandles(),this.applyPosition())}applyPosition(){setTimeout(()=>{this.element.querySelectorAll(this.element.dataset.cmsSortableSelector).forEach((e,t)=>{e.querySelector("input").value=t})},1e3)}}const a={init(){document.querySelectorAll("[data-cms-sortable-one-to-many]").forEach(e=>{new o(e)})}}},5022(e,t,i){i.d(t,{A:()=>a});var n=i(8175);class o{constructor(e){this.element=e,this.type=e.dataset.sortableCollectionType,this.draggable=this.element.dataset.cmsSortableDraggable,this.initialize(),document.addEventListener("afterAddItem",()=>{this.initialize()}),document.addEventListener("afterRemoveItem",()=>{this.applyPosition()})}addHandles(){this.element.querySelectorAll(this.draggable).forEach(e=>{if(e.dataset.hasHandle)return;e.dataset.hasHandle=1;const t=document.createElement("span");t.setAttribute("class","sonata-ba-sortable-handler float-end"),t.innerHTML='<i class="fa fa-bars"></i>',e.insertBefore(t,e.firstChild)})}initialize(){const e=this.element.querySelector(this.element.dataset.cmsSortableContainer);e&&(new n.A(e,{draggable:this.draggable,animation:150,easing:"cubic-bezier(1, 0, 0, 1)",onEnd:()=>{this.applyPosition()},onStart:e=>{e.oldIndex},onRemove(){this.applyPosition()}}),this.addHandles(),this.applyPosition())}applyPosition(){setTimeout(()=>{this.element.querySelectorAll(`input.${this.type}`).forEach((e,t)=>{e.value=t})},1e3)}}const a={init(){document.querySelectorAll("[data-sortable-collection-type]").forEach(e=>{e.dataset.cmsCollectionType||new o(e)})}}},6467(e,t,i){i.d(t,{e:()=>a});var n=i(7660),o=i.n(n);const a={instance:null,async load(){return this.instance||(this.instance=await this.getRoutes()),this.instance},async getRoutes(){let e=document.documentElement.lang.replace("-","_"),t=await fetch("/js/translations/"+e+".json"),i=await t.json();return o().fromJSON(i),o()}}},8175(e,t,i){function n(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}function o(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?n(Object(i),!0).forEach(function(t){r(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):n(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function r(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function l(){return l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},l.apply(this,arguments)}function s(e,t){if(null==e)return{};var i,n,o=function(e,t){if(null==e)return{};var i,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)i=a[n],t.indexOf(i)>=0||(o[i]=e[i]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)i=a[n],t.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(o[i]=e[i])}return o}function d(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?c(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}i.d(t,{A:()=>Ct});function h(e){if("undefined"!=typeof window&&window.navigator)return!!navigator.userAgent.match(e)}var u=h(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),f=h(/Edge/i),p=h(/firefox/i),g=h(/safari/i)&&!h(/chrome/i)&&!h(/android/i),m=h(/iP(ad|od|hone)/i),v=h(/chrome/i)&&h(/android/i),b={capture:!1,passive:!1};function y(e,t,i){e.addEventListener(t,i,!u&&b)}function w(e,t,i){e.removeEventListener(t,i,!u&&b)}function E(e,t){if(t){if(">"===t[0]&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch(e){return!1}return!1}}function S(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function D(e,t,i,n){if(e){i=i||document;do{if(null!=t&&(">"===t[0]?e.parentNode===i&&E(e,t):E(e,t))||n&&e===i)return e;if(e===i)break}while(e=S(e))}return null}var C,_=/\s+/g;function L(e,t,i){if(e&&t)if(e.classList)e.classList[i?"add":"remove"](t);else{var n=(" "+e.className+" ").replace(_," ").replace(" "+t+" "," ");e.className=(n+(i?" "+t:"")).replace(_," ")}}function M(e,t,i){var n=e&&e.style;if(n){if(void 0===i)return document.defaultView&&document.defaultView.getComputedStyle?i=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(i=e.currentStyle),void 0===t?i:i[t];t in n||-1!==t.indexOf("webkit")||(t="-webkit-"+t),n[t]=i+("string"==typeof i?"":"px")}}function T(e,t){var i="";if("string"==typeof e)i=e;else do{var n=M(e,"transform");n&&"none"!==n&&(i=n+" "+i)}while(!t&&(e=e.parentNode));var o=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return o&&new o(i)}function I(e,t,i){if(e){var n=e.getElementsByTagName(t),o=0,a=n.length;if(i)for(;o<a;o++)i(n[o],o);return n}return[]}function x(){return document.scrollingElement||document.documentElement}function k(e,t,i,n,o){if(e.getBoundingClientRect||e===window){var a,r,l,s,d,c,h;if(e!==window&&e.parentNode&&e!==x()?(r=(a=e.getBoundingClientRect()).top,l=a.left,s=a.bottom,d=a.right,c=a.height,h=a.width):(r=0,l=0,s=window.innerHeight,d=window.innerWidth,c=window.innerHeight,h=window.innerWidth),(t||i)&&e!==window&&(o=o||e.parentNode,!u))do{if(o&&o.getBoundingClientRect&&("none"!==M(o,"transform")||i&&"static"!==M(o,"position"))){var f=o.getBoundingClientRect();r-=f.top+parseInt(M(o,"border-top-width")),l-=f.left+parseInt(M(o,"border-left-width")),s=r+a.height,d=l+a.width;break}}while(o=o.parentNode);if(n&&e!==window){var p=T(o||e),g=p&&p.a,m=p&&p.d;p&&(s=(r/=m)+(c/=m),d=(l/=g)+(h/=g))}return{top:r,left:l,bottom:s,right:d,width:h,height:c}}}function A(e,t,i){for(var n=R(e,!0),o=k(e)[t];n;){var a=k(n)[i];if(!("top"===i||"left"===i?o>=a:o<=a))return n;if(n===x())break;n=R(n,!1)}return!1}function P(e,t,i,n){for(var o=0,a=0,r=e.children;a<r.length;){if("none"!==r[a].style.display&&r[a]!==Fe.ghost&&(n||r[a]!==Fe.dragged)&&D(r[a],i.draggable,e,!1)){if(o===t)return r[a];o++}a++}return null}function O(e,t){for(var i=e.lastElementChild;i&&(i===Fe.ghost||"none"===M(i,"display")||t&&!E(i,t));)i=i.previousElementSibling;return i||null}function q(e,t){var i=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)"TEMPLATE"===e.nodeName.toUpperCase()||e===Fe.clone||t&&!E(e,t)||i++;return i}function N(e){var t=0,i=0,n=x();if(e)do{var o=T(e),a=o.a,r=o.d;t+=e.scrollLeft*a,i+=e.scrollTop*r}while(e!==n&&(e=e.parentNode));return[t,i]}function R(e,t){if(!e||!e.getBoundingClientRect)return x();var i=e,n=!1;do{if(i.clientWidth<i.scrollWidth||i.clientHeight<i.scrollHeight){var o=M(i);if(i.clientWidth<i.scrollWidth&&("auto"==o.overflowX||"scroll"==o.overflowX)||i.clientHeight<i.scrollHeight&&("auto"==o.overflowY||"scroll"==o.overflowY)){if(!i.getBoundingClientRect||i===document.body)return x();if(n||t)return i;n=!0}}}while(i=i.parentNode);return x()}function H(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}function U(e,t){return function(){if(!C){var i=arguments;1===i.length?e.call(this,i[0]):e.apply(this,i),C=setTimeout(function(){C=void 0},t)}}}function X(e,t,i){e.scrollLeft+=t,e.scrollTop+=i}function j(e){var t=window.Polymer,i=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):i?i(e).clone(!0)[0]:e.cloneNode(!0)}function K(e,t){M(e,"position","absolute"),M(e,"top",t.top),M(e,"left",t.left),M(e,"width",t.width),M(e,"height",t.height)}function F(e){M(e,"position",""),M(e,"top",""),M(e,"left",""),M(e,"width",""),M(e,"height","")}var Y="Sortable"+(new Date).getTime();function B(){var e,t=[];return{captureAnimationState:function(){t=[],this.options.animation&&[].slice.call(this.el.children).forEach(function(e){if("none"!==M(e,"display")&&e!==Fe.ghost){t.push({target:e,rect:k(e)});var i=o({},t[t.length-1].rect);if(e.thisAnimationDuration){var n=T(e,!0);n&&(i.top-=n.f,i.left-=n.e)}e.fromRect=i}})},addAnimationState:function(e){t.push(e)},removeAnimationState:function(e){t.splice(function(e,t){for(var i in e)if(e.hasOwnProperty(i))for(var n in t)if(t.hasOwnProperty(n)&&t[n]===e[i][n])return Number(i);return-1}(t,{target:e}),1)},animateAll:function(i){var n=this;if(!this.options.animation)return clearTimeout(e),void("function"==typeof i&&i());var o=!1,a=0;t.forEach(function(e){var t=0,i=e.target,r=i.fromRect,l=k(i),s=i.prevFromRect,d=i.prevToRect,c=e.rect,h=T(i,!0);h&&(l.top-=h.f,l.left-=h.e),i.toRect=l,i.thisAnimationDuration&&H(s,l)&&!H(r,l)&&(c.top-l.top)/(c.left-l.left)==(r.top-l.top)/(r.left-l.left)&&(t=function(e,t,i,n){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-i.top,2)+Math.pow(t.left-i.left,2))*n.animation}(c,s,d,n.options)),H(l,r)||(i.prevFromRect=r,i.prevToRect=l,t||(t=n.options.animation),n.animate(i,c,l,t)),t&&(o=!0,a=Math.max(a,t),clearTimeout(i.animationResetTimer),i.animationResetTimer=setTimeout(function(){i.animationTime=0,i.prevFromRect=null,i.fromRect=null,i.prevToRect=null,i.thisAnimationDuration=null},t),i.thisAnimationDuration=t)}),clearTimeout(e),o?e=setTimeout(function(){"function"==typeof i&&i()},a):"function"==typeof i&&i(),t=[]},animate:function(e,t,i,n){if(n){M(e,"transition",""),M(e,"transform","");var o=T(this.el),a=o&&o.a,r=o&&o.d,l=(t.left-i.left)/(a||1),s=(t.top-i.top)/(r||1);e.animatingX=!!l,e.animatingY=!!s,M(e,"transform","translate3d("+l+"px,"+s+"px,0)"),this.forRepaintDummy=function(e){return e.offsetWidth}(e),M(e,"transition","transform "+n+"ms"+(this.options.easing?" "+this.options.easing:"")),M(e,"transform","translate3d(0,0,0)"),"number"==typeof e.animated&&clearTimeout(e.animated),e.animated=setTimeout(function(){M(e,"transition",""),M(e,"transform",""),e.animated=!1,e.animatingX=!1,e.animatingY=!1},n)}}}}var $=[],z={initializeByDefault:!0},W={mount:function(e){for(var t in z)z.hasOwnProperty(t)&&!(t in e)&&(e[t]=z[t]);$.forEach(function(t){if(t.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),$.push(e)},pluginEvent:function(e,t,i){var n=this;this.eventCanceled=!1,i.cancel=function(){n.eventCanceled=!0};var a=e+"Global";$.forEach(function(n){t[n.pluginName]&&(t[n.pluginName][a]&&t[n.pluginName][a](o({sortable:t},i)),t.options[n.pluginName]&&t[n.pluginName][e]&&t[n.pluginName][e](o({sortable:t},i)))})},initializePlugins:function(e,t,i,n){for(var o in $.forEach(function(n){var o=n.pluginName;if(e.options[o]||n.initializeByDefault){var a=new n(e,t,e.options);a.sortable=e,a.options=e.options,e[o]=a,l(i,a.defaults)}}),e.options)if(e.options.hasOwnProperty(o)){var a=this.modifyOption(e,o,e.options[o]);void 0!==a&&(e.options[o]=a)}},getEventProperties:function(e,t){var i={};return $.forEach(function(n){"function"==typeof n.eventProperties&&l(i,n.eventProperties.call(t[n.pluginName],e))}),i},modifyOption:function(e,t,i){var n;return $.forEach(function(o){e[o.pluginName]&&o.optionListeners&&"function"==typeof o.optionListeners[t]&&(n=o.optionListeners[t].call(e[o.pluginName],i))}),n}};function G(e){var t=e.sortable,i=e.rootEl,n=e.name,a=e.targetEl,r=e.cloneEl,l=e.toEl,s=e.fromEl,d=e.oldIndex,c=e.newIndex,h=e.oldDraggableIndex,p=e.newDraggableIndex,g=e.originalEvent,m=e.putSortable,v=e.extraEventProperties;if(t=t||i&&i[Y]){var b,y=t.options,w="on"+n.charAt(0).toUpperCase()+n.substr(1);!window.CustomEvent||u||f?(b=document.createEvent("Event")).initEvent(n,!0,!0):b=new CustomEvent(n,{bubbles:!0,cancelable:!0}),b.to=l||i,b.from=s||i,b.item=a||i,b.clone=r,b.oldIndex=d,b.newIndex=c,b.oldDraggableIndex=h,b.newDraggableIndex=p,b.originalEvent=g,b.pullMode=m?m.lastPutMode:void 0;var E=o(o({},v),W.getEventProperties(n,t));for(var S in E)b[S]=E[S];i&&i.dispatchEvent(b),y[w]&&y[w].call(t,b)}}var V=["evt"],J=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=i.evt,a=s(i,V);W.pluginEvent.bind(Fe)(e,t,o({dragEl:Q,parentEl:ee,ghostEl:te,rootEl:ie,nextEl:ne,lastDownEl:oe,cloneEl:ae,cloneHidden:re,dragStarted:ye,putSortable:ue,activeSortable:Fe.active,originalEvent:n,oldIndex:le,oldDraggableIndex:de,newIndex:se,newDraggableIndex:ce,hideGhostForTarget:Ue,unhideGhostForTarget:Xe,cloneNowHidden:function(){re=!0},cloneNowShown:function(){re=!1},dispatchSortableEvent:function(e){Z({sortable:t,name:e,originalEvent:n})}},a))};function Z(e){G(o({putSortable:ue,cloneEl:ae,targetEl:Q,rootEl:ie,oldIndex:le,oldDraggableIndex:de,newIndex:se,newDraggableIndex:ce},e))}var Q,ee,te,ie,ne,oe,ae,re,le,se,de,ce,he,ue,fe,pe,ge,me,ve,be,ye,we,Ee,Se,De,Ce=!1,_e=!1,Le=[],Me=!1,Te=!1,Ie=[],xe=!1,ke=[],Ae="undefined"!=typeof document,Pe=m,Oe=f||u?"cssFloat":"float",qe=Ae&&!v&&!m&&"draggable"in document.createElement("div"),Ne=function(){if(Ae){if(u)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents}}(),Re=function(e,t){var i=M(e),n=parseInt(i.width)-parseInt(i.paddingLeft)-parseInt(i.paddingRight)-parseInt(i.borderLeftWidth)-parseInt(i.borderRightWidth),o=P(e,0,t),a=P(e,1,t),r=o&&M(o),l=a&&M(a),s=r&&parseInt(r.marginLeft)+parseInt(r.marginRight)+k(o).width,d=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+k(a).width;if("flex"===i.display)return"column"===i.flexDirection||"column-reverse"===i.flexDirection?"vertical":"horizontal";if("grid"===i.display)return i.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(o&&r.float&&"none"!==r.float){var c="left"===r.float?"left":"right";return!a||"both"!==l.clear&&l.clear!==c?"horizontal":"vertical"}return o&&("block"===r.display||"flex"===r.display||"table"===r.display||"grid"===r.display||s>=n&&"none"===i[Oe]||a&&"none"===i[Oe]&&s+d>n)?"vertical":"horizontal"},He=function(e){function t(e,i){return function(n,o,a,r){var l=n.options.group.name&&o.options.group.name&&n.options.group.name===o.options.group.name;if(null==e&&(i||l))return!0;if(null==e||!1===e)return!1;if(i&&"clone"===e)return e;if("function"==typeof e)return t(e(n,o,a,r),i)(n,o,a,r);var s=(i?n:o).options.group.name;return!0===e||"string"==typeof e&&e===s||e.join&&e.indexOf(s)>-1}}var i={},n=e.group;n&&"object"==a(n)||(n={name:n}),i.name=n.name,i.checkPull=t(n.pull,!0),i.checkPut=t(n.put),i.revertClone=n.revertClone,e.group=i},Ue=function(){!Ne&&te&&M(te,"display","none")},Xe=function(){!Ne&&te&&M(te,"display","")};Ae&&!v&&document.addEventListener("click",function(e){if(_e)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),_e=!1,!1},!0);var je=function(e){if(Q){var t=function(e,t){var i;return Le.some(function(n){var o=n[Y].options.emptyInsertThreshold;if(o&&!O(n)){var a=k(n),r=e>=a.left-o&&e<=a.right+o,l=t>=a.top-o&&t<=a.bottom+o;return r&&l?i=n:void 0}}),i}((e=e.touches?e.touches[0]:e).clientX,e.clientY);if(t){var i={};for(var n in e)e.hasOwnProperty(n)&&(i[n]=e[n]);i.target=i.rootEl=t,i.preventDefault=void 0,i.stopPropagation=void 0,t[Y]._onDragOver(i)}}},Ke=function(e){Q&&Q.parentNode[Y]._isOutsideThisEl(e.target)};function Fe(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=l({},t),e[Y]=this;var i={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Re(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==Fe.supportPointer&&"PointerEvent"in window&&!g,emptyInsertThreshold:5};for(var n in W.initializePlugins(this,e,i),i)!(n in t)&&(t[n]=i[n]);for(var o in He(t),this)"_"===o.charAt(0)&&"function"==typeof this[o]&&(this[o]=this[o].bind(this));this.nativeDraggable=!t.forceFallback&&qe,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?y(e,"pointerdown",this._onTapStart):(y(e,"mousedown",this._onTapStart),y(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(y(e,"dragover",this),y(e,"dragenter",this)),Le.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),l(this,B())}function Ye(e,t,i,n,o,a,r,l){var s,d,c=e[Y],h=c.options.onMove;return!window.CustomEvent||u||f?(s=document.createEvent("Event")).initEvent("move",!0,!0):s=new CustomEvent("move",{bubbles:!0,cancelable:!0}),s.to=t,s.from=e,s.dragged=i,s.draggedRect=n,s.related=o||t,s.relatedRect=a||k(t),s.willInsertAfter=l,s.originalEvent=r,e.dispatchEvent(s),h&&(d=h.call(c,s,r)),d}function Be(e){e.draggable=!1}function $e(){xe=!1}function ze(e,t,i,n,o,a,r,l){var s=n?e.clientY:e.clientX,d=n?i.height:i.width,c=n?i.top:i.left,h=n?i.bottom:i.right,u=!1;if(!r)if(l&&Se<d*o){if(!Me&&(1===Ee?s>c+d*a/2:s<h-d*a/2)&&(Me=!0),Me)u=!0;else if(1===Ee?s<c+Se:s>h-Se)return-Ee}else if(s>c+d*(1-o)/2&&s<h-d*(1-o)/2)return function(e){return q(Q)<q(e)?1:-1}(t);return(u=u||r)&&(s<c+d*a/2||s>h-d*a/2)?s>c+d/2?1:-1:0}function We(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,i=t.length,n=0;i--;)n+=t.charCodeAt(i);return n.toString(36)}function Ge(e){return setTimeout(e,0)}function Ve(e){return clearTimeout(e)}Fe.prototype={constructor:Fe,_isOutsideThisEl:function(e){this.el.contains(e)||e===this.el||(we=null)},_getDirection:function(e,t){return"function"==typeof this.options.direction?this.options.direction.call(this,e,t,Q):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,i=this.el,n=this.options,o=n.preventOnFilter,a=e.type,r=e.touches&&e.touches[0]||e.pointerType&&"touch"===e.pointerType&&e,l=(r||e).target,s=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||l,d=n.filter;if(function(e){ke.length=0;for(var t=e.getElementsByTagName("input"),i=t.length;i--;){var n=t[i];n.checked&&ke.push(n)}}(i),!Q&&!(/mousedown|pointerdown/.test(a)&&0!==e.button||n.disabled)&&!s.isContentEditable&&(this.nativeDraggable||!g||!l||"SELECT"!==l.tagName.toUpperCase())&&!((l=D(l,n.draggable,i,!1))&&l.animated||oe===l)){if(le=q(l),de=q(l,n.draggable),"function"==typeof d){if(d.call(this,e,l,this))return Z({sortable:t,rootEl:s,name:"filter",targetEl:l,toEl:i,fromEl:i}),J("filter",t,{evt:e}),void(o&&e.cancelable&&e.preventDefault())}else if(d&&(d=d.split(",").some(function(n){if(n=D(s,n.trim(),i,!1))return Z({sortable:t,rootEl:n,name:"filter",targetEl:l,fromEl:i,toEl:i}),J("filter",t,{evt:e}),!0})))return void(o&&e.cancelable&&e.preventDefault());n.handle&&!D(s,n.handle,i,!1)||this._prepareDragStart(e,r,l)}}},_prepareDragStart:function(e,t,i){var n,o=this,a=o.el,r=o.options,l=a.ownerDocument;if(i&&!Q&&i.parentNode===a){var s=k(i);if(ie=a,ee=(Q=i).parentNode,ne=Q.nextSibling,oe=i,he=r.group,Fe.dragged=Q,fe={target:Q,clientX:(t||e).clientX,clientY:(t||e).clientY},ve=fe.clientX-s.left,be=fe.clientY-s.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,Q.style["will-change"]="all",n=function(){J("delayEnded",o,{evt:e}),Fe.eventCanceled?o._onDrop():(o._disableDelayedDragEvents(),!p&&o.nativeDraggable&&(Q.draggable=!0),o._triggerDragStart(e,t),Z({sortable:o,name:"choose",originalEvent:e}),L(Q,r.chosenClass,!0))},r.ignore.split(",").forEach(function(e){I(Q,e.trim(),Be)}),y(l,"dragover",je),y(l,"mousemove",je),y(l,"touchmove",je),y(l,"mouseup",o._onDrop),y(l,"touchend",o._onDrop),y(l,"touchcancel",o._onDrop),p&&this.nativeDraggable&&(this.options.touchStartThreshold=4,Q.draggable=!0),J("delayStart",this,{evt:e}),!r.delay||r.delayOnTouchOnly&&!t||this.nativeDraggable&&(f||u))n();else{if(Fe.eventCanceled)return void this._onDrop();y(l,"mouseup",o._disableDelayedDrag),y(l,"touchend",o._disableDelayedDrag),y(l,"touchcancel",o._disableDelayedDrag),y(l,"mousemove",o._delayedDragTouchMoveHandler),y(l,"touchmove",o._delayedDragTouchMoveHandler),r.supportPointer&&y(l,"pointermove",o._delayedDragTouchMoveHandler),o._dragStartTimer=setTimeout(n,r.delay)}}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){Q&&Be(Q),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;w(e,"mouseup",this._disableDelayedDrag),w(e,"touchend",this._disableDelayedDrag),w(e,"touchcancel",this._disableDelayedDrag),w(e,"mousemove",this._delayedDragTouchMoveHandler),w(e,"touchmove",this._delayedDragTouchMoveHandler),w(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||"touch"==e.pointerType&&e,!this.nativeDraggable||t?this.options.supportPointer?y(document,"pointermove",this._onTouchMove):y(document,t?"touchmove":"mousemove",this._onTouchMove):(y(Q,"dragend",this),y(ie,"dragstart",this._onDragStart));try{document.selection?Ge(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch(e){}},_dragStarted:function(e,t){if(Ce=!1,ie&&Q){J("dragStarted",this,{evt:t}),this.nativeDraggable&&y(document,"dragover",Ke);var i=this.options;!e&&L(Q,i.dragClass,!1),L(Q,i.ghostClass,!0),Fe.active=this,e&&this._appendGhost(),Z({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(pe){this._lastX=pe.clientX,this._lastY=pe.clientY,Ue();for(var e=document.elementFromPoint(pe.clientX,pe.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(pe.clientX,pe.clientY))!==t;)t=e;if(Q.parentNode[Y]._isOutsideThisEl(e),t)do{if(t[Y]&&t[Y]._onDragOver({clientX:pe.clientX,clientY:pe.clientY,target:e,rootEl:t})&&!this.options.dragoverBubble)break;e=t}while(t=t.parentNode);Xe()}},_onTouchMove:function(e){if(fe){var t=this.options,i=t.fallbackTolerance,n=t.fallbackOffset,o=e.touches?e.touches[0]:e,a=te&&T(te,!0),r=te&&a&&a.a,l=te&&a&&a.d,s=Pe&&De&&N(De),d=(o.clientX-fe.clientX+n.x)/(r||1)+(s?s[0]-Ie[0]:0)/(r||1),c=(o.clientY-fe.clientY+n.y)/(l||1)+(s?s[1]-Ie[1]:0)/(l||1);if(!Fe.active&&!Ce){if(i&&Math.max(Math.abs(o.clientX-this._lastX),Math.abs(o.clientY-this._lastY))<i)return;this._onDragStart(e,!0)}if(te){a?(a.e+=d-(ge||0),a.f+=c-(me||0)):a={a:1,b:0,c:0,d:1,e:d,f:c};var h="matrix(".concat(a.a,",").concat(a.b,",").concat(a.c,",").concat(a.d,",").concat(a.e,",").concat(a.f,")");M(te,"webkitTransform",h),M(te,"mozTransform",h),M(te,"msTransform",h),M(te,"transform",h),ge=d,me=c,pe=o}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!te){var e=this.options.fallbackOnBody?document.body:ie,t=k(Q,!0,Pe,!0,e),i=this.options;if(Pe){for(De=e;"static"===M(De,"position")&&"none"===M(De,"transform")&&De!==document;)De=De.parentNode;De!==document.body&&De!==document.documentElement?(De===document&&(De=x()),t.top+=De.scrollTop,t.left+=De.scrollLeft):De=x(),Ie=N(De)}L(te=Q.cloneNode(!0),i.ghostClass,!1),L(te,i.fallbackClass,!0),L(te,i.dragClass,!0),M(te,"transition",""),M(te,"transform",""),M(te,"box-sizing","border-box"),M(te,"margin",0),M(te,"top",t.top),M(te,"left",t.left),M(te,"width",t.width),M(te,"height",t.height),M(te,"opacity","0.8"),M(te,"position",Pe?"absolute":"fixed"),M(te,"zIndex","100000"),M(te,"pointerEvents","none"),Fe.ghost=te,e.appendChild(te),M(te,"transform-origin",ve/parseInt(te.style.width)*100+"% "+be/parseInt(te.style.height)*100+"%")}},_onDragStart:function(e,t){var i=this,n=e.dataTransfer,o=i.options;J("dragStart",this,{evt:e}),Fe.eventCanceled?this._onDrop():(J("setupClone",this),Fe.eventCanceled||((ae=j(Q)).removeAttribute("id"),ae.draggable=!1,ae.style["will-change"]="",this._hideClone(),L(ae,this.options.chosenClass,!1),Fe.clone=ae),i.cloneId=Ge(function(){J("clone",i),Fe.eventCanceled||(i.options.removeCloneOnHide||ie.insertBefore(ae,Q),i._hideClone(),Z({sortable:i,name:"clone"}))}),!t&&L(Q,o.dragClass,!0),t?(_e=!0,i._loopId=setInterval(i._emulateDragOver,50)):(w(document,"mouseup",i._onDrop),w(document,"touchend",i._onDrop),w(document,"touchcancel",i._onDrop),n&&(n.effectAllowed="move",o.setData&&o.setData.call(i,n,Q)),y(document,"drop",i),M(Q,"transform","translateZ(0)")),Ce=!0,i._dragStartId=Ge(i._dragStarted.bind(i,t,e)),y(document,"selectstart",i),ye=!0,g&&M(document.body,"user-select","none"))},_onDragOver:function(e){var t,i,n,a,r=this.el,l=e.target,s=this.options,d=s.group,c=Fe.active,h=he===d,u=s.sort,f=ue||c,p=this,g=!1;if(!xe){if(void 0!==e.preventDefault&&e.cancelable&&e.preventDefault(),l=D(l,s.draggable,r,!0),H("dragOver"),Fe.eventCanceled)return g;if(Q.contains(e.target)||l.animated&&l.animatingX&&l.animatingY||p._ignoreWhileAnimating===l)return j(!1);if(_e=!1,c&&!s.disabled&&(h?u||(n=ee!==ie):ue===this||(this.lastPutMode=he.checkPull(this,c,Q,e))&&d.checkPut(this,c,Q,e))){if(a="vertical"===this._getDirection(e,l),t=k(Q),H("dragOverValid"),Fe.eventCanceled)return g;if(n)return ee=ie,U(),this._hideClone(),H("revert"),Fe.eventCanceled||(ne?ie.insertBefore(Q,ne):ie.appendChild(Q)),j(!0);var m=O(r,s.draggable);if(!m||function(e,t,i){var n=k(O(i.el,i.options.draggable));return t?e.clientX>n.right+10||e.clientX<=n.right&&e.clientY>n.bottom&&e.clientX>=n.left:e.clientX>n.right&&e.clientY>n.top||e.clientX<=n.right&&e.clientY>n.bottom+10}(e,a,this)&&!m.animated){if(m===Q)return j(!1);if(m&&r===e.target&&(l=m),l&&(i=k(l)),!1!==Ye(ie,r,Q,t,l,i,e,!!l))return U(),m&&m.nextSibling?r.insertBefore(Q,m.nextSibling):r.appendChild(Q),ee=r,K(),j(!0)}else if(m&&function(e,t,i){var n=k(P(i.el,0,i.options,!0));return t?e.clientX<n.left-10||e.clientY<n.top&&e.clientX<n.right:e.clientY<n.top-10||e.clientY<n.bottom&&e.clientX<n.left}(e,a,this)){var v=P(r,0,s,!0);if(v===Q)return j(!1);if(i=k(l=v),!1!==Ye(ie,r,Q,t,l,i,e,!1))return U(),r.insertBefore(Q,v),ee=r,K(),j(!0)}else if(l.parentNode===r){i=k(l);var b,y,w,E=Q.parentNode!==r,S=!function(e,t,i){var n=i?e.left:e.top,o=i?e.right:e.bottom,a=i?e.width:e.height,r=i?t.left:t.top,l=i?t.right:t.bottom,s=i?t.width:t.height;return n===r||o===l||n+a/2===r+s/2}(Q.animated&&Q.toRect||t,l.animated&&l.toRect||i,a),C=a?"top":"left",_=A(l,"top","top")||A(Q,"top","top"),T=_?_.scrollTop:void 0;if(we!==l&&(y=i[C],Me=!1,Te=!S&&s.invertSwap||E),0!==(b=ze(e,l,i,a,S?1:s.swapThreshold,null==s.invertedSwapThreshold?s.swapThreshold:s.invertedSwapThreshold,Te,we===l))){var I=q(Q);do{I-=b,w=ee.children[I]}while(w&&("none"===M(w,"display")||w===te))}if(0===b||w===l)return j(!1);we=l,Ee=b;var x=l.nextElementSibling,N=!1,R=Ye(ie,r,Q,t,l,i,e,N=1===b);if(!1!==R)return 1!==R&&-1!==R||(N=1===R),xe=!0,setTimeout($e,30),U(),N&&!x?r.appendChild(Q):l.parentNode.insertBefore(Q,N?x:l),_&&X(_,0,T-_.scrollTop),ee=Q.parentNode,void 0===y||Te||(Se=Math.abs(y-k(l)[C])),K(),j(!0)}if(r.contains(Q))return j(!1)}return!1}function H(s,d){J(s,p,o({evt:e,isOwner:h,axis:a?"vertical":"horizontal",revert:n,dragRect:t,targetRect:i,canSort:u,fromSortable:f,target:l,completed:j,onMove:function(i,n){return Ye(ie,r,Q,t,i,k(i),e,n)},changed:K},d))}function U(){H("dragOverAnimationCapture"),p.captureAnimationState(),p!==f&&f.captureAnimationState()}function j(t){return H("dragOverCompleted",{insertion:t}),t&&(h?c._hideClone():c._showClone(p),p!==f&&(L(Q,ue?ue.options.ghostClass:c.options.ghostClass,!1),L(Q,s.ghostClass,!0)),ue!==p&&p!==Fe.active?ue=p:p===Fe.active&&ue&&(ue=null),f===p&&(p._ignoreWhileAnimating=l),p.animateAll(function(){H("dragOverAnimationComplete"),p._ignoreWhileAnimating=null}),p!==f&&(f.animateAll(),f._ignoreWhileAnimating=null)),(l===Q&&!Q.animated||l===r&&!l.animated)&&(we=null),s.dragoverBubble||e.rootEl||l===document||(Q.parentNode[Y]._isOutsideThisEl(e.target),!t&&je(e)),!s.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),g=!0}function K(){se=q(Q),ce=q(Q,s.draggable),Z({sortable:p,name:"change",toEl:r,newIndex:se,newDraggableIndex:ce,originalEvent:e})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){w(document,"mousemove",this._onTouchMove),w(document,"touchmove",this._onTouchMove),w(document,"pointermove",this._onTouchMove),w(document,"dragover",je),w(document,"mousemove",je),w(document,"touchmove",je)},_offUpEvents:function(){var e=this.el.ownerDocument;w(e,"mouseup",this._onDrop),w(e,"touchend",this._onDrop),w(e,"pointerup",this._onDrop),w(e,"touchcancel",this._onDrop),w(document,"selectstart",this)},_onDrop:function(e){var t=this.el,i=this.options;se=q(Q),ce=q(Q,i.draggable),J("drop",this,{evt:e}),ee=Q&&Q.parentNode,se=q(Q),ce=q(Q,i.draggable),Fe.eventCanceled||(Ce=!1,Te=!1,Me=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Ve(this.cloneId),Ve(this._dragStartId),this.nativeDraggable&&(w(document,"drop",this),w(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),g&&M(document.body,"user-select",""),M(Q,"transform",""),e&&(ye&&(e.cancelable&&e.preventDefault(),!i.dropBubble&&e.stopPropagation()),te&&te.parentNode&&te.parentNode.removeChild(te),(ie===ee||ue&&"clone"!==ue.lastPutMode)&&ae&&ae.parentNode&&ae.parentNode.removeChild(ae),Q&&(this.nativeDraggable&&w(Q,"dragend",this),Be(Q),Q.style["will-change"]="",ye&&!Ce&&L(Q,ue?ue.options.ghostClass:this.options.ghostClass,!1),L(Q,this.options.chosenClass,!1),Z({sortable:this,name:"unchoose",toEl:ee,newIndex:null,newDraggableIndex:null,originalEvent:e}),ie!==ee?(se>=0&&(Z({rootEl:ee,name:"add",toEl:ee,fromEl:ie,originalEvent:e}),Z({sortable:this,name:"remove",toEl:ee,originalEvent:e}),Z({rootEl:ee,name:"sort",toEl:ee,fromEl:ie,originalEvent:e}),Z({sortable:this,name:"sort",toEl:ee,originalEvent:e})),ue&&ue.save()):se!==le&&se>=0&&(Z({sortable:this,name:"update",toEl:ee,originalEvent:e}),Z({sortable:this,name:"sort",toEl:ee,originalEvent:e})),Fe.active&&(null!=se&&-1!==se||(se=le,ce=de),Z({sortable:this,name:"end",toEl:ee,originalEvent:e}),this.save())))),this._nulling()},_nulling:function(){J("nulling",this),ie=Q=ee=te=ne=ae=oe=re=fe=pe=ye=se=ce=le=de=we=Ee=ue=he=Fe.dragged=Fe.ghost=Fe.clone=Fe.active=null,ke.forEach(function(e){e.checked=!0}),ke.length=ge=me=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":Q&&(this._onDragOver(e),function(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}(e));break;case"selectstart":e.preventDefault()}},toArray:function(){for(var e,t=[],i=this.el.children,n=0,o=i.length,a=this.options;n<o;n++)D(e=i[n],a.draggable,this.el,!1)&&t.push(e.getAttribute(a.dataIdAttr)||We(e));return t},sort:function(e,t){var i={},n=this.el;this.toArray().forEach(function(e,t){var o=n.children[t];D(o,this.options.draggable,n,!1)&&(i[e]=o)},this),t&&this.captureAnimationState(),e.forEach(function(e){i[e]&&(n.removeChild(i[e]),n.appendChild(i[e]))}),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return D(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var i=this.options;if(void 0===t)return i[e];var n=W.modifyOption(this,e,t);i[e]=void 0!==n?n:t,"group"===e&&He(i)},destroy:function(){J("destroy",this);var e=this.el;e[Y]=null,w(e,"mousedown",this._onTapStart),w(e,"touchstart",this._onTapStart),w(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(w(e,"dragover",this),w(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(e){e.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Le.splice(Le.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!re){if(J("hideClone",this),Fe.eventCanceled)return;M(ae,"display","none"),this.options.removeCloneOnHide&&ae.parentNode&&ae.parentNode.removeChild(ae),re=!0}},_showClone:function(e){if("clone"===e.lastPutMode){if(re){if(J("showClone",this),Fe.eventCanceled)return;Q.parentNode!=ie||this.options.group.revertClone?ne?ie.insertBefore(ae,ne):ie.appendChild(ae):ie.insertBefore(ae,Q),this.options.group.revertClone&&this.animate(Q,ae),M(ae,"display",""),re=!1}}else this._hideClone()}},Ae&&y(document,"touchmove",function(e){(Fe.active||Ce)&&e.cancelable&&e.preventDefault()}),Fe.utils={on:y,off:w,css:M,find:I,is:function(e,t){return!!D(e,t,e,!1)},extend:function(e,t){if(e&&t)for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e},throttle:U,closest:D,toggleClass:L,clone:j,index:q,nextTick:Ge,cancelNextTick:Ve,detectDirection:Re,getChild:P},Fe.get=function(e){return e[Y]},Fe.mount=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];t[0].constructor===Array&&(t=t[0]),t.forEach(function(e){if(!e.prototype||!e.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(e));e.utils&&(Fe.utils=o(o({},Fe.utils),e.utils)),W.mount(e)})},Fe.create=function(e,t){return new Fe(e,t)},Fe.version="1.15.0";var Je,Ze,Qe,et,tt,it,nt=[],ot=!1;function at(){nt.forEach(function(e){clearInterval(e.pid)}),nt=[]}function rt(){clearInterval(it)}var lt,st=U(function(e,t,i,n){if(t.scroll){var o,a=(e.touches?e.touches[0]:e).clientX,r=(e.touches?e.touches[0]:e).clientY,l=t.scrollSensitivity,s=t.scrollSpeed,d=x(),c=!1;Ze!==i&&(Ze=i,at(),Je=t.scroll,o=t.scrollFn,!0===Je&&(Je=R(i,!0)));var h=0,u=Je;do{var f=u,p=k(f),g=p.top,m=p.bottom,v=p.left,b=p.right,y=p.width,w=p.height,E=void 0,S=void 0,D=f.scrollWidth,C=f.scrollHeight,_=M(f),L=f.scrollLeft,T=f.scrollTop;f===d?(E=y<D&&("auto"===_.overflowX||"scroll"===_.overflowX||"visible"===_.overflowX),S=w<C&&("auto"===_.overflowY||"scroll"===_.overflowY||"visible"===_.overflowY)):(E=y<D&&("auto"===_.overflowX||"scroll"===_.overflowX),S=w<C&&("auto"===_.overflowY||"scroll"===_.overflowY));var I=E&&(Math.abs(b-a)<=l&&L+y<D)-(Math.abs(v-a)<=l&&!!L),A=S&&(Math.abs(m-r)<=l&&T+w<C)-(Math.abs(g-r)<=l&&!!T);if(!nt[h])for(var P=0;P<=h;P++)nt[P]||(nt[P]={});nt[h].vx==I&&nt[h].vy==A&&nt[h].el===f||(nt[h].el=f,nt[h].vx=I,nt[h].vy=A,clearInterval(nt[h].pid),0==I&&0==A||(c=!0,nt[h].pid=setInterval(function(){n&&0===this.layer&&Fe.active._onTouchMove(tt);var t=nt[this.layer].vy?nt[this.layer].vy*s:0,i=nt[this.layer].vx?nt[this.layer].vx*s:0;"function"==typeof o&&"continue"!==o.call(Fe.dragged.parentNode[Y],i,t,e,tt,nt[this.layer].el)||X(nt[this.layer].el,i,t)}.bind({layer:h}),24))),h++}while(t.bubbleScroll&&u!==d&&(u=R(u,!1)));ot=c}},30),dt=function(e){var t=e.originalEvent,i=e.putSortable,n=e.dragEl,o=e.activeSortable,a=e.dispatchSortableEvent,r=e.hideGhostForTarget,l=e.unhideGhostForTarget;if(t){var s=i||o;r();var d=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,c=document.elementFromPoint(d.clientX,d.clientY);l(),s&&!s.el.contains(c)&&(a("spill"),this.onSpill({dragEl:n,putSortable:i}))}};function ct(){}function ht(){}ct.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,i=e.putSortable;this.sortable.captureAnimationState(),i&&i.captureAnimationState();var n=P(this.sortable.el,this.startIndex,this.options);n?this.sortable.el.insertBefore(t,n):this.sortable.el.appendChild(t),this.sortable.animateAll(),i&&i.animateAll()},drop:dt},l(ct,{pluginName:"revertOnSpill"}),ht.prototype={onSpill:function(e){var t=e.dragEl,i=e.putSortable||this.sortable;i.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),i.animateAll()},drop:dt},l(ht,{pluginName:"removeOnSpill"});var ut,ft,pt,gt,mt,vt=[],bt=[],yt=!1,wt=!1,Et=!1;function St(e,t){bt.forEach(function(i,n){var o=t.children[i.sortableIndex+(e?Number(n):0)];o?t.insertBefore(i,o):t.appendChild(i)})}function Dt(){vt.forEach(function(e){e!==pt&&e.parentNode&&e.parentNode.removeChild(e)})}Fe.mount(new function(){function e(){for(var e in this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===e.charAt(0)&&"function"==typeof this[e]&&(this[e]=this[e].bind(this))}return e.prototype={dragStarted:function(e){var t=e.originalEvent;this.sortable.nativeDraggable?y(document,"dragover",this._handleAutoScroll):this.options.supportPointer?y(document,"pointermove",this._handleFallbackAutoScroll):t.touches?y(document,"touchmove",this._handleFallbackAutoScroll):y(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var t=e.originalEvent;this.options.dragOverBubble||t.rootEl||this._handleAutoScroll(t)},drop:function(){this.sortable.nativeDraggable?w(document,"dragover",this._handleAutoScroll):(w(document,"pointermove",this._handleFallbackAutoScroll),w(document,"touchmove",this._handleFallbackAutoScroll),w(document,"mousemove",this._handleFallbackAutoScroll)),rt(),at(),clearTimeout(C),C=void 0},nulling:function(){tt=Ze=Je=ot=it=Qe=et=null,nt.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,t){var i=this,n=(e.touches?e.touches[0]:e).clientX,o=(e.touches?e.touches[0]:e).clientY,a=document.elementFromPoint(n,o);if(tt=e,t||this.options.forceAutoScrollFallback||f||u||g){st(e,this.options,a,t);var r=R(a,!0);!ot||it&&n===Qe&&o===et||(it&&rt(),it=setInterval(function(){var a=R(document.elementFromPoint(n,o),!0);a!==r&&(r=a,at()),st(e,i.options,a,t)},10),Qe=n,et=o)}else{if(!this.options.bubbleScroll||R(a,!0)===x())return void at();st(e,this.options,R(a,!1),!1)}}},l(e,{pluginName:"scroll",initializeByDefault:!0})}),Fe.mount(ht,ct),Fe.mount(new function(){function e(){this.defaults={swapClass:"sortable-swap-highlight"}}return e.prototype={dragStart:function(e){var t=e.dragEl;lt=t},dragOverValid:function(e){var t=e.completed,i=e.target,n=e.onMove,o=e.activeSortable,a=e.changed,r=e.cancel;if(o.options.swap){var l=this.sortable.el,s=this.options;if(i&&i!==l){var d=lt;!1!==n(i)?(L(i,s.swapClass,!0),lt=i):lt=null,d&&d!==lt&&L(d,s.swapClass,!1)}a(),t(!0),r()}},drop:function(e){var t=e.activeSortable,i=e.putSortable,n=e.dragEl,o=i||this.sortable,a=this.options;lt&&L(lt,a.swapClass,!1),lt&&(a.swap||i&&i.options.swap)&&n!==lt&&(o.captureAnimationState(),o!==t&&t.captureAnimationState(),function(e,t){var i,n,o=e.parentNode,a=t.parentNode;o&&a&&!o.isEqualNode(t)&&!a.isEqualNode(e)&&(i=q(e),n=q(t),o.isEqualNode(a)&&i<n&&n++,o.insertBefore(t,o.children[i]),a.insertBefore(e,a.children[n]))}(n,lt),o.animateAll(),o!==t&&t.animateAll())},nulling:function(){lt=null}},l(e,{pluginName:"swap",eventProperties:function(){return{swapItem:lt}}})}),Fe.mount(new function(){function e(e){for(var t in this)"_"===t.charAt(0)&&"function"==typeof this[t]&&(this[t]=this[t].bind(this));e.options.avoidImplicitDeselect||(e.options.supportPointer?y(document,"pointerup",this._deselectMultiDrag):(y(document,"mouseup",this._deselectMultiDrag),y(document,"touchend",this._deselectMultiDrag))),y(document,"keydown",this._checkKeyDown),y(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,avoidImplicitDeselect:!1,setData:function(t,i){var n="";vt.length&&ft===e?vt.forEach(function(e,t){n+=(t?", ":"")+e.textContent}):n=i.textContent,t.setData("Text",n)}}}return e.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(e){var t=e.dragEl;pt=t},delayEnded:function(){this.isMultiDrag=~vt.indexOf(pt)},setupClone:function(e){var t=e.sortable,i=e.cancel;if(this.isMultiDrag){for(var n=0;n<vt.length;n++)bt.push(j(vt[n])),bt[n].sortableIndex=vt[n].sortableIndex,bt[n].draggable=!1,bt[n].style["will-change"]="",L(bt[n],this.options.selectedClass,!1),vt[n]===pt&&L(bt[n],this.options.chosenClass,!1);t._hideClone(),i()}},clone:function(e){var t=e.sortable,i=e.rootEl,n=e.dispatchSortableEvent,o=e.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||vt.length&&ft===t&&(St(!0,i),n("clone"),o()))},showClone:function(e){var t=e.cloneNowShown,i=e.rootEl,n=e.cancel;this.isMultiDrag&&(St(!1,i),bt.forEach(function(e){M(e,"display","")}),t(),mt=!1,n())},hideClone:function(e){var t=this,i=(e.sortable,e.cloneNowHidden),n=e.cancel;this.isMultiDrag&&(bt.forEach(function(e){M(e,"display","none"),t.options.removeCloneOnHide&&e.parentNode&&e.parentNode.removeChild(e)}),i(),mt=!0,n())},dragStartGlobal:function(e){e.sortable,!this.isMultiDrag&&ft&&ft.multiDrag._deselectMultiDrag(),vt.forEach(function(e){e.sortableIndex=q(e)}),vt=vt.sort(function(e,t){return e.sortableIndex-t.sortableIndex}),Et=!0},dragStarted:function(e){var t=this,i=e.sortable;if(this.isMultiDrag){if(this.options.sort&&(i.captureAnimationState(),this.options.animation)){vt.forEach(function(e){e!==pt&&M(e,"position","absolute")});var n=k(pt,!1,!0,!0);vt.forEach(function(e){e!==pt&&K(e,n)}),wt=!0,yt=!0}i.animateAll(function(){wt=!1,yt=!1,t.options.animation&&vt.forEach(function(e){F(e)}),t.options.sort&&Dt()})}},dragOver:function(e){var t=e.target,i=e.completed,n=e.cancel;wt&&~vt.indexOf(t)&&(i(!1),n())},revert:function(e){var t=e.fromSortable,i=e.rootEl,n=e.sortable,o=e.dragRect;vt.length>1&&(vt.forEach(function(e){n.addAnimationState({target:e,rect:wt?k(e):o}),F(e),e.fromRect=o,t.removeAnimationState(e)}),wt=!1,function(e,t){vt.forEach(function(i,n){var o=t.children[i.sortableIndex+(e?Number(n):0)];o?t.insertBefore(i,o):t.appendChild(i)})}(!this.options.removeCloneOnHide,i))},dragOverCompleted:function(e){var t=e.sortable,i=e.isOwner,n=e.insertion,o=e.activeSortable,a=e.parentEl,r=e.putSortable,l=this.options;if(n){if(i&&o._hideClone(),yt=!1,l.animation&&vt.length>1&&(wt||!i&&!o.options.sort&&!r)){var s=k(pt,!1,!0,!0);vt.forEach(function(e){e!==pt&&(K(e,s),a.appendChild(e))}),wt=!0}if(!i)if(wt||Dt(),vt.length>1){var d=mt;o._showClone(t),o.options.animation&&!mt&&d&&bt.forEach(function(e){o.addAnimationState({target:e,rect:gt}),e.fromRect=gt,e.thisAnimationDuration=null})}else o._showClone(t)}},dragOverAnimationCapture:function(e){var t=e.dragRect,i=e.isOwner,n=e.activeSortable;if(vt.forEach(function(e){e.thisAnimationDuration=null}),n.options.animation&&!i&&n.multiDrag.isMultiDrag){gt=l({},t);var o=T(pt,!0);gt.top-=o.f,gt.left-=o.e}},dragOverAnimationComplete:function(){wt&&(wt=!1,Dt())},drop:function(e){var t=e.originalEvent,i=e.rootEl,n=e.parentEl,o=e.sortable,a=e.dispatchSortableEvent,r=e.oldIndex,l=e.putSortable,s=l||this.sortable;if(t){var d=this.options,c=n.children;if(!Et)if(d.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),L(pt,d.selectedClass,!~vt.indexOf(pt)),~vt.indexOf(pt))vt.splice(vt.indexOf(pt),1),ut=null,G({sortable:o,rootEl:i,name:"deselect",targetEl:pt,originalEvent:t});else{if(vt.push(pt),G({sortable:o,rootEl:i,name:"select",targetEl:pt,originalEvent:t}),t.shiftKey&&ut&&o.el.contains(ut)){var h,u,f=q(ut),p=q(pt);if(~f&&~p&&f!==p)for(p>f?(u=f,h=p):(u=p,h=f+1);u<h;u++)~vt.indexOf(c[u])||(L(c[u],d.selectedClass,!0),vt.push(c[u]),G({sortable:o,rootEl:i,name:"select",targetEl:c[u],originalEvent:t}))}else ut=pt;ft=s}if(Et&&this.isMultiDrag){if(wt=!1,(n[Y].options.sort||n!==i)&&vt.length>1){var g=k(pt),m=q(pt,":not(."+this.options.selectedClass+")");if(!yt&&d.animation&&(pt.thisAnimationDuration=null),s.captureAnimationState(),!yt&&(d.animation&&(pt.fromRect=g,vt.forEach(function(e){if(e.thisAnimationDuration=null,e!==pt){var t=wt?k(e):g;e.fromRect=t,s.addAnimationState({target:e,rect:t})}})),Dt(),vt.forEach(function(e){c[m]?n.insertBefore(e,c[m]):n.appendChild(e),m++}),r===q(pt))){var v=!1;vt.forEach(function(e){e.sortableIndex===q(e)||(v=!0)}),v&&a("update")}vt.forEach(function(e){F(e)}),s.animateAll()}ft=s}(i===n||l&&"clone"!==l.lastPutMode)&&bt.forEach(function(e){e.parentNode&&e.parentNode.removeChild(e)})}},nullingGlobal:function(){this.isMultiDrag=Et=!1,bt.length=0},destroyGlobal:function(){this._deselectMultiDrag(),w(document,"pointerup",this._deselectMultiDrag),w(document,"mouseup",this._deselectMultiDrag),w(document,"touchend",this._deselectMultiDrag),w(document,"keydown",this._checkKeyDown),w(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(e){if(!(void 0!==Et&&Et||ft!==this.sortable||e&&D(e.target,this.options.draggable,this.sortable.el,!1)||e&&0!==e.button))for(;vt.length;){var t=vt[0];L(t,this.options.selectedClass,!1),vt.shift(),G({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:t,originalEvent:e})}},_checkKeyDown:function(e){e.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(e){e.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},l(e,{pluginName:"multiDrag",utils:{select:function(e){var t=e.parentNode[Y];t&&t.options.multiDrag&&!~vt.indexOf(e)&&(ft&&ft!==t&&(ft.multiDrag._deselectMultiDrag(),ft=t),L(e,t.options.selectedClass,!0),vt.push(e))},deselect:function(e){var t=e.parentNode[Y],i=vt.indexOf(e);t&&t.options.multiDrag&&~i&&(L(e,t.options.selectedClass,!1),vt.splice(i,1))}},eventProperties:function(){var e=this,t=[],i=[];return vt.forEach(function(n){var o;t.push({multiDragElement:n,index:n.sortableIndex}),o=wt&&n!==pt?-1:wt?q(n,":not(."+e.options.selectedClass+")"):q(n),i.push({multiDragElement:n,index:o})}),{items:d(vt),clones:[].concat(bt),oldIndicies:t,newIndicies:i}},optionListeners:{multiDragKey:function(e){return"ctrl"===(e=e.toLowerCase())?e="Control":e.length>1&&(e=e.charAt(0).toUpperCase()+e.substr(1)),e}}})});const Ct=Fe}}]);
//# sourceMappingURL=409.b4bffaf2.js.map