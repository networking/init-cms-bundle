/*! For license information please see pageAdmin.ce735d0f.js.LICENSE.txt */
(()=>{"use strict";var __webpack_modules__={8266(e,t,a){a.d(t,{x:()=>d});var o=a(443),n=a(709),s=a(3621),r=a(1228),i=a(5022),l=a(6467),c=(a(5458),a(4692));window.axiosConfig={headers:{"X-Requested-With":"XMLHttpRequest"}},c.fn.select2.defaults.set("theme","bootstrap5"),c.fn.select2.defaults.set("width","100%"),c.fn.select2.defaults.set("selectionCssClass",":all:");const d={listDialog:null,routing:null,translations:null,collectionCounters:[],debug:!1,async getTranslator(){return this.translations||(this.translations=l.e.load()),this.translations},async init(e){this.debug=e,this.translations=await this.getTranslator(),n.A.init(),o.A.init(),s.A.init(),r.A.init(),this.initLinkDialogs(),this.initializeDatePickers(),this.initializeDateTimePickers(),this.initSelect2(),this.initCkeditor(),this.initCollectionType(),this.initTabs()},initTabs(e){e??=document.body;[].slice.call(document.querySelectorAll('[data-kt-tabs="true"]')).forEach(t=>{if("1"===t.getAttribute("data-kt-initialized"))return;const a=e.querySelector(`a[href="${t.dataset.activeTab}"]`),o=new bootstrap.Tab(a),n=t.dataset.tabField;o.show();const s=document.querySelectorAll('a[data-bs-toggle="tab"]'),r=document.querySelector(n);s.forEach(e=>{e.addEventListener("shown.bs.tab",e=>{r.value=e.target.dataset.tabIndex})})})},initToolTips(e){e??=document.body;[].slice.call(e.querySelectorAll('[data-bs-toggle="tooltip"]')).map(e=>new bootstrap.Tooltip(e))},initLinkDialogs(){KTUtil.on(document.body,".dialog-link","click",e=>{this.createLinkDialog(e)})},createLinkDialog(e){e.preventDefault(),e.stopPropagation(),this.initializeDialog();let t=e.target;t.getAttribute("href")||(t=t.closest("a")),fetch(t.getAttribute("href"),{method:"GET",headers:{"X-Requested-With":"XMLHttpRequest"}}).then(e=>e.text()).then(e=>{document.querySelector("#list_dialog").querySelector(".modal-content").innerHTML=e,this.listDialog.show()})},initializeDialog(){this.listDialog||(this.listDialog=new bootstrap.Modal(document.querySelector("#list_dialog",{height:"auto",width:650,show:!1})))},initializeDatePickers(){document.querySelectorAll('[data-provider="datepicker"]').forEach(e=>{const t=e.dataset.dateFormat,a=e.dataset.dateLanguage;flatpickr(e,{dateFormat:t,locale:a,allowInput:!0})})},initializeDateTimePickers(){document.querySelectorAll('[data-provider="datetimepicker"]').forEach(e=>{const t=e.dataset.dateFormat,a=e.dataset.dateLanguage;flatpickr(e,{dateFormat:t,locale:a,enableTime:!0,allowInput:!0,time_24hr:!0})})},initSelect2(){[].slice.call(document.querySelectorAll('[data-control="select2"], [data-kt-select2="true"]')).forEach(e=>{if("1"===e.getAttribute("data-kt-initialized"))return;const t=c(`#${e.id}`),a=t.parent();t.select2({dropdownParent:a}).on("select2:select",e=>{const t=new Event("change",{bubbles:!0});e.target.dispatchEvent(t)}),e.setAttribute("data-kt-initialized","1")})},initCkeditor(){[].slice.call(document.querySelectorAll('[data-control="ckeditor"], [data-kt-ckeditor="true"]')).forEach(e=>{if("1"===e.getAttribute("data-kt-initialized"))return;const t=e.getAttribute("id"),a=JSON.parse(e.dataset.config),o=JSON.parse(e.dataset.plugins),n=JSON.parse(e.dataset.templates),s=JSON.parse(e.dataset.styles);JSON.parse(e.dataset.filebrowser),CKEDITOR.instances[t]&&(CKEDITOR.instances[t].destroy(!0),delete CKEDITOR.instances[t]);for(const[e,t]of Object.entries(o))CKEDITOR.plugins.addExternal(e,t.path,t.filename);for(const[e,t]of Object.entries(s))null===CKEDITOR.stylesSet.get(e)&&CKEDITOR.stylesSet.add(e,t);for(const[e,t]of Object.entries(n))CKEDITOR.addTemplates(e,t);const r={};for(const[e,t]of Object.entries(a))"filebrowserBrowseRoute"!==e?"filebrowserImageBrowseRoute"!==e?"filebrowserUploadRoute"!==e?"filebrowserImageUploadRoute"!==e?"filebrowserBrowseRouteParameters"!==e&&"filebrowserImageBrowseRouteParameters"!==e&&"filebrowserUploadRouteParameters"!==e&&"filebrowserImageUploadRouteParameters"!==e&&(r[e]=t):r.filebrowserImageUploadUrl=CMSRouting.generate(t,a.filebrowserImageUploadRouteParameters):r.filebrowserUploadUrl=CMSRouting.generate(t,a.filebrowserUploadRouteParameters):r.filebrowserImageBrowseUrl=CMSRouting.generate(t,a.filebrowserImageBrowseRouteParameters):r.filebrowserBrowseUrl=CMSRouting.generate(t,a.filebrowserBrowseRouteParameters);CKEDITOR.disableAutoInline=!0;CKEDITOR.replace(t,r).on("change",t=>{e.value=t.editor.getData()}),e.setAttribute("data-kt-initialized","1")})},initCollectionType(){document.querySelectorAll("[data-collection-list]").forEach(e=>{this.setupCollectionType(e)})},setupCollectionType(e){e.dataset.cmsCollectionType||(i.A.init(),KTUtil.on(e,"[data-collection-add-btn]","click",e=>{e.preventDefault();let t=e.target;t.classList.contains("btn")||(t=t.closest(".btn"));let a=0;const o=t.dataset.collectionAddBtn,n=document.querySelector(`#${o}`),s=[...document.querySelectorAll(`div[id^="${n.id}_"]`)].pop();s&&(a=parseInt(s.id.replace(`${n.id}_`,"")),a+=1);let r=n.dataset.prototype;const i=n.dataset.prototypeName||"__name__",l=new RegExp(`${n.id}_${i}`,"g");r=r.replace(l,`${n.id}_${a}`);const c=n.id.split("_"),_=new RegExp(`${c[c.length-1]}\\]\\[${i}`,"g");r=r.replace(_,`${c[c.length-1]}][${a}`),n.insertAdjacentHTML("beforeend",r),t.dispatchEvent(new CustomEvent("afterAddItem",{bubbles:!0,detail:{proto:r,counter:a}})),d.initSpecialFields()}),KTUtil.on(e,"[data-collection-remove-btn]","click",e=>{e.preventDefault();let t=e.target;t.classList.contains("btn")||(t=t.closest(".btn")),t.closest(".collection-item").remove(),t.dispatchEvent(new CustomEvent("afterRemoveItem",{bubbles:!0}))}),e.dataset.cmsCollectionType=1)},initSpecialFields(){n.A.init(),o.A.init(),s.A.init(),this.initializeDatePickers(),this.initializeDateTimePickers(),this.createSelect2(),this.initCkeditor(),this.initCollectionType()},log(...e){if(!this.debug)return;const t=`[Init CMS] ${Array.prototype.join.call(e,", ")}`;window.console?.log?window.console.log(t):window.opera?.postError&&window.opera.postError(t)},error(...e){if(!this.debug)return;const t=`[Init CMS] ${Array.prototype.join.call(e,", ")}`;window.console?.error?window.console.error(t):window.opera?.postError&&window.opera.postError(t)},createInitCmsMessageBox(e,t,a=2e3,o="toastr-top-right"){toastr.options={closeButton:!0,debug:!1,newestOnTop:!0,progressBar:!1,positionClass:o,preventDuplicates:!0,onclick:null,showDuration:"2000",hideDuration:"1000",timeOut:a,extendedTimeOut:"1000",showEasing:"linear",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"},"success"===e?toastr.success(t):"warning"===e?toastr.warning(t):"error"===e||"danger"===e?toastr.error(t):toastr.info(t)},createSelect2(){[].slice.call(document.querySelectorAll('[data-control="select2"], [data-kt-select2="true"]')).forEach(e=>{if("1"===e.getAttribute("data-kt-initialized"))return;const t={dir:document.body.getAttribute("direction")};if(e.closest(".modal")&&(t.dropdownParent=e.closest(".modal")),"true"===e.getAttribute("data-hide-search")&&(t.minimumResultsForSearch=1/0),c(e).select2(t),c(e).on("select2:select",()=>{const t=new Event("change",{bubbles:!0});e.dispatchEvent(t)}),e.hasAttribute("data-dropdown-parent")&&e.hasAttribute("multiple")){const t=document.querySelector(e.getAttribute("data-dropdown-parent"));if(t?.hasAttribute("data-kt-menu")){const a=new KTMenu(t);a&&(c(e).on("select2:unselect",()=>{e.setAttribute("data-multiple-unselect","1")}),a.on("kt.menu.dropdown.hide",()=>{if("1"===e.getAttribute("data-multiple-unselect"))return e.removeAttribute("data-multiple-unselect"),!1}))}}e.setAttribute("data-kt-initialized","1")})}};a.g.CMSAdmin=d,window.CMSAdmin=d},8616(module,__unused_webpack___webpack_exports__,__webpack_require__){__webpack_require__.a(module,async(__webpack_handle_async_dependencies__,__webpack_async_result__)=>{try{var _vendor_sortablejs_sortablejs_bundle_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(8175),_cms_admin__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(8266);let containers=null,dropzones=null,contentTypeList=null;const addBlockUrl=CMSRouting.generate("admin_networking_initcms_layoutblock_addBlock"),sortUrl=CMSRouting.generate("admin_networking_initcms_layoutblock_updateLayoutBlockSort"),deleteUrl=CMSRouting.generate("admin_networking_initcms_layoutblock_deleteAjax");let lastTranslationSettingsHtml=null,pageId=null;const erroredContainers=new Set,Translator=await _cms_admin__WEBPACK_IMPORTED_MODULE_1__.x.getTranslator();function initDropZone(){if(containers=document.querySelectorAll(".draggable-zone"),dropzones=document.querySelectorAll(".dropzone"),contentTypeList=document.querySelector("#content_item_list"),pageId=document.querySelector("meta[name='init-cms-page-id']").getAttribute("content"),0===containers.length)return!1;new _vendor_sortablejs_sortablejs_bundle_js__WEBPACK_IMPORTED_MODULE_0__.A(contentTypeList,{group:{name:"shared",pull:"clone",put:!1,revertClone:!0},sort:!1,onEnd:e=>{hideContainerErrors()}});containers.forEach(e=>{const t=new _vendor_sortablejs_sortablejs_bundle_js__WEBPACK_IMPORTED_MODULE_0__.A(e,{group:{name:"shared",pull:!0,put:acceptLayoutBlock},animation:150,onEnd:e=>{hideContainerErrors(),e.newIndex===e.oldIndex&&e.to.id===e.from.id||saveLayoutBlockSort(e,e=>{_cms_admin__WEBPACK_IMPORTED_MODULE_1__.x.createInitCmsMessageBox(e.data.messageStatus,e.data.message,1e3)})},onAdd:(t,a)=>{const o=t.to.querySelectorAll(".draggable").length,n=t.item;if(!n.id){const a=e.parentElement;createItem(n.dataset.contentType,a.dataset.pageId,a.dataset.zone,t.newIndex).then(e=>{n.outerHTML=e.data.html,saveLayoutBlockSort(t),document.querySelector("#layoutBlock_"+e.data.layoutBlockId+"  .create_block").click()}).catch(e=>{if(!e.response)return void console.error(e);const t=e.response.data.detail;_cms_admin__WEBPACK_IMPORTED_MODULE_1__.x.createInitCmsMessageBox("error",t)})}o?t.to.querySelector(".empty_layout_block").classList.add("d-none"):t.to.querySelector(".empty_layout_block").classList.remove("d-none")},onRemove:e=>{e.from.querySelectorAll(".draggable").length?e.from.querySelector(".empty_layout_block").classList.add("d-none"):e.from.querySelector(".empty_layout_block").classList.remove("d-none")}});document.addEventListener("fade-out-blocks",e=>{t.option("disabled",!0)}),document.addEventListener("fade-in-blocks",e=>{t.option("disabled",!1)})})}const showContainerError=e=>{const t=e.closest(".dropzone");t.classList.add("bg-light-danger"),t.closest(".dropzone").classList.add("border-danger"),erroredContainers.add(t)},hideContainerErrors=()=>{erroredContainers.forEach(e=>{e.classList.remove("bg-light-danger"),e.classList.remove("border-danger")})},acceptLayoutBlock=(e,t,a)=>{const o=e.el,n=a,s=JSON.parse(o.dataset.contentTypes);if(s.length>0&&!s.includes(n.dataset.contentType))return showContainerError(o),!1;const r=o.dataset.maxItems,i=o.querySelectorAll(".draggable").length;return r>0&&i>=r?(showContainerError(o),!1):(hideContainerErrors(),!0)},saveLayoutBlockSort=(e,t)=>{const a=[];let o=null,n=null;dropzones.forEach(e=>{const t=e.querySelectorAll(".draggable"),s=(e.querySelectorAll(".add-layout"),e.dataset.zone);o||(o=e.dataset.pageId),n||(n=e.dataset.adminCode);const r=[];t.forEach((e,t)=>{e.dataset.sortOrder=t,r.push(e.id)}),a.push({zone:s,layoutBlocks:r})}),submitLayoutSort(a,o,n).then(e=>{const a=new CustomEvent("page-updated");document.body.dispatchEvent(a),void 0!==t&&t(e)})},createItem=async(e,t,a,o)=>await axios.get(addBlockUrl,{params:{subclass:e,zone:a,pageId:t,sortOrder:o}},axiosConfig),submitLayoutSort=async(e,t,a)=>await axios.post(sortUrl,{zones:e,pageId:t,code:a},axiosConfig),fadeOutContentBlocks=e=>{document.querySelectorAll(".content_type_item").forEach(t=>{t!==e&&t.classList.add("opacity-5")}),document.dispatchEvent(new CustomEvent("fade-out-blocks"))},fadeInContentBlocks=()=>{document.querySelectorAll(".content_type_item").forEach(e=>{e.classList.remove("opacity-5")}),document.dispatchEvent(new CustomEvent("fade-in-blocks"))},editBlock=e=>{e.preventDefault();let t=e.target;t.classList.contains("fa-pen-to-square")&&(t=t.parentElement);const a=t.dataset.value,o=document.getElementById("layoutBlock_"+a);fadeOutContentBlocks(o),o.querySelector(".edit_block").setAttribute("disabled",!0),o.querySelector(".delete_block").setAttribute("disabled",!0);const n=CMSRouting.generate("admin_networking_initcms_layoutblock_edit",{id:a}),s=document.getElementById("layoutBlockHtml"+a),r=document.getElementById("editBlockHtml"+a);axios.get(n,axiosConfig).then(e=>{r.innerHTML=e.data.html,s.classList.add("d-none"),r.classList.remove("d-none"),document.body.dispatchEvent(new CustomEvent("fields:added",{detail:{id:a,contentType:o.dataset.contentType}})),o.scrollIntoView()}).catch(e=>{const t=e.response.data.detail;_cms_admin__WEBPACK_IMPORTED_MODULE_1__.x.createInitCmsMessageBox("error",t)})},createBlock=e=>{e.preventDefault();let t=e.target;t.classList.contains("fa-pen-to-square")&&(t=t.parentElement);const a=t.dataset.value,o=document.getElementById("layoutBlock_"+a);fadeOutContentBlocks(o),o.querySelector(".create_block").setAttribute("disabled",!0);const n=CMSRouting.generate("admin_networking_initcms_layoutblock_create",{subclass:o.dataset.contentType,zone:o.dataset.zone,pageId:o.dataset.pageId,sortOrder:o.dataset.sortOrder}),s=document.getElementById("layoutBlockHtml"+a),r=document.getElementById("editBlockHtml"+a);axios.get(n,axiosConfig).then(e=>{r.innerHTML=e.data.html,s.classList.add("d-none"),r.classList.remove("d-none"),document.body.dispatchEvent(new CustomEvent("fields:added",{detail:{id:a,contentType:o.dataset.contentType}})),o.scrollIntoView()}).catch(e=>{if(!e.response)return void console.error(e);const t=e.response.data.detail;_cms_admin__WEBPACK_IMPORTED_MODULE_1__.x.createInitCmsMessageBox("error",t)})},cancelEditBlock=e=>{const t=e.target.dataset.value,a=document.getElementById("layoutBlockHtml"+t),o=document.getElementById("editBlockHtml"+t),n=document.getElementById("layoutBlock_"+t);n.querySelector(".edit_block").removeAttribute("disabled"),n.querySelector(".delete_block").removeAttribute("disabled"),o.classList.add("d-none"),o.innerHTML="",a.classList.remove("d-none"),fadeInContentBlocks()},cancelCreateBlock=e=>{e.preventDefault();const t=e.target.closest("form").closest("[data-zone]").getAttribute("id").replace("layoutBlock_",""),a=document.getElementById("layoutBlockHtml"+t),o=document.getElementById("editBlockHtml"+t);document.getElementById("layoutBlock_"+t).querySelector(".create_block").removeAttribute("disabled"),o.classList.add("d-none"),o.innerHTML="",a.classList.remove("d-none"),fadeInContentBlocks()},saveLayoutBlock=e=>{e.preventDefault();const t=e.target.closest("form"),a={url:t.action,method:t.method,data:new FormData(t),...axiosConfig};"multipart/form-data"===t.enctype&&(a.headers["Content-Type"]="multipart/form-data"),axios.request(a).then(e=>{if(200===e.status){const t=e.data.id,a=document.getElementById("layoutBlockHtml"+t),o=document.getElementById("editBlockHtml"+t),n=document.getElementById("layoutBlock_"+t);n.querySelector(".edit_block").removeAttribute("disabled"),n.querySelector(".delete_block").removeAttribute("disabled"),o.classList.add("d-none"),o.innerHTML="",a.classList.remove("d-none"),a.innerHTML=e.data.html,_cms_admin__WEBPACK_IMPORTED_MODULE_1__.x.createInitCmsMessageBox(e.data.status,e.data.message,1e3);const s=new CustomEvent("page-updated");document.body.dispatchEvent(s);const r=new CustomEvent("layout-block-updated",{detail:a.id});document.body.dispatchEvent(r),fadeInContentBlocks()}}).catch(e=>{if(!e.response)return void console.error(e);const t=e.response.data.id,a=document.getElementById("editBlockHtml"+t);e.response.data.html&&(a.innerHTML=e.response.data.html),_cms_admin__WEBPACK_IMPORTED_MODULE_1__.x.createInitCmsMessageBox("error",e.response.data.message),document.body.dispatchEvent(new CustomEvent("fields:added",{detail:t}))})},createLayoutBlock=e=>{e.preventDefault();const t=e.target.closest("form"),a={url:t.action,method:t.method,data:new FormData(t),...axiosConfig};"multipart/form-data"===t.enctype&&(a.headers["Content-Type"]="multipart/form-data");const o=t.closest("[data-zone]"),n=o.getAttribute("id").replace("layoutBlock_","");axios.request(a).then(e=>{if(200===e.status){const t=document.createElement("template");t.innerHTML=e.data.html.trim(),o.replaceWith(t.content.firstChild),_cms_admin__WEBPACK_IMPORTED_MODULE_1__.x.createInitCmsMessageBox(e.data.status,e.data.message,1e3);const a=new CustomEvent("page-updated");document.body.dispatchEvent(a);const n=new CustomEvent("layout-block-updated",{detail:"layoutBlock_"+e.data.layoutBlockId});document.body.dispatchEvent(n),fadeInContentBlocks()}}).catch(e=>{if(!e.response)return void console.error(e);document.getElementById("editBlockHtml"+n).innerHTML=e.response.data.html,_cms_admin__WEBPACK_IMPORTED_MODULE_1__.x.createInitCmsMessageBox("error",e.response.data.message),document.body.dispatchEvent(new CustomEvent("fields:added",{detail:n}))})},toggleActive=e=>{e.preventDefault();let t=e.target;t.classList.contains("ki-outline")&&(t=t.parentElement);const a=t.querySelector("i"),o=t.dataset.value,n=document.getElementById("layoutBlockHtml"+o),s=CMSRouting.generate("admin_networking_initcms_layoutblock_toggleActive");axios.post(s,{id:o},axiosConfig).then(e=>{if(_cms_admin__WEBPACK_IMPORTED_MODULE_1__.x.createInitCmsMessageBox("success",e.data.message,1e3),e.data.active)return a.classList.remove("ki-minus-circle"),a.classList.add("ki-check-circle"),t.classList.remove("btn-light-danger"),t.classList.add("btn-light-success"),void n.classList.remove("opacity-25");a.classList.add("ki-minus-circle"),a.classList.remove("ki-check-circle"),t.classList.add("btn-light-danger"),t.classList.remove("btn-light-success"),n.classList.add("opacity-25");const o=new CustomEvent("page-updated");document.body.dispatchEvent(o)}).catch(e=>{_cms_admin__WEBPACK_IMPORTED_MODULE_1__.x.createInitCmsMessageBox("error",e.response.data.message)})},deleteBlock=e=>{e.preventDefault();let t=e.target;t.classList.contains("fa-trash")&&(t=t.parentElement);const a=t.closest(".draggable-zone");Swal.fire({html:Translator.trans("page_admin.confirm",[],"PageAdmin"),icon:"warning",buttonsStyling:!1,showCancelButton:!0,confirmButtonText:Translator.trans("button.confirm_delete",[],"PageAdmin"),cancelButtonText:Translator.trans("button.cancel",[],"PageAdmin"),customClass:{confirmButton:"btn btn-sm btn-danger",cancelButton:"btn btn-sm btn-light"}}).then(e=>{e.isConfirmed&&axios.post(deleteUrl,{id:t.dataset.value,_method:"DELETE"}).then(e=>{fadeInContentBlocks(),document.querySelector("#layoutBlock_"+t.dataset.value).remove(),_cms_admin__WEBPACK_IMPORTED_MODULE_1__.x.createInitCmsMessageBox(e.data.messageStatus,e.data.message,1e3),saveLayoutBlockSort(),a.querySelectorAll(".draggable").length?a.querySelector(".empty_layout_block").classList.add("d-none"):a.querySelector(".empty_layout_block").classList.remove("d-none")}).catch(e=>{_cms_admin__WEBPACK_IMPORTED_MODULE_1__.x.createInitCmsMessageBox("error","Something went wrong")})})},unlinkTranslation=e=>{e.preventDefault();const t=e.target,a=t.dataset.text;t.dataset.objectId;Swal.fire({html:a,icon:"warning",buttonsStyling:!1,showCancelButton:!0,confirmButtonText:Translator.trans("button.confirm_delete",[],"PageAdmin"),cancelButtonText:Translator.trans("button.cancel",[],"PageAdmin"),customClass:{confirmButton:"btn btn-sm btn-danger",cancelButton:"btn btn-sm btn-light"}}).then(e=>{if(e.isConfirmed){const e={"X-HTTP-Method-Override":"DELETE",...axiosConfig.headers};axios.post(t.href,{},{headers:e}).then(e=>{document.querySelector("#translations").innerHTML=e.data.html,_cms_admin__WEBPACK_IMPORTED_MODULE_1__.x.createInitCmsMessageBox("success",e.data.message,1e3)}).catch(e=>{_cms_admin__WEBPACK_IMPORTED_MODULE_1__.x.createInitCmsMessageBox("error","Something went wrong")})}})},linkTranslation=e=>{e.preventDefault();const t=e.target;axios.get(t.href,axiosConfig).then(e=>{lastTranslationSettingsHtml=document.querySelector("#translations").innerHTML,document.querySelector("#translations").innerHTML=e.data.html}).catch(e=>{_cms_admin__WEBPACK_IMPORTED_MODULE_1__.x.createInitCmsMessageBox("error","Something went wrong")})},submitTranslationLink=e=>{e.preventDefault();const t=e.target.closest("form");e.submitter.classList.contains("btn-cancel")||e.submitter.classList.contains("cancel")?document.querySelector("#translations").innerHTML=lastTranslationSettingsHtml:axios.post(t.action,new FormData(t),axiosConfig).then(e=>{document.querySelector("#translations").innerHTML=e.data.html,_cms_admin__WEBPACK_IMPORTED_MODULE_1__.x.createInitCmsMessageBox("success",e.data.message,1e3)},axiosConfig).catch(e=>{if(e.response.data.message)return _cms_admin__WEBPACK_IMPORTED_MODULE_1__.x.createInitCmsMessageBox("error",e.response.data.message);_cms_admin__WEBPACK_IMPORTED_MODULE_1__.x.createInitCmsMessageBox("error",e.response.data.detail)})},submitPageSettings=e=>{e.preventDefault();const t=e.target.closest("form");t.elements.forEach(e=>{e.classList.remove("is-invalid")}),axios.post(t.action,new FormData(t),axiosConfig).then(e=>{document.querySelector("#pageStatusSettings").innerHTML=e.data.pageStatusSettings,e.data.layoutBlockSettingsHtml&&(document.querySelector("#page_content").innerHTML=e.data.layoutBlockSettingsHtml,initDropZone()),_cms_admin__WEBPACK_IMPORTED_MODULE_1__.x.createInitCmsMessageBox("success",e.data.message,1e3)}).catch(e=>{e.response.data.violations.forEach(e=>{const a=e.propertyPath,o=e.title;let n=t.querySelector(`[name="${a}"]`);n.setAttribute("required","required"),n.nextElementSibling?.classList.contains("select2-container")&&(n=n.nextElementSibling),n.classList.add("is-invalid"),n.nextElementSibling?.classList.contains("invalid-feedback")?n.nextElementSibling.innerHtml=o:n.insertAdjacentHTML("afterend",`<div class="invalid-feedback">${o}</div>`)})})},updatePageStatus=()=>{axios.get(CMSRouting.generate("admin_networking_initcms_page_getPageStatus",{id:pageId}),axiosConfig).then(e=>{document.querySelector("#pageStatusSettings").innerHTML=e.data.pageStatusSettings}).catch(e=>{if(e.response.data.message)return _cms_admin__WEBPACK_IMPORTED_MODULE_1__.x.createInitCmsMessageBox("error",e.response.data.message);_cms_admin__WEBPACK_IMPORTED_MODULE_1__.x.createInitCmsMessageBox("error",e.response.data.detail)})},loadLayoutBlockJs=event=>{if(event.detail){const scripts=document.querySelector("#"+event.detail).getElementsByTagName("script");for(let i=0;i<scripts.length;++i){const script=scripts[i];eval(script.innerHTML),_cms_admin__WEBPACK_IMPORTED_MODULE_1__.x.log(script.innerHTML)}}},statusDialog=e=>{e.preventDefault();let t=e.target;t.href||(t=t.closest("a"));const a=t.dataset.text;Swal.fire({html:a,icon:"warning",buttonsStyling:!1,showCancelButton:!0,confirmButtonText:"Ok, got it!",cancelButtonText:"Nope, cancel it",customClass:{confirmButton:"btn btn-danger",cancelButton:"btn btn-primary"}}).then(e=>{e.isConfirmed&&axios.post(t.href,axiosConfig).then(e=>{if(e.data.redirect)return window.location=e.data.redirect}).catch(e=>{if(e.response.data.message)return _cms_admin__WEBPACK_IMPORTED_MODULE_1__.x.createInitCmsMessageBox("error",e.response.data.message);_cms_admin__WEBPACK_IMPORTED_MODULE_1__.x.createInitCmsMessageBox("error",e.response.data.detail)})})},updateAfterContentBuilder=()=>{axios.get(CMSRouting.generate("admin_networking_initcms_page_edit",{id:pageId}),axiosConfig).then(response=>{if(response.data.layoutBlockSettingsHtml){const pageContentDiv=document.querySelector("#page_content");pageContentDiv.innerHTML=response.data.layoutBlockSettingsHtml,initDropZone();for(var scripts=pageContentDiv.getElementsByTagName("script"),i=0;i<scripts.length;++i){var script=scripts[i];eval(script.innerHTML),_cms_admin__WEBPACK_IMPORTED_MODULE_1__.x.log(script.innerHTML)}}}).catch(e=>{if(e.response)return e.response.data.message?_cms_admin__WEBPACK_IMPORTED_MODULE_1__.x.createInitCmsMessageBox("error",e.response.data.message):void _cms_admin__WEBPACK_IMPORTED_MODULE_1__.x.createInitCmsMessageBox("error",e.response.data.detail);_cms_admin__WEBPACK_IMPORTED_MODULE_1__.x.error(e)})};KTUtil.onDOMContentLoaded(()=>{KTUtil.on(document.body,".delete_block","click",e=>{deleteBlock(e)}),KTUtil.on(document.body,".edit_block","click",e=>{editBlock(e)}),KTUtil.on(document.body,".create_block","click",e=>{createBlock(e)}),KTUtil.on(document.body,".toggle-active","click",e=>{toggleActive(e)}),KTUtil.on(document.body,'[data-dismiss="edit"]',"click",e=>{cancelEditBlock(e)}),KTUtil.on(document.body,'[data-dismiss="create"]',"click",e=>{cancelCreateBlock(e)}),KTUtil.on(document.body,'[data-save="edit"]',"click",e=>{saveLayoutBlock(e)}),KTUtil.on(document.body,'[data-save="create"]',"click",e=>{createLayoutBlock(e)}),KTUtil.on(document.body,".translation-dialog-unlink","click",e=>{unlinkTranslation(e)}),KTUtil.on(document.body,".translation-dialog-link","click",e=>{linkTranslation(e)}),KTUtil.on(document.body,"#translation-link-form","submit",e=>{submitTranslationLink(e)}),KTUtil.on(document.body,"#translate-copy-page-form","submit",e=>{submitTranslationLink(e)}),KTUtil.on(document.body,"#page-settings-form","submit",e=>{submitPageSettings(e)}),KTUtil.on(document.body,"#page-metadata-form","submit",e=>{submitPageSettings(e)}),KTUtil.on(document.body,".status-dialog-link","click",e=>{statusDialog(e)}),document.body.addEventListener("page-updated",e=>{updatePageStatus()}),document.body.addEventListener("layout-block-updated",e=>{loadLayoutBlockJs(e)}),document.body.addEventListener("content-builder-updated",e=>{updateAfterContentBuilder()}),initDropZone()}),__webpack_async_result__()}catch(e){__webpack_async_result__(e)}},1)}},__webpack_module_cache__={},hasSymbol,webpackQueues,webpackExports,webpackError,resolveQueue,deferred;function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;if(void 0===__webpack_modules__[e]){var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}var o=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(o.exports,o,o.exports,__webpack_require__),o.exports}__webpack_require__.m=__webpack_modules__,hasSymbol="function"==typeof Symbol,webpackQueues=hasSymbol?Symbol("webpack queues"):"__webpack_queues__",webpackExports=hasSymbol?Symbol("webpack exports"):"__webpack_exports__",webpackError=hasSymbol?Symbol("webpack error"):"__webpack_error__",resolveQueue=e=>{e&&e.d<1&&(e.d=1,e.forEach(e=>e.r--),e.forEach(e=>e.r--?e.r++:e()))},__webpack_require__.a=(e,t,a)=>{var o;a&&((o=[]).d=-1);var n,s,r,i=new Set,l=e.exports,c=new Promise((e,t)=>{r=t,s=e});c[webpackExports]=l,c[webpackQueues]=e=>(o&&e(o),i.forEach(e),c.catch(e=>{})),e.exports=c,t(e=>{var t;n=(e=>e.map(e=>{if(null!==e&&"object"==typeof e){if(e[webpackQueues])return e;if(e.then){var t=[];t.d=0,e.then(e=>{a[webpackExports]=e,resolveQueue(t)},e=>{a[webpackError]=e,resolveQueue(t)});var a={};return a[webpackQueues]=e=>e(t),a}}var o={};return o[webpackQueues]=e=>{},o[webpackExports]=e,o}))(e);var a=()=>n.map(e=>{if(e[webpackError])throw e[webpackError];return e[webpackExports]}),s=new Promise(e=>{(t=()=>e(a)).r=0;var s=e=>e!==o&&!i.has(e)&&(i.add(e),e&&!e.d&&(t.r++,e.push(t)));n.map(e=>e[webpackQueues](s))});return t.r?s:a()},e=>(e?r(c[webpackError]=e):s(l),resolveQueue(o))),o&&o.d<0&&(o.d=0)},deferred=[],__webpack_require__.O=(e,t,a,o)=>{if(!t){var n=1/0;for(l=0;l<deferred.length;l++){for(var[t,a,o]=deferred[l],s=!0,r=0;r<t.length;r++)(!1&o||n>=o)&&Object.keys(__webpack_require__.O).every(e=>__webpack_require__.O[e](t[r]))?t.splice(r--,1):(s=!1,o<n&&(n=o));if(s){deferred.splice(l--,1);var i=a();void 0!==i&&(e=i)}}return e}o=o||0;for(var l=deferred.length;l>0&&deferred[l-1][2]>o;l--)deferred[l]=deferred[l-1];deferred[l]=[t,a,o]},__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var a in t)__webpack_require__.o(t,a)&&!__webpack_require__.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={71:0,867:0};__webpack_require__.O.j=t=>0===e[t];var t=(t,a)=>{var o,n,[s,r,i]=a,l=0;if(s.some(t=>0!==e[t])){for(o in r)__webpack_require__.o(r,o)&&(__webpack_require__.m[o]=r[o]);if(i)var c=i(__webpack_require__)}for(t&&t(a);l<s.length;l++)n=s[l],__webpack_require__.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return __webpack_require__.O(c)},a=self.webpackChunkinit_cms_bundle=self.webpackChunkinit_cms_bundle||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var __webpack_exports__=__webpack_require__.O(void 0,[460,195,692,409],()=>__webpack_require__(8616));__webpack_exports__=__webpack_require__.O(__webpack_exports__)})();
//# sourceMappingURL=pageAdmin.ce735d0f.js.map