/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./assets/admin-theme/plugins/custom/sortablejs/sortablejs.bundle.js":
/*!***************************************************************************!*\
  !*** ./assets/admin-theme/plugins/custom/sortablejs/sortablejs.bundle.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/**!
 * Sortable 1.15.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */
function ownKeys(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,n)}return o}function _objectSpread2(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(o),!0).forEach((function(e){_defineProperty(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):ownKeys(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _defineProperty(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}function _extends(){return _extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t},_extends.apply(this,arguments)}function _objectWithoutPropertiesLoose(t,e){if(null==t)return{};var o,n,r={},l=Object.keys(t);for(n=0;n<l.length;n++)o=l[n],e.indexOf(o)>=0||(r[o]=t[o]);return r}function _objectWithoutProperties(t,e){if(null==t)return{};var o,n,r=_objectWithoutPropertiesLoose(t,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(n=0;n<l.length;n++)o=l[n],e.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(t,o)&&(r[o]=t[o])}return r}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var o=Object.prototype.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var o=0,n=new Array(e);o<e;o++)n[o]=t[o];return n}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var version="1.15.0";function userAgent(t){if("undefined"!=typeof window&&window.navigator)return!!navigator.userAgent.match(t)}var IE11OrLess=userAgent(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Edge=userAgent(/Edge/i),FireFox=userAgent(/firefox/i),Safari=userAgent(/safari/i)&&!userAgent(/chrome/i)&&!userAgent(/android/i),IOS=userAgent(/iP(ad|od|hone)/i),ChromeForAndroid=userAgent(/chrome/i)&&userAgent(/android/i),captureMode={capture:!1,passive:!1};function on(t,e,o){t.addEventListener(e,o,!IE11OrLess&&captureMode)}function off(t,e,o){t.removeEventListener(e,o,!IE11OrLess&&captureMode)}function matches(t,e){if(e){if(">"===e[0]&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch(t){return!1}return!1}}function getParentOrHost(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function closest(t,e,o,n){if(t){o=o||document;do{if(null!=e&&(">"===e[0]?t.parentNode===o&&matches(t,e):matches(t,e))||n&&t===o)return t;if(t===o)break}while(t=getParentOrHost(t))}return null}var _throttleTimeout,R_SPACE=/\s+/g;function toggleClass(t,e,o){if(t&&e)if(t.classList)t.classList[o?"add":"remove"](e);else{var n=(" "+t.className+" ").replace(R_SPACE," ").replace(" "+e+" "," ");t.className=(n+(o?" "+e:"")).replace(R_SPACE," ")}}function css(t,e,o){var n=t&&t.style;if(n){if(void 0===o)return document.defaultView&&document.defaultView.getComputedStyle?o=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(o=t.currentStyle),void 0===e?o:o[e];e in n||-1!==e.indexOf("webkit")||(e="-webkit-"+e),n[e]=o+("string"==typeof o?"":"px")}}function matrix(t,e){var o="";if("string"==typeof t)o=t;else do{var n=css(t,"transform");n&&"none"!==n&&(o=n+" "+o)}while(!e&&(t=t.parentNode));var r=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return r&&new r(o)}function find(t,e,o){if(t){var n=t.getElementsByTagName(e),r=0,l=n.length;if(o)for(;r<l;r++)o(n[r],r);return n}return[]}function getWindowScrollingElement(){var t=document.scrollingElement;return t||document.documentElement}function getRect(t,e,o,n,r){if(t.getBoundingClientRect||t===window){var l,a,i,s,c,d,u;if(t!==window&&t.parentNode&&t!==getWindowScrollingElement()?(a=(l=t.getBoundingClientRect()).top,i=l.left,s=l.bottom,c=l.right,d=l.height,u=l.width):(a=0,i=0,s=window.innerHeight,c=window.innerWidth,d=window.innerHeight,u=window.innerWidth),(e||o)&&t!==window&&(r=r||t.parentNode,!IE11OrLess))do{if(r&&r.getBoundingClientRect&&("none"!==css(r,"transform")||o&&"static"!==css(r,"position"))){var g=r.getBoundingClientRect();a-=g.top+parseInt(css(r,"border-top-width")),i-=g.left+parseInt(css(r,"border-left-width")),s=a+l.height,c=i+l.width;break}}while(r=r.parentNode);if(n&&t!==window){var h=matrix(r||t),p=h&&h.a,f=h&&h.d;h&&(s=(a/=f)+(d/=f),c=(i/=p)+(u/=p))}return{top:a,left:i,bottom:s,right:c,width:u,height:d}}}function isScrolledPast(t,e,o){for(var n=getParentAutoScrollElement(t,!0),r=getRect(t)[e];n;){var l=getRect(n)[o];if(!("top"===o||"left"===o?r>=l:r<=l))return n;if(n===getWindowScrollingElement())break;n=getParentAutoScrollElement(n,!1)}return!1}function getChild(t,e,o,n){for(var r=0,l=0,a=t.children;l<a.length;){if("none"!==a[l].style.display&&a[l]!==Sortable.ghost&&(n||a[l]!==Sortable.dragged)&&closest(a[l],o.draggable,t,!1)){if(r===e)return a[l];r++}l++}return null}function lastChild(t,e){for(var o=t.lastElementChild;o&&(o===Sortable.ghost||"none"===css(o,"display")||e&&!matches(o,e));)o=o.previousElementSibling;return o||null}function index(t,e){var o=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)"TEMPLATE"===t.nodeName.toUpperCase()||t===Sortable.clone||e&&!matches(t,e)||o++;return o}function getRelativeScrollOffset(t){var e=0,o=0,n=getWindowScrollingElement();if(t)do{var r=matrix(t),l=r.a,a=r.d;e+=t.scrollLeft*l,o+=t.scrollTop*a}while(t!==n&&(t=t.parentNode));return[e,o]}function indexOfObject(t,e){for(var o in t)if(t.hasOwnProperty(o))for(var n in e)if(e.hasOwnProperty(n)&&e[n]===t[o][n])return Number(o);return-1}function getParentAutoScrollElement(t,e){if(!t||!t.getBoundingClientRect)return getWindowScrollingElement();var o=t,n=!1;do{if(o.clientWidth<o.scrollWidth||o.clientHeight<o.scrollHeight){var r=css(o);if(o.clientWidth<o.scrollWidth&&("auto"==r.overflowX||"scroll"==r.overflowX)||o.clientHeight<o.scrollHeight&&("auto"==r.overflowY||"scroll"==r.overflowY)){if(!o.getBoundingClientRect||o===document.body)return getWindowScrollingElement();if(n||e)return o;n=!0}}}while(o=o.parentNode);return getWindowScrollingElement()}function extend(t,e){if(t&&e)for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);return t}function isRectEqual(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}function throttle(t,e){return function(){if(!_throttleTimeout){var o=arguments;1===o.length?t.call(this,o[0]):t.apply(this,o),_throttleTimeout=setTimeout((function(){_throttleTimeout=void 0}),e)}}}function cancelThrottle(){clearTimeout(_throttleTimeout),_throttleTimeout=void 0}function scrollBy(t,e,o){t.scrollLeft+=e,t.scrollTop+=o}function clone(t){var e=window.Polymer,o=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):o?o(t).clone(!0)[0]:t.cloneNode(!0)}function setRect(t,e){css(t,"position","absolute"),css(t,"top",e.top),css(t,"left",e.left),css(t,"width",e.width),css(t,"height",e.height)}function unsetRect(t){css(t,"position",""),css(t,"top",""),css(t,"left",""),css(t,"width",""),css(t,"height","")}var expando="Sortable"+(new Date).getTime();function AnimationStateManager(){var t,e=[];return{captureAnimationState:function(){(e=[],this.options.animation)&&[].slice.call(this.el.children).forEach((function(t){if("none"!==css(t,"display")&&t!==Sortable.ghost){e.push({target:t,rect:getRect(t)});var o=_objectSpread2({},e[e.length-1].rect);if(t.thisAnimationDuration){var n=matrix(t,!0);n&&(o.top-=n.f,o.left-=n.e)}t.fromRect=o}}))},addAnimationState:function(t){e.push(t)},removeAnimationState:function(t){e.splice(indexOfObject(e,{target:t}),1)},animateAll:function(o){var n=this;if(!this.options.animation)return clearTimeout(t),void("function"==typeof o&&o());var r=!1,l=0;e.forEach((function(t){var e=0,o=t.target,a=o.fromRect,i=getRect(o),s=o.prevFromRect,c=o.prevToRect,d=t.rect,u=matrix(o,!0);u&&(i.top-=u.f,i.left-=u.e),o.toRect=i,o.thisAnimationDuration&&isRectEqual(s,i)&&!isRectEqual(a,i)&&(d.top-i.top)/(d.left-i.left)==(a.top-i.top)/(a.left-i.left)&&(e=calculateRealTime(d,s,c,n.options)),isRectEqual(i,a)||(o.prevFromRect=a,o.prevToRect=i,e||(e=n.options.animation),n.animate(o,d,i,e)),e&&(r=!0,l=Math.max(l,e),clearTimeout(o.animationResetTimer),o.animationResetTimer=setTimeout((function(){o.animationTime=0,o.prevFromRect=null,o.fromRect=null,o.prevToRect=null,o.thisAnimationDuration=null}),e),o.thisAnimationDuration=e)})),clearTimeout(t),r?t=setTimeout((function(){"function"==typeof o&&o()}),l):"function"==typeof o&&o(),e=[]},animate:function(t,e,o,n){if(n){css(t,"transition",""),css(t,"transform","");var r=matrix(this.el),l=r&&r.a,a=r&&r.d,i=(e.left-o.left)/(l||1),s=(e.top-o.top)/(a||1);t.animatingX=!!i,t.animatingY=!!s,css(t,"transform","translate3d("+i+"px,"+s+"px,0)"),this.forRepaintDummy=repaint(t),css(t,"transition","transform "+n+"ms"+(this.options.easing?" "+this.options.easing:"")),css(t,"transform","translate3d(0,0,0)"),"number"==typeof t.animated&&clearTimeout(t.animated),t.animated=setTimeout((function(){css(t,"transition",""),css(t,"transform",""),t.animated=!1,t.animatingX=!1,t.animatingY=!1}),n)}}}}function repaint(t){return t.offsetWidth}function calculateRealTime(t,e,o,n){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-o.top,2)+Math.pow(e.left-o.left,2))*n.animation}var plugins=[],defaults={initializeByDefault:!0},PluginManager={mount:function(t){for(var e in defaults)defaults.hasOwnProperty(e)&&!(e in t)&&(t[e]=defaults[e]);plugins.forEach((function(e){if(e.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")})),plugins.push(t)},pluginEvent:function(t,e,o){var n=this;this.eventCanceled=!1,o.cancel=function(){n.eventCanceled=!0};var r=t+"Global";plugins.forEach((function(n){e[n.pluginName]&&(e[n.pluginName][r]&&e[n.pluginName][r](_objectSpread2({sortable:e},o)),e.options[n.pluginName]&&e[n.pluginName][t]&&e[n.pluginName][t](_objectSpread2({sortable:e},o)))}))},initializePlugins:function(t,e,o,n){for(var r in plugins.forEach((function(n){var r=n.pluginName;if(t.options[r]||n.initializeByDefault){var l=new n(t,e,t.options);l.sortable=t,l.options=t.options,t[r]=l,_extends(o,l.defaults)}})),t.options)if(t.options.hasOwnProperty(r)){var l=this.modifyOption(t,r,t.options[r]);void 0!==l&&(t.options[r]=l)}},getEventProperties:function(t,e){var o={};return plugins.forEach((function(n){"function"==typeof n.eventProperties&&_extends(o,n.eventProperties.call(e[n.pluginName],t))})),o},modifyOption:function(t,e,o){var n;return plugins.forEach((function(r){t[r.pluginName]&&r.optionListeners&&"function"==typeof r.optionListeners[e]&&(n=r.optionListeners[e].call(t[r.pluginName],o))})),n}};function dispatchEvent(t){var e=t.sortable,o=t.rootEl,n=t.name,r=t.targetEl,l=t.cloneEl,a=t.toEl,i=t.fromEl,s=t.oldIndex,c=t.newIndex,d=t.oldDraggableIndex,u=t.newDraggableIndex,g=t.originalEvent,h=t.putSortable,p=t.extraEventProperties;if(e=e||o&&o[expando]){var f,m=e.options,v="on"+n.charAt(0).toUpperCase()+n.substr(1);!window.CustomEvent||IE11OrLess||Edge?(f=document.createEvent("Event")).initEvent(n,!0,!0):f=new CustomEvent(n,{bubbles:!0,cancelable:!0}),f.to=a||o,f.from=i||o,f.item=r||o,f.clone=l,f.oldIndex=s,f.newIndex=c,f.oldDraggableIndex=d,f.newDraggableIndex=u,f.originalEvent=g,f.pullMode=h?h.lastPutMode:void 0;var E=_objectSpread2(_objectSpread2({},p),PluginManager.getEventProperties(n,e));for(var b in E)f[b]=E[b];o&&o.dispatchEvent(f),m[v]&&m[v].call(e,f)}}var _excluded=["evt"],pluginEvent=function(t,e){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=o.evt,r=_objectWithoutProperties(o,_excluded);PluginManager.pluginEvent.bind(Sortable)(t,e,_objectSpread2({dragEl:dragEl,parentEl:parentEl,ghostEl:ghostEl,rootEl:rootEl,nextEl:nextEl,lastDownEl:lastDownEl,cloneEl:cloneEl,cloneHidden:cloneHidden,dragStarted:moved,putSortable:putSortable,activeSortable:Sortable.active,originalEvent:n,oldIndex:oldIndex,oldDraggableIndex:oldDraggableIndex,newIndex:newIndex,newDraggableIndex:newDraggableIndex,hideGhostForTarget:_hideGhostForTarget,unhideGhostForTarget:_unhideGhostForTarget,cloneNowHidden:function(){cloneHidden=!0},cloneNowShown:function(){cloneHidden=!1},dispatchSortableEvent:function(t){_dispatchEvent({sortable:e,name:t,originalEvent:n})}},r))};function _dispatchEvent(t){dispatchEvent(_objectSpread2({putSortable:putSortable,cloneEl:cloneEl,targetEl:dragEl,rootEl:rootEl,oldIndex:oldIndex,oldDraggableIndex:oldDraggableIndex,newIndex:newIndex,newDraggableIndex:newDraggableIndex},t))}var dragEl,parentEl,ghostEl,rootEl,nextEl,lastDownEl,cloneEl,cloneHidden,oldIndex,newIndex,oldDraggableIndex,newDraggableIndex,activeGroup,putSortable,tapEvt,touchEvt,lastDx,lastDy,tapDistanceLeft,tapDistanceTop,moved,lastTarget,lastDirection,targetMoveDistance,ghostRelativeParent,awaitingDragStarted=!1,ignoreNextClick=!1,sortables=[],pastFirstInvertThresh=!1,isCircumstantialInvert=!1,ghostRelativeParentInitialScroll=[],_silent=!1,savedInputChecked=[],documentExists="undefined"!=typeof document,PositionGhostAbsolutely=IOS,CSSFloatProperty=Edge||IE11OrLess?"cssFloat":"float",supportDraggable=documentExists&&!ChromeForAndroid&&!IOS&&"draggable"in document.createElement("div"),supportCssPointerEvents=function(){if(documentExists){if(IE11OrLess)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto","auto"===t.style.pointerEvents}}(),_detectDirection=function(t,e){var o=css(t),n=parseInt(o.width)-parseInt(o.paddingLeft)-parseInt(o.paddingRight)-parseInt(o.borderLeftWidth)-parseInt(o.borderRightWidth),r=getChild(t,0,e),l=getChild(t,1,e),a=r&&css(r),i=l&&css(l),s=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+getRect(r).width,c=i&&parseInt(i.marginLeft)+parseInt(i.marginRight)+getRect(l).width;if("flex"===o.display)return"column"===o.flexDirection||"column-reverse"===o.flexDirection?"vertical":"horizontal";if("grid"===o.display)return o.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(r&&a.float&&"none"!==a.float){var d="left"===a.float?"left":"right";return!l||"both"!==i.clear&&i.clear!==d?"horizontal":"vertical"}return r&&("block"===a.display||"flex"===a.display||"table"===a.display||"grid"===a.display||s>=n&&"none"===o[CSSFloatProperty]||l&&"none"===o[CSSFloatProperty]&&s+c>n)?"vertical":"horizontal"},_dragElInRowColumn=function(t,e,o){var n=o?t.left:t.top,r=o?t.right:t.bottom,l=o?t.width:t.height,a=o?e.left:e.top,i=o?e.right:e.bottom,s=o?e.width:e.height;return n===a||r===i||n+l/2===a+s/2},_detectNearestEmptySortable=function(t,e){var o;return sortables.some((function(n){var r=n[expando].options.emptyInsertThreshold;if(r&&!lastChild(n)){var l=getRect(n),a=t>=l.left-r&&t<=l.right+r,i=e>=l.top-r&&e<=l.bottom+r;return a&&i?o=n:void 0}})),o},_prepareGroup=function(t){function e(t,o){return function(n,r,l,a){var i=n.options.group.name&&r.options.group.name&&n.options.group.name===r.options.group.name;if(null==t&&(o||i))return!0;if(null==t||!1===t)return!1;if(o&&"clone"===t)return t;if("function"==typeof t)return e(t(n,r,l,a),o)(n,r,l,a);var s=(o?n:r).options.group.name;return!0===t||"string"==typeof t&&t===s||t.join&&t.indexOf(s)>-1}}var o={},n=t.group;n&&"object"==_typeof(n)||(n={name:n}),o.name=n.name,o.checkPull=e(n.pull,!0),o.checkPut=e(n.put),o.revertClone=n.revertClone,t.group=o},_hideGhostForTarget=function(){!supportCssPointerEvents&&ghostEl&&css(ghostEl,"display","none")},_unhideGhostForTarget=function(){!supportCssPointerEvents&&ghostEl&&css(ghostEl,"display","")};documentExists&&!ChromeForAndroid&&document.addEventListener("click",(function(t){if(ignoreNextClick)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),ignoreNextClick=!1,!1}),!0);var nearestEmptyInsertDetectEvent=function(t){if(dragEl){t=t.touches?t.touches[0]:t;var e=_detectNearestEmptySortable(t.clientX,t.clientY);if(e){var o={};for(var n in t)t.hasOwnProperty(n)&&(o[n]=t[n]);o.target=o.rootEl=e,o.preventDefault=void 0,o.stopPropagation=void 0,e[expando]._onDragOver(o)}}},_checkOutsideTargetEl=function(t){dragEl&&dragEl.parentNode[expando]._isOutsideThisEl(t.target)};function Sortable(t,e){if(!t||!t.nodeType||1!==t.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=_extends({},e),t[expando]=this;var o={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return _detectDirection(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(t,e){t.setData("Text",e.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==Sortable.supportPointer&&"PointerEvent"in window&&!Safari,emptyInsertThreshold:5};for(var n in PluginManager.initializePlugins(this,t,o),o)!(n in e)&&(e[n]=o[n]);for(var r in _prepareGroup(e),this)"_"===r.charAt(0)&&"function"==typeof this[r]&&(this[r]=this[r].bind(this));this.nativeDraggable=!e.forceFallback&&supportDraggable,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?on(t,"pointerdown",this._onTapStart):(on(t,"mousedown",this._onTapStart),on(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(on(t,"dragover",this),on(t,"dragenter",this)),sortables.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),_extends(this,AnimationStateManager())}function _globalDragOver(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function _onMove(t,e,o,n,r,l,a,i){var s,c,d=t[expando],u=d.options.onMove;return!window.CustomEvent||IE11OrLess||Edge?(s=document.createEvent("Event")).initEvent("move",!0,!0):s=new CustomEvent("move",{bubbles:!0,cancelable:!0}),s.to=e,s.from=t,s.dragged=o,s.draggedRect=n,s.related=r||e,s.relatedRect=l||getRect(e),s.willInsertAfter=i,s.originalEvent=a,t.dispatchEvent(s),u&&(c=u.call(d,s,a)),c}function _disableDraggable(t){t.draggable=!1}function _unsilent(){_silent=!1}function _ghostIsFirst(t,e,o){var n=getRect(getChild(o.el,0,o.options,!0));return e?t.clientX<n.left-10||t.clientY<n.top&&t.clientX<n.right:t.clientY<n.top-10||t.clientY<n.bottom&&t.clientX<n.left}function _ghostIsLast(t,e,o){var n=getRect(lastChild(o.el,o.options.draggable));return e?t.clientX>n.right+10||t.clientX<=n.right&&t.clientY>n.bottom&&t.clientX>=n.left:t.clientX>n.right&&t.clientY>n.top||t.clientX<=n.right&&t.clientY>n.bottom+10}function _getSwapDirection(t,e,o,n,r,l,a,i){var s=n?t.clientY:t.clientX,c=n?o.height:o.width,d=n?o.top:o.left,u=n?o.bottom:o.right,g=!1;if(!a)if(i&&targetMoveDistance<c*r){if(!pastFirstInvertThresh&&(1===lastDirection?s>d+c*l/2:s<u-c*l/2)&&(pastFirstInvertThresh=!0),pastFirstInvertThresh)g=!0;else if(1===lastDirection?s<d+targetMoveDistance:s>u-targetMoveDistance)return-lastDirection}else if(s>d+c*(1-r)/2&&s<u-c*(1-r)/2)return _getInsertDirection(e);return(g=g||a)&&(s<d+c*l/2||s>u-c*l/2)?s>d+c/2?1:-1:0}function _getInsertDirection(t){return index(dragEl)<index(t)?1:-1}function _generateId(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,o=e.length,n=0;o--;)n+=e.charCodeAt(o);return n.toString(36)}function _saveInputCheckedState(t){savedInputChecked.length=0;for(var e=t.getElementsByTagName("input"),o=e.length;o--;){var n=e[o];n.checked&&savedInputChecked.push(n)}}function _nextTick(t){return setTimeout(t,0)}function _cancelNextTick(t){return clearTimeout(t)}Sortable.prototype={constructor:Sortable,_isOutsideThisEl:function(t){this.el.contains(t)||t===this.el||(lastTarget=null)},_getDirection:function(t,e){return"function"==typeof this.options.direction?this.options.direction.call(this,t,e,dragEl):this.options.direction},_onTapStart:function(t){if(t.cancelable){var e=this,o=this.el,n=this.options,r=n.preventOnFilter,l=t.type,a=t.touches&&t.touches[0]||t.pointerType&&"touch"===t.pointerType&&t,i=(a||t).target,s=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||i,c=n.filter;if(_saveInputCheckedState(o),!dragEl&&!(/mousedown|pointerdown/.test(l)&&0!==t.button||n.disabled)&&!s.isContentEditable&&(this.nativeDraggable||!Safari||!i||"SELECT"!==i.tagName.toUpperCase())&&!((i=closest(i,n.draggable,o,!1))&&i.animated||lastDownEl===i)){if(oldIndex=index(i),oldDraggableIndex=index(i,n.draggable),"function"==typeof c){if(c.call(this,t,i,this))return _dispatchEvent({sortable:e,rootEl:s,name:"filter",targetEl:i,toEl:o,fromEl:o}),pluginEvent("filter",e,{evt:t}),void(r&&t.cancelable&&t.preventDefault())}else if(c&&(c=c.split(",").some((function(n){if(n=closest(s,n.trim(),o,!1))return _dispatchEvent({sortable:e,rootEl:n,name:"filter",targetEl:i,fromEl:o,toEl:o}),pluginEvent("filter",e,{evt:t}),!0}))))return void(r&&t.cancelable&&t.preventDefault());n.handle&&!closest(s,n.handle,o,!1)||this._prepareDragStart(t,a,i)}}},_prepareDragStart:function(t,e,o){var n,r=this,l=r.el,a=r.options,i=l.ownerDocument;if(o&&!dragEl&&o.parentNode===l){var s=getRect(o);if(rootEl=l,parentEl=(dragEl=o).parentNode,nextEl=dragEl.nextSibling,lastDownEl=o,activeGroup=a.group,Sortable.dragged=dragEl,tapEvt={target:dragEl,clientX:(e||t).clientX,clientY:(e||t).clientY},tapDistanceLeft=tapEvt.clientX-s.left,tapDistanceTop=tapEvt.clientY-s.top,this._lastX=(e||t).clientX,this._lastY=(e||t).clientY,dragEl.style["will-change"]="all",n=function(){pluginEvent("delayEnded",r,{evt:t}),Sortable.eventCanceled?r._onDrop():(r._disableDelayedDragEvents(),!FireFox&&r.nativeDraggable&&(dragEl.draggable=!0),r._triggerDragStart(t,e),_dispatchEvent({sortable:r,name:"choose",originalEvent:t}),toggleClass(dragEl,a.chosenClass,!0))},a.ignore.split(",").forEach((function(t){find(dragEl,t.trim(),_disableDraggable)})),on(i,"dragover",nearestEmptyInsertDetectEvent),on(i,"mousemove",nearestEmptyInsertDetectEvent),on(i,"touchmove",nearestEmptyInsertDetectEvent),on(i,"mouseup",r._onDrop),on(i,"touchend",r._onDrop),on(i,"touchcancel",r._onDrop),FireFox&&this.nativeDraggable&&(this.options.touchStartThreshold=4,dragEl.draggable=!0),pluginEvent("delayStart",this,{evt:t}),!a.delay||a.delayOnTouchOnly&&!e||this.nativeDraggable&&(Edge||IE11OrLess))n();else{if(Sortable.eventCanceled)return void this._onDrop();on(i,"mouseup",r._disableDelayedDrag),on(i,"touchend",r._disableDelayedDrag),on(i,"touchcancel",r._disableDelayedDrag),on(i,"mousemove",r._delayedDragTouchMoveHandler),on(i,"touchmove",r._delayedDragTouchMoveHandler),a.supportPointer&&on(i,"pointermove",r._delayedDragTouchMoveHandler),r._dragStartTimer=setTimeout(n,a.delay)}}},_delayedDragTouchMoveHandler:function(t){var e=t.touches?t.touches[0]:t;Math.max(Math.abs(e.clientX-this._lastX),Math.abs(e.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){dragEl&&_disableDraggable(dragEl),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;off(t,"mouseup",this._disableDelayedDrag),off(t,"touchend",this._disableDelayedDrag),off(t,"touchcancel",this._disableDelayedDrag),off(t,"mousemove",this._delayedDragTouchMoveHandler),off(t,"touchmove",this._delayedDragTouchMoveHandler),off(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,e){e=e||"touch"==t.pointerType&&t,!this.nativeDraggable||e?this.options.supportPointer?on(document,"pointermove",this._onTouchMove):on(document,e?"touchmove":"mousemove",this._onTouchMove):(on(dragEl,"dragend",this),on(rootEl,"dragstart",this._onDragStart));try{document.selection?_nextTick((function(){document.selection.empty()})):window.getSelection().removeAllRanges()}catch(t){}},_dragStarted:function(t,e){if(awaitingDragStarted=!1,rootEl&&dragEl){pluginEvent("dragStarted",this,{evt:e}),this.nativeDraggable&&on(document,"dragover",_checkOutsideTargetEl);var o=this.options;!t&&toggleClass(dragEl,o.dragClass,!1),toggleClass(dragEl,o.ghostClass,!0),Sortable.active=this,t&&this._appendGhost(),_dispatchEvent({sortable:this,name:"start",originalEvent:e})}else this._nulling()},_emulateDragOver:function(){if(touchEvt){this._lastX=touchEvt.clientX,this._lastY=touchEvt.clientY,_hideGhostForTarget();for(var t=document.elementFromPoint(touchEvt.clientX,touchEvt.clientY),e=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(touchEvt.clientX,touchEvt.clientY))!==e;)e=t;if(dragEl.parentNode[expando]._isOutsideThisEl(t),e)do{if(e[expando]){if(e[expando]._onDragOver({clientX:touchEvt.clientX,clientY:touchEvt.clientY,target:t,rootEl:e})&&!this.options.dragoverBubble)break}t=e}while(e=e.parentNode);_unhideGhostForTarget()}},_onTouchMove:function(t){if(tapEvt){var e=this.options,o=e.fallbackTolerance,n=e.fallbackOffset,r=t.touches?t.touches[0]:t,l=ghostEl&&matrix(ghostEl,!0),a=ghostEl&&l&&l.a,i=ghostEl&&l&&l.d,s=PositionGhostAbsolutely&&ghostRelativeParent&&getRelativeScrollOffset(ghostRelativeParent),c=(r.clientX-tapEvt.clientX+n.x)/(a||1)+(s?s[0]-ghostRelativeParentInitialScroll[0]:0)/(a||1),d=(r.clientY-tapEvt.clientY+n.y)/(i||1)+(s?s[1]-ghostRelativeParentInitialScroll[1]:0)/(i||1);if(!Sortable.active&&!awaitingDragStarted){if(o&&Math.max(Math.abs(r.clientX-this._lastX),Math.abs(r.clientY-this._lastY))<o)return;this._onDragStart(t,!0)}if(ghostEl){l?(l.e+=c-(lastDx||0),l.f+=d-(lastDy||0)):l={a:1,b:0,c:0,d:1,e:c,f:d};var u="matrix(".concat(l.a,",").concat(l.b,",").concat(l.c,",").concat(l.d,",").concat(l.e,",").concat(l.f,")");css(ghostEl,"webkitTransform",u),css(ghostEl,"mozTransform",u),css(ghostEl,"msTransform",u),css(ghostEl,"transform",u),lastDx=c,lastDy=d,touchEvt=r}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!ghostEl){var t=this.options.fallbackOnBody?document.body:rootEl,e=getRect(dragEl,!0,PositionGhostAbsolutely,!0,t),o=this.options;if(PositionGhostAbsolutely){for(ghostRelativeParent=t;"static"===css(ghostRelativeParent,"position")&&"none"===css(ghostRelativeParent,"transform")&&ghostRelativeParent!==document;)ghostRelativeParent=ghostRelativeParent.parentNode;ghostRelativeParent!==document.body&&ghostRelativeParent!==document.documentElement?(ghostRelativeParent===document&&(ghostRelativeParent=getWindowScrollingElement()),e.top+=ghostRelativeParent.scrollTop,e.left+=ghostRelativeParent.scrollLeft):ghostRelativeParent=getWindowScrollingElement(),ghostRelativeParentInitialScroll=getRelativeScrollOffset(ghostRelativeParent)}toggleClass(ghostEl=dragEl.cloneNode(!0),o.ghostClass,!1),toggleClass(ghostEl,o.fallbackClass,!0),toggleClass(ghostEl,o.dragClass,!0),css(ghostEl,"transition",""),css(ghostEl,"transform",""),css(ghostEl,"box-sizing","border-box"),css(ghostEl,"margin",0),css(ghostEl,"top",e.top),css(ghostEl,"left",e.left),css(ghostEl,"width",e.width),css(ghostEl,"height",e.height),css(ghostEl,"opacity","0.8"),css(ghostEl,"position",PositionGhostAbsolutely?"absolute":"fixed"),css(ghostEl,"zIndex","100000"),css(ghostEl,"pointerEvents","none"),Sortable.ghost=ghostEl,t.appendChild(ghostEl),css(ghostEl,"transform-origin",tapDistanceLeft/parseInt(ghostEl.style.width)*100+"% "+tapDistanceTop/parseInt(ghostEl.style.height)*100+"%")}},_onDragStart:function(t,e){var o=this,n=t.dataTransfer,r=o.options;pluginEvent("dragStart",this,{evt:t}),Sortable.eventCanceled?this._onDrop():(pluginEvent("setupClone",this),Sortable.eventCanceled||((cloneEl=clone(dragEl)).removeAttribute("id"),cloneEl.draggable=!1,cloneEl.style["will-change"]="",this._hideClone(),toggleClass(cloneEl,this.options.chosenClass,!1),Sortable.clone=cloneEl),o.cloneId=_nextTick((function(){pluginEvent("clone",o),Sortable.eventCanceled||(o.options.removeCloneOnHide||rootEl.insertBefore(cloneEl,dragEl),o._hideClone(),_dispatchEvent({sortable:o,name:"clone"}))})),!e&&toggleClass(dragEl,r.dragClass,!0),e?(ignoreNextClick=!0,o._loopId=setInterval(o._emulateDragOver,50)):(off(document,"mouseup",o._onDrop),off(document,"touchend",o._onDrop),off(document,"touchcancel",o._onDrop),n&&(n.effectAllowed="move",r.setData&&r.setData.call(o,n,dragEl)),on(document,"drop",o),css(dragEl,"transform","translateZ(0)")),awaitingDragStarted=!0,o._dragStartId=_nextTick(o._dragStarted.bind(o,e,t)),on(document,"selectstart",o),moved=!0,Safari&&css(document.body,"user-select","none"))},_onDragOver:function(t){var e,o,n,r,l=this.el,a=t.target,i=this.options,s=i.group,c=Sortable.active,d=activeGroup===s,u=i.sort,g=putSortable||c,h=this,p=!1;if(!_silent){if(void 0!==t.preventDefault&&t.cancelable&&t.preventDefault(),a=closest(a,i.draggable,l,!0),A("dragOver"),Sortable.eventCanceled)return p;if(dragEl.contains(t.target)||a.animated&&a.animatingX&&a.animatingY||h._ignoreWhileAnimating===a)return M(!1);if(ignoreNextClick=!1,c&&!i.disabled&&(d?u||(n=parentEl!==rootEl):putSortable===this||(this.lastPutMode=activeGroup.checkPull(this,c,dragEl,t))&&s.checkPut(this,c,dragEl,t))){if(r="vertical"===this._getDirection(t,a),e=getRect(dragEl),A("dragOverValid"),Sortable.eventCanceled)return p;if(n)return parentEl=rootEl,P(),this._hideClone(),A("revert"),Sortable.eventCanceled||(nextEl?rootEl.insertBefore(dragEl,nextEl):rootEl.appendChild(dragEl)),M(!0);var f=lastChild(l,i.draggable);if(!f||_ghostIsLast(t,r,this)&&!f.animated){if(f===dragEl)return M(!1);if(f&&l===t.target&&(a=f),a&&(o=getRect(a)),!1!==_onMove(rootEl,l,dragEl,e,a,o,t,!!a))return P(),f&&f.nextSibling?l.insertBefore(dragEl,f.nextSibling):l.appendChild(dragEl),parentEl=l,R(),M(!0)}else if(f&&_ghostIsFirst(t,r,this)){var m=getChild(l,0,i,!0);if(m===dragEl)return M(!1);if(o=getRect(a=m),!1!==_onMove(rootEl,l,dragEl,e,a,o,t,!1))return P(),l.insertBefore(dragEl,m),parentEl=l,R(),M(!0)}else if(a.parentNode===l){o=getRect(a);var v,E,b,S=dragEl.parentNode!==l,D=!_dragElInRowColumn(dragEl.animated&&dragEl.toRect||e,a.animated&&a.toRect||o,r),w=r?"top":"left",_=isScrolledPast(a,"top","top")||isScrolledPast(dragEl,"top","top"),y=_?_.scrollTop:void 0;if(lastTarget!==a&&(E=o[w],pastFirstInvertThresh=!1,isCircumstantialInvert=!D&&i.invertSwap||S),0!==(v=_getSwapDirection(t,a,o,r,D?1:i.swapThreshold,null==i.invertedSwapThreshold?i.swapThreshold:i.invertedSwapThreshold,isCircumstantialInvert,lastTarget===a))){var x=index(dragEl);do{x-=v,b=parentEl.children[x]}while(b&&("none"===css(b,"display")||b===ghostEl))}if(0===v||b===a)return M(!1);lastTarget=a,lastDirection=v;var C=a.nextElementSibling,I=!1,T=_onMove(rootEl,l,dragEl,e,a,o,t,I=1===v);if(!1!==T)return 1!==T&&-1!==T||(I=1===T),_silent=!0,setTimeout(_unsilent,30),P(),I&&!C?l.appendChild(dragEl):a.parentNode.insertBefore(dragEl,I?C:a),_&&scrollBy(_,0,y-_.scrollTop),parentEl=dragEl.parentNode,void 0===E||isCircumstantialInvert||(targetMoveDistance=Math.abs(E-getRect(a)[w])),R(),M(!0)}if(l.contains(dragEl))return M(!1)}return!1}function A(i,s){pluginEvent(i,h,_objectSpread2({evt:t,isOwner:d,axis:r?"vertical":"horizontal",revert:n,dragRect:e,targetRect:o,canSort:u,fromSortable:g,target:a,completed:M,onMove:function(o,n){return _onMove(rootEl,l,dragEl,e,o,getRect(o),t,n)},changed:R},s))}function P(){A("dragOverAnimationCapture"),h.captureAnimationState(),h!==g&&g.captureAnimationState()}function M(e){return A("dragOverCompleted",{insertion:e}),e&&(d?c._hideClone():c._showClone(h),h!==g&&(toggleClass(dragEl,putSortable?putSortable.options.ghostClass:c.options.ghostClass,!1),toggleClass(dragEl,i.ghostClass,!0)),putSortable!==h&&h!==Sortable.active?putSortable=h:h===Sortable.active&&putSortable&&(putSortable=null),g===h&&(h._ignoreWhileAnimating=a),h.animateAll((function(){A("dragOverAnimationComplete"),h._ignoreWhileAnimating=null})),h!==g&&(g.animateAll(),g._ignoreWhileAnimating=null)),(a===dragEl&&!dragEl.animated||a===l&&!a.animated)&&(lastTarget=null),i.dragoverBubble||t.rootEl||a===document||(dragEl.parentNode[expando]._isOutsideThisEl(t.target),!e&&nearestEmptyInsertDetectEvent(t)),!i.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),p=!0}function R(){newIndex=index(dragEl),newDraggableIndex=index(dragEl,i.draggable),_dispatchEvent({sortable:h,name:"change",toEl:l,newIndex:newIndex,newDraggableIndex:newDraggableIndex,originalEvent:t})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){off(document,"mousemove",this._onTouchMove),off(document,"touchmove",this._onTouchMove),off(document,"pointermove",this._onTouchMove),off(document,"dragover",nearestEmptyInsertDetectEvent),off(document,"mousemove",nearestEmptyInsertDetectEvent),off(document,"touchmove",nearestEmptyInsertDetectEvent)},_offUpEvents:function(){var t=this.el.ownerDocument;off(t,"mouseup",this._onDrop),off(t,"touchend",this._onDrop),off(t,"pointerup",this._onDrop),off(t,"touchcancel",this._onDrop),off(document,"selectstart",this)},_onDrop:function(t){var e=this.el,o=this.options;newIndex=index(dragEl),newDraggableIndex=index(dragEl,o.draggable),pluginEvent("drop",this,{evt:t}),parentEl=dragEl&&dragEl.parentNode,newIndex=index(dragEl),newDraggableIndex=index(dragEl,o.draggable),Sortable.eventCanceled||(awaitingDragStarted=!1,isCircumstantialInvert=!1,pastFirstInvertThresh=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),_cancelNextTick(this.cloneId),_cancelNextTick(this._dragStartId),this.nativeDraggable&&(off(document,"drop",this),off(e,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Safari&&css(document.body,"user-select",""),css(dragEl,"transform",""),t&&(moved&&(t.cancelable&&t.preventDefault(),!o.dropBubble&&t.stopPropagation()),ghostEl&&ghostEl.parentNode&&ghostEl.parentNode.removeChild(ghostEl),(rootEl===parentEl||putSortable&&"clone"!==putSortable.lastPutMode)&&cloneEl&&cloneEl.parentNode&&cloneEl.parentNode.removeChild(cloneEl),dragEl&&(this.nativeDraggable&&off(dragEl,"dragend",this),_disableDraggable(dragEl),dragEl.style["will-change"]="",moved&&!awaitingDragStarted&&toggleClass(dragEl,putSortable?putSortable.options.ghostClass:this.options.ghostClass,!1),toggleClass(dragEl,this.options.chosenClass,!1),_dispatchEvent({sortable:this,name:"unchoose",toEl:parentEl,newIndex:null,newDraggableIndex:null,originalEvent:t}),rootEl!==parentEl?(newIndex>=0&&(_dispatchEvent({rootEl:parentEl,name:"add",toEl:parentEl,fromEl:rootEl,originalEvent:t}),_dispatchEvent({sortable:this,name:"remove",toEl:parentEl,originalEvent:t}),_dispatchEvent({rootEl:parentEl,name:"sort",toEl:parentEl,fromEl:rootEl,originalEvent:t}),_dispatchEvent({sortable:this,name:"sort",toEl:parentEl,originalEvent:t})),putSortable&&putSortable.save()):newIndex!==oldIndex&&newIndex>=0&&(_dispatchEvent({sortable:this,name:"update",toEl:parentEl,originalEvent:t}),_dispatchEvent({sortable:this,name:"sort",toEl:parentEl,originalEvent:t})),Sortable.active&&(null!=newIndex&&-1!==newIndex||(newIndex=oldIndex,newDraggableIndex=oldDraggableIndex),_dispatchEvent({sortable:this,name:"end",toEl:parentEl,originalEvent:t}),this.save())))),this._nulling()},_nulling:function(){pluginEvent("nulling",this),rootEl=dragEl=parentEl=ghostEl=nextEl=cloneEl=lastDownEl=cloneHidden=tapEvt=touchEvt=moved=newIndex=newDraggableIndex=oldIndex=oldDraggableIndex=lastTarget=lastDirection=putSortable=activeGroup=Sortable.dragged=Sortable.ghost=Sortable.clone=Sortable.active=null,savedInputChecked.forEach((function(t){t.checked=!0})),savedInputChecked.length=lastDx=lastDy=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":dragEl&&(this._onDragOver(t),_globalDragOver(t));break;case"selectstart":t.preventDefault()}},toArray:function(){for(var t,e=[],o=this.el.children,n=0,r=o.length,l=this.options;n<r;n++)closest(t=o[n],l.draggable,this.el,!1)&&e.push(t.getAttribute(l.dataIdAttr)||_generateId(t));return e},sort:function(t,e){var o={},n=this.el;this.toArray().forEach((function(t,e){var r=n.children[e];closest(r,this.options.draggable,n,!1)&&(o[t]=r)}),this),e&&this.captureAnimationState(),t.forEach((function(t){o[t]&&(n.removeChild(o[t]),n.appendChild(o[t]))})),e&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,e){return closest(t,e||this.options.draggable,this.el,!1)},option:function(t,e){var o=this.options;if(void 0===e)return o[t];var n=PluginManager.modifyOption(this,t,e);o[t]=void 0!==n?n:e,"group"===t&&_prepareGroup(o)},destroy:function(){pluginEvent("destroy",this);var t=this.el;t[expando]=null,off(t,"mousedown",this._onTapStart),off(t,"touchstart",this._onTapStart),off(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(off(t,"dragover",this),off(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),(function(t){t.removeAttribute("draggable")})),this._onDrop(),this._disableDelayedDragEvents(),sortables.splice(sortables.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!cloneHidden){if(pluginEvent("hideClone",this),Sortable.eventCanceled)return;css(cloneEl,"display","none"),this.options.removeCloneOnHide&&cloneEl.parentNode&&cloneEl.parentNode.removeChild(cloneEl),cloneHidden=!0}},_showClone:function(t){if("clone"===t.lastPutMode){if(cloneHidden){if(pluginEvent("showClone",this),Sortable.eventCanceled)return;dragEl.parentNode!=rootEl||this.options.group.revertClone?nextEl?rootEl.insertBefore(cloneEl,nextEl):rootEl.appendChild(cloneEl):rootEl.insertBefore(cloneEl,dragEl),this.options.group.revertClone&&this.animate(dragEl,cloneEl),css(cloneEl,"display",""),cloneHidden=!1}}else this._hideClone()}},documentExists&&on(document,"touchmove",(function(t){(Sortable.active||awaitingDragStarted)&&t.cancelable&&t.preventDefault()})),Sortable.utils={on:on,off:off,css:css,find:find,is:function(t,e){return!!closest(t,e,t,!1)},extend:extend,throttle:throttle,closest:closest,toggleClass:toggleClass,clone:clone,index:index,nextTick:_nextTick,cancelNextTick:_cancelNextTick,detectDirection:_detectDirection,getChild:getChild},Sortable.get=function(t){return t[expando]},Sortable.mount=function(){for(var t=arguments.length,e=new Array(t),o=0;o<t;o++)e[o]=arguments[o];e[0].constructor===Array&&(e=e[0]),e.forEach((function(t){if(!t.prototype||!t.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(t));t.utils&&(Sortable.utils=_objectSpread2(_objectSpread2({},Sortable.utils),t.utils)),PluginManager.mount(t)}))},Sortable.create=function(t,e){return new Sortable(t,e)},Sortable.version=version;var scrollEl,scrollRootEl,lastAutoScrollX,lastAutoScrollY,touchEvt$1,pointerElemChangedInterval,autoScrolls=[],scrolling=!1;function AutoScrollPlugin(){function t(){for(var t in this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===t.charAt(0)&&"function"==typeof this[t]&&(this[t]=this[t].bind(this))}return t.prototype={dragStarted:function(t){var e=t.originalEvent;this.sortable.nativeDraggable?on(document,"dragover",this._handleAutoScroll):this.options.supportPointer?on(document,"pointermove",this._handleFallbackAutoScroll):e.touches?on(document,"touchmove",this._handleFallbackAutoScroll):on(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var e=t.originalEvent;this.options.dragOverBubble||e.rootEl||this._handleAutoScroll(e)},drop:function(){this.sortable.nativeDraggable?off(document,"dragover",this._handleAutoScroll):(off(document,"pointermove",this._handleFallbackAutoScroll),off(document,"touchmove",this._handleFallbackAutoScroll),off(document,"mousemove",this._handleFallbackAutoScroll)),clearPointerElemChangedInterval(),clearAutoScrolls(),cancelThrottle()},nulling:function(){touchEvt$1=scrollRootEl=scrollEl=scrolling=pointerElemChangedInterval=lastAutoScrollX=lastAutoScrollY=null,autoScrolls.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(t,e){var o=this,n=(t.touches?t.touches[0]:t).clientX,r=(t.touches?t.touches[0]:t).clientY,l=document.elementFromPoint(n,r);if(touchEvt$1=t,e||this.options.forceAutoScrollFallback||Edge||IE11OrLess||Safari){autoScroll(t,this.options,l,e);var a=getParentAutoScrollElement(l,!0);!scrolling||pointerElemChangedInterval&&n===lastAutoScrollX&&r===lastAutoScrollY||(pointerElemChangedInterval&&clearPointerElemChangedInterval(),pointerElemChangedInterval=setInterval((function(){var l=getParentAutoScrollElement(document.elementFromPoint(n,r),!0);l!==a&&(a=l,clearAutoScrolls()),autoScroll(t,o.options,l,e)}),10),lastAutoScrollX=n,lastAutoScrollY=r)}else{if(!this.options.bubbleScroll||getParentAutoScrollElement(l,!0)===getWindowScrollingElement())return void clearAutoScrolls();autoScroll(t,this.options,getParentAutoScrollElement(l,!1),!1)}}},_extends(t,{pluginName:"scroll",initializeByDefault:!0})}function clearAutoScrolls(){autoScrolls.forEach((function(t){clearInterval(t.pid)})),autoScrolls=[]}function clearPointerElemChangedInterval(){clearInterval(pointerElemChangedInterval)}var lastSwapEl,autoScroll=throttle((function(t,e,o,n){if(e.scroll){var r,l=(t.touches?t.touches[0]:t).clientX,a=(t.touches?t.touches[0]:t).clientY,i=e.scrollSensitivity,s=e.scrollSpeed,c=getWindowScrollingElement(),d=!1;scrollRootEl!==o&&(scrollRootEl=o,clearAutoScrolls(),scrollEl=e.scroll,r=e.scrollFn,!0===scrollEl&&(scrollEl=getParentAutoScrollElement(o,!0)));var u=0,g=scrollEl;do{var h=g,p=getRect(h),f=p.top,m=p.bottom,v=p.left,E=p.right,b=p.width,S=p.height,D=void 0,w=void 0,_=h.scrollWidth,y=h.scrollHeight,x=css(h),C=h.scrollLeft,I=h.scrollTop;h===c?(D=b<_&&("auto"===x.overflowX||"scroll"===x.overflowX||"visible"===x.overflowX),w=S<y&&("auto"===x.overflowY||"scroll"===x.overflowY||"visible"===x.overflowY)):(D=b<_&&("auto"===x.overflowX||"scroll"===x.overflowX),w=S<y&&("auto"===x.overflowY||"scroll"===x.overflowY));var T=D&&(Math.abs(E-l)<=i&&C+b<_)-(Math.abs(v-l)<=i&&!!C),A=w&&(Math.abs(m-a)<=i&&I+S<y)-(Math.abs(f-a)<=i&&!!I);if(!autoScrolls[u])for(var P=0;P<=u;P++)autoScrolls[P]||(autoScrolls[P]={});autoScrolls[u].vx==T&&autoScrolls[u].vy==A&&autoScrolls[u].el===h||(autoScrolls[u].el=h,autoScrolls[u].vx=T,autoScrolls[u].vy=A,clearInterval(autoScrolls[u].pid),0==T&&0==A||(d=!0,autoScrolls[u].pid=setInterval(function(){n&&0===this.layer&&Sortable.active._onTouchMove(touchEvt$1);var e=autoScrolls[this.layer].vy?autoScrolls[this.layer].vy*s:0,o=autoScrolls[this.layer].vx?autoScrolls[this.layer].vx*s:0;"function"==typeof r&&"continue"!==r.call(Sortable.dragged.parentNode[expando],o,e,t,touchEvt$1,autoScrolls[this.layer].el)||scrollBy(autoScrolls[this.layer].el,o,e)}.bind({layer:u}),24))),u++}while(e.bubbleScroll&&g!==c&&(g=getParentAutoScrollElement(g,!1)));scrolling=d}}),30),drop=function(t){var e=t.originalEvent,o=t.putSortable,n=t.dragEl,r=t.activeSortable,l=t.dispatchSortableEvent,a=t.hideGhostForTarget,i=t.unhideGhostForTarget;if(e){var s=o||r;a();var c=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e,d=document.elementFromPoint(c.clientX,c.clientY);i(),s&&!s.el.contains(d)&&(l("spill"),this.onSpill({dragEl:n,putSortable:o}))}};function Revert(){}function Remove(){}function SwapPlugin(){function t(){this.defaults={swapClass:"sortable-swap-highlight"}}return t.prototype={dragStart:function(t){var e=t.dragEl;lastSwapEl=e},dragOverValid:function(t){var e=t.completed,o=t.target,n=t.onMove,r=t.activeSortable,l=t.changed,a=t.cancel;if(r.options.swap){var i=this.sortable.el,s=this.options;if(o&&o!==i){var c=lastSwapEl;!1!==n(o)?(toggleClass(o,s.swapClass,!0),lastSwapEl=o):lastSwapEl=null,c&&c!==lastSwapEl&&toggleClass(c,s.swapClass,!1)}l(),e(!0),a()}},drop:function(t){var e=t.activeSortable,o=t.putSortable,n=t.dragEl,r=o||this.sortable,l=this.options;lastSwapEl&&toggleClass(lastSwapEl,l.swapClass,!1),lastSwapEl&&(l.swap||o&&o.options.swap)&&n!==lastSwapEl&&(r.captureAnimationState(),r!==e&&e.captureAnimationState(),swapNodes(n,lastSwapEl),r.animateAll(),r!==e&&e.animateAll())},nulling:function(){lastSwapEl=null}},_extends(t,{pluginName:"swap",eventProperties:function(){return{swapItem:lastSwapEl}}})}function swapNodes(t,e){var o,n,r=t.parentNode,l=e.parentNode;r&&l&&!r.isEqualNode(e)&&!l.isEqualNode(t)&&(o=index(t),n=index(e),r.isEqualNode(l)&&o<n&&n++,r.insertBefore(e,r.children[o]),l.insertBefore(t,l.children[n]))}Revert.prototype={startIndex:null,dragStart:function(t){var e=t.oldDraggableIndex;this.startIndex=e},onSpill:function(t){var e=t.dragEl,o=t.putSortable;this.sortable.captureAnimationState(),o&&o.captureAnimationState();var n=getChild(this.sortable.el,this.startIndex,this.options);n?this.sortable.el.insertBefore(e,n):this.sortable.el.appendChild(e),this.sortable.animateAll(),o&&o.animateAll()},drop:drop},_extends(Revert,{pluginName:"revertOnSpill"}),Remove.prototype={onSpill:function(t){var e=t.dragEl,o=t.putSortable||this.sortable;o.captureAnimationState(),e.parentNode&&e.parentNode.removeChild(e),o.animateAll()},drop:drop},_extends(Remove,{pluginName:"removeOnSpill"});var lastMultiDragSelect,multiDragSortable,dragEl$1,clonesFromRect,clonesHidden,multiDragElements=[],multiDragClones=[],initialFolding=!1,folding=!1,dragStarted=!1;function MultiDragPlugin(){function t(t){for(var e in this)"_"===e.charAt(0)&&"function"==typeof this[e]&&(this[e]=this[e].bind(this));t.options.avoidImplicitDeselect||(t.options.supportPointer?on(document,"pointerup",this._deselectMultiDrag):(on(document,"mouseup",this._deselectMultiDrag),on(document,"touchend",this._deselectMultiDrag))),on(document,"keydown",this._checkKeyDown),on(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,avoidImplicitDeselect:!1,setData:function(e,o){var n="";multiDragElements.length&&multiDragSortable===t?multiDragElements.forEach((function(t,e){n+=(e?", ":"")+t.textContent})):n=o.textContent,e.setData("Text",n)}}}return t.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(t){var e=t.dragEl;dragEl$1=e},delayEnded:function(){this.isMultiDrag=~multiDragElements.indexOf(dragEl$1)},setupClone:function(t){var e=t.sortable,o=t.cancel;if(this.isMultiDrag){for(var n=0;n<multiDragElements.length;n++)multiDragClones.push(clone(multiDragElements[n])),multiDragClones[n].sortableIndex=multiDragElements[n].sortableIndex,multiDragClones[n].draggable=!1,multiDragClones[n].style["will-change"]="",toggleClass(multiDragClones[n],this.options.selectedClass,!1),multiDragElements[n]===dragEl$1&&toggleClass(multiDragClones[n],this.options.chosenClass,!1);e._hideClone(),o()}},clone:function(t){var e=t.sortable,o=t.rootEl,n=t.dispatchSortableEvent,r=t.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||multiDragElements.length&&multiDragSortable===e&&(insertMultiDragClones(!0,o),n("clone"),r()))},showClone:function(t){var e=t.cloneNowShown,o=t.rootEl,n=t.cancel;this.isMultiDrag&&(insertMultiDragClones(!1,o),multiDragClones.forEach((function(t){css(t,"display","")})),e(),clonesHidden=!1,n())},hideClone:function(t){var e=this,o=(t.sortable,t.cloneNowHidden),n=t.cancel;this.isMultiDrag&&(multiDragClones.forEach((function(t){css(t,"display","none"),e.options.removeCloneOnHide&&t.parentNode&&t.parentNode.removeChild(t)})),o(),clonesHidden=!0,n())},dragStartGlobal:function(t){t.sortable;!this.isMultiDrag&&multiDragSortable&&multiDragSortable.multiDrag._deselectMultiDrag(),multiDragElements.forEach((function(t){t.sortableIndex=index(t)})),multiDragElements=multiDragElements.sort((function(t,e){return t.sortableIndex-e.sortableIndex})),dragStarted=!0},dragStarted:function(t){var e=this,o=t.sortable;if(this.isMultiDrag){if(this.options.sort&&(o.captureAnimationState(),this.options.animation)){multiDragElements.forEach((function(t){t!==dragEl$1&&css(t,"position","absolute")}));var n=getRect(dragEl$1,!1,!0,!0);multiDragElements.forEach((function(t){t!==dragEl$1&&setRect(t,n)})),folding=!0,initialFolding=!0}o.animateAll((function(){folding=!1,initialFolding=!1,e.options.animation&&multiDragElements.forEach((function(t){unsetRect(t)})),e.options.sort&&removeMultiDragElements()}))}},dragOver:function(t){var e=t.target,o=t.completed,n=t.cancel;folding&&~multiDragElements.indexOf(e)&&(o(!1),n())},revert:function(t){var e=t.fromSortable,o=t.rootEl,n=t.sortable,r=t.dragRect;multiDragElements.length>1&&(multiDragElements.forEach((function(t){n.addAnimationState({target:t,rect:folding?getRect(t):r}),unsetRect(t),t.fromRect=r,e.removeAnimationState(t)})),folding=!1,insertMultiDragElements(!this.options.removeCloneOnHide,o))},dragOverCompleted:function(t){var e=t.sortable,o=t.isOwner,n=t.insertion,r=t.activeSortable,l=t.parentEl,a=t.putSortable,i=this.options;if(n){if(o&&r._hideClone(),initialFolding=!1,i.animation&&multiDragElements.length>1&&(folding||!o&&!r.options.sort&&!a)){var s=getRect(dragEl$1,!1,!0,!0);multiDragElements.forEach((function(t){t!==dragEl$1&&(setRect(t,s),l.appendChild(t))})),folding=!0}if(!o)if(folding||removeMultiDragElements(),multiDragElements.length>1){var c=clonesHidden;r._showClone(e),r.options.animation&&!clonesHidden&&c&&multiDragClones.forEach((function(t){r.addAnimationState({target:t,rect:clonesFromRect}),t.fromRect=clonesFromRect,t.thisAnimationDuration=null}))}else r._showClone(e)}},dragOverAnimationCapture:function(t){var e=t.dragRect,o=t.isOwner,n=t.activeSortable;if(multiDragElements.forEach((function(t){t.thisAnimationDuration=null})),n.options.animation&&!o&&n.multiDrag.isMultiDrag){clonesFromRect=_extends({},e);var r=matrix(dragEl$1,!0);clonesFromRect.top-=r.f,clonesFromRect.left-=r.e}},dragOverAnimationComplete:function(){folding&&(folding=!1,removeMultiDragElements())},drop:function(t){var e=t.originalEvent,o=t.rootEl,n=t.parentEl,r=t.sortable,l=t.dispatchSortableEvent,a=t.oldIndex,i=t.putSortable,s=i||this.sortable;if(e){var c=this.options,d=n.children;if(!dragStarted)if(c.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),toggleClass(dragEl$1,c.selectedClass,!~multiDragElements.indexOf(dragEl$1)),~multiDragElements.indexOf(dragEl$1))multiDragElements.splice(multiDragElements.indexOf(dragEl$1),1),lastMultiDragSelect=null,dispatchEvent({sortable:r,rootEl:o,name:"deselect",targetEl:dragEl$1,originalEvent:e});else{if(multiDragElements.push(dragEl$1),dispatchEvent({sortable:r,rootEl:o,name:"select",targetEl:dragEl$1,originalEvent:e}),e.shiftKey&&lastMultiDragSelect&&r.el.contains(lastMultiDragSelect)){var u,g,h=index(lastMultiDragSelect),p=index(dragEl$1);if(~h&&~p&&h!==p)for(p>h?(g=h,u=p):(g=p,u=h+1);g<u;g++)~multiDragElements.indexOf(d[g])||(toggleClass(d[g],c.selectedClass,!0),multiDragElements.push(d[g]),dispatchEvent({sortable:r,rootEl:o,name:"select",targetEl:d[g],originalEvent:e}))}else lastMultiDragSelect=dragEl$1;multiDragSortable=s}if(dragStarted&&this.isMultiDrag){if(folding=!1,(n[expando].options.sort||n!==o)&&multiDragElements.length>1){var f=getRect(dragEl$1),m=index(dragEl$1,":not(."+this.options.selectedClass+")");if(!initialFolding&&c.animation&&(dragEl$1.thisAnimationDuration=null),s.captureAnimationState(),!initialFolding&&(c.animation&&(dragEl$1.fromRect=f,multiDragElements.forEach((function(t){if(t.thisAnimationDuration=null,t!==dragEl$1){var e=folding?getRect(t):f;t.fromRect=e,s.addAnimationState({target:t,rect:e})}}))),removeMultiDragElements(),multiDragElements.forEach((function(t){d[m]?n.insertBefore(t,d[m]):n.appendChild(t),m++})),a===index(dragEl$1))){var v=!1;multiDragElements.forEach((function(t){t.sortableIndex===index(t)||(v=!0)})),v&&l("update")}multiDragElements.forEach((function(t){unsetRect(t)})),s.animateAll()}multiDragSortable=s}(o===n||i&&"clone"!==i.lastPutMode)&&multiDragClones.forEach((function(t){t.parentNode&&t.parentNode.removeChild(t)}))}},nullingGlobal:function(){this.isMultiDrag=dragStarted=!1,multiDragClones.length=0},destroyGlobal:function(){this._deselectMultiDrag(),off(document,"pointerup",this._deselectMultiDrag),off(document,"mouseup",this._deselectMultiDrag),off(document,"touchend",this._deselectMultiDrag),off(document,"keydown",this._checkKeyDown),off(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(t){if(!(void 0!==dragStarted&&dragStarted||multiDragSortable!==this.sortable||t&&closest(t.target,this.options.draggable,this.sortable.el,!1)||t&&0!==t.button))for(;multiDragElements.length;){var e=multiDragElements[0];toggleClass(e,this.options.selectedClass,!1),multiDragElements.shift(),dispatchEvent({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:e,originalEvent:t})}},_checkKeyDown:function(t){t.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(t){t.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},_extends(t,{pluginName:"multiDrag",utils:{select:function(t){var e=t.parentNode[expando];e&&e.options.multiDrag&&!~multiDragElements.indexOf(t)&&(multiDragSortable&&multiDragSortable!==e&&(multiDragSortable.multiDrag._deselectMultiDrag(),multiDragSortable=e),toggleClass(t,e.options.selectedClass,!0),multiDragElements.push(t))},deselect:function(t){var e=t.parentNode[expando],o=multiDragElements.indexOf(t);e&&e.options.multiDrag&&~o&&(toggleClass(t,e.options.selectedClass,!1),multiDragElements.splice(o,1))}},eventProperties:function(){var t=this,e=[],o=[];return multiDragElements.forEach((function(n){var r;e.push({multiDragElement:n,index:n.sortableIndex}),r=folding&&n!==dragEl$1?-1:folding?index(n,":not(."+t.options.selectedClass+")"):index(n),o.push({multiDragElement:n,index:r})})),{items:_toConsumableArray(multiDragElements),clones:[].concat(multiDragClones),oldIndicies:e,newIndicies:o}},optionListeners:{multiDragKey:function(t){return"ctrl"===(t=t.toLowerCase())?t="Control":t.length>1&&(t=t.charAt(0).toUpperCase()+t.substr(1)),t}}})}function insertMultiDragElements(t,e){multiDragElements.forEach((function(o,n){var r=e.children[o.sortableIndex+(t?Number(n):0)];r?e.insertBefore(o,r):e.appendChild(o)}))}function insertMultiDragClones(t,e){multiDragClones.forEach((function(o,n){var r=e.children[o.sortableIndex+(t?Number(n):0)];r?e.insertBefore(o,r):e.appendChild(o)}))}function removeMultiDragElements(){multiDragElements.forEach((function(t){t!==dragEl$1&&t.parentNode&&t.parentNode.removeChild(t)}))}Sortable.mount(new AutoScrollPlugin),Sortable.mount(Remove,Revert),Sortable.mount(new SwapPlugin),Sortable.mount(new MultiDragPlugin);/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Sortable);
//# sourceMappingURL=sortablejs.bundle.js.map


/***/ }),

/***/ "./assets/cms/page-admin.js":
/*!**********************************!*\
  !*** ./assets/cms/page-admin.js ***!
  \**********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _admin_theme_plugins_custom_sortablejs_sortablejs_bundle_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../admin-theme/plugins/custom/sortablejs/sortablejs.bundle.js */ "./assets/admin-theme/plugins/custom/sortablejs/sortablejs.bundle.js");



let containers = null;
let dropzones = null;
let contentTypeList = null;
let CMSRouting = await CMSAdmin.getRouting();
let addBlockUrl = CMSRouting.generate('admin_networking_initcms_layoutblock_addBlock');
let sortUrl = CMSRouting.generate('admin_networking_initcms_layoutblock_updateLayoutBlockSort');
let deleteUrl = CMSRouting.generate('admin_networking_initcms_layoutblock_deleteAjax');
let lastTranslationSettingsHtml = null;
let pageId = null;
let erroredContainers = new Set();

function initDropZone() {

    containers = document.querySelectorAll(".draggable-zone");
    dropzones = document.querySelectorAll(".dropzone");
    contentTypeList = document.querySelector("#content_item_list");
    pageId = document.querySelector("meta[name='init-cms-page-id']").getAttribute("content");

    if (containers.length === 0) {
        return false;
    }

    let contentItems = new _admin_theme_plugins_custom_sortablejs_sortablejs_bundle_js__WEBPACK_IMPORTED_MODULE_0__["default"](contentTypeList, {
        group: {
            name: 'shared',
            pull: 'clone',
            put: false,
            revertClone: true,

        },sort: false,
        onEnd: function (/**Event*/evt) {
            hideContainerErrors()
        },
    })

    containers.forEach(function (container) {

        let swappable = new _admin_theme_plugins_custom_sortablejs_sortablejs_bundle_js__WEBPACK_IMPORTED_MODULE_0__["default"](container, {
            group: {name: 'shared', pull: true, put: acceptLayoutBlock},
            animation: 150,
            onEnd: function (/**Event*/evt) {

                hideContainerErrors()

                if(evt.newIndex === evt.oldIndex){
                    return
                }

                saveLayoutBlockSort(evt, (response) => {
                   // CMSAdmin.createInitCmsMessageBox(response.data.messageStatus, response.data.message);
                })
            },
            onAdd: function (/**CustomEvent*/evt, dragEl) {

                let count = evt.to.querySelectorAll('.draggable').length;
                let item = evt.item;

                if (!item.id) {

                    let dropzone = container.parentElement
                    createItem(item.dataset.contentType, dropzone.dataset.pageId, dropzone.dataset.zone, evt.newIndex)
                        .then((response) => {
                            item.outerHTML = response.data.html
                            CMSAdmin.createInitCmsMessageBox(response.data.messageStatus, response.data.message);
                            saveLayoutBlockSort(evt, (response) => {
                                CMSAdmin.createInitCmsMessageBox(response.data.messageStatus, response.data.message);
                            })

                        })
                        .catch((error) => {
                            let message = error.response.data.detail

                            CMSAdmin.createInitCmsMessageBox('error', message);
                        })
                }

                if (count) {
                    evt.to.querySelector('.empty_layout_block').classList.add("d-none")
                    return
                }

                evt.to.querySelector('.empty_layout_block').classList.remove("d-none")


            },
            onRemove: function (/**Event*/evt) {
                let count = evt.from.querySelectorAll('.draggable').length;
                if (count) {
                    evt.from.querySelector('.empty_layout_block').classList.add("d-none")
                    return
                }

                evt.from.querySelector('.empty_layout_block').classList.remove("d-none")

            }
        });
    })
}



let showContainerError = (container) => {
    let dropzone = container.closest('.dropzone')
    dropzone.classList.add('bg-light-danger')
    dropzone.closest('.dropzone').classList.add('border-danger')
    erroredContainers.add(dropzone)
}

let hideContainerErrors = () => {
    erroredContainers.forEach((item) => {
        item.classList.remove('bg-light-danger')
        item.classList.remove('border-danger')
    })
}

let acceptLayoutBlock = (to, from, dragEl) => {
    let container = to.el
    let contentBlock = dragEl
    let contentTypes = JSON.parse(container.dataset.contentTypes);
    if (contentTypes.length > 0) {
        if (!contentTypes.includes(contentBlock.dataset.contentType)) {
            showContainerError(container)
            return false

        }
    }

    let maxItems = container.dataset.maxItems;

    let count = container.querySelectorAll('.draggable').length;

    if (maxItems > 0) {
        if (count >= maxItems) {
            showContainerError(container)
            return false
        }
    }
    hideContainerErrors()
    return true
}

let saveLayoutBlockSort = (event, callback) => {
    // CMSAdmin.createInitCmsMessageBox(xhr.messageStatus, xhr.message);

    let zones = [];
    let pageId = null;
    let adminCode = null;

    dropzones.forEach(function (dropzone) {
        let layoutBlocks = dropzone.querySelectorAll(".draggable");
        let addButtons = dropzone.querySelectorAll(".add-layout");
        let zone = dropzone.dataset.zone

        if (!pageId) {
            pageId = dropzone.dataset.pageId
        }

        if (!adminCode) {
            adminCode = dropzone.dataset.adminCode
        }


        let layoutBlockIds = [];

        layoutBlocks.forEach(function (layoutBlock, index) {
            layoutBlock.dataset.sortOrder = index;
            layoutBlockIds.push(layoutBlock.id);
        })
        zones.push({
            zone: zone,
            layoutBlocks: layoutBlockIds
        })
    })

    submitLayoutSort(zones, pageId, adminCode).then(function (response) {

        let event = new CustomEvent('page-updated')
        document.body.dispatchEvent(event)
        if (callback !== undefined) {
            callback(response)
        }
    })

};

let createItem = async (contentType, pageId, zone, sortOrder) => {

    return await axios.get(addBlockUrl, {
        params: {
            subclass: contentType,
            zone: zone,
            pageId: pageId,
            sortOrder: sortOrder
        }
    }, axiosConfig)
}

let submitLayoutSort = async (zones, pageId, adminCode) => {
    return await axios.post(sortUrl, {
        zones: zones,
        pageId: pageId,
        code: adminCode,
    }, axiosConfig)
}
let editBlock = (e) => {
    e.preventDefault();
    let el = e.target;

    if (el.classList.contains('fa-pen-to-square')) {
        el = el.parentElement
    }

    let id = el.dataset.value


    let layoutBlock = document.getElementById('layoutBlock_' + id)
    layoutBlock.querySelector('.edit_block').setAttribute('disabled', true)
    layoutBlock.querySelector('.delete_block').setAttribute('disabled', true)

    let editUrl = CMSRouting.generate('admin_networking_initcms_layoutblock_edit', {id: id})
    let displayBlock = document.getElementById('layoutBlockHtml' + id)
    let editBlock = document.getElementById('editBlockHtml' + id)

    axios.get(editUrl, axiosConfig).then((response) => {
        editBlock.innerHTML = response.data.html
        displayBlock.classList.add('d-none')
        editBlock.classList.remove('d-none')
        document.body.dispatchEvent(new CustomEvent('fields:added'))
    }).catch((error) => {
        let message = error.response.data.detail
        CMSAdmin.createInitCmsMessageBox('error', message);
    })
}

let createBlock = (e) => {
    e.preventDefault();
    let el = e.target;

    if (el.classList.contains('fa-pen-to-square')) {
        el = el.parentElement
    }

    let id = el.dataset.value


    let layoutBlock = document.getElementById('layoutBlock_' + id)
    layoutBlock.querySelector('.create_block').setAttribute('disabled', true)

    let createUrl = CMSRouting.generate('admin_networking_initcms_layoutblock_create',{
        subclass: layoutBlock.dataset.contentType,
        zone: layoutBlock.dataset.zone,
        pageId: layoutBlock.dataset.pageId,
        sortOrder: layoutBlock.dataset.sortOrder
    })

    let displayBlock = document.getElementById('layoutBlockHtml' + id)
    let editBlock = document.getElementById('editBlockHtml' + id)

    axios.get(createUrl, axiosConfig).then((response) => {
        editBlock.innerHTML = response.data.html
        displayBlock.classList.add('d-none')
        editBlock.classList.remove('d-none')
        document.body.dispatchEvent(new CustomEvent('fields:added'))
    }).catch((error) => {
        if(!error.response){
            console.error(error)
            return
        }

        let message = error.response.data.detail
        CMSAdmin.createInitCmsMessageBox('error', message);
    })
}

let cancelEditBlock = (e) => {
    let id = e.target.dataset.value
    let displayBlock = document.getElementById('layoutBlockHtml' + id)
    let editBlock = document.getElementById('editBlockHtml' + id)
    let layoutBlock = document.getElementById('layoutBlock_' + id)
    layoutBlock.querySelector('.edit_block').removeAttribute('disabled')
    layoutBlock.querySelector('.delete_block').removeAttribute('disabled')
    editBlock.classList.add('d-none')
    editBlock.innerHTML = ''
    displayBlock.classList.remove('d-none')

}

let cancelCreateBlock = (e) => {
    e.preventDefault();
    let form = e.target.closest('form')
    let div = form.closest('[data-zone]')
    let id = div.getAttribute('id').replace('layoutBlock_', '')
    let displayBlock = document.getElementById('layoutBlockHtml' + id)
    let editBlock = document.getElementById('editBlockHtml' + id)
    let layoutBlock = document.getElementById('layoutBlock_' + id)
    layoutBlock.querySelector('.create_block').removeAttribute('disabled')
    editBlock.classList.add('d-none')
    editBlock.innerHTML = ''
    displayBlock.classList.remove('d-none')
}

let saveLayoutBlock = (e) => {
    e.preventDefault();
    let form = e.target.closest('form')
    let config = {
        url: form.action,
        method: form.method,
        data: new FormData(form),
        ...axiosConfig
    }

    if (form.enctype === 'multipart/form-data') {
        config.headers['Content-Type'] = 'multipart/form-data'
    }
    axios.request(config).then((response) => {
        if (response.status === 200) {
            let id = response.data.id
            let displayBlock = document.getElementById('layoutBlockHtml' + id)
            let editBlock = document.getElementById('editBlockHtml' + id)
            let layoutBlock = document.getElementById('layoutBlock_' + id)
            layoutBlock.querySelector('.edit_block').removeAttribute('disabled')
            layoutBlock.querySelector('.delete_block').removeAttribute('disabled')
            editBlock.classList.add('d-none')
            editBlock.innerHTML = ''
            displayBlock.classList.remove('d-none')
            displayBlock.innerHTML = response.data.html
            CMSAdmin.createInitCmsMessageBox(response.data.status, response.data.message);
            let event = new CustomEvent('page-updated')
            document.body.dispatchEvent(event)
        }
    }).catch((error) => {
        if(!error.response){
            console.error(error)
            return
        }

        let id = error.response.data.id
        let editBlock = document.getElementById('editBlockHtml' + id)
        editBlock.innerHTML = error.response.data.html
        CMSAdmin.createInitCmsMessageBox('error', error.response.data.message);
        document.body.dispatchEvent(new CustomEvent('fields:added'))
    })

}

let createLayoutBlock = (e) => {
    e.preventDefault();
    let form = e.target.closest('form')
    let config = {
        url: form.action,
        method: form.method,
        data: new FormData(form),
        ...axiosConfig
    }

    if (form.enctype === 'multipart/form-data') {
        config.headers['Content-Type'] = 'multipart/form-data'
    }

    let div = form.closest('[data-zone]')

    let id = div.getAttribute('id').replace('layoutBlock_', '')
    axios.request(config).then((response) => {
        if (response.status === 200) {
            let template = document.createElement('template');
            template.innerHTML = response.data.html.trim();;
            div.replaceWith(template.content.firstChild)
            CMSAdmin.createInitCmsMessageBox(response.data.status, response.data.message);
            let event = new CustomEvent('page-updated')
            document.body.dispatchEvent(event)
        }
    }).catch((error) => {
        if(!error.response){
            console.error(error)
            return
        }

        let editBlock = document.getElementById('editBlockHtml' + id)
        editBlock.innerHTML = error.response.data.html
        CMSAdmin.createInitCmsMessageBox('error', error.response.data.message);
        document.body.dispatchEvent(new CustomEvent('fields:added'))
    })

}

let toggleActive = (e) => {
    e.preventDefault();
    let el = e.target;
    if (el.classList.contains('ki-outline')) {
        el = el.parentElement
    }
    let icon = el.querySelector('i')
    let id = el.dataset.value
    let displayBlock = document.getElementById('layoutBlockHtml' + id)
    let url = CMSRouting.generate('admin_networking_initcms_layoutblock_toggleActive')

    axios.post(url, {id: id}, axiosConfig).then((response) => {


        CMSAdmin.createInitCmsMessageBox('success', response.data.message);
        if (response.data.active) {
            icon.classList.remove('ki-minus-circle')
            icon.classList.add('ki-check-circle')
            el.classList.remove('btn-light-danger')
            el.classList.add('btn-light-success')
            displayBlock.classList.remove('opacity-25')
            return
        }
        icon.classList.add('ki-minus-circle')
        icon.classList.remove('ki-check-circle')
        el.classList.add('btn-light-danger')
        el.classList.remove('btn-light-success')
        displayBlock.classList.add('opacity-25')
        let event = new CustomEvent('page-updated')
        document.body.dispatchEvent(event)
    }).catch((error) => {
        CMSAdmin.createInitCmsMessageBox('error', error.response.data.message);
    })

}


let deleteBlock = (e) => {
    e.preventDefault();
    let el = e.target;

    if (el.classList.contains('fa-trash')) {
        el = el.parentElement
    }

    let container = el.closest('.draggable-zone')


    Swal.fire({
        html: `Are you sure you want to delete this block?`,
        icon: "warning",
        buttonsStyling: false,
        showCancelButton: true,
        confirmButtonText: "Ok, got it!",
        cancelButtonText: 'Nope, cancel it',
        customClass: {
            confirmButton: "btn btn-danger",
            cancelButton: 'btn btn-primary'
        }
    }).then((result) => {
        if (result.isConfirmed) {
            axios.post(deleteUrl, {
                id: el.dataset.value,
                _method: 'DELETE'
            }).then((response) => {

                document.querySelector('#layoutBlock_' + el.dataset.value).remove()
                CMSAdmin.createInitCmsMessageBox(response.data.messageStatus, response.data.message);
                saveLayoutBlockSort();
                if (container.querySelectorAll('.draggable').length) {
                    container.querySelector('.empty_layout_block').classList.add("d-none")
                    return
                }

                container.querySelector('.empty_layout_block').classList.remove("d-none")

            }).catch((err) => {

                console.log(err)
                CMSAdmin.createInitCmsMessageBox('error', 'Something went wrong');
            })
        }
    })
}

let unlinkTranslation = (e) => {
    e.preventDefault();
    let el = e.target;

    let text = el.dataset.text
    let id = el.dataset.objectId

    Swal.fire({
        html: text,
        icon: "warning",
        buttonsStyling: false,
        showCancelButton: true,
        confirmButtonText: "Ok, got it!",
        cancelButtonText: 'Nope, cancel it',
        customClass: {
            confirmButton: "btn btn-danger",
            cancelButton: 'btn btn-primary'
        }
    }).then((result) => {
        if (result.isConfirmed) {

            let headers = {"X-HTTP-Method-Override": "DELETE", ...axiosConfig.headers}

            axios.post(el.href, {}, {
                headers: headers
            }).then((response) => {
                document.querySelector('#translations').innerHTML = response.data.html
                CMSAdmin.createInitCmsMessageBox('success', response.data.message);
            }).catch((err) => {

                console.log(err)
                CMSAdmin.createInitCmsMessageBox('error', 'Something went wrong');
            })
        }
    })
}

let linkTranslation = (e) => {
    e.preventDefault()

    let el = e.target;

    axios.get(el.href, axiosConfig).then((response) => {
        lastTranslationSettingsHtml = document.querySelector('#translations').innerHTML
        document.querySelector('#translations').innerHTML = response.data.html
    }).catch((err) => {
        console.log(err)
        CMSAdmin.createInitCmsMessageBox('error', 'Something went wrong');
    })
}

let submitTranslationLink = (e) => {
    e.preventDefault()

    let form = e.target.closest('form')

    if (e.submitter.classList.contains('btn-cancel') || e.submitter.classList.contains('cancel')) {
        document.querySelector('#translations').innerHTML = lastTranslationSettingsHtml
        return;
    }

    axios.post(form.action, new FormData(form), axiosConfig).then((response) => {
        document.querySelector('#translations').innerHTML = response.data.html
        CMSAdmin.createInitCmsMessageBox('success', response.data.message);
    }, axiosConfig).catch((err) => {

        if (err.response.data.message) {
            return CMSAdmin.createInitCmsMessageBox('error', err.response.data.message);
        }

        CMSAdmin.createInitCmsMessageBox('error', err.response.data.detail);
    })
}

let submitPageSettings = (e) => {
    e.preventDefault()
    let form = e.target.closest('form')

    form.elements.forEach((item) => {
        item.classList.remove('is-invalid')
    })

    axios.post(form.action, new FormData(form), axiosConfig).then((response) => {
        document.querySelector('#pageStatusSettings').innerHTML = response.data.pageStatusSettings

        if(response.data.layoutBlockSettingsHtml){
            document.querySelector('#page_content').innerHTML = response.data.layoutBlockSettingsHtml
            initDropZone()
        }

        CMSAdmin.createInitCmsMessageBox('success', response.data.message);
    }).catch((err) => {
        let data = err.response.data

        data.violations.forEach((item) => {
            let path = item.propertyPath
            let message = item.title
            let field = form.querySelector('[name="' + path + '"]')
            field.classList.add('is-invalid')
            field.setAttribute('required', 'required')

            if (field.nextElementSibling && field.nextElementSibling.classList.contains('invalid-feedback')) {
                field.nextElementSibling.innerHtml = message;
                return
            }
            field.insertAdjacentHTML('afterend', '<div class="invalid-feedback">' + message + '</div>')
        })
    })
}

let updatePageStatus = () => {
    axios.get(CMSRouting.generate('admin_networking_initcms_page_getPageStatus', {id: pageId}), axiosConfig)
        .then((response) => {
            document.querySelector('#pageStatusSettings').innerHTML = response.data.pageStatusSettings
        }).catch((err) => {
        if (err.response.data.message) {
            return CMSAdmin.createInitCmsMessageBox('error', err.response.data.message);
        }

        CMSAdmin.createInitCmsMessageBox('error', err.response.data.detail);
    })
}

let statusDialog = (e) => {
    e.preventDefault()

    let el = e.target;

    if (!el.href) {
        el = el.closest('a')
    }
    let text = el.dataset.text
    Swal.fire({
        html: text,
        icon: "warning",
        buttonsStyling: false,
        showCancelButton: true,
        confirmButtonText: "Ok, got it!",
        cancelButtonText: 'Nope, cancel it',
        customClass: {
            confirmButton: "btn btn-danger",
            cancelButton: 'btn btn-primary'
        }
    }).then((result) => {
        if (result.isConfirmed) {
            axios.post(el.href, axiosConfig).then((response) => {
                if (response.data.redirect) {
                    return window.location = response.data.redirect
                }
            }).catch((err) => {
                if (err.response.data.message) {
                    return CMSAdmin.createInitCmsMessageBox('error', err.response.data.message);
                }

                CMSAdmin.createInitCmsMessageBox('error', err.response.data.detail);
            })

        }
    })

}


KTUtil.onDOMContentLoaded(function () {

    KTUtil.on(document.body, '.delete_block', 'click', (e) => {
        deleteBlock(e)
    })

    KTUtil.on(document.body, '.edit_block', 'click', (e) => {
        editBlock(e)
    })

    KTUtil.on(document.body, '.create_block', 'click', (e) => {
        createBlock(e)
    })

    KTUtil.on(document.body, '.toggle-active', 'click', (e) => {
        toggleActive(e)
    })

    KTUtil.on(document.body, '[data-dismiss="edit"]', 'click', (e) => {
        cancelEditBlock(e)
    })


    KTUtil.on(document.body, '[data-dismiss="create"]', 'click', (e) => {
        cancelCreateBlock(e)
    })

    KTUtil.on(document.body, '[data-save="edit"]', 'click', (e) => {
        saveLayoutBlock(e)
    })

    KTUtil.on(document.body, '[data-save="create"]', 'click', (e) => {
        createLayoutBlock(e)
    })

    KTUtil.on(document.body, '.translation-dialog-unlink', 'click', (e) => {
        unlinkTranslation(e)
    });

    KTUtil.on(document.body, '.translation-dialog-link', 'click', (e) => {
        linkTranslation(e)
    });

    KTUtil.on(document.body, '#translation-link-form', 'submit', (e) => {
        submitTranslationLink(e)
    });

    KTUtil.on(document.body, '#translate-copy-page-form', 'submit', (e) => {
        submitTranslationLink(e)
    });

    KTUtil.on(document.body, '#page-settings-form', 'submit', (e) => {
        submitPageSettings(e)
    });

    KTUtil.on(document.body, '#page-metadata-form', 'submit', (e) => {
        submitPageSettings(e)
    });

    KTUtil.on(document.body, '.status-dialog-link', 'click', (e) => {
        statusDialog(e)
    });

    document.body.addEventListener('page-updated', (e) => {
        updatePageStatus()
    })


    initDropZone();
})
__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } }, 1);

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/async module */
/******/ 	(() => {
/******/ 		var webpackQueues = typeof Symbol === "function" ? Symbol("webpack queues") : "__webpack_queues__";
/******/ 		var webpackExports = typeof Symbol === "function" ? Symbol("webpack exports") : "__webpack_exports__";
/******/ 		var webpackError = typeof Symbol === "function" ? Symbol("webpack error") : "__webpack_error__";
/******/ 		var resolveQueue = (queue) => {
/******/ 			if(queue && queue.d < 1) {
/******/ 				queue.d = 1;
/******/ 				queue.forEach((fn) => (fn.r--));
/******/ 				queue.forEach((fn) => (fn.r-- ? fn.r++ : fn()));
/******/ 			}
/******/ 		}
/******/ 		var wrapDeps = (deps) => (deps.map((dep) => {
/******/ 			if(dep !== null && typeof dep === "object") {
/******/ 				if(dep[webpackQueues]) return dep;
/******/ 				if(dep.then) {
/******/ 					var queue = [];
/******/ 					queue.d = 0;
/******/ 					dep.then((r) => {
/******/ 						obj[webpackExports] = r;
/******/ 						resolveQueue(queue);
/******/ 					}, (e) => {
/******/ 						obj[webpackError] = e;
/******/ 						resolveQueue(queue);
/******/ 					});
/******/ 					var obj = {};
/******/ 					obj[webpackQueues] = (fn) => (fn(queue));
/******/ 					return obj;
/******/ 				}
/******/ 			}
/******/ 			var ret = {};
/******/ 			ret[webpackQueues] = x => {};
/******/ 			ret[webpackExports] = dep;
/******/ 			return ret;
/******/ 		}));
/******/ 		__webpack_require__.a = (module, body, hasAwait) => {
/******/ 			var queue;
/******/ 			hasAwait && ((queue = []).d = -1);
/******/ 			var depQueues = new Set();
/******/ 			var exports = module.exports;
/******/ 			var currentDeps;
/******/ 			var outerResolve;
/******/ 			var reject;
/******/ 			var promise = new Promise((resolve, rej) => {
/******/ 				reject = rej;
/******/ 				outerResolve = resolve;
/******/ 			});
/******/ 			promise[webpackExports] = exports;
/******/ 			promise[webpackQueues] = (fn) => (queue && fn(queue), depQueues.forEach(fn), promise["catch"](x => {}));
/******/ 			module.exports = promise;
/******/ 			body((deps) => {
/******/ 				currentDeps = wrapDeps(deps);
/******/ 				var fn;
/******/ 				var getResult = () => (currentDeps.map((d) => {
/******/ 					if(d[webpackError]) throw d[webpackError];
/******/ 					return d[webpackExports];
/******/ 				}))
/******/ 				var promise = new Promise((resolve) => {
/******/ 					fn = () => (resolve(getResult));
/******/ 					fn.r = 0;
/******/ 					var fnQueue = (q) => (q !== queue && !depQueues.has(q) && (depQueues.add(q), q && !q.d && (fn.r++, q.push(fn))));
/******/ 					currentDeps.map((dep) => (dep[webpackQueues](fnQueue)));
/******/ 				});
/******/ 				return fn.r ? promise : getResult();
/******/ 			}, (err) => ((err ? reject(promise[webpackError] = err) : outerResolve(exports)), resolveQueue(queue)));
/******/ 			queue && queue.d < 0 && (queue.d = 0);
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module used 'module' so it can't be inlined
/******/ 	var __webpack_exports__ = __webpack_require__("./assets/cms/page-admin.js");
/******/ 	
/******/ })()
;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCOztBQUU3Qix5QkFBeUI7QUFDekI7QUFDQTs7QUFFQTtBQUNBLHlCQUF5QjtBQUN6Qjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7O0FBR0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBLFNBQVM7QUFDVCxLQUFLO0FBQ0w7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOzs7QUFHQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULEtBQUs7O0FBRUw7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7OztBQUdBO0FBQ0E7QUFDQTs7QUFFQSxvRkFBb0YsT0FBTztBQUMzRjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOzs7QUFHQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxxQkFBcUIsT0FBTzs7O0FBRzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsS0FBSzs7QUFFTDs7O0FBR0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7O0FBRWI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUEsYUFBYTs7QUFFYjtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUEsMkJBQTJCOztBQUUzQixrQ0FBa0M7QUFDbEM7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLGFBQWE7O0FBRWI7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSztBQUNMOztBQUVBO0FBQ0Esa0ZBQWtGLFdBQVc7QUFDN0Y7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxhQUFhOztBQUViO0FBQ0EsS0FBSzs7QUFFTDs7O0FBR0E7O0FBRUE7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBLEtBQUs7OztBQUdMO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQSxLQUFLOzs7QUFHTDtBQUNBLENBQUM7Ozs7Ozs7O1VDanNCRDtVQUNBOztVQUVBO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7VUFDQTtVQUNBOztVQUVBO1VBQ0E7O1VBRUE7VUFDQTtVQUNBOzs7OztXQ3RCQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBLElBQUk7V0FDSjtXQUNBO1dBQ0EsSUFBSTtXQUNKO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBLENBQUM7V0FDRDtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0EsRUFBRTtXQUNGO1dBQ0Esc0dBQXNHO1dBQ3RHO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0EsR0FBRztXQUNIO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQSxHQUFHO1dBQ0g7V0FDQSxFQUFFO1dBQ0Y7V0FDQTs7Ozs7V0NoRUE7V0FDQTtXQUNBO1dBQ0E7V0FDQSx5Q0FBeUMsd0NBQXdDO1dBQ2pGO1dBQ0E7V0FDQTs7Ozs7V0NQQTs7Ozs7V0NBQTtXQUNBO1dBQ0E7V0FDQSx1REFBdUQsaUJBQWlCO1dBQ3hFO1dBQ0EsZ0RBQWdELGFBQWE7V0FDN0Q7Ozs7O1VFTkE7VUFDQTtVQUNBO1VBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9pbml0LWNtcy1idW5kbGUvLi9hc3NldHMvYWRtaW4tdGhlbWUvcGx1Z2lucy9jdXN0b20vc29ydGFibGVqcy9zb3J0YWJsZWpzLmJ1bmRsZS5qcyIsIndlYnBhY2s6Ly9pbml0LWNtcy1idW5kbGUvLi9hc3NldHMvY21zL3BhZ2UtYWRtaW4uanMiLCJ3ZWJwYWNrOi8vaW5pdC1jbXMtYnVuZGxlL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL2luaXQtY21zLWJ1bmRsZS93ZWJwYWNrL3J1bnRpbWUvYXN5bmMgbW9kdWxlIiwid2VicGFjazovL2luaXQtY21zLWJ1bmRsZS93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vaW5pdC1jbXMtYnVuZGxlL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vaW5pdC1jbXMtYnVuZGxlL3dlYnBhY2svcnVudGltZS9tYWtlIG5hbWVzcGFjZSBvYmplY3QiLCJ3ZWJwYWNrOi8vaW5pdC1jbXMtYnVuZGxlL3dlYnBhY2svYmVmb3JlLXN0YXJ0dXAiLCJ3ZWJwYWNrOi8vaW5pdC1jbXMtYnVuZGxlL3dlYnBhY2svc3RhcnR1cCIsIndlYnBhY2s6Ly9pbml0LWNtcy1idW5kbGUvd2VicGFjay9hZnRlci1zdGFydHVwIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKiFcbiAqIFNvcnRhYmxlIDEuMTUuMFxuICogQGF1dGhvclx0UnViYVhhICAgPHRyYXNoQHJ1YmF4YS5vcmc+XG4gKiBAYXV0aG9yXHRvd2VubSAgICA8b3dlbjIzMzU1QGdtYWlsLmNvbT5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5mdW5jdGlvbiBvd25LZXlzKHQsZSl7dmFyIG89T2JqZWN0LmtleXModCk7aWYoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyl7dmFyIG49T2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyh0KTtlJiYobj1uLmZpbHRlcigoZnVuY3Rpb24oZSl7cmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxlKS5lbnVtZXJhYmxlfSkpKSxvLnB1c2guYXBwbHkobyxuKX1yZXR1cm4gb31mdW5jdGlvbiBfb2JqZWN0U3ByZWFkMih0KXtmb3IodmFyIGU9MTtlPGFyZ3VtZW50cy5sZW5ndGg7ZSsrKXt2YXIgbz1udWxsIT1hcmd1bWVudHNbZV0/YXJndW1lbnRzW2VdOnt9O2UlMj9vd25LZXlzKE9iamVjdChvKSwhMCkuZm9yRWFjaCgoZnVuY3Rpb24oZSl7X2RlZmluZVByb3BlcnR5KHQsZSxvW2VdKX0pKTpPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycz9PYmplY3QuZGVmaW5lUHJvcGVydGllcyh0LE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKG8pKTpvd25LZXlzKE9iamVjdChvKSkuZm9yRWFjaCgoZnVuY3Rpb24oZSl7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsZSxPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG8sZSkpfSkpfXJldHVybiB0fWZ1bmN0aW9uIF90eXBlb2YodCl7cmV0dXJuIF90eXBlb2Y9XCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZcInN5bWJvbFwiPT10eXBlb2YgU3ltYm9sLml0ZXJhdG9yP2Z1bmN0aW9uKHQpe3JldHVybiB0eXBlb2YgdH06ZnVuY3Rpb24odCl7cmV0dXJuIHQmJlwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmdC5jb25zdHJ1Y3Rvcj09PVN5bWJvbCYmdCE9PVN5bWJvbC5wcm90b3R5cGU/XCJzeW1ib2xcIjp0eXBlb2YgdH0sX3R5cGVvZih0KX1mdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkodCxlLG8pe3JldHVybiBlIGluIHQ/T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsZSx7dmFsdWU6byxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMH0pOnRbZV09byx0fWZ1bmN0aW9uIF9leHRlbmRzKCl7cmV0dXJuIF9leHRlbmRzPU9iamVjdC5hc3NpZ258fGZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0xO2U8YXJndW1lbnRzLmxlbmd0aDtlKyspe3ZhciBvPWFyZ3VtZW50c1tlXTtmb3IodmFyIG4gaW4gbylPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobyxuKSYmKHRbbl09b1tuXSl9cmV0dXJuIHR9LF9leHRlbmRzLmFwcGx5KHRoaXMsYXJndW1lbnRzKX1mdW5jdGlvbiBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZSh0LGUpe2lmKG51bGw9PXQpcmV0dXJue307dmFyIG8sbixyPXt9LGw9T2JqZWN0LmtleXModCk7Zm9yKG49MDtuPGwubGVuZ3RoO24rKylvPWxbbl0sZS5pbmRleE9mKG8pPj0wfHwocltvXT10W29dKTtyZXR1cm4gcn1mdW5jdGlvbiBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXModCxlKXtpZihudWxsPT10KXJldHVybnt9O3ZhciBvLG4scj1fb2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZSh0LGUpO2lmKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpe3ZhciBsPU9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHModCk7Zm9yKG49MDtuPGwubGVuZ3RoO24rKylvPWxbbl0sZS5pbmRleE9mKG8pPj0wfHxPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwodCxvKSYmKHJbb109dFtvXSl9cmV0dXJuIHJ9ZnVuY3Rpb24gX3RvQ29uc3VtYWJsZUFycmF5KHQpe3JldHVybiBfYXJyYXlXaXRob3V0SG9sZXModCl8fF9pdGVyYWJsZVRvQXJyYXkodCl8fF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheSh0KXx8X25vbkl0ZXJhYmxlU3ByZWFkKCl9ZnVuY3Rpb24gX2FycmF5V2l0aG91dEhvbGVzKHQpe2lmKEFycmF5LmlzQXJyYXkodCkpcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KHQpfWZ1bmN0aW9uIF9pdGVyYWJsZVRvQXJyYXkodCl7aWYoXCJ1bmRlZmluZWRcIiE9dHlwZW9mIFN5bWJvbCYmbnVsbCE9dFtTeW1ib2wuaXRlcmF0b3JdfHxudWxsIT10W1wiQEBpdGVyYXRvclwiXSlyZXR1cm4gQXJyYXkuZnJvbSh0KX1mdW5jdGlvbiBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkodCxlKXtpZih0KXtpZihcInN0cmluZ1wiPT10eXBlb2YgdClyZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkodCxlKTt2YXIgbz1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodCkuc2xpY2UoOCwtMSk7cmV0dXJuXCJPYmplY3RcIj09PW8mJnQuY29uc3RydWN0b3ImJihvPXQuY29uc3RydWN0b3IubmFtZSksXCJNYXBcIj09PW98fFwiU2V0XCI9PT1vP0FycmF5LmZyb20odCk6XCJBcmd1bWVudHNcIj09PW98fC9eKD86VWl8SSludCg/Ojh8MTZ8MzIpKD86Q2xhbXBlZCk/QXJyYXkkLy50ZXN0KG8pP19hcnJheUxpa2VUb0FycmF5KHQsZSk6dm9pZCAwfX1mdW5jdGlvbiBfYXJyYXlMaWtlVG9BcnJheSh0LGUpeyhudWxsPT1lfHxlPnQubGVuZ3RoKSYmKGU9dC5sZW5ndGgpO2Zvcih2YXIgbz0wLG49bmV3IEFycmF5KGUpO288ZTtvKyspbltvXT10W29dO3JldHVybiBufWZ1bmN0aW9uIF9ub25JdGVyYWJsZVNwcmVhZCgpe3Rocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGF0dGVtcHQgdG8gc3ByZWFkIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuXCIpfXZhciB2ZXJzaW9uPVwiMS4xNS4wXCI7ZnVuY3Rpb24gdXNlckFnZW50KHQpe2lmKFwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3cmJndpbmRvdy5uYXZpZ2F0b3IpcmV0dXJuISFuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKHQpfXZhciBJRTExT3JMZXNzPXVzZXJBZ2VudCgvKD86VHJpZGVudC4qcnZbIDpdPzExXFwufG1zaWV8aWVtb2JpbGV8V2luZG93cyBQaG9uZSkvaSksRWRnZT11c2VyQWdlbnQoL0VkZ2UvaSksRmlyZUZveD11c2VyQWdlbnQoL2ZpcmVmb3gvaSksU2FmYXJpPXVzZXJBZ2VudCgvc2FmYXJpL2kpJiYhdXNlckFnZW50KC9jaHJvbWUvaSkmJiF1c2VyQWdlbnQoL2FuZHJvaWQvaSksSU9TPXVzZXJBZ2VudCgvaVAoYWR8b2R8aG9uZSkvaSksQ2hyb21lRm9yQW5kcm9pZD11c2VyQWdlbnQoL2Nocm9tZS9pKSYmdXNlckFnZW50KC9hbmRyb2lkL2kpLGNhcHR1cmVNb2RlPXtjYXB0dXJlOiExLHBhc3NpdmU6ITF9O2Z1bmN0aW9uIG9uKHQsZSxvKXt0LmFkZEV2ZW50TGlzdGVuZXIoZSxvLCFJRTExT3JMZXNzJiZjYXB0dXJlTW9kZSl9ZnVuY3Rpb24gb2ZmKHQsZSxvKXt0LnJlbW92ZUV2ZW50TGlzdGVuZXIoZSxvLCFJRTExT3JMZXNzJiZjYXB0dXJlTW9kZSl9ZnVuY3Rpb24gbWF0Y2hlcyh0LGUpe2lmKGUpe2lmKFwiPlwiPT09ZVswXSYmKGU9ZS5zdWJzdHJpbmcoMSkpLHQpdHJ5e2lmKHQubWF0Y2hlcylyZXR1cm4gdC5tYXRjaGVzKGUpO2lmKHQubXNNYXRjaGVzU2VsZWN0b3IpcmV0dXJuIHQubXNNYXRjaGVzU2VsZWN0b3IoZSk7aWYodC53ZWJraXRNYXRjaGVzU2VsZWN0b3IpcmV0dXJuIHQud2Via2l0TWF0Y2hlc1NlbGVjdG9yKGUpfWNhdGNoKHQpe3JldHVybiExfXJldHVybiExfX1mdW5jdGlvbiBnZXRQYXJlbnRPckhvc3QodCl7cmV0dXJuIHQuaG9zdCYmdCE9PWRvY3VtZW50JiZ0Lmhvc3Qubm9kZVR5cGU/dC5ob3N0OnQucGFyZW50Tm9kZX1mdW5jdGlvbiBjbG9zZXN0KHQsZSxvLG4pe2lmKHQpe289b3x8ZG9jdW1lbnQ7ZG97aWYobnVsbCE9ZSYmKFwiPlwiPT09ZVswXT90LnBhcmVudE5vZGU9PT1vJiZtYXRjaGVzKHQsZSk6bWF0Y2hlcyh0LGUpKXx8biYmdD09PW8pcmV0dXJuIHQ7aWYodD09PW8pYnJlYWt9d2hpbGUodD1nZXRQYXJlbnRPckhvc3QodCkpfXJldHVybiBudWxsfXZhciBfdGhyb3R0bGVUaW1lb3V0LFJfU1BBQ0U9L1xccysvZztmdW5jdGlvbiB0b2dnbGVDbGFzcyh0LGUsbyl7aWYodCYmZSlpZih0LmNsYXNzTGlzdCl0LmNsYXNzTGlzdFtvP1wiYWRkXCI6XCJyZW1vdmVcIl0oZSk7ZWxzZXt2YXIgbj0oXCIgXCIrdC5jbGFzc05hbWUrXCIgXCIpLnJlcGxhY2UoUl9TUEFDRSxcIiBcIikucmVwbGFjZShcIiBcIitlK1wiIFwiLFwiIFwiKTt0LmNsYXNzTmFtZT0obisobz9cIiBcIitlOlwiXCIpKS5yZXBsYWNlKFJfU1BBQ0UsXCIgXCIpfX1mdW5jdGlvbiBjc3ModCxlLG8pe3ZhciBuPXQmJnQuc3R5bGU7aWYobil7aWYodm9pZCAwPT09bylyZXR1cm4gZG9jdW1lbnQuZGVmYXVsdFZpZXcmJmRvY3VtZW50LmRlZmF1bHRWaWV3LmdldENvbXB1dGVkU3R5bGU/bz1kb2N1bWVudC5kZWZhdWx0Vmlldy5nZXRDb21wdXRlZFN0eWxlKHQsXCJcIik6dC5jdXJyZW50U3R5bGUmJihvPXQuY3VycmVudFN0eWxlKSx2b2lkIDA9PT1lP286b1tlXTtlIGluIG58fC0xIT09ZS5pbmRleE9mKFwid2Via2l0XCIpfHwoZT1cIi13ZWJraXQtXCIrZSksbltlXT1vKyhcInN0cmluZ1wiPT10eXBlb2Ygbz9cIlwiOlwicHhcIil9fWZ1bmN0aW9uIG1hdHJpeCh0LGUpe3ZhciBvPVwiXCI7aWYoXCJzdHJpbmdcIj09dHlwZW9mIHQpbz10O2Vsc2UgZG97dmFyIG49Y3NzKHQsXCJ0cmFuc2Zvcm1cIik7biYmXCJub25lXCIhPT1uJiYobz1uK1wiIFwiK28pfXdoaWxlKCFlJiYodD10LnBhcmVudE5vZGUpKTt2YXIgcj13aW5kb3cuRE9NTWF0cml4fHx3aW5kb3cuV2ViS2l0Q1NTTWF0cml4fHx3aW5kb3cuQ1NTTWF0cml4fHx3aW5kb3cuTVNDU1NNYXRyaXg7cmV0dXJuIHImJm5ldyByKG8pfWZ1bmN0aW9uIGZpbmQodCxlLG8pe2lmKHQpe3ZhciBuPXQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoZSkscj0wLGw9bi5sZW5ndGg7aWYobylmb3IoO3I8bDtyKyspbyhuW3JdLHIpO3JldHVybiBufXJldHVybltdfWZ1bmN0aW9uIGdldFdpbmRvd1Njcm9sbGluZ0VsZW1lbnQoKXt2YXIgdD1kb2N1bWVudC5zY3JvbGxpbmdFbGVtZW50O3JldHVybiB0fHxkb2N1bWVudC5kb2N1bWVudEVsZW1lbnR9ZnVuY3Rpb24gZ2V0UmVjdCh0LGUsbyxuLHIpe2lmKHQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0fHx0PT09d2luZG93KXt2YXIgbCxhLGkscyxjLGQsdTtpZih0IT09d2luZG93JiZ0LnBhcmVudE5vZGUmJnQhPT1nZXRXaW5kb3dTY3JvbGxpbmdFbGVtZW50KCk/KGE9KGw9dC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSkudG9wLGk9bC5sZWZ0LHM9bC5ib3R0b20sYz1sLnJpZ2h0LGQ9bC5oZWlnaHQsdT1sLndpZHRoKTooYT0wLGk9MCxzPXdpbmRvdy5pbm5lckhlaWdodCxjPXdpbmRvdy5pbm5lcldpZHRoLGQ9d2luZG93LmlubmVySGVpZ2h0LHU9d2luZG93LmlubmVyV2lkdGgpLChlfHxvKSYmdCE9PXdpbmRvdyYmKHI9cnx8dC5wYXJlbnROb2RlLCFJRTExT3JMZXNzKSlkb3tpZihyJiZyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCYmKFwibm9uZVwiIT09Y3NzKHIsXCJ0cmFuc2Zvcm1cIil8fG8mJlwic3RhdGljXCIhPT1jc3MocixcInBvc2l0aW9uXCIpKSl7dmFyIGc9ci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTthLT1nLnRvcCtwYXJzZUludChjc3MocixcImJvcmRlci10b3Atd2lkdGhcIikpLGktPWcubGVmdCtwYXJzZUludChjc3MocixcImJvcmRlci1sZWZ0LXdpZHRoXCIpKSxzPWErbC5oZWlnaHQsYz1pK2wud2lkdGg7YnJlYWt9fXdoaWxlKHI9ci5wYXJlbnROb2RlKTtpZihuJiZ0IT09d2luZG93KXt2YXIgaD1tYXRyaXgocnx8dCkscD1oJiZoLmEsZj1oJiZoLmQ7aCYmKHM9KGEvPWYpKyhkLz1mKSxjPShpLz1wKSsodS89cCkpfXJldHVybnt0b3A6YSxsZWZ0OmksYm90dG9tOnMscmlnaHQ6Yyx3aWR0aDp1LGhlaWdodDpkfX19ZnVuY3Rpb24gaXNTY3JvbGxlZFBhc3QodCxlLG8pe2Zvcih2YXIgbj1nZXRQYXJlbnRBdXRvU2Nyb2xsRWxlbWVudCh0LCEwKSxyPWdldFJlY3QodClbZV07bjspe3ZhciBsPWdldFJlY3Qobilbb107aWYoIShcInRvcFwiPT09b3x8XCJsZWZ0XCI9PT1vP3I+PWw6cjw9bCkpcmV0dXJuIG47aWYobj09PWdldFdpbmRvd1Njcm9sbGluZ0VsZW1lbnQoKSlicmVhaztuPWdldFBhcmVudEF1dG9TY3JvbGxFbGVtZW50KG4sITEpfXJldHVybiExfWZ1bmN0aW9uIGdldENoaWxkKHQsZSxvLG4pe2Zvcih2YXIgcj0wLGw9MCxhPXQuY2hpbGRyZW47bDxhLmxlbmd0aDspe2lmKFwibm9uZVwiIT09YVtsXS5zdHlsZS5kaXNwbGF5JiZhW2xdIT09U29ydGFibGUuZ2hvc3QmJihufHxhW2xdIT09U29ydGFibGUuZHJhZ2dlZCkmJmNsb3Nlc3QoYVtsXSxvLmRyYWdnYWJsZSx0LCExKSl7aWYocj09PWUpcmV0dXJuIGFbbF07cisrfWwrK31yZXR1cm4gbnVsbH1mdW5jdGlvbiBsYXN0Q2hpbGQodCxlKXtmb3IodmFyIG89dC5sYXN0RWxlbWVudENoaWxkO28mJihvPT09U29ydGFibGUuZ2hvc3R8fFwibm9uZVwiPT09Y3NzKG8sXCJkaXNwbGF5XCIpfHxlJiYhbWF0Y2hlcyhvLGUpKTspbz1vLnByZXZpb3VzRWxlbWVudFNpYmxpbmc7cmV0dXJuIG98fG51bGx9ZnVuY3Rpb24gaW5kZXgodCxlKXt2YXIgbz0wO2lmKCF0fHwhdC5wYXJlbnROb2RlKXJldHVybi0xO2Zvcig7dD10LnByZXZpb3VzRWxlbWVudFNpYmxpbmc7KVwiVEVNUExBVEVcIj09PXQubm9kZU5hbWUudG9VcHBlckNhc2UoKXx8dD09PVNvcnRhYmxlLmNsb25lfHxlJiYhbWF0Y2hlcyh0LGUpfHxvKys7cmV0dXJuIG99ZnVuY3Rpb24gZ2V0UmVsYXRpdmVTY3JvbGxPZmZzZXQodCl7dmFyIGU9MCxvPTAsbj1nZXRXaW5kb3dTY3JvbGxpbmdFbGVtZW50KCk7aWYodClkb3t2YXIgcj1tYXRyaXgodCksbD1yLmEsYT1yLmQ7ZSs9dC5zY3JvbGxMZWZ0Kmwsbys9dC5zY3JvbGxUb3AqYX13aGlsZSh0IT09biYmKHQ9dC5wYXJlbnROb2RlKSk7cmV0dXJuW2Usb119ZnVuY3Rpb24gaW5kZXhPZk9iamVjdCh0LGUpe2Zvcih2YXIgbyBpbiB0KWlmKHQuaGFzT3duUHJvcGVydHkobykpZm9yKHZhciBuIGluIGUpaWYoZS5oYXNPd25Qcm9wZXJ0eShuKSYmZVtuXT09PXRbb11bbl0pcmV0dXJuIE51bWJlcihvKTtyZXR1cm4tMX1mdW5jdGlvbiBnZXRQYXJlbnRBdXRvU2Nyb2xsRWxlbWVudCh0LGUpe2lmKCF0fHwhdC5nZXRCb3VuZGluZ0NsaWVudFJlY3QpcmV0dXJuIGdldFdpbmRvd1Njcm9sbGluZ0VsZW1lbnQoKTt2YXIgbz10LG49ITE7ZG97aWYoby5jbGllbnRXaWR0aDxvLnNjcm9sbFdpZHRofHxvLmNsaWVudEhlaWdodDxvLnNjcm9sbEhlaWdodCl7dmFyIHI9Y3NzKG8pO2lmKG8uY2xpZW50V2lkdGg8by5zY3JvbGxXaWR0aCYmKFwiYXV0b1wiPT1yLm92ZXJmbG93WHx8XCJzY3JvbGxcIj09ci5vdmVyZmxvd1gpfHxvLmNsaWVudEhlaWdodDxvLnNjcm9sbEhlaWdodCYmKFwiYXV0b1wiPT1yLm92ZXJmbG93WXx8XCJzY3JvbGxcIj09ci5vdmVyZmxvd1kpKXtpZighby5nZXRCb3VuZGluZ0NsaWVudFJlY3R8fG89PT1kb2N1bWVudC5ib2R5KXJldHVybiBnZXRXaW5kb3dTY3JvbGxpbmdFbGVtZW50KCk7aWYobnx8ZSlyZXR1cm4gbztuPSEwfX19d2hpbGUobz1vLnBhcmVudE5vZGUpO3JldHVybiBnZXRXaW5kb3dTY3JvbGxpbmdFbGVtZW50KCl9ZnVuY3Rpb24gZXh0ZW5kKHQsZSl7aWYodCYmZSlmb3IodmFyIG8gaW4gZSllLmhhc093blByb3BlcnR5KG8pJiYodFtvXT1lW29dKTtyZXR1cm4gdH1mdW5jdGlvbiBpc1JlY3RFcXVhbCh0LGUpe3JldHVybiBNYXRoLnJvdW5kKHQudG9wKT09PU1hdGgucm91bmQoZS50b3ApJiZNYXRoLnJvdW5kKHQubGVmdCk9PT1NYXRoLnJvdW5kKGUubGVmdCkmJk1hdGgucm91bmQodC5oZWlnaHQpPT09TWF0aC5yb3VuZChlLmhlaWdodCkmJk1hdGgucm91bmQodC53aWR0aCk9PT1NYXRoLnJvdW5kKGUud2lkdGgpfWZ1bmN0aW9uIHRocm90dGxlKHQsZSl7cmV0dXJuIGZ1bmN0aW9uKCl7aWYoIV90aHJvdHRsZVRpbWVvdXQpe3ZhciBvPWFyZ3VtZW50czsxPT09by5sZW5ndGg/dC5jYWxsKHRoaXMsb1swXSk6dC5hcHBseSh0aGlzLG8pLF90aHJvdHRsZVRpbWVvdXQ9c2V0VGltZW91dCgoZnVuY3Rpb24oKXtfdGhyb3R0bGVUaW1lb3V0PXZvaWQgMH0pLGUpfX19ZnVuY3Rpb24gY2FuY2VsVGhyb3R0bGUoKXtjbGVhclRpbWVvdXQoX3Rocm90dGxlVGltZW91dCksX3Rocm90dGxlVGltZW91dD12b2lkIDB9ZnVuY3Rpb24gc2Nyb2xsQnkodCxlLG8pe3Quc2Nyb2xsTGVmdCs9ZSx0LnNjcm9sbFRvcCs9b31mdW5jdGlvbiBjbG9uZSh0KXt2YXIgZT13aW5kb3cuUG9seW1lcixvPXdpbmRvdy5qUXVlcnl8fHdpbmRvdy5aZXB0bztyZXR1cm4gZSYmZS5kb20/ZS5kb20odCkuY2xvbmVOb2RlKCEwKTpvP28odCkuY2xvbmUoITApWzBdOnQuY2xvbmVOb2RlKCEwKX1mdW5jdGlvbiBzZXRSZWN0KHQsZSl7Y3NzKHQsXCJwb3NpdGlvblwiLFwiYWJzb2x1dGVcIiksY3NzKHQsXCJ0b3BcIixlLnRvcCksY3NzKHQsXCJsZWZ0XCIsZS5sZWZ0KSxjc3ModCxcIndpZHRoXCIsZS53aWR0aCksY3NzKHQsXCJoZWlnaHRcIixlLmhlaWdodCl9ZnVuY3Rpb24gdW5zZXRSZWN0KHQpe2Nzcyh0LFwicG9zaXRpb25cIixcIlwiKSxjc3ModCxcInRvcFwiLFwiXCIpLGNzcyh0LFwibGVmdFwiLFwiXCIpLGNzcyh0LFwid2lkdGhcIixcIlwiKSxjc3ModCxcImhlaWdodFwiLFwiXCIpfXZhciBleHBhbmRvPVwiU29ydGFibGVcIisobmV3IERhdGUpLmdldFRpbWUoKTtmdW5jdGlvbiBBbmltYXRpb25TdGF0ZU1hbmFnZXIoKXt2YXIgdCxlPVtdO3JldHVybntjYXB0dXJlQW5pbWF0aW9uU3RhdGU6ZnVuY3Rpb24oKXsoZT1bXSx0aGlzLm9wdGlvbnMuYW5pbWF0aW9uKSYmW10uc2xpY2UuY2FsbCh0aGlzLmVsLmNoaWxkcmVuKS5mb3JFYWNoKChmdW5jdGlvbih0KXtpZihcIm5vbmVcIiE9PWNzcyh0LFwiZGlzcGxheVwiKSYmdCE9PVNvcnRhYmxlLmdob3N0KXtlLnB1c2goe3RhcmdldDp0LHJlY3Q6Z2V0UmVjdCh0KX0pO3ZhciBvPV9vYmplY3RTcHJlYWQyKHt9LGVbZS5sZW5ndGgtMV0ucmVjdCk7aWYodC50aGlzQW5pbWF0aW9uRHVyYXRpb24pe3ZhciBuPW1hdHJpeCh0LCEwKTtuJiYoby50b3AtPW4uZixvLmxlZnQtPW4uZSl9dC5mcm9tUmVjdD1vfX0pKX0sYWRkQW5pbWF0aW9uU3RhdGU6ZnVuY3Rpb24odCl7ZS5wdXNoKHQpfSxyZW1vdmVBbmltYXRpb25TdGF0ZTpmdW5jdGlvbih0KXtlLnNwbGljZShpbmRleE9mT2JqZWN0KGUse3RhcmdldDp0fSksMSl9LGFuaW1hdGVBbGw6ZnVuY3Rpb24obyl7dmFyIG49dGhpcztpZighdGhpcy5vcHRpb25zLmFuaW1hdGlvbilyZXR1cm4gY2xlYXJUaW1lb3V0KHQpLHZvaWQoXCJmdW5jdGlvblwiPT10eXBlb2YgbyYmbygpKTt2YXIgcj0hMSxsPTA7ZS5mb3JFYWNoKChmdW5jdGlvbih0KXt2YXIgZT0wLG89dC50YXJnZXQsYT1vLmZyb21SZWN0LGk9Z2V0UmVjdChvKSxzPW8ucHJldkZyb21SZWN0LGM9by5wcmV2VG9SZWN0LGQ9dC5yZWN0LHU9bWF0cml4KG8sITApO3UmJihpLnRvcC09dS5mLGkubGVmdC09dS5lKSxvLnRvUmVjdD1pLG8udGhpc0FuaW1hdGlvbkR1cmF0aW9uJiZpc1JlY3RFcXVhbChzLGkpJiYhaXNSZWN0RXF1YWwoYSxpKSYmKGQudG9wLWkudG9wKS8oZC5sZWZ0LWkubGVmdCk9PShhLnRvcC1pLnRvcCkvKGEubGVmdC1pLmxlZnQpJiYoZT1jYWxjdWxhdGVSZWFsVGltZShkLHMsYyxuLm9wdGlvbnMpKSxpc1JlY3RFcXVhbChpLGEpfHwoby5wcmV2RnJvbVJlY3Q9YSxvLnByZXZUb1JlY3Q9aSxlfHwoZT1uLm9wdGlvbnMuYW5pbWF0aW9uKSxuLmFuaW1hdGUobyxkLGksZSkpLGUmJihyPSEwLGw9TWF0aC5tYXgobCxlKSxjbGVhclRpbWVvdXQoby5hbmltYXRpb25SZXNldFRpbWVyKSxvLmFuaW1hdGlvblJlc2V0VGltZXI9c2V0VGltZW91dCgoZnVuY3Rpb24oKXtvLmFuaW1hdGlvblRpbWU9MCxvLnByZXZGcm9tUmVjdD1udWxsLG8uZnJvbVJlY3Q9bnVsbCxvLnByZXZUb1JlY3Q9bnVsbCxvLnRoaXNBbmltYXRpb25EdXJhdGlvbj1udWxsfSksZSksby50aGlzQW5pbWF0aW9uRHVyYXRpb249ZSl9KSksY2xlYXJUaW1lb3V0KHQpLHI/dD1zZXRUaW1lb3V0KChmdW5jdGlvbigpe1wiZnVuY3Rpb25cIj09dHlwZW9mIG8mJm8oKX0pLGwpOlwiZnVuY3Rpb25cIj09dHlwZW9mIG8mJm8oKSxlPVtdfSxhbmltYXRlOmZ1bmN0aW9uKHQsZSxvLG4pe2lmKG4pe2Nzcyh0LFwidHJhbnNpdGlvblwiLFwiXCIpLGNzcyh0LFwidHJhbnNmb3JtXCIsXCJcIik7dmFyIHI9bWF0cml4KHRoaXMuZWwpLGw9ciYmci5hLGE9ciYmci5kLGk9KGUubGVmdC1vLmxlZnQpLyhsfHwxKSxzPShlLnRvcC1vLnRvcCkvKGF8fDEpO3QuYW5pbWF0aW5nWD0hIWksdC5hbmltYXRpbmdZPSEhcyxjc3ModCxcInRyYW5zZm9ybVwiLFwidHJhbnNsYXRlM2QoXCIraStcInB4LFwiK3MrXCJweCwwKVwiKSx0aGlzLmZvclJlcGFpbnREdW1teT1yZXBhaW50KHQpLGNzcyh0LFwidHJhbnNpdGlvblwiLFwidHJhbnNmb3JtIFwiK24rXCJtc1wiKyh0aGlzLm9wdGlvbnMuZWFzaW5nP1wiIFwiK3RoaXMub3B0aW9ucy5lYXNpbmc6XCJcIikpLGNzcyh0LFwidHJhbnNmb3JtXCIsXCJ0cmFuc2xhdGUzZCgwLDAsMClcIiksXCJudW1iZXJcIj09dHlwZW9mIHQuYW5pbWF0ZWQmJmNsZWFyVGltZW91dCh0LmFuaW1hdGVkKSx0LmFuaW1hdGVkPXNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7Y3NzKHQsXCJ0cmFuc2l0aW9uXCIsXCJcIiksY3NzKHQsXCJ0cmFuc2Zvcm1cIixcIlwiKSx0LmFuaW1hdGVkPSExLHQuYW5pbWF0aW5nWD0hMSx0LmFuaW1hdGluZ1k9ITF9KSxuKX19fX1mdW5jdGlvbiByZXBhaW50KHQpe3JldHVybiB0Lm9mZnNldFdpZHRofWZ1bmN0aW9uIGNhbGN1bGF0ZVJlYWxUaW1lKHQsZSxvLG4pe3JldHVybiBNYXRoLnNxcnQoTWF0aC5wb3coZS50b3AtdC50b3AsMikrTWF0aC5wb3coZS5sZWZ0LXQubGVmdCwyKSkvTWF0aC5zcXJ0KE1hdGgucG93KGUudG9wLW8udG9wLDIpK01hdGgucG93KGUubGVmdC1vLmxlZnQsMikpKm4uYW5pbWF0aW9ufXZhciBwbHVnaW5zPVtdLGRlZmF1bHRzPXtpbml0aWFsaXplQnlEZWZhdWx0OiEwfSxQbHVnaW5NYW5hZ2VyPXttb3VudDpmdW5jdGlvbih0KXtmb3IodmFyIGUgaW4gZGVmYXVsdHMpZGVmYXVsdHMuaGFzT3duUHJvcGVydHkoZSkmJiEoZSBpbiB0KSYmKHRbZV09ZGVmYXVsdHNbZV0pO3BsdWdpbnMuZm9yRWFjaCgoZnVuY3Rpb24oZSl7aWYoZS5wbHVnaW5OYW1lPT09dC5wbHVnaW5OYW1lKXRocm93XCJTb3J0YWJsZTogQ2Fubm90IG1vdW50IHBsdWdpbiBcIi5jb25jYXQodC5wbHVnaW5OYW1lLFwiIG1vcmUgdGhhbiBvbmNlXCIpfSkpLHBsdWdpbnMucHVzaCh0KX0scGx1Z2luRXZlbnQ6ZnVuY3Rpb24odCxlLG8pe3ZhciBuPXRoaXM7dGhpcy5ldmVudENhbmNlbGVkPSExLG8uY2FuY2VsPWZ1bmN0aW9uKCl7bi5ldmVudENhbmNlbGVkPSEwfTt2YXIgcj10K1wiR2xvYmFsXCI7cGx1Z2lucy5mb3JFYWNoKChmdW5jdGlvbihuKXtlW24ucGx1Z2luTmFtZV0mJihlW24ucGx1Z2luTmFtZV1bcl0mJmVbbi5wbHVnaW5OYW1lXVtyXShfb2JqZWN0U3ByZWFkMih7c29ydGFibGU6ZX0sbykpLGUub3B0aW9uc1tuLnBsdWdpbk5hbWVdJiZlW24ucGx1Z2luTmFtZV1bdF0mJmVbbi5wbHVnaW5OYW1lXVt0XShfb2JqZWN0U3ByZWFkMih7c29ydGFibGU6ZX0sbykpKX0pKX0saW5pdGlhbGl6ZVBsdWdpbnM6ZnVuY3Rpb24odCxlLG8sbil7Zm9yKHZhciByIGluIHBsdWdpbnMuZm9yRWFjaCgoZnVuY3Rpb24obil7dmFyIHI9bi5wbHVnaW5OYW1lO2lmKHQub3B0aW9uc1tyXXx8bi5pbml0aWFsaXplQnlEZWZhdWx0KXt2YXIgbD1uZXcgbih0LGUsdC5vcHRpb25zKTtsLnNvcnRhYmxlPXQsbC5vcHRpb25zPXQub3B0aW9ucyx0W3JdPWwsX2V4dGVuZHMobyxsLmRlZmF1bHRzKX19KSksdC5vcHRpb25zKWlmKHQub3B0aW9ucy5oYXNPd25Qcm9wZXJ0eShyKSl7dmFyIGw9dGhpcy5tb2RpZnlPcHRpb24odCxyLHQub3B0aW9uc1tyXSk7dm9pZCAwIT09bCYmKHQub3B0aW9uc1tyXT1sKX19LGdldEV2ZW50UHJvcGVydGllczpmdW5jdGlvbih0LGUpe3ZhciBvPXt9O3JldHVybiBwbHVnaW5zLmZvckVhY2goKGZ1bmN0aW9uKG4pe1wiZnVuY3Rpb25cIj09dHlwZW9mIG4uZXZlbnRQcm9wZXJ0aWVzJiZfZXh0ZW5kcyhvLG4uZXZlbnRQcm9wZXJ0aWVzLmNhbGwoZVtuLnBsdWdpbk5hbWVdLHQpKX0pKSxvfSxtb2RpZnlPcHRpb246ZnVuY3Rpb24odCxlLG8pe3ZhciBuO3JldHVybiBwbHVnaW5zLmZvckVhY2goKGZ1bmN0aW9uKHIpe3Rbci5wbHVnaW5OYW1lXSYmci5vcHRpb25MaXN0ZW5lcnMmJlwiZnVuY3Rpb25cIj09dHlwZW9mIHIub3B0aW9uTGlzdGVuZXJzW2VdJiYobj1yLm9wdGlvbkxpc3RlbmVyc1tlXS5jYWxsKHRbci5wbHVnaW5OYW1lXSxvKSl9KSksbn19O2Z1bmN0aW9uIGRpc3BhdGNoRXZlbnQodCl7dmFyIGU9dC5zb3J0YWJsZSxvPXQucm9vdEVsLG49dC5uYW1lLHI9dC50YXJnZXRFbCxsPXQuY2xvbmVFbCxhPXQudG9FbCxpPXQuZnJvbUVsLHM9dC5vbGRJbmRleCxjPXQubmV3SW5kZXgsZD10Lm9sZERyYWdnYWJsZUluZGV4LHU9dC5uZXdEcmFnZ2FibGVJbmRleCxnPXQub3JpZ2luYWxFdmVudCxoPXQucHV0U29ydGFibGUscD10LmV4dHJhRXZlbnRQcm9wZXJ0aWVzO2lmKGU9ZXx8byYmb1tleHBhbmRvXSl7dmFyIGYsbT1lLm9wdGlvbnMsdj1cIm9uXCIrbi5jaGFyQXQoMCkudG9VcHBlckNhc2UoKStuLnN1YnN0cigxKTshd2luZG93LkN1c3RvbUV2ZW50fHxJRTExT3JMZXNzfHxFZGdlPyhmPWRvY3VtZW50LmNyZWF0ZUV2ZW50KFwiRXZlbnRcIikpLmluaXRFdmVudChuLCEwLCEwKTpmPW5ldyBDdXN0b21FdmVudChuLHtidWJibGVzOiEwLGNhbmNlbGFibGU6ITB9KSxmLnRvPWF8fG8sZi5mcm9tPWl8fG8sZi5pdGVtPXJ8fG8sZi5jbG9uZT1sLGYub2xkSW5kZXg9cyxmLm5ld0luZGV4PWMsZi5vbGREcmFnZ2FibGVJbmRleD1kLGYubmV3RHJhZ2dhYmxlSW5kZXg9dSxmLm9yaWdpbmFsRXZlbnQ9ZyxmLnB1bGxNb2RlPWg/aC5sYXN0UHV0TW9kZTp2b2lkIDA7dmFyIEU9X29iamVjdFNwcmVhZDIoX29iamVjdFNwcmVhZDIoe30scCksUGx1Z2luTWFuYWdlci5nZXRFdmVudFByb3BlcnRpZXMobixlKSk7Zm9yKHZhciBiIGluIEUpZltiXT1FW2JdO28mJm8uZGlzcGF0Y2hFdmVudChmKSxtW3ZdJiZtW3ZdLmNhbGwoZSxmKX19dmFyIF9leGNsdWRlZD1bXCJldnRcIl0scGx1Z2luRXZlbnQ9ZnVuY3Rpb24odCxlKXt2YXIgbz1hcmd1bWVudHMubGVuZ3RoPjImJnZvaWQgMCE9PWFyZ3VtZW50c1syXT9hcmd1bWVudHNbMl06e30sbj1vLmV2dCxyPV9vYmplY3RXaXRob3V0UHJvcGVydGllcyhvLF9leGNsdWRlZCk7UGx1Z2luTWFuYWdlci5wbHVnaW5FdmVudC5iaW5kKFNvcnRhYmxlKSh0LGUsX29iamVjdFNwcmVhZDIoe2RyYWdFbDpkcmFnRWwscGFyZW50RWw6cGFyZW50RWwsZ2hvc3RFbDpnaG9zdEVsLHJvb3RFbDpyb290RWwsbmV4dEVsOm5leHRFbCxsYXN0RG93bkVsOmxhc3REb3duRWwsY2xvbmVFbDpjbG9uZUVsLGNsb25lSGlkZGVuOmNsb25lSGlkZGVuLGRyYWdTdGFydGVkOm1vdmVkLHB1dFNvcnRhYmxlOnB1dFNvcnRhYmxlLGFjdGl2ZVNvcnRhYmxlOlNvcnRhYmxlLmFjdGl2ZSxvcmlnaW5hbEV2ZW50Om4sb2xkSW5kZXg6b2xkSW5kZXgsb2xkRHJhZ2dhYmxlSW5kZXg6b2xkRHJhZ2dhYmxlSW5kZXgsbmV3SW5kZXg6bmV3SW5kZXgsbmV3RHJhZ2dhYmxlSW5kZXg6bmV3RHJhZ2dhYmxlSW5kZXgsaGlkZUdob3N0Rm9yVGFyZ2V0Ol9oaWRlR2hvc3RGb3JUYXJnZXQsdW5oaWRlR2hvc3RGb3JUYXJnZXQ6X3VuaGlkZUdob3N0Rm9yVGFyZ2V0LGNsb25lTm93SGlkZGVuOmZ1bmN0aW9uKCl7Y2xvbmVIaWRkZW49ITB9LGNsb25lTm93U2hvd246ZnVuY3Rpb24oKXtjbG9uZUhpZGRlbj0hMX0sZGlzcGF0Y2hTb3J0YWJsZUV2ZW50OmZ1bmN0aW9uKHQpe19kaXNwYXRjaEV2ZW50KHtzb3J0YWJsZTplLG5hbWU6dCxvcmlnaW5hbEV2ZW50Om59KX19LHIpKX07ZnVuY3Rpb24gX2Rpc3BhdGNoRXZlbnQodCl7ZGlzcGF0Y2hFdmVudChfb2JqZWN0U3ByZWFkMih7cHV0U29ydGFibGU6cHV0U29ydGFibGUsY2xvbmVFbDpjbG9uZUVsLHRhcmdldEVsOmRyYWdFbCxyb290RWw6cm9vdEVsLG9sZEluZGV4Om9sZEluZGV4LG9sZERyYWdnYWJsZUluZGV4Om9sZERyYWdnYWJsZUluZGV4LG5ld0luZGV4Om5ld0luZGV4LG5ld0RyYWdnYWJsZUluZGV4Om5ld0RyYWdnYWJsZUluZGV4fSx0KSl9dmFyIGRyYWdFbCxwYXJlbnRFbCxnaG9zdEVsLHJvb3RFbCxuZXh0RWwsbGFzdERvd25FbCxjbG9uZUVsLGNsb25lSGlkZGVuLG9sZEluZGV4LG5ld0luZGV4LG9sZERyYWdnYWJsZUluZGV4LG5ld0RyYWdnYWJsZUluZGV4LGFjdGl2ZUdyb3VwLHB1dFNvcnRhYmxlLHRhcEV2dCx0b3VjaEV2dCxsYXN0RHgsbGFzdER5LHRhcERpc3RhbmNlTGVmdCx0YXBEaXN0YW5jZVRvcCxtb3ZlZCxsYXN0VGFyZ2V0LGxhc3REaXJlY3Rpb24sdGFyZ2V0TW92ZURpc3RhbmNlLGdob3N0UmVsYXRpdmVQYXJlbnQsYXdhaXRpbmdEcmFnU3RhcnRlZD0hMSxpZ25vcmVOZXh0Q2xpY2s9ITEsc29ydGFibGVzPVtdLHBhc3RGaXJzdEludmVydFRocmVzaD0hMSxpc0NpcmN1bXN0YW50aWFsSW52ZXJ0PSExLGdob3N0UmVsYXRpdmVQYXJlbnRJbml0aWFsU2Nyb2xsPVtdLF9zaWxlbnQ9ITEsc2F2ZWRJbnB1dENoZWNrZWQ9W10sZG9jdW1lbnRFeGlzdHM9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGRvY3VtZW50LFBvc2l0aW9uR2hvc3RBYnNvbHV0ZWx5PUlPUyxDU1NGbG9hdFByb3BlcnR5PUVkZ2V8fElFMTFPckxlc3M/XCJjc3NGbG9hdFwiOlwiZmxvYXRcIixzdXBwb3J0RHJhZ2dhYmxlPWRvY3VtZW50RXhpc3RzJiYhQ2hyb21lRm9yQW5kcm9pZCYmIUlPUyYmXCJkcmFnZ2FibGVcImluIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksc3VwcG9ydENzc1BvaW50ZXJFdmVudHM9ZnVuY3Rpb24oKXtpZihkb2N1bWVudEV4aXN0cyl7aWYoSUUxMU9yTGVzcylyZXR1cm4hMTt2YXIgdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwieFwiKTtyZXR1cm4gdC5zdHlsZS5jc3NUZXh0PVwicG9pbnRlci1ldmVudHM6YXV0b1wiLFwiYXV0b1wiPT09dC5zdHlsZS5wb2ludGVyRXZlbnRzfX0oKSxfZGV0ZWN0RGlyZWN0aW9uPWZ1bmN0aW9uKHQsZSl7dmFyIG89Y3NzKHQpLG49cGFyc2VJbnQoby53aWR0aCktcGFyc2VJbnQoby5wYWRkaW5nTGVmdCktcGFyc2VJbnQoby5wYWRkaW5nUmlnaHQpLXBhcnNlSW50KG8uYm9yZGVyTGVmdFdpZHRoKS1wYXJzZUludChvLmJvcmRlclJpZ2h0V2lkdGgpLHI9Z2V0Q2hpbGQodCwwLGUpLGw9Z2V0Q2hpbGQodCwxLGUpLGE9ciYmY3NzKHIpLGk9bCYmY3NzKGwpLHM9YSYmcGFyc2VJbnQoYS5tYXJnaW5MZWZ0KStwYXJzZUludChhLm1hcmdpblJpZ2h0KStnZXRSZWN0KHIpLndpZHRoLGM9aSYmcGFyc2VJbnQoaS5tYXJnaW5MZWZ0KStwYXJzZUludChpLm1hcmdpblJpZ2h0KStnZXRSZWN0KGwpLndpZHRoO2lmKFwiZmxleFwiPT09by5kaXNwbGF5KXJldHVyblwiY29sdW1uXCI9PT1vLmZsZXhEaXJlY3Rpb258fFwiY29sdW1uLXJldmVyc2VcIj09PW8uZmxleERpcmVjdGlvbj9cInZlcnRpY2FsXCI6XCJob3Jpem9udGFsXCI7aWYoXCJncmlkXCI9PT1vLmRpc3BsYXkpcmV0dXJuIG8uZ3JpZFRlbXBsYXRlQ29sdW1ucy5zcGxpdChcIiBcIikubGVuZ3RoPD0xP1widmVydGljYWxcIjpcImhvcml6b250YWxcIjtpZihyJiZhLmZsb2F0JiZcIm5vbmVcIiE9PWEuZmxvYXQpe3ZhciBkPVwibGVmdFwiPT09YS5mbG9hdD9cImxlZnRcIjpcInJpZ2h0XCI7cmV0dXJuIWx8fFwiYm90aFwiIT09aS5jbGVhciYmaS5jbGVhciE9PWQ/XCJob3Jpem9udGFsXCI6XCJ2ZXJ0aWNhbFwifXJldHVybiByJiYoXCJibG9ja1wiPT09YS5kaXNwbGF5fHxcImZsZXhcIj09PWEuZGlzcGxheXx8XCJ0YWJsZVwiPT09YS5kaXNwbGF5fHxcImdyaWRcIj09PWEuZGlzcGxheXx8cz49biYmXCJub25lXCI9PT1vW0NTU0Zsb2F0UHJvcGVydHldfHxsJiZcIm5vbmVcIj09PW9bQ1NTRmxvYXRQcm9wZXJ0eV0mJnMrYz5uKT9cInZlcnRpY2FsXCI6XCJob3Jpem9udGFsXCJ9LF9kcmFnRWxJblJvd0NvbHVtbj1mdW5jdGlvbih0LGUsbyl7dmFyIG49bz90LmxlZnQ6dC50b3Ascj1vP3QucmlnaHQ6dC5ib3R0b20sbD1vP3Qud2lkdGg6dC5oZWlnaHQsYT1vP2UubGVmdDplLnRvcCxpPW8/ZS5yaWdodDplLmJvdHRvbSxzPW8/ZS53aWR0aDplLmhlaWdodDtyZXR1cm4gbj09PWF8fHI9PT1pfHxuK2wvMj09PWErcy8yfSxfZGV0ZWN0TmVhcmVzdEVtcHR5U29ydGFibGU9ZnVuY3Rpb24odCxlKXt2YXIgbztyZXR1cm4gc29ydGFibGVzLnNvbWUoKGZ1bmN0aW9uKG4pe3ZhciByPW5bZXhwYW5kb10ub3B0aW9ucy5lbXB0eUluc2VydFRocmVzaG9sZDtpZihyJiYhbGFzdENoaWxkKG4pKXt2YXIgbD1nZXRSZWN0KG4pLGE9dD49bC5sZWZ0LXImJnQ8PWwucmlnaHQrcixpPWU+PWwudG9wLXImJmU8PWwuYm90dG9tK3I7cmV0dXJuIGEmJmk/bz1uOnZvaWQgMH19KSksb30sX3ByZXBhcmVHcm91cD1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKHQsbyl7cmV0dXJuIGZ1bmN0aW9uKG4scixsLGEpe3ZhciBpPW4ub3B0aW9ucy5ncm91cC5uYW1lJiZyLm9wdGlvbnMuZ3JvdXAubmFtZSYmbi5vcHRpb25zLmdyb3VwLm5hbWU9PT1yLm9wdGlvbnMuZ3JvdXAubmFtZTtpZihudWxsPT10JiYob3x8aSkpcmV0dXJuITA7aWYobnVsbD09dHx8ITE9PT10KXJldHVybiExO2lmKG8mJlwiY2xvbmVcIj09PXQpcmV0dXJuIHQ7aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgdClyZXR1cm4gZSh0KG4scixsLGEpLG8pKG4scixsLGEpO3ZhciBzPShvP246cikub3B0aW9ucy5ncm91cC5uYW1lO3JldHVybiEwPT09dHx8XCJzdHJpbmdcIj09dHlwZW9mIHQmJnQ9PT1zfHx0LmpvaW4mJnQuaW5kZXhPZihzKT4tMX19dmFyIG89e30sbj10Lmdyb3VwO24mJlwib2JqZWN0XCI9PV90eXBlb2Yobil8fChuPXtuYW1lOm59KSxvLm5hbWU9bi5uYW1lLG8uY2hlY2tQdWxsPWUobi5wdWxsLCEwKSxvLmNoZWNrUHV0PWUobi5wdXQpLG8ucmV2ZXJ0Q2xvbmU9bi5yZXZlcnRDbG9uZSx0Lmdyb3VwPW99LF9oaWRlR2hvc3RGb3JUYXJnZXQ9ZnVuY3Rpb24oKXshc3VwcG9ydENzc1BvaW50ZXJFdmVudHMmJmdob3N0RWwmJmNzcyhnaG9zdEVsLFwiZGlzcGxheVwiLFwibm9uZVwiKX0sX3VuaGlkZUdob3N0Rm9yVGFyZ2V0PWZ1bmN0aW9uKCl7IXN1cHBvcnRDc3NQb2ludGVyRXZlbnRzJiZnaG9zdEVsJiZjc3MoZ2hvc3RFbCxcImRpc3BsYXlcIixcIlwiKX07ZG9jdW1lbnRFeGlzdHMmJiFDaHJvbWVGb3JBbmRyb2lkJiZkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwoZnVuY3Rpb24odCl7aWYoaWdub3JlTmV4dENsaWNrKXJldHVybiB0LnByZXZlbnREZWZhdWx0KCksdC5zdG9wUHJvcGFnYXRpb24mJnQuc3RvcFByb3BhZ2F0aW9uKCksdC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24mJnQuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCksaWdub3JlTmV4dENsaWNrPSExLCExfSksITApO3ZhciBuZWFyZXN0RW1wdHlJbnNlcnREZXRlY3RFdmVudD1mdW5jdGlvbih0KXtpZihkcmFnRWwpe3Q9dC50b3VjaGVzP3QudG91Y2hlc1swXTp0O3ZhciBlPV9kZXRlY3ROZWFyZXN0RW1wdHlTb3J0YWJsZSh0LmNsaWVudFgsdC5jbGllbnRZKTtpZihlKXt2YXIgbz17fTtmb3IodmFyIG4gaW4gdCl0Lmhhc093blByb3BlcnR5KG4pJiYob1tuXT10W25dKTtvLnRhcmdldD1vLnJvb3RFbD1lLG8ucHJldmVudERlZmF1bHQ9dm9pZCAwLG8uc3RvcFByb3BhZ2F0aW9uPXZvaWQgMCxlW2V4cGFuZG9dLl9vbkRyYWdPdmVyKG8pfX19LF9jaGVja091dHNpZGVUYXJnZXRFbD1mdW5jdGlvbih0KXtkcmFnRWwmJmRyYWdFbC5wYXJlbnROb2RlW2V4cGFuZG9dLl9pc091dHNpZGVUaGlzRWwodC50YXJnZXQpfTtmdW5jdGlvbiBTb3J0YWJsZSh0LGUpe2lmKCF0fHwhdC5ub2RlVHlwZXx8MSE9PXQubm9kZVR5cGUpdGhyb3dcIlNvcnRhYmxlOiBgZWxgIG11c3QgYmUgYW4gSFRNTEVsZW1lbnQsIG5vdCBcIi5jb25jYXQoe30udG9TdHJpbmcuY2FsbCh0KSk7dGhpcy5lbD10LHRoaXMub3B0aW9ucz1lPV9leHRlbmRzKHt9LGUpLHRbZXhwYW5kb109dGhpczt2YXIgbz17Z3JvdXA6bnVsbCxzb3J0OiEwLGRpc2FibGVkOiExLHN0b3JlOm51bGwsaGFuZGxlOm51bGwsZHJhZ2dhYmxlOi9eW3VvXWwkL2kudGVzdCh0Lm5vZGVOYW1lKT9cIj5saVwiOlwiPipcIixzd2FwVGhyZXNob2xkOjEsaW52ZXJ0U3dhcDohMSxpbnZlcnRlZFN3YXBUaHJlc2hvbGQ6bnVsbCxyZW1vdmVDbG9uZU9uSGlkZTohMCxkaXJlY3Rpb246ZnVuY3Rpb24oKXtyZXR1cm4gX2RldGVjdERpcmVjdGlvbih0LHRoaXMub3B0aW9ucyl9LGdob3N0Q2xhc3M6XCJzb3J0YWJsZS1naG9zdFwiLGNob3NlbkNsYXNzOlwic29ydGFibGUtY2hvc2VuXCIsZHJhZ0NsYXNzOlwic29ydGFibGUtZHJhZ1wiLGlnbm9yZTpcImEsIGltZ1wiLGZpbHRlcjpudWxsLHByZXZlbnRPbkZpbHRlcjohMCxhbmltYXRpb246MCxlYXNpbmc6bnVsbCxzZXREYXRhOmZ1bmN0aW9uKHQsZSl7dC5zZXREYXRhKFwiVGV4dFwiLGUudGV4dENvbnRlbnQpfSxkcm9wQnViYmxlOiExLGRyYWdvdmVyQnViYmxlOiExLGRhdGFJZEF0dHI6XCJkYXRhLWlkXCIsZGVsYXk6MCxkZWxheU9uVG91Y2hPbmx5OiExLHRvdWNoU3RhcnRUaHJlc2hvbGQ6KE51bWJlci5wYXJzZUludD9OdW1iZXI6d2luZG93KS5wYXJzZUludCh3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbywxMCl8fDEsZm9yY2VGYWxsYmFjazohMSxmYWxsYmFja0NsYXNzOlwic29ydGFibGUtZmFsbGJhY2tcIixmYWxsYmFja09uQm9keTohMSxmYWxsYmFja1RvbGVyYW5jZTowLGZhbGxiYWNrT2Zmc2V0Ont4OjAseTowfSxzdXBwb3J0UG9pbnRlcjohMSE9PVNvcnRhYmxlLnN1cHBvcnRQb2ludGVyJiZcIlBvaW50ZXJFdmVudFwiaW4gd2luZG93JiYhU2FmYXJpLGVtcHR5SW5zZXJ0VGhyZXNob2xkOjV9O2Zvcih2YXIgbiBpbiBQbHVnaW5NYW5hZ2VyLmluaXRpYWxpemVQbHVnaW5zKHRoaXMsdCxvKSxvKSEobiBpbiBlKSYmKGVbbl09b1tuXSk7Zm9yKHZhciByIGluIF9wcmVwYXJlR3JvdXAoZSksdGhpcylcIl9cIj09PXIuY2hhckF0KDApJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiB0aGlzW3JdJiYodGhpc1tyXT10aGlzW3JdLmJpbmQodGhpcykpO3RoaXMubmF0aXZlRHJhZ2dhYmxlPSFlLmZvcmNlRmFsbGJhY2smJnN1cHBvcnREcmFnZ2FibGUsdGhpcy5uYXRpdmVEcmFnZ2FibGUmJih0aGlzLm9wdGlvbnMudG91Y2hTdGFydFRocmVzaG9sZD0xKSxlLnN1cHBvcnRQb2ludGVyP29uKHQsXCJwb2ludGVyZG93blwiLHRoaXMuX29uVGFwU3RhcnQpOihvbih0LFwibW91c2Vkb3duXCIsdGhpcy5fb25UYXBTdGFydCksb24odCxcInRvdWNoc3RhcnRcIix0aGlzLl9vblRhcFN0YXJ0KSksdGhpcy5uYXRpdmVEcmFnZ2FibGUmJihvbih0LFwiZHJhZ292ZXJcIix0aGlzKSxvbih0LFwiZHJhZ2VudGVyXCIsdGhpcykpLHNvcnRhYmxlcy5wdXNoKHRoaXMuZWwpLGUuc3RvcmUmJmUuc3RvcmUuZ2V0JiZ0aGlzLnNvcnQoZS5zdG9yZS5nZXQodGhpcyl8fFtdKSxfZXh0ZW5kcyh0aGlzLEFuaW1hdGlvblN0YXRlTWFuYWdlcigpKX1mdW5jdGlvbiBfZ2xvYmFsRHJhZ092ZXIodCl7dC5kYXRhVHJhbnNmZXImJih0LmRhdGFUcmFuc2Zlci5kcm9wRWZmZWN0PVwibW92ZVwiKSx0LmNhbmNlbGFibGUmJnQucHJldmVudERlZmF1bHQoKX1mdW5jdGlvbiBfb25Nb3ZlKHQsZSxvLG4scixsLGEsaSl7dmFyIHMsYyxkPXRbZXhwYW5kb10sdT1kLm9wdGlvbnMub25Nb3ZlO3JldHVybiF3aW5kb3cuQ3VzdG9tRXZlbnR8fElFMTFPckxlc3N8fEVkZ2U/KHM9ZG9jdW1lbnQuY3JlYXRlRXZlbnQoXCJFdmVudFwiKSkuaW5pdEV2ZW50KFwibW92ZVwiLCEwLCEwKTpzPW5ldyBDdXN0b21FdmVudChcIm1vdmVcIix7YnViYmxlczohMCxjYW5jZWxhYmxlOiEwfSkscy50bz1lLHMuZnJvbT10LHMuZHJhZ2dlZD1vLHMuZHJhZ2dlZFJlY3Q9bixzLnJlbGF0ZWQ9cnx8ZSxzLnJlbGF0ZWRSZWN0PWx8fGdldFJlY3QoZSkscy53aWxsSW5zZXJ0QWZ0ZXI9aSxzLm9yaWdpbmFsRXZlbnQ9YSx0LmRpc3BhdGNoRXZlbnQocyksdSYmKGM9dS5jYWxsKGQscyxhKSksY31mdW5jdGlvbiBfZGlzYWJsZURyYWdnYWJsZSh0KXt0LmRyYWdnYWJsZT0hMX1mdW5jdGlvbiBfdW5zaWxlbnQoKXtfc2lsZW50PSExfWZ1bmN0aW9uIF9naG9zdElzRmlyc3QodCxlLG8pe3ZhciBuPWdldFJlY3QoZ2V0Q2hpbGQoby5lbCwwLG8ub3B0aW9ucywhMCkpO3JldHVybiBlP3QuY2xpZW50WDxuLmxlZnQtMTB8fHQuY2xpZW50WTxuLnRvcCYmdC5jbGllbnRYPG4ucmlnaHQ6dC5jbGllbnRZPG4udG9wLTEwfHx0LmNsaWVudFk8bi5ib3R0b20mJnQuY2xpZW50WDxuLmxlZnR9ZnVuY3Rpb24gX2dob3N0SXNMYXN0KHQsZSxvKXt2YXIgbj1nZXRSZWN0KGxhc3RDaGlsZChvLmVsLG8ub3B0aW9ucy5kcmFnZ2FibGUpKTtyZXR1cm4gZT90LmNsaWVudFg+bi5yaWdodCsxMHx8dC5jbGllbnRYPD1uLnJpZ2h0JiZ0LmNsaWVudFk+bi5ib3R0b20mJnQuY2xpZW50WD49bi5sZWZ0OnQuY2xpZW50WD5uLnJpZ2h0JiZ0LmNsaWVudFk+bi50b3B8fHQuY2xpZW50WDw9bi5yaWdodCYmdC5jbGllbnRZPm4uYm90dG9tKzEwfWZ1bmN0aW9uIF9nZXRTd2FwRGlyZWN0aW9uKHQsZSxvLG4scixsLGEsaSl7dmFyIHM9bj90LmNsaWVudFk6dC5jbGllbnRYLGM9bj9vLmhlaWdodDpvLndpZHRoLGQ9bj9vLnRvcDpvLmxlZnQsdT1uP28uYm90dG9tOm8ucmlnaHQsZz0hMTtpZighYSlpZihpJiZ0YXJnZXRNb3ZlRGlzdGFuY2U8YypyKXtpZighcGFzdEZpcnN0SW52ZXJ0VGhyZXNoJiYoMT09PWxhc3REaXJlY3Rpb24/cz5kK2MqbC8yOnM8dS1jKmwvMikmJihwYXN0Rmlyc3RJbnZlcnRUaHJlc2g9ITApLHBhc3RGaXJzdEludmVydFRocmVzaClnPSEwO2Vsc2UgaWYoMT09PWxhc3REaXJlY3Rpb24/czxkK3RhcmdldE1vdmVEaXN0YW5jZTpzPnUtdGFyZ2V0TW92ZURpc3RhbmNlKXJldHVybi1sYXN0RGlyZWN0aW9ufWVsc2UgaWYocz5kK2MqKDEtcikvMiYmczx1LWMqKDEtcikvMilyZXR1cm4gX2dldEluc2VydERpcmVjdGlvbihlKTtyZXR1cm4oZz1nfHxhKSYmKHM8ZCtjKmwvMnx8cz51LWMqbC8yKT9zPmQrYy8yPzE6LTE6MH1mdW5jdGlvbiBfZ2V0SW5zZXJ0RGlyZWN0aW9uKHQpe3JldHVybiBpbmRleChkcmFnRWwpPGluZGV4KHQpPzE6LTF9ZnVuY3Rpb24gX2dlbmVyYXRlSWQodCl7Zm9yKHZhciBlPXQudGFnTmFtZSt0LmNsYXNzTmFtZSt0LnNyYyt0LmhyZWYrdC50ZXh0Q29udGVudCxvPWUubGVuZ3RoLG49MDtvLS07KW4rPWUuY2hhckNvZGVBdChvKTtyZXR1cm4gbi50b1N0cmluZygzNil9ZnVuY3Rpb24gX3NhdmVJbnB1dENoZWNrZWRTdGF0ZSh0KXtzYXZlZElucHV0Q2hlY2tlZC5sZW5ndGg9MDtmb3IodmFyIGU9dC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImlucHV0XCIpLG89ZS5sZW5ndGg7by0tOyl7dmFyIG49ZVtvXTtuLmNoZWNrZWQmJnNhdmVkSW5wdXRDaGVja2VkLnB1c2gobil9fWZ1bmN0aW9uIF9uZXh0VGljayh0KXtyZXR1cm4gc2V0VGltZW91dCh0LDApfWZ1bmN0aW9uIF9jYW5jZWxOZXh0VGljayh0KXtyZXR1cm4gY2xlYXJUaW1lb3V0KHQpfVNvcnRhYmxlLnByb3RvdHlwZT17Y29uc3RydWN0b3I6U29ydGFibGUsX2lzT3V0c2lkZVRoaXNFbDpmdW5jdGlvbih0KXt0aGlzLmVsLmNvbnRhaW5zKHQpfHx0PT09dGhpcy5lbHx8KGxhc3RUYXJnZXQ9bnVsbCl9LF9nZXREaXJlY3Rpb246ZnVuY3Rpb24odCxlKXtyZXR1cm5cImZ1bmN0aW9uXCI9PXR5cGVvZiB0aGlzLm9wdGlvbnMuZGlyZWN0aW9uP3RoaXMub3B0aW9ucy5kaXJlY3Rpb24uY2FsbCh0aGlzLHQsZSxkcmFnRWwpOnRoaXMub3B0aW9ucy5kaXJlY3Rpb259LF9vblRhcFN0YXJ0OmZ1bmN0aW9uKHQpe2lmKHQuY2FuY2VsYWJsZSl7dmFyIGU9dGhpcyxvPXRoaXMuZWwsbj10aGlzLm9wdGlvbnMscj1uLnByZXZlbnRPbkZpbHRlcixsPXQudHlwZSxhPXQudG91Y2hlcyYmdC50b3VjaGVzWzBdfHx0LnBvaW50ZXJUeXBlJiZcInRvdWNoXCI9PT10LnBvaW50ZXJUeXBlJiZ0LGk9KGF8fHQpLnRhcmdldCxzPXQudGFyZ2V0LnNoYWRvd1Jvb3QmJih0LnBhdGgmJnQucGF0aFswXXx8dC5jb21wb3NlZFBhdGgmJnQuY29tcG9zZWRQYXRoKClbMF0pfHxpLGM9bi5maWx0ZXI7aWYoX3NhdmVJbnB1dENoZWNrZWRTdGF0ZShvKSwhZHJhZ0VsJiYhKC9tb3VzZWRvd258cG9pbnRlcmRvd24vLnRlc3QobCkmJjAhPT10LmJ1dHRvbnx8bi5kaXNhYmxlZCkmJiFzLmlzQ29udGVudEVkaXRhYmxlJiYodGhpcy5uYXRpdmVEcmFnZ2FibGV8fCFTYWZhcml8fCFpfHxcIlNFTEVDVFwiIT09aS50YWdOYW1lLnRvVXBwZXJDYXNlKCkpJiYhKChpPWNsb3Nlc3QoaSxuLmRyYWdnYWJsZSxvLCExKSkmJmkuYW5pbWF0ZWR8fGxhc3REb3duRWw9PT1pKSl7aWYob2xkSW5kZXg9aW5kZXgoaSksb2xkRHJhZ2dhYmxlSW5kZXg9aW5kZXgoaSxuLmRyYWdnYWJsZSksXCJmdW5jdGlvblwiPT10eXBlb2YgYyl7aWYoYy5jYWxsKHRoaXMsdCxpLHRoaXMpKXJldHVybiBfZGlzcGF0Y2hFdmVudCh7c29ydGFibGU6ZSxyb290RWw6cyxuYW1lOlwiZmlsdGVyXCIsdGFyZ2V0RWw6aSx0b0VsOm8sZnJvbUVsOm99KSxwbHVnaW5FdmVudChcImZpbHRlclwiLGUse2V2dDp0fSksdm9pZChyJiZ0LmNhbmNlbGFibGUmJnQucHJldmVudERlZmF1bHQoKSl9ZWxzZSBpZihjJiYoYz1jLnNwbGl0KFwiLFwiKS5zb21lKChmdW5jdGlvbihuKXtpZihuPWNsb3Nlc3QocyxuLnRyaW0oKSxvLCExKSlyZXR1cm4gX2Rpc3BhdGNoRXZlbnQoe3NvcnRhYmxlOmUscm9vdEVsOm4sbmFtZTpcImZpbHRlclwiLHRhcmdldEVsOmksZnJvbUVsOm8sdG9FbDpvfSkscGx1Z2luRXZlbnQoXCJmaWx0ZXJcIixlLHtldnQ6dH0pLCEwfSkpKSlyZXR1cm4gdm9pZChyJiZ0LmNhbmNlbGFibGUmJnQucHJldmVudERlZmF1bHQoKSk7bi5oYW5kbGUmJiFjbG9zZXN0KHMsbi5oYW5kbGUsbywhMSl8fHRoaXMuX3ByZXBhcmVEcmFnU3RhcnQodCxhLGkpfX19LF9wcmVwYXJlRHJhZ1N0YXJ0OmZ1bmN0aW9uKHQsZSxvKXt2YXIgbixyPXRoaXMsbD1yLmVsLGE9ci5vcHRpb25zLGk9bC5vd25lckRvY3VtZW50O2lmKG8mJiFkcmFnRWwmJm8ucGFyZW50Tm9kZT09PWwpe3ZhciBzPWdldFJlY3Qobyk7aWYocm9vdEVsPWwscGFyZW50RWw9KGRyYWdFbD1vKS5wYXJlbnROb2RlLG5leHRFbD1kcmFnRWwubmV4dFNpYmxpbmcsbGFzdERvd25FbD1vLGFjdGl2ZUdyb3VwPWEuZ3JvdXAsU29ydGFibGUuZHJhZ2dlZD1kcmFnRWwsdGFwRXZ0PXt0YXJnZXQ6ZHJhZ0VsLGNsaWVudFg6KGV8fHQpLmNsaWVudFgsY2xpZW50WTooZXx8dCkuY2xpZW50WX0sdGFwRGlzdGFuY2VMZWZ0PXRhcEV2dC5jbGllbnRYLXMubGVmdCx0YXBEaXN0YW5jZVRvcD10YXBFdnQuY2xpZW50WS1zLnRvcCx0aGlzLl9sYXN0WD0oZXx8dCkuY2xpZW50WCx0aGlzLl9sYXN0WT0oZXx8dCkuY2xpZW50WSxkcmFnRWwuc3R5bGVbXCJ3aWxsLWNoYW5nZVwiXT1cImFsbFwiLG49ZnVuY3Rpb24oKXtwbHVnaW5FdmVudChcImRlbGF5RW5kZWRcIixyLHtldnQ6dH0pLFNvcnRhYmxlLmV2ZW50Q2FuY2VsZWQ/ci5fb25Ecm9wKCk6KHIuX2Rpc2FibGVEZWxheWVkRHJhZ0V2ZW50cygpLCFGaXJlRm94JiZyLm5hdGl2ZURyYWdnYWJsZSYmKGRyYWdFbC5kcmFnZ2FibGU9ITApLHIuX3RyaWdnZXJEcmFnU3RhcnQodCxlKSxfZGlzcGF0Y2hFdmVudCh7c29ydGFibGU6cixuYW1lOlwiY2hvb3NlXCIsb3JpZ2luYWxFdmVudDp0fSksdG9nZ2xlQ2xhc3MoZHJhZ0VsLGEuY2hvc2VuQ2xhc3MsITApKX0sYS5pZ25vcmUuc3BsaXQoXCIsXCIpLmZvckVhY2goKGZ1bmN0aW9uKHQpe2ZpbmQoZHJhZ0VsLHQudHJpbSgpLF9kaXNhYmxlRHJhZ2dhYmxlKX0pKSxvbihpLFwiZHJhZ292ZXJcIixuZWFyZXN0RW1wdHlJbnNlcnREZXRlY3RFdmVudCksb24oaSxcIm1vdXNlbW92ZVwiLG5lYXJlc3RFbXB0eUluc2VydERldGVjdEV2ZW50KSxvbihpLFwidG91Y2htb3ZlXCIsbmVhcmVzdEVtcHR5SW5zZXJ0RGV0ZWN0RXZlbnQpLG9uKGksXCJtb3VzZXVwXCIsci5fb25Ecm9wKSxvbihpLFwidG91Y2hlbmRcIixyLl9vbkRyb3ApLG9uKGksXCJ0b3VjaGNhbmNlbFwiLHIuX29uRHJvcCksRmlyZUZveCYmdGhpcy5uYXRpdmVEcmFnZ2FibGUmJih0aGlzLm9wdGlvbnMudG91Y2hTdGFydFRocmVzaG9sZD00LGRyYWdFbC5kcmFnZ2FibGU9ITApLHBsdWdpbkV2ZW50KFwiZGVsYXlTdGFydFwiLHRoaXMse2V2dDp0fSksIWEuZGVsYXl8fGEuZGVsYXlPblRvdWNoT25seSYmIWV8fHRoaXMubmF0aXZlRHJhZ2dhYmxlJiYoRWRnZXx8SUUxMU9yTGVzcykpbigpO2Vsc2V7aWYoU29ydGFibGUuZXZlbnRDYW5jZWxlZClyZXR1cm4gdm9pZCB0aGlzLl9vbkRyb3AoKTtvbihpLFwibW91c2V1cFwiLHIuX2Rpc2FibGVEZWxheWVkRHJhZyksb24oaSxcInRvdWNoZW5kXCIsci5fZGlzYWJsZURlbGF5ZWREcmFnKSxvbihpLFwidG91Y2hjYW5jZWxcIixyLl9kaXNhYmxlRGVsYXllZERyYWcpLG9uKGksXCJtb3VzZW1vdmVcIixyLl9kZWxheWVkRHJhZ1RvdWNoTW92ZUhhbmRsZXIpLG9uKGksXCJ0b3VjaG1vdmVcIixyLl9kZWxheWVkRHJhZ1RvdWNoTW92ZUhhbmRsZXIpLGEuc3VwcG9ydFBvaW50ZXImJm9uKGksXCJwb2ludGVybW92ZVwiLHIuX2RlbGF5ZWREcmFnVG91Y2hNb3ZlSGFuZGxlciksci5fZHJhZ1N0YXJ0VGltZXI9c2V0VGltZW91dChuLGEuZGVsYXkpfX19LF9kZWxheWVkRHJhZ1RvdWNoTW92ZUhhbmRsZXI6ZnVuY3Rpb24odCl7dmFyIGU9dC50b3VjaGVzP3QudG91Y2hlc1swXTp0O01hdGgubWF4KE1hdGguYWJzKGUuY2xpZW50WC10aGlzLl9sYXN0WCksTWF0aC5hYnMoZS5jbGllbnRZLXRoaXMuX2xhc3RZKSk+PU1hdGguZmxvb3IodGhpcy5vcHRpb25zLnRvdWNoU3RhcnRUaHJlc2hvbGQvKHRoaXMubmF0aXZlRHJhZ2dhYmxlJiZ3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpb3x8MSkpJiZ0aGlzLl9kaXNhYmxlRGVsYXllZERyYWcoKX0sX2Rpc2FibGVEZWxheWVkRHJhZzpmdW5jdGlvbigpe2RyYWdFbCYmX2Rpc2FibGVEcmFnZ2FibGUoZHJhZ0VsKSxjbGVhclRpbWVvdXQodGhpcy5fZHJhZ1N0YXJ0VGltZXIpLHRoaXMuX2Rpc2FibGVEZWxheWVkRHJhZ0V2ZW50cygpfSxfZGlzYWJsZURlbGF5ZWREcmFnRXZlbnRzOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5lbC5vd25lckRvY3VtZW50O29mZih0LFwibW91c2V1cFwiLHRoaXMuX2Rpc2FibGVEZWxheWVkRHJhZyksb2ZmKHQsXCJ0b3VjaGVuZFwiLHRoaXMuX2Rpc2FibGVEZWxheWVkRHJhZyksb2ZmKHQsXCJ0b3VjaGNhbmNlbFwiLHRoaXMuX2Rpc2FibGVEZWxheWVkRHJhZyksb2ZmKHQsXCJtb3VzZW1vdmVcIix0aGlzLl9kZWxheWVkRHJhZ1RvdWNoTW92ZUhhbmRsZXIpLG9mZih0LFwidG91Y2htb3ZlXCIsdGhpcy5fZGVsYXllZERyYWdUb3VjaE1vdmVIYW5kbGVyKSxvZmYodCxcInBvaW50ZXJtb3ZlXCIsdGhpcy5fZGVsYXllZERyYWdUb3VjaE1vdmVIYW5kbGVyKX0sX3RyaWdnZXJEcmFnU3RhcnQ6ZnVuY3Rpb24odCxlKXtlPWV8fFwidG91Y2hcIj09dC5wb2ludGVyVHlwZSYmdCwhdGhpcy5uYXRpdmVEcmFnZ2FibGV8fGU/dGhpcy5vcHRpb25zLnN1cHBvcnRQb2ludGVyP29uKGRvY3VtZW50LFwicG9pbnRlcm1vdmVcIix0aGlzLl9vblRvdWNoTW92ZSk6b24oZG9jdW1lbnQsZT9cInRvdWNobW92ZVwiOlwibW91c2Vtb3ZlXCIsdGhpcy5fb25Ub3VjaE1vdmUpOihvbihkcmFnRWwsXCJkcmFnZW5kXCIsdGhpcyksb24ocm9vdEVsLFwiZHJhZ3N0YXJ0XCIsdGhpcy5fb25EcmFnU3RhcnQpKTt0cnl7ZG9jdW1lbnQuc2VsZWN0aW9uP19uZXh0VGljaygoZnVuY3Rpb24oKXtkb2N1bWVudC5zZWxlY3Rpb24uZW1wdHkoKX0pKTp3aW5kb3cuZ2V0U2VsZWN0aW9uKCkucmVtb3ZlQWxsUmFuZ2VzKCl9Y2F0Y2godCl7fX0sX2RyYWdTdGFydGVkOmZ1bmN0aW9uKHQsZSl7aWYoYXdhaXRpbmdEcmFnU3RhcnRlZD0hMSxyb290RWwmJmRyYWdFbCl7cGx1Z2luRXZlbnQoXCJkcmFnU3RhcnRlZFwiLHRoaXMse2V2dDplfSksdGhpcy5uYXRpdmVEcmFnZ2FibGUmJm9uKGRvY3VtZW50LFwiZHJhZ292ZXJcIixfY2hlY2tPdXRzaWRlVGFyZ2V0RWwpO3ZhciBvPXRoaXMub3B0aW9uczshdCYmdG9nZ2xlQ2xhc3MoZHJhZ0VsLG8uZHJhZ0NsYXNzLCExKSx0b2dnbGVDbGFzcyhkcmFnRWwsby5naG9zdENsYXNzLCEwKSxTb3J0YWJsZS5hY3RpdmU9dGhpcyx0JiZ0aGlzLl9hcHBlbmRHaG9zdCgpLF9kaXNwYXRjaEV2ZW50KHtzb3J0YWJsZTp0aGlzLG5hbWU6XCJzdGFydFwiLG9yaWdpbmFsRXZlbnQ6ZX0pfWVsc2UgdGhpcy5fbnVsbGluZygpfSxfZW11bGF0ZURyYWdPdmVyOmZ1bmN0aW9uKCl7aWYodG91Y2hFdnQpe3RoaXMuX2xhc3RYPXRvdWNoRXZ0LmNsaWVudFgsdGhpcy5fbGFzdFk9dG91Y2hFdnQuY2xpZW50WSxfaGlkZUdob3N0Rm9yVGFyZ2V0KCk7Zm9yKHZhciB0PWRvY3VtZW50LmVsZW1lbnRGcm9tUG9pbnQodG91Y2hFdnQuY2xpZW50WCx0b3VjaEV2dC5jbGllbnRZKSxlPXQ7dCYmdC5zaGFkb3dSb290JiYodD10LnNoYWRvd1Jvb3QuZWxlbWVudEZyb21Qb2ludCh0b3VjaEV2dC5jbGllbnRYLHRvdWNoRXZ0LmNsaWVudFkpKSE9PWU7KWU9dDtpZihkcmFnRWwucGFyZW50Tm9kZVtleHBhbmRvXS5faXNPdXRzaWRlVGhpc0VsKHQpLGUpZG97aWYoZVtleHBhbmRvXSl7aWYoZVtleHBhbmRvXS5fb25EcmFnT3Zlcih7Y2xpZW50WDp0b3VjaEV2dC5jbGllbnRYLGNsaWVudFk6dG91Y2hFdnQuY2xpZW50WSx0YXJnZXQ6dCxyb290RWw6ZX0pJiYhdGhpcy5vcHRpb25zLmRyYWdvdmVyQnViYmxlKWJyZWFrfXQ9ZX13aGlsZShlPWUucGFyZW50Tm9kZSk7X3VuaGlkZUdob3N0Rm9yVGFyZ2V0KCl9fSxfb25Ub3VjaE1vdmU6ZnVuY3Rpb24odCl7aWYodGFwRXZ0KXt2YXIgZT10aGlzLm9wdGlvbnMsbz1lLmZhbGxiYWNrVG9sZXJhbmNlLG49ZS5mYWxsYmFja09mZnNldCxyPXQudG91Y2hlcz90LnRvdWNoZXNbMF06dCxsPWdob3N0RWwmJm1hdHJpeChnaG9zdEVsLCEwKSxhPWdob3N0RWwmJmwmJmwuYSxpPWdob3N0RWwmJmwmJmwuZCxzPVBvc2l0aW9uR2hvc3RBYnNvbHV0ZWx5JiZnaG9zdFJlbGF0aXZlUGFyZW50JiZnZXRSZWxhdGl2ZVNjcm9sbE9mZnNldChnaG9zdFJlbGF0aXZlUGFyZW50KSxjPShyLmNsaWVudFgtdGFwRXZ0LmNsaWVudFgrbi54KS8oYXx8MSkrKHM/c1swXS1naG9zdFJlbGF0aXZlUGFyZW50SW5pdGlhbFNjcm9sbFswXTowKS8oYXx8MSksZD0oci5jbGllbnRZLXRhcEV2dC5jbGllbnRZK24ueSkvKGl8fDEpKyhzP3NbMV0tZ2hvc3RSZWxhdGl2ZVBhcmVudEluaXRpYWxTY3JvbGxbMV06MCkvKGl8fDEpO2lmKCFTb3J0YWJsZS5hY3RpdmUmJiFhd2FpdGluZ0RyYWdTdGFydGVkKXtpZihvJiZNYXRoLm1heChNYXRoLmFicyhyLmNsaWVudFgtdGhpcy5fbGFzdFgpLE1hdGguYWJzKHIuY2xpZW50WS10aGlzLl9sYXN0WSkpPG8pcmV0dXJuO3RoaXMuX29uRHJhZ1N0YXJ0KHQsITApfWlmKGdob3N0RWwpe2w/KGwuZSs9Yy0obGFzdER4fHwwKSxsLmYrPWQtKGxhc3REeXx8MCkpOmw9e2E6MSxiOjAsYzowLGQ6MSxlOmMsZjpkfTt2YXIgdT1cIm1hdHJpeChcIi5jb25jYXQobC5hLFwiLFwiKS5jb25jYXQobC5iLFwiLFwiKS5jb25jYXQobC5jLFwiLFwiKS5jb25jYXQobC5kLFwiLFwiKS5jb25jYXQobC5lLFwiLFwiKS5jb25jYXQobC5mLFwiKVwiKTtjc3MoZ2hvc3RFbCxcIndlYmtpdFRyYW5zZm9ybVwiLHUpLGNzcyhnaG9zdEVsLFwibW96VHJhbnNmb3JtXCIsdSksY3NzKGdob3N0RWwsXCJtc1RyYW5zZm9ybVwiLHUpLGNzcyhnaG9zdEVsLFwidHJhbnNmb3JtXCIsdSksbGFzdER4PWMsbGFzdER5PWQsdG91Y2hFdnQ9cn10LmNhbmNlbGFibGUmJnQucHJldmVudERlZmF1bHQoKX19LF9hcHBlbmRHaG9zdDpmdW5jdGlvbigpe2lmKCFnaG9zdEVsKXt2YXIgdD10aGlzLm9wdGlvbnMuZmFsbGJhY2tPbkJvZHk/ZG9jdW1lbnQuYm9keTpyb290RWwsZT1nZXRSZWN0KGRyYWdFbCwhMCxQb3NpdGlvbkdob3N0QWJzb2x1dGVseSwhMCx0KSxvPXRoaXMub3B0aW9ucztpZihQb3NpdGlvbkdob3N0QWJzb2x1dGVseSl7Zm9yKGdob3N0UmVsYXRpdmVQYXJlbnQ9dDtcInN0YXRpY1wiPT09Y3NzKGdob3N0UmVsYXRpdmVQYXJlbnQsXCJwb3NpdGlvblwiKSYmXCJub25lXCI9PT1jc3MoZ2hvc3RSZWxhdGl2ZVBhcmVudCxcInRyYW5zZm9ybVwiKSYmZ2hvc3RSZWxhdGl2ZVBhcmVudCE9PWRvY3VtZW50OylnaG9zdFJlbGF0aXZlUGFyZW50PWdob3N0UmVsYXRpdmVQYXJlbnQucGFyZW50Tm9kZTtnaG9zdFJlbGF0aXZlUGFyZW50IT09ZG9jdW1lbnQuYm9keSYmZ2hvc3RSZWxhdGl2ZVBhcmVudCE9PWRvY3VtZW50LmRvY3VtZW50RWxlbWVudD8oZ2hvc3RSZWxhdGl2ZVBhcmVudD09PWRvY3VtZW50JiYoZ2hvc3RSZWxhdGl2ZVBhcmVudD1nZXRXaW5kb3dTY3JvbGxpbmdFbGVtZW50KCkpLGUudG9wKz1naG9zdFJlbGF0aXZlUGFyZW50LnNjcm9sbFRvcCxlLmxlZnQrPWdob3N0UmVsYXRpdmVQYXJlbnQuc2Nyb2xsTGVmdCk6Z2hvc3RSZWxhdGl2ZVBhcmVudD1nZXRXaW5kb3dTY3JvbGxpbmdFbGVtZW50KCksZ2hvc3RSZWxhdGl2ZVBhcmVudEluaXRpYWxTY3JvbGw9Z2V0UmVsYXRpdmVTY3JvbGxPZmZzZXQoZ2hvc3RSZWxhdGl2ZVBhcmVudCl9dG9nZ2xlQ2xhc3MoZ2hvc3RFbD1kcmFnRWwuY2xvbmVOb2RlKCEwKSxvLmdob3N0Q2xhc3MsITEpLHRvZ2dsZUNsYXNzKGdob3N0RWwsby5mYWxsYmFja0NsYXNzLCEwKSx0b2dnbGVDbGFzcyhnaG9zdEVsLG8uZHJhZ0NsYXNzLCEwKSxjc3MoZ2hvc3RFbCxcInRyYW5zaXRpb25cIixcIlwiKSxjc3MoZ2hvc3RFbCxcInRyYW5zZm9ybVwiLFwiXCIpLGNzcyhnaG9zdEVsLFwiYm94LXNpemluZ1wiLFwiYm9yZGVyLWJveFwiKSxjc3MoZ2hvc3RFbCxcIm1hcmdpblwiLDApLGNzcyhnaG9zdEVsLFwidG9wXCIsZS50b3ApLGNzcyhnaG9zdEVsLFwibGVmdFwiLGUubGVmdCksY3NzKGdob3N0RWwsXCJ3aWR0aFwiLGUud2lkdGgpLGNzcyhnaG9zdEVsLFwiaGVpZ2h0XCIsZS5oZWlnaHQpLGNzcyhnaG9zdEVsLFwib3BhY2l0eVwiLFwiMC44XCIpLGNzcyhnaG9zdEVsLFwicG9zaXRpb25cIixQb3NpdGlvbkdob3N0QWJzb2x1dGVseT9cImFic29sdXRlXCI6XCJmaXhlZFwiKSxjc3MoZ2hvc3RFbCxcInpJbmRleFwiLFwiMTAwMDAwXCIpLGNzcyhnaG9zdEVsLFwicG9pbnRlckV2ZW50c1wiLFwibm9uZVwiKSxTb3J0YWJsZS5naG9zdD1naG9zdEVsLHQuYXBwZW5kQ2hpbGQoZ2hvc3RFbCksY3NzKGdob3N0RWwsXCJ0cmFuc2Zvcm0tb3JpZ2luXCIsdGFwRGlzdGFuY2VMZWZ0L3BhcnNlSW50KGdob3N0RWwuc3R5bGUud2lkdGgpKjEwMCtcIiUgXCIrdGFwRGlzdGFuY2VUb3AvcGFyc2VJbnQoZ2hvc3RFbC5zdHlsZS5oZWlnaHQpKjEwMCtcIiVcIil9fSxfb25EcmFnU3RhcnQ6ZnVuY3Rpb24odCxlKXt2YXIgbz10aGlzLG49dC5kYXRhVHJhbnNmZXIscj1vLm9wdGlvbnM7cGx1Z2luRXZlbnQoXCJkcmFnU3RhcnRcIix0aGlzLHtldnQ6dH0pLFNvcnRhYmxlLmV2ZW50Q2FuY2VsZWQ/dGhpcy5fb25Ecm9wKCk6KHBsdWdpbkV2ZW50KFwic2V0dXBDbG9uZVwiLHRoaXMpLFNvcnRhYmxlLmV2ZW50Q2FuY2VsZWR8fCgoY2xvbmVFbD1jbG9uZShkcmFnRWwpKS5yZW1vdmVBdHRyaWJ1dGUoXCJpZFwiKSxjbG9uZUVsLmRyYWdnYWJsZT0hMSxjbG9uZUVsLnN0eWxlW1wid2lsbC1jaGFuZ2VcIl09XCJcIix0aGlzLl9oaWRlQ2xvbmUoKSx0b2dnbGVDbGFzcyhjbG9uZUVsLHRoaXMub3B0aW9ucy5jaG9zZW5DbGFzcywhMSksU29ydGFibGUuY2xvbmU9Y2xvbmVFbCksby5jbG9uZUlkPV9uZXh0VGljaygoZnVuY3Rpb24oKXtwbHVnaW5FdmVudChcImNsb25lXCIsbyksU29ydGFibGUuZXZlbnRDYW5jZWxlZHx8KG8ub3B0aW9ucy5yZW1vdmVDbG9uZU9uSGlkZXx8cm9vdEVsLmluc2VydEJlZm9yZShjbG9uZUVsLGRyYWdFbCksby5faGlkZUNsb25lKCksX2Rpc3BhdGNoRXZlbnQoe3NvcnRhYmxlOm8sbmFtZTpcImNsb25lXCJ9KSl9KSksIWUmJnRvZ2dsZUNsYXNzKGRyYWdFbCxyLmRyYWdDbGFzcywhMCksZT8oaWdub3JlTmV4dENsaWNrPSEwLG8uX2xvb3BJZD1zZXRJbnRlcnZhbChvLl9lbXVsYXRlRHJhZ092ZXIsNTApKToob2ZmKGRvY3VtZW50LFwibW91c2V1cFwiLG8uX29uRHJvcCksb2ZmKGRvY3VtZW50LFwidG91Y2hlbmRcIixvLl9vbkRyb3ApLG9mZihkb2N1bWVudCxcInRvdWNoY2FuY2VsXCIsby5fb25Ecm9wKSxuJiYobi5lZmZlY3RBbGxvd2VkPVwibW92ZVwiLHIuc2V0RGF0YSYmci5zZXREYXRhLmNhbGwobyxuLGRyYWdFbCkpLG9uKGRvY3VtZW50LFwiZHJvcFwiLG8pLGNzcyhkcmFnRWwsXCJ0cmFuc2Zvcm1cIixcInRyYW5zbGF0ZVooMClcIikpLGF3YWl0aW5nRHJhZ1N0YXJ0ZWQ9ITAsby5fZHJhZ1N0YXJ0SWQ9X25leHRUaWNrKG8uX2RyYWdTdGFydGVkLmJpbmQobyxlLHQpKSxvbihkb2N1bWVudCxcInNlbGVjdHN0YXJ0XCIsbyksbW92ZWQ9ITAsU2FmYXJpJiZjc3MoZG9jdW1lbnQuYm9keSxcInVzZXItc2VsZWN0XCIsXCJub25lXCIpKX0sX29uRHJhZ092ZXI6ZnVuY3Rpb24odCl7dmFyIGUsbyxuLHIsbD10aGlzLmVsLGE9dC50YXJnZXQsaT10aGlzLm9wdGlvbnMscz1pLmdyb3VwLGM9U29ydGFibGUuYWN0aXZlLGQ9YWN0aXZlR3JvdXA9PT1zLHU9aS5zb3J0LGc9cHV0U29ydGFibGV8fGMsaD10aGlzLHA9ITE7aWYoIV9zaWxlbnQpe2lmKHZvaWQgMCE9PXQucHJldmVudERlZmF1bHQmJnQuY2FuY2VsYWJsZSYmdC5wcmV2ZW50RGVmYXVsdCgpLGE9Y2xvc2VzdChhLGkuZHJhZ2dhYmxlLGwsITApLEEoXCJkcmFnT3ZlclwiKSxTb3J0YWJsZS5ldmVudENhbmNlbGVkKXJldHVybiBwO2lmKGRyYWdFbC5jb250YWlucyh0LnRhcmdldCl8fGEuYW5pbWF0ZWQmJmEuYW5pbWF0aW5nWCYmYS5hbmltYXRpbmdZfHxoLl9pZ25vcmVXaGlsZUFuaW1hdGluZz09PWEpcmV0dXJuIE0oITEpO2lmKGlnbm9yZU5leHRDbGljaz0hMSxjJiYhaS5kaXNhYmxlZCYmKGQ/dXx8KG49cGFyZW50RWwhPT1yb290RWwpOnB1dFNvcnRhYmxlPT09dGhpc3x8KHRoaXMubGFzdFB1dE1vZGU9YWN0aXZlR3JvdXAuY2hlY2tQdWxsKHRoaXMsYyxkcmFnRWwsdCkpJiZzLmNoZWNrUHV0KHRoaXMsYyxkcmFnRWwsdCkpKXtpZihyPVwidmVydGljYWxcIj09PXRoaXMuX2dldERpcmVjdGlvbih0LGEpLGU9Z2V0UmVjdChkcmFnRWwpLEEoXCJkcmFnT3ZlclZhbGlkXCIpLFNvcnRhYmxlLmV2ZW50Q2FuY2VsZWQpcmV0dXJuIHA7aWYobilyZXR1cm4gcGFyZW50RWw9cm9vdEVsLFAoKSx0aGlzLl9oaWRlQ2xvbmUoKSxBKFwicmV2ZXJ0XCIpLFNvcnRhYmxlLmV2ZW50Q2FuY2VsZWR8fChuZXh0RWw/cm9vdEVsLmluc2VydEJlZm9yZShkcmFnRWwsbmV4dEVsKTpyb290RWwuYXBwZW5kQ2hpbGQoZHJhZ0VsKSksTSghMCk7dmFyIGY9bGFzdENoaWxkKGwsaS5kcmFnZ2FibGUpO2lmKCFmfHxfZ2hvc3RJc0xhc3QodCxyLHRoaXMpJiYhZi5hbmltYXRlZCl7aWYoZj09PWRyYWdFbClyZXR1cm4gTSghMSk7aWYoZiYmbD09PXQudGFyZ2V0JiYoYT1mKSxhJiYobz1nZXRSZWN0KGEpKSwhMSE9PV9vbk1vdmUocm9vdEVsLGwsZHJhZ0VsLGUsYSxvLHQsISFhKSlyZXR1cm4gUCgpLGYmJmYubmV4dFNpYmxpbmc/bC5pbnNlcnRCZWZvcmUoZHJhZ0VsLGYubmV4dFNpYmxpbmcpOmwuYXBwZW5kQ2hpbGQoZHJhZ0VsKSxwYXJlbnRFbD1sLFIoKSxNKCEwKX1lbHNlIGlmKGYmJl9naG9zdElzRmlyc3QodCxyLHRoaXMpKXt2YXIgbT1nZXRDaGlsZChsLDAsaSwhMCk7aWYobT09PWRyYWdFbClyZXR1cm4gTSghMSk7aWYobz1nZXRSZWN0KGE9bSksITEhPT1fb25Nb3ZlKHJvb3RFbCxsLGRyYWdFbCxlLGEsbyx0LCExKSlyZXR1cm4gUCgpLGwuaW5zZXJ0QmVmb3JlKGRyYWdFbCxtKSxwYXJlbnRFbD1sLFIoKSxNKCEwKX1lbHNlIGlmKGEucGFyZW50Tm9kZT09PWwpe289Z2V0UmVjdChhKTt2YXIgdixFLGIsUz1kcmFnRWwucGFyZW50Tm9kZSE9PWwsRD0hX2RyYWdFbEluUm93Q29sdW1uKGRyYWdFbC5hbmltYXRlZCYmZHJhZ0VsLnRvUmVjdHx8ZSxhLmFuaW1hdGVkJiZhLnRvUmVjdHx8byxyKSx3PXI/XCJ0b3BcIjpcImxlZnRcIixfPWlzU2Nyb2xsZWRQYXN0KGEsXCJ0b3BcIixcInRvcFwiKXx8aXNTY3JvbGxlZFBhc3QoZHJhZ0VsLFwidG9wXCIsXCJ0b3BcIikseT1fP18uc2Nyb2xsVG9wOnZvaWQgMDtpZihsYXN0VGFyZ2V0IT09YSYmKEU9b1t3XSxwYXN0Rmlyc3RJbnZlcnRUaHJlc2g9ITEsaXNDaXJjdW1zdGFudGlhbEludmVydD0hRCYmaS5pbnZlcnRTd2FwfHxTKSwwIT09KHY9X2dldFN3YXBEaXJlY3Rpb24odCxhLG8scixEPzE6aS5zd2FwVGhyZXNob2xkLG51bGw9PWkuaW52ZXJ0ZWRTd2FwVGhyZXNob2xkP2kuc3dhcFRocmVzaG9sZDppLmludmVydGVkU3dhcFRocmVzaG9sZCxpc0NpcmN1bXN0YW50aWFsSW52ZXJ0LGxhc3RUYXJnZXQ9PT1hKSkpe3ZhciB4PWluZGV4KGRyYWdFbCk7ZG97eC09dixiPXBhcmVudEVsLmNoaWxkcmVuW3hdfXdoaWxlKGImJihcIm5vbmVcIj09PWNzcyhiLFwiZGlzcGxheVwiKXx8Yj09PWdob3N0RWwpKX1pZigwPT09dnx8Yj09PWEpcmV0dXJuIE0oITEpO2xhc3RUYXJnZXQ9YSxsYXN0RGlyZWN0aW9uPXY7dmFyIEM9YS5uZXh0RWxlbWVudFNpYmxpbmcsST0hMSxUPV9vbk1vdmUocm9vdEVsLGwsZHJhZ0VsLGUsYSxvLHQsST0xPT09dik7aWYoITEhPT1UKXJldHVybiAxIT09VCYmLTEhPT1UfHwoST0xPT09VCksX3NpbGVudD0hMCxzZXRUaW1lb3V0KF91bnNpbGVudCwzMCksUCgpLEkmJiFDP2wuYXBwZW5kQ2hpbGQoZHJhZ0VsKTphLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGRyYWdFbCxJP0M6YSksXyYmc2Nyb2xsQnkoXywwLHktXy5zY3JvbGxUb3ApLHBhcmVudEVsPWRyYWdFbC5wYXJlbnROb2RlLHZvaWQgMD09PUV8fGlzQ2lyY3Vtc3RhbnRpYWxJbnZlcnR8fCh0YXJnZXRNb3ZlRGlzdGFuY2U9TWF0aC5hYnMoRS1nZXRSZWN0KGEpW3ddKSksUigpLE0oITApfWlmKGwuY29udGFpbnMoZHJhZ0VsKSlyZXR1cm4gTSghMSl9cmV0dXJuITF9ZnVuY3Rpb24gQShpLHMpe3BsdWdpbkV2ZW50KGksaCxfb2JqZWN0U3ByZWFkMih7ZXZ0OnQsaXNPd25lcjpkLGF4aXM6cj9cInZlcnRpY2FsXCI6XCJob3Jpem9udGFsXCIscmV2ZXJ0Om4sZHJhZ1JlY3Q6ZSx0YXJnZXRSZWN0Om8sY2FuU29ydDp1LGZyb21Tb3J0YWJsZTpnLHRhcmdldDphLGNvbXBsZXRlZDpNLG9uTW92ZTpmdW5jdGlvbihvLG4pe3JldHVybiBfb25Nb3ZlKHJvb3RFbCxsLGRyYWdFbCxlLG8sZ2V0UmVjdChvKSx0LG4pfSxjaGFuZ2VkOlJ9LHMpKX1mdW5jdGlvbiBQKCl7QShcImRyYWdPdmVyQW5pbWF0aW9uQ2FwdHVyZVwiKSxoLmNhcHR1cmVBbmltYXRpb25TdGF0ZSgpLGghPT1nJiZnLmNhcHR1cmVBbmltYXRpb25TdGF0ZSgpfWZ1bmN0aW9uIE0oZSl7cmV0dXJuIEEoXCJkcmFnT3ZlckNvbXBsZXRlZFwiLHtpbnNlcnRpb246ZX0pLGUmJihkP2MuX2hpZGVDbG9uZSgpOmMuX3Nob3dDbG9uZShoKSxoIT09ZyYmKHRvZ2dsZUNsYXNzKGRyYWdFbCxwdXRTb3J0YWJsZT9wdXRTb3J0YWJsZS5vcHRpb25zLmdob3N0Q2xhc3M6Yy5vcHRpb25zLmdob3N0Q2xhc3MsITEpLHRvZ2dsZUNsYXNzKGRyYWdFbCxpLmdob3N0Q2xhc3MsITApKSxwdXRTb3J0YWJsZSE9PWgmJmghPT1Tb3J0YWJsZS5hY3RpdmU/cHV0U29ydGFibGU9aDpoPT09U29ydGFibGUuYWN0aXZlJiZwdXRTb3J0YWJsZSYmKHB1dFNvcnRhYmxlPW51bGwpLGc9PT1oJiYoaC5faWdub3JlV2hpbGVBbmltYXRpbmc9YSksaC5hbmltYXRlQWxsKChmdW5jdGlvbigpe0EoXCJkcmFnT3ZlckFuaW1hdGlvbkNvbXBsZXRlXCIpLGguX2lnbm9yZVdoaWxlQW5pbWF0aW5nPW51bGx9KSksaCE9PWcmJihnLmFuaW1hdGVBbGwoKSxnLl9pZ25vcmVXaGlsZUFuaW1hdGluZz1udWxsKSksKGE9PT1kcmFnRWwmJiFkcmFnRWwuYW5pbWF0ZWR8fGE9PT1sJiYhYS5hbmltYXRlZCkmJihsYXN0VGFyZ2V0PW51bGwpLGkuZHJhZ292ZXJCdWJibGV8fHQucm9vdEVsfHxhPT09ZG9jdW1lbnR8fChkcmFnRWwucGFyZW50Tm9kZVtleHBhbmRvXS5faXNPdXRzaWRlVGhpc0VsKHQudGFyZ2V0KSwhZSYmbmVhcmVzdEVtcHR5SW5zZXJ0RGV0ZWN0RXZlbnQodCkpLCFpLmRyYWdvdmVyQnViYmxlJiZ0LnN0b3BQcm9wYWdhdGlvbiYmdC5zdG9wUHJvcGFnYXRpb24oKSxwPSEwfWZ1bmN0aW9uIFIoKXtuZXdJbmRleD1pbmRleChkcmFnRWwpLG5ld0RyYWdnYWJsZUluZGV4PWluZGV4KGRyYWdFbCxpLmRyYWdnYWJsZSksX2Rpc3BhdGNoRXZlbnQoe3NvcnRhYmxlOmgsbmFtZTpcImNoYW5nZVwiLHRvRWw6bCxuZXdJbmRleDpuZXdJbmRleCxuZXdEcmFnZ2FibGVJbmRleDpuZXdEcmFnZ2FibGVJbmRleCxvcmlnaW5hbEV2ZW50OnR9KX19LF9pZ25vcmVXaGlsZUFuaW1hdGluZzpudWxsLF9vZmZNb3ZlRXZlbnRzOmZ1bmN0aW9uKCl7b2ZmKGRvY3VtZW50LFwibW91c2Vtb3ZlXCIsdGhpcy5fb25Ub3VjaE1vdmUpLG9mZihkb2N1bWVudCxcInRvdWNobW92ZVwiLHRoaXMuX29uVG91Y2hNb3ZlKSxvZmYoZG9jdW1lbnQsXCJwb2ludGVybW92ZVwiLHRoaXMuX29uVG91Y2hNb3ZlKSxvZmYoZG9jdW1lbnQsXCJkcmFnb3ZlclwiLG5lYXJlc3RFbXB0eUluc2VydERldGVjdEV2ZW50KSxvZmYoZG9jdW1lbnQsXCJtb3VzZW1vdmVcIixuZWFyZXN0RW1wdHlJbnNlcnREZXRlY3RFdmVudCksb2ZmKGRvY3VtZW50LFwidG91Y2htb3ZlXCIsbmVhcmVzdEVtcHR5SW5zZXJ0RGV0ZWN0RXZlbnQpfSxfb2ZmVXBFdmVudHM6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmVsLm93bmVyRG9jdW1lbnQ7b2ZmKHQsXCJtb3VzZXVwXCIsdGhpcy5fb25Ecm9wKSxvZmYodCxcInRvdWNoZW5kXCIsdGhpcy5fb25Ecm9wKSxvZmYodCxcInBvaW50ZXJ1cFwiLHRoaXMuX29uRHJvcCksb2ZmKHQsXCJ0b3VjaGNhbmNlbFwiLHRoaXMuX29uRHJvcCksb2ZmKGRvY3VtZW50LFwic2VsZWN0c3RhcnRcIix0aGlzKX0sX29uRHJvcDpmdW5jdGlvbih0KXt2YXIgZT10aGlzLmVsLG89dGhpcy5vcHRpb25zO25ld0luZGV4PWluZGV4KGRyYWdFbCksbmV3RHJhZ2dhYmxlSW5kZXg9aW5kZXgoZHJhZ0VsLG8uZHJhZ2dhYmxlKSxwbHVnaW5FdmVudChcImRyb3BcIix0aGlzLHtldnQ6dH0pLHBhcmVudEVsPWRyYWdFbCYmZHJhZ0VsLnBhcmVudE5vZGUsbmV3SW5kZXg9aW5kZXgoZHJhZ0VsKSxuZXdEcmFnZ2FibGVJbmRleD1pbmRleChkcmFnRWwsby5kcmFnZ2FibGUpLFNvcnRhYmxlLmV2ZW50Q2FuY2VsZWR8fChhd2FpdGluZ0RyYWdTdGFydGVkPSExLGlzQ2lyY3Vtc3RhbnRpYWxJbnZlcnQ9ITEscGFzdEZpcnN0SW52ZXJ0VGhyZXNoPSExLGNsZWFySW50ZXJ2YWwodGhpcy5fbG9vcElkKSxjbGVhclRpbWVvdXQodGhpcy5fZHJhZ1N0YXJ0VGltZXIpLF9jYW5jZWxOZXh0VGljayh0aGlzLmNsb25lSWQpLF9jYW5jZWxOZXh0VGljayh0aGlzLl9kcmFnU3RhcnRJZCksdGhpcy5uYXRpdmVEcmFnZ2FibGUmJihvZmYoZG9jdW1lbnQsXCJkcm9wXCIsdGhpcyksb2ZmKGUsXCJkcmFnc3RhcnRcIix0aGlzLl9vbkRyYWdTdGFydCkpLHRoaXMuX29mZk1vdmVFdmVudHMoKSx0aGlzLl9vZmZVcEV2ZW50cygpLFNhZmFyaSYmY3NzKGRvY3VtZW50LmJvZHksXCJ1c2VyLXNlbGVjdFwiLFwiXCIpLGNzcyhkcmFnRWwsXCJ0cmFuc2Zvcm1cIixcIlwiKSx0JiYobW92ZWQmJih0LmNhbmNlbGFibGUmJnQucHJldmVudERlZmF1bHQoKSwhby5kcm9wQnViYmxlJiZ0LnN0b3BQcm9wYWdhdGlvbigpKSxnaG9zdEVsJiZnaG9zdEVsLnBhcmVudE5vZGUmJmdob3N0RWwucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChnaG9zdEVsKSwocm9vdEVsPT09cGFyZW50RWx8fHB1dFNvcnRhYmxlJiZcImNsb25lXCIhPT1wdXRTb3J0YWJsZS5sYXN0UHV0TW9kZSkmJmNsb25lRWwmJmNsb25lRWwucGFyZW50Tm9kZSYmY2xvbmVFbC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGNsb25lRWwpLGRyYWdFbCYmKHRoaXMubmF0aXZlRHJhZ2dhYmxlJiZvZmYoZHJhZ0VsLFwiZHJhZ2VuZFwiLHRoaXMpLF9kaXNhYmxlRHJhZ2dhYmxlKGRyYWdFbCksZHJhZ0VsLnN0eWxlW1wid2lsbC1jaGFuZ2VcIl09XCJcIixtb3ZlZCYmIWF3YWl0aW5nRHJhZ1N0YXJ0ZWQmJnRvZ2dsZUNsYXNzKGRyYWdFbCxwdXRTb3J0YWJsZT9wdXRTb3J0YWJsZS5vcHRpb25zLmdob3N0Q2xhc3M6dGhpcy5vcHRpb25zLmdob3N0Q2xhc3MsITEpLHRvZ2dsZUNsYXNzKGRyYWdFbCx0aGlzLm9wdGlvbnMuY2hvc2VuQ2xhc3MsITEpLF9kaXNwYXRjaEV2ZW50KHtzb3J0YWJsZTp0aGlzLG5hbWU6XCJ1bmNob29zZVwiLHRvRWw6cGFyZW50RWwsbmV3SW5kZXg6bnVsbCxuZXdEcmFnZ2FibGVJbmRleDpudWxsLG9yaWdpbmFsRXZlbnQ6dH0pLHJvb3RFbCE9PXBhcmVudEVsPyhuZXdJbmRleD49MCYmKF9kaXNwYXRjaEV2ZW50KHtyb290RWw6cGFyZW50RWwsbmFtZTpcImFkZFwiLHRvRWw6cGFyZW50RWwsZnJvbUVsOnJvb3RFbCxvcmlnaW5hbEV2ZW50OnR9KSxfZGlzcGF0Y2hFdmVudCh7c29ydGFibGU6dGhpcyxuYW1lOlwicmVtb3ZlXCIsdG9FbDpwYXJlbnRFbCxvcmlnaW5hbEV2ZW50OnR9KSxfZGlzcGF0Y2hFdmVudCh7cm9vdEVsOnBhcmVudEVsLG5hbWU6XCJzb3J0XCIsdG9FbDpwYXJlbnRFbCxmcm9tRWw6cm9vdEVsLG9yaWdpbmFsRXZlbnQ6dH0pLF9kaXNwYXRjaEV2ZW50KHtzb3J0YWJsZTp0aGlzLG5hbWU6XCJzb3J0XCIsdG9FbDpwYXJlbnRFbCxvcmlnaW5hbEV2ZW50OnR9KSkscHV0U29ydGFibGUmJnB1dFNvcnRhYmxlLnNhdmUoKSk6bmV3SW5kZXghPT1vbGRJbmRleCYmbmV3SW5kZXg+PTAmJihfZGlzcGF0Y2hFdmVudCh7c29ydGFibGU6dGhpcyxuYW1lOlwidXBkYXRlXCIsdG9FbDpwYXJlbnRFbCxvcmlnaW5hbEV2ZW50OnR9KSxfZGlzcGF0Y2hFdmVudCh7c29ydGFibGU6dGhpcyxuYW1lOlwic29ydFwiLHRvRWw6cGFyZW50RWwsb3JpZ2luYWxFdmVudDp0fSkpLFNvcnRhYmxlLmFjdGl2ZSYmKG51bGwhPW5ld0luZGV4JiYtMSE9PW5ld0luZGV4fHwobmV3SW5kZXg9b2xkSW5kZXgsbmV3RHJhZ2dhYmxlSW5kZXg9b2xkRHJhZ2dhYmxlSW5kZXgpLF9kaXNwYXRjaEV2ZW50KHtzb3J0YWJsZTp0aGlzLG5hbWU6XCJlbmRcIix0b0VsOnBhcmVudEVsLG9yaWdpbmFsRXZlbnQ6dH0pLHRoaXMuc2F2ZSgpKSkpKSx0aGlzLl9udWxsaW5nKCl9LF9udWxsaW5nOmZ1bmN0aW9uKCl7cGx1Z2luRXZlbnQoXCJudWxsaW5nXCIsdGhpcykscm9vdEVsPWRyYWdFbD1wYXJlbnRFbD1naG9zdEVsPW5leHRFbD1jbG9uZUVsPWxhc3REb3duRWw9Y2xvbmVIaWRkZW49dGFwRXZ0PXRvdWNoRXZ0PW1vdmVkPW5ld0luZGV4PW5ld0RyYWdnYWJsZUluZGV4PW9sZEluZGV4PW9sZERyYWdnYWJsZUluZGV4PWxhc3RUYXJnZXQ9bGFzdERpcmVjdGlvbj1wdXRTb3J0YWJsZT1hY3RpdmVHcm91cD1Tb3J0YWJsZS5kcmFnZ2VkPVNvcnRhYmxlLmdob3N0PVNvcnRhYmxlLmNsb25lPVNvcnRhYmxlLmFjdGl2ZT1udWxsLHNhdmVkSW5wdXRDaGVja2VkLmZvckVhY2goKGZ1bmN0aW9uKHQpe3QuY2hlY2tlZD0hMH0pKSxzYXZlZElucHV0Q2hlY2tlZC5sZW5ndGg9bGFzdER4PWxhc3REeT0wfSxoYW5kbGVFdmVudDpmdW5jdGlvbih0KXtzd2l0Y2godC50eXBlKXtjYXNlXCJkcm9wXCI6Y2FzZVwiZHJhZ2VuZFwiOnRoaXMuX29uRHJvcCh0KTticmVhaztjYXNlXCJkcmFnZW50ZXJcIjpjYXNlXCJkcmFnb3ZlclwiOmRyYWdFbCYmKHRoaXMuX29uRHJhZ092ZXIodCksX2dsb2JhbERyYWdPdmVyKHQpKTticmVhaztjYXNlXCJzZWxlY3RzdGFydFwiOnQucHJldmVudERlZmF1bHQoKX19LHRvQXJyYXk6ZnVuY3Rpb24oKXtmb3IodmFyIHQsZT1bXSxvPXRoaXMuZWwuY2hpbGRyZW4sbj0wLHI9by5sZW5ndGgsbD10aGlzLm9wdGlvbnM7bjxyO24rKyljbG9zZXN0KHQ9b1tuXSxsLmRyYWdnYWJsZSx0aGlzLmVsLCExKSYmZS5wdXNoKHQuZ2V0QXR0cmlidXRlKGwuZGF0YUlkQXR0cil8fF9nZW5lcmF0ZUlkKHQpKTtyZXR1cm4gZX0sc29ydDpmdW5jdGlvbih0LGUpe3ZhciBvPXt9LG49dGhpcy5lbDt0aGlzLnRvQXJyYXkoKS5mb3JFYWNoKChmdW5jdGlvbih0LGUpe3ZhciByPW4uY2hpbGRyZW5bZV07Y2xvc2VzdChyLHRoaXMub3B0aW9ucy5kcmFnZ2FibGUsbiwhMSkmJihvW3RdPXIpfSksdGhpcyksZSYmdGhpcy5jYXB0dXJlQW5pbWF0aW9uU3RhdGUoKSx0LmZvckVhY2goKGZ1bmN0aW9uKHQpe29bdF0mJihuLnJlbW92ZUNoaWxkKG9bdF0pLG4uYXBwZW5kQ2hpbGQob1t0XSkpfSkpLGUmJnRoaXMuYW5pbWF0ZUFsbCgpfSxzYXZlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5vcHRpb25zLnN0b3JlO3QmJnQuc2V0JiZ0LnNldCh0aGlzKX0sY2xvc2VzdDpmdW5jdGlvbih0LGUpe3JldHVybiBjbG9zZXN0KHQsZXx8dGhpcy5vcHRpb25zLmRyYWdnYWJsZSx0aGlzLmVsLCExKX0sb3B0aW9uOmZ1bmN0aW9uKHQsZSl7dmFyIG89dGhpcy5vcHRpb25zO2lmKHZvaWQgMD09PWUpcmV0dXJuIG9bdF07dmFyIG49UGx1Z2luTWFuYWdlci5tb2RpZnlPcHRpb24odGhpcyx0LGUpO29bdF09dm9pZCAwIT09bj9uOmUsXCJncm91cFwiPT09dCYmX3ByZXBhcmVHcm91cChvKX0sZGVzdHJveTpmdW5jdGlvbigpe3BsdWdpbkV2ZW50KFwiZGVzdHJveVwiLHRoaXMpO3ZhciB0PXRoaXMuZWw7dFtleHBhbmRvXT1udWxsLG9mZih0LFwibW91c2Vkb3duXCIsdGhpcy5fb25UYXBTdGFydCksb2ZmKHQsXCJ0b3VjaHN0YXJ0XCIsdGhpcy5fb25UYXBTdGFydCksb2ZmKHQsXCJwb2ludGVyZG93blwiLHRoaXMuX29uVGFwU3RhcnQpLHRoaXMubmF0aXZlRHJhZ2dhYmxlJiYob2ZmKHQsXCJkcmFnb3ZlclwiLHRoaXMpLG9mZih0LFwiZHJhZ2VudGVyXCIsdGhpcykpLEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwodC5xdWVyeVNlbGVjdG9yQWxsKFwiW2RyYWdnYWJsZV1cIiksKGZ1bmN0aW9uKHQpe3QucmVtb3ZlQXR0cmlidXRlKFwiZHJhZ2dhYmxlXCIpfSkpLHRoaXMuX29uRHJvcCgpLHRoaXMuX2Rpc2FibGVEZWxheWVkRHJhZ0V2ZW50cygpLHNvcnRhYmxlcy5zcGxpY2Uoc29ydGFibGVzLmluZGV4T2YodGhpcy5lbCksMSksdGhpcy5lbD10PW51bGx9LF9oaWRlQ2xvbmU6ZnVuY3Rpb24oKXtpZighY2xvbmVIaWRkZW4pe2lmKHBsdWdpbkV2ZW50KFwiaGlkZUNsb25lXCIsdGhpcyksU29ydGFibGUuZXZlbnRDYW5jZWxlZClyZXR1cm47Y3NzKGNsb25lRWwsXCJkaXNwbGF5XCIsXCJub25lXCIpLHRoaXMub3B0aW9ucy5yZW1vdmVDbG9uZU9uSGlkZSYmY2xvbmVFbC5wYXJlbnROb2RlJiZjbG9uZUVsLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoY2xvbmVFbCksY2xvbmVIaWRkZW49ITB9fSxfc2hvd0Nsb25lOmZ1bmN0aW9uKHQpe2lmKFwiY2xvbmVcIj09PXQubGFzdFB1dE1vZGUpe2lmKGNsb25lSGlkZGVuKXtpZihwbHVnaW5FdmVudChcInNob3dDbG9uZVwiLHRoaXMpLFNvcnRhYmxlLmV2ZW50Q2FuY2VsZWQpcmV0dXJuO2RyYWdFbC5wYXJlbnROb2RlIT1yb290RWx8fHRoaXMub3B0aW9ucy5ncm91cC5yZXZlcnRDbG9uZT9uZXh0RWw/cm9vdEVsLmluc2VydEJlZm9yZShjbG9uZUVsLG5leHRFbCk6cm9vdEVsLmFwcGVuZENoaWxkKGNsb25lRWwpOnJvb3RFbC5pbnNlcnRCZWZvcmUoY2xvbmVFbCxkcmFnRWwpLHRoaXMub3B0aW9ucy5ncm91cC5yZXZlcnRDbG9uZSYmdGhpcy5hbmltYXRlKGRyYWdFbCxjbG9uZUVsKSxjc3MoY2xvbmVFbCxcImRpc3BsYXlcIixcIlwiKSxjbG9uZUhpZGRlbj0hMX19ZWxzZSB0aGlzLl9oaWRlQ2xvbmUoKX19LGRvY3VtZW50RXhpc3RzJiZvbihkb2N1bWVudCxcInRvdWNobW92ZVwiLChmdW5jdGlvbih0KXsoU29ydGFibGUuYWN0aXZlfHxhd2FpdGluZ0RyYWdTdGFydGVkKSYmdC5jYW5jZWxhYmxlJiZ0LnByZXZlbnREZWZhdWx0KCl9KSksU29ydGFibGUudXRpbHM9e29uOm9uLG9mZjpvZmYsY3NzOmNzcyxmaW5kOmZpbmQsaXM6ZnVuY3Rpb24odCxlKXtyZXR1cm4hIWNsb3Nlc3QodCxlLHQsITEpfSxleHRlbmQ6ZXh0ZW5kLHRocm90dGxlOnRocm90dGxlLGNsb3Nlc3Q6Y2xvc2VzdCx0b2dnbGVDbGFzczp0b2dnbGVDbGFzcyxjbG9uZTpjbG9uZSxpbmRleDppbmRleCxuZXh0VGljazpfbmV4dFRpY2ssY2FuY2VsTmV4dFRpY2s6X2NhbmNlbE5leHRUaWNrLGRldGVjdERpcmVjdGlvbjpfZGV0ZWN0RGlyZWN0aW9uLGdldENoaWxkOmdldENoaWxkfSxTb3J0YWJsZS5nZXQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRbZXhwYW5kb119LFNvcnRhYmxlLm1vdW50PWZ1bmN0aW9uKCl7Zm9yKHZhciB0PWFyZ3VtZW50cy5sZW5ndGgsZT1uZXcgQXJyYXkodCksbz0wO288dDtvKyspZVtvXT1hcmd1bWVudHNbb107ZVswXS5jb25zdHJ1Y3Rvcj09PUFycmF5JiYoZT1lWzBdKSxlLmZvckVhY2goKGZ1bmN0aW9uKHQpe2lmKCF0LnByb3RvdHlwZXx8IXQucHJvdG90eXBlLmNvbnN0cnVjdG9yKXRocm93XCJTb3J0YWJsZTogTW91bnRlZCBwbHVnaW4gbXVzdCBiZSBhIGNvbnN0cnVjdG9yIGZ1bmN0aW9uLCBub3QgXCIuY29uY2F0KHt9LnRvU3RyaW5nLmNhbGwodCkpO3QudXRpbHMmJihTb3J0YWJsZS51dGlscz1fb2JqZWN0U3ByZWFkMihfb2JqZWN0U3ByZWFkMih7fSxTb3J0YWJsZS51dGlscyksdC51dGlscykpLFBsdWdpbk1hbmFnZXIubW91bnQodCl9KSl9LFNvcnRhYmxlLmNyZWF0ZT1mdW5jdGlvbih0LGUpe3JldHVybiBuZXcgU29ydGFibGUodCxlKX0sU29ydGFibGUudmVyc2lvbj12ZXJzaW9uO3ZhciBzY3JvbGxFbCxzY3JvbGxSb290RWwsbGFzdEF1dG9TY3JvbGxYLGxhc3RBdXRvU2Nyb2xsWSx0b3VjaEV2dCQxLHBvaW50ZXJFbGVtQ2hhbmdlZEludGVydmFsLGF1dG9TY3JvbGxzPVtdLHNjcm9sbGluZz0hMTtmdW5jdGlvbiBBdXRvU2Nyb2xsUGx1Z2luKCl7ZnVuY3Rpb24gdCgpe2Zvcih2YXIgdCBpbiB0aGlzLmRlZmF1bHRzPXtzY3JvbGw6ITAsZm9yY2VBdXRvU2Nyb2xsRmFsbGJhY2s6ITEsc2Nyb2xsU2Vuc2l0aXZpdHk6MzAsc2Nyb2xsU3BlZWQ6MTAsYnViYmxlU2Nyb2xsOiEwfSx0aGlzKVwiX1wiPT09dC5jaGFyQXQoMCkmJlwiZnVuY3Rpb25cIj09dHlwZW9mIHRoaXNbdF0mJih0aGlzW3RdPXRoaXNbdF0uYmluZCh0aGlzKSl9cmV0dXJuIHQucHJvdG90eXBlPXtkcmFnU3RhcnRlZDpmdW5jdGlvbih0KXt2YXIgZT10Lm9yaWdpbmFsRXZlbnQ7dGhpcy5zb3J0YWJsZS5uYXRpdmVEcmFnZ2FibGU/b24oZG9jdW1lbnQsXCJkcmFnb3ZlclwiLHRoaXMuX2hhbmRsZUF1dG9TY3JvbGwpOnRoaXMub3B0aW9ucy5zdXBwb3J0UG9pbnRlcj9vbihkb2N1bWVudCxcInBvaW50ZXJtb3ZlXCIsdGhpcy5faGFuZGxlRmFsbGJhY2tBdXRvU2Nyb2xsKTplLnRvdWNoZXM/b24oZG9jdW1lbnQsXCJ0b3VjaG1vdmVcIix0aGlzLl9oYW5kbGVGYWxsYmFja0F1dG9TY3JvbGwpOm9uKGRvY3VtZW50LFwibW91c2Vtb3ZlXCIsdGhpcy5faGFuZGxlRmFsbGJhY2tBdXRvU2Nyb2xsKX0sZHJhZ092ZXJDb21wbGV0ZWQ6ZnVuY3Rpb24odCl7dmFyIGU9dC5vcmlnaW5hbEV2ZW50O3RoaXMub3B0aW9ucy5kcmFnT3ZlckJ1YmJsZXx8ZS5yb290RWx8fHRoaXMuX2hhbmRsZUF1dG9TY3JvbGwoZSl9LGRyb3A6ZnVuY3Rpb24oKXt0aGlzLnNvcnRhYmxlLm5hdGl2ZURyYWdnYWJsZT9vZmYoZG9jdW1lbnQsXCJkcmFnb3ZlclwiLHRoaXMuX2hhbmRsZUF1dG9TY3JvbGwpOihvZmYoZG9jdW1lbnQsXCJwb2ludGVybW92ZVwiLHRoaXMuX2hhbmRsZUZhbGxiYWNrQXV0b1Njcm9sbCksb2ZmKGRvY3VtZW50LFwidG91Y2htb3ZlXCIsdGhpcy5faGFuZGxlRmFsbGJhY2tBdXRvU2Nyb2xsKSxvZmYoZG9jdW1lbnQsXCJtb3VzZW1vdmVcIix0aGlzLl9oYW5kbGVGYWxsYmFja0F1dG9TY3JvbGwpKSxjbGVhclBvaW50ZXJFbGVtQ2hhbmdlZEludGVydmFsKCksY2xlYXJBdXRvU2Nyb2xscygpLGNhbmNlbFRocm90dGxlKCl9LG51bGxpbmc6ZnVuY3Rpb24oKXt0b3VjaEV2dCQxPXNjcm9sbFJvb3RFbD1zY3JvbGxFbD1zY3JvbGxpbmc9cG9pbnRlckVsZW1DaGFuZ2VkSW50ZXJ2YWw9bGFzdEF1dG9TY3JvbGxYPWxhc3RBdXRvU2Nyb2xsWT1udWxsLGF1dG9TY3JvbGxzLmxlbmd0aD0wfSxfaGFuZGxlRmFsbGJhY2tBdXRvU2Nyb2xsOmZ1bmN0aW9uKHQpe3RoaXMuX2hhbmRsZUF1dG9TY3JvbGwodCwhMCl9LF9oYW5kbGVBdXRvU2Nyb2xsOmZ1bmN0aW9uKHQsZSl7dmFyIG89dGhpcyxuPSh0LnRvdWNoZXM/dC50b3VjaGVzWzBdOnQpLmNsaWVudFgscj0odC50b3VjaGVzP3QudG91Y2hlc1swXTp0KS5jbGllbnRZLGw9ZG9jdW1lbnQuZWxlbWVudEZyb21Qb2ludChuLHIpO2lmKHRvdWNoRXZ0JDE9dCxlfHx0aGlzLm9wdGlvbnMuZm9yY2VBdXRvU2Nyb2xsRmFsbGJhY2t8fEVkZ2V8fElFMTFPckxlc3N8fFNhZmFyaSl7YXV0b1Njcm9sbCh0LHRoaXMub3B0aW9ucyxsLGUpO3ZhciBhPWdldFBhcmVudEF1dG9TY3JvbGxFbGVtZW50KGwsITApOyFzY3JvbGxpbmd8fHBvaW50ZXJFbGVtQ2hhbmdlZEludGVydmFsJiZuPT09bGFzdEF1dG9TY3JvbGxYJiZyPT09bGFzdEF1dG9TY3JvbGxZfHwocG9pbnRlckVsZW1DaGFuZ2VkSW50ZXJ2YWwmJmNsZWFyUG9pbnRlckVsZW1DaGFuZ2VkSW50ZXJ2YWwoKSxwb2ludGVyRWxlbUNoYW5nZWRJbnRlcnZhbD1zZXRJbnRlcnZhbCgoZnVuY3Rpb24oKXt2YXIgbD1nZXRQYXJlbnRBdXRvU2Nyb2xsRWxlbWVudChkb2N1bWVudC5lbGVtZW50RnJvbVBvaW50KG4sciksITApO2whPT1hJiYoYT1sLGNsZWFyQXV0b1Njcm9sbHMoKSksYXV0b1Njcm9sbCh0LG8ub3B0aW9ucyxsLGUpfSksMTApLGxhc3RBdXRvU2Nyb2xsWD1uLGxhc3RBdXRvU2Nyb2xsWT1yKX1lbHNle2lmKCF0aGlzLm9wdGlvbnMuYnViYmxlU2Nyb2xsfHxnZXRQYXJlbnRBdXRvU2Nyb2xsRWxlbWVudChsLCEwKT09PWdldFdpbmRvd1Njcm9sbGluZ0VsZW1lbnQoKSlyZXR1cm4gdm9pZCBjbGVhckF1dG9TY3JvbGxzKCk7YXV0b1Njcm9sbCh0LHRoaXMub3B0aW9ucyxnZXRQYXJlbnRBdXRvU2Nyb2xsRWxlbWVudChsLCExKSwhMSl9fX0sX2V4dGVuZHModCx7cGx1Z2luTmFtZTpcInNjcm9sbFwiLGluaXRpYWxpemVCeURlZmF1bHQ6ITB9KX1mdW5jdGlvbiBjbGVhckF1dG9TY3JvbGxzKCl7YXV0b1Njcm9sbHMuZm9yRWFjaCgoZnVuY3Rpb24odCl7Y2xlYXJJbnRlcnZhbCh0LnBpZCl9KSksYXV0b1Njcm9sbHM9W119ZnVuY3Rpb24gY2xlYXJQb2ludGVyRWxlbUNoYW5nZWRJbnRlcnZhbCgpe2NsZWFySW50ZXJ2YWwocG9pbnRlckVsZW1DaGFuZ2VkSW50ZXJ2YWwpfXZhciBsYXN0U3dhcEVsLGF1dG9TY3JvbGw9dGhyb3R0bGUoKGZ1bmN0aW9uKHQsZSxvLG4pe2lmKGUuc2Nyb2xsKXt2YXIgcixsPSh0LnRvdWNoZXM/dC50b3VjaGVzWzBdOnQpLmNsaWVudFgsYT0odC50b3VjaGVzP3QudG91Y2hlc1swXTp0KS5jbGllbnRZLGk9ZS5zY3JvbGxTZW5zaXRpdml0eSxzPWUuc2Nyb2xsU3BlZWQsYz1nZXRXaW5kb3dTY3JvbGxpbmdFbGVtZW50KCksZD0hMTtzY3JvbGxSb290RWwhPT1vJiYoc2Nyb2xsUm9vdEVsPW8sY2xlYXJBdXRvU2Nyb2xscygpLHNjcm9sbEVsPWUuc2Nyb2xsLHI9ZS5zY3JvbGxGbiwhMD09PXNjcm9sbEVsJiYoc2Nyb2xsRWw9Z2V0UGFyZW50QXV0b1Njcm9sbEVsZW1lbnQobywhMCkpKTt2YXIgdT0wLGc9c2Nyb2xsRWw7ZG97dmFyIGg9ZyxwPWdldFJlY3QoaCksZj1wLnRvcCxtPXAuYm90dG9tLHY9cC5sZWZ0LEU9cC5yaWdodCxiPXAud2lkdGgsUz1wLmhlaWdodCxEPXZvaWQgMCx3PXZvaWQgMCxfPWguc2Nyb2xsV2lkdGgseT1oLnNjcm9sbEhlaWdodCx4PWNzcyhoKSxDPWguc2Nyb2xsTGVmdCxJPWguc2Nyb2xsVG9wO2g9PT1jPyhEPWI8XyYmKFwiYXV0b1wiPT09eC5vdmVyZmxvd1h8fFwic2Nyb2xsXCI9PT14Lm92ZXJmbG93WHx8XCJ2aXNpYmxlXCI9PT14Lm92ZXJmbG93WCksdz1TPHkmJihcImF1dG9cIj09PXgub3ZlcmZsb3dZfHxcInNjcm9sbFwiPT09eC5vdmVyZmxvd1l8fFwidmlzaWJsZVwiPT09eC5vdmVyZmxvd1kpKTooRD1iPF8mJihcImF1dG9cIj09PXgub3ZlcmZsb3dYfHxcInNjcm9sbFwiPT09eC5vdmVyZmxvd1gpLHc9Uzx5JiYoXCJhdXRvXCI9PT14Lm92ZXJmbG93WXx8XCJzY3JvbGxcIj09PXgub3ZlcmZsb3dZKSk7dmFyIFQ9RCYmKE1hdGguYWJzKEUtbCk8PWkmJkMrYjxfKS0oTWF0aC5hYnModi1sKTw9aSYmISFDKSxBPXcmJihNYXRoLmFicyhtLWEpPD1pJiZJK1M8eSktKE1hdGguYWJzKGYtYSk8PWkmJiEhSSk7aWYoIWF1dG9TY3JvbGxzW3VdKWZvcih2YXIgUD0wO1A8PXU7UCsrKWF1dG9TY3JvbGxzW1BdfHwoYXV0b1Njcm9sbHNbUF09e30pO2F1dG9TY3JvbGxzW3VdLnZ4PT1UJiZhdXRvU2Nyb2xsc1t1XS52eT09QSYmYXV0b1Njcm9sbHNbdV0uZWw9PT1ofHwoYXV0b1Njcm9sbHNbdV0uZWw9aCxhdXRvU2Nyb2xsc1t1XS52eD1ULGF1dG9TY3JvbGxzW3VdLnZ5PUEsY2xlYXJJbnRlcnZhbChhdXRvU2Nyb2xsc1t1XS5waWQpLDA9PVQmJjA9PUF8fChkPSEwLGF1dG9TY3JvbGxzW3VdLnBpZD1zZXRJbnRlcnZhbChmdW5jdGlvbigpe24mJjA9PT10aGlzLmxheWVyJiZTb3J0YWJsZS5hY3RpdmUuX29uVG91Y2hNb3ZlKHRvdWNoRXZ0JDEpO3ZhciBlPWF1dG9TY3JvbGxzW3RoaXMubGF5ZXJdLnZ5P2F1dG9TY3JvbGxzW3RoaXMubGF5ZXJdLnZ5KnM6MCxvPWF1dG9TY3JvbGxzW3RoaXMubGF5ZXJdLnZ4P2F1dG9TY3JvbGxzW3RoaXMubGF5ZXJdLnZ4KnM6MDtcImZ1bmN0aW9uXCI9PXR5cGVvZiByJiZcImNvbnRpbnVlXCIhPT1yLmNhbGwoU29ydGFibGUuZHJhZ2dlZC5wYXJlbnROb2RlW2V4cGFuZG9dLG8sZSx0LHRvdWNoRXZ0JDEsYXV0b1Njcm9sbHNbdGhpcy5sYXllcl0uZWwpfHxzY3JvbGxCeShhdXRvU2Nyb2xsc1t0aGlzLmxheWVyXS5lbCxvLGUpfS5iaW5kKHtsYXllcjp1fSksMjQpKSksdSsrfXdoaWxlKGUuYnViYmxlU2Nyb2xsJiZnIT09YyYmKGc9Z2V0UGFyZW50QXV0b1Njcm9sbEVsZW1lbnQoZywhMSkpKTtzY3JvbGxpbmc9ZH19KSwzMCksZHJvcD1mdW5jdGlvbih0KXt2YXIgZT10Lm9yaWdpbmFsRXZlbnQsbz10LnB1dFNvcnRhYmxlLG49dC5kcmFnRWwscj10LmFjdGl2ZVNvcnRhYmxlLGw9dC5kaXNwYXRjaFNvcnRhYmxlRXZlbnQsYT10LmhpZGVHaG9zdEZvclRhcmdldCxpPXQudW5oaWRlR2hvc3RGb3JUYXJnZXQ7aWYoZSl7dmFyIHM9b3x8cjthKCk7dmFyIGM9ZS5jaGFuZ2VkVG91Y2hlcyYmZS5jaGFuZ2VkVG91Y2hlcy5sZW5ndGg/ZS5jaGFuZ2VkVG91Y2hlc1swXTplLGQ9ZG9jdW1lbnQuZWxlbWVudEZyb21Qb2ludChjLmNsaWVudFgsYy5jbGllbnRZKTtpKCkscyYmIXMuZWwuY29udGFpbnMoZCkmJihsKFwic3BpbGxcIiksdGhpcy5vblNwaWxsKHtkcmFnRWw6bixwdXRTb3J0YWJsZTpvfSkpfX07ZnVuY3Rpb24gUmV2ZXJ0KCl7fWZ1bmN0aW9uIFJlbW92ZSgpe31mdW5jdGlvbiBTd2FwUGx1Z2luKCl7ZnVuY3Rpb24gdCgpe3RoaXMuZGVmYXVsdHM9e3N3YXBDbGFzczpcInNvcnRhYmxlLXN3YXAtaGlnaGxpZ2h0XCJ9fXJldHVybiB0LnByb3RvdHlwZT17ZHJhZ1N0YXJ0OmZ1bmN0aW9uKHQpe3ZhciBlPXQuZHJhZ0VsO2xhc3RTd2FwRWw9ZX0sZHJhZ092ZXJWYWxpZDpmdW5jdGlvbih0KXt2YXIgZT10LmNvbXBsZXRlZCxvPXQudGFyZ2V0LG49dC5vbk1vdmUscj10LmFjdGl2ZVNvcnRhYmxlLGw9dC5jaGFuZ2VkLGE9dC5jYW5jZWw7aWYoci5vcHRpb25zLnN3YXApe3ZhciBpPXRoaXMuc29ydGFibGUuZWwscz10aGlzLm9wdGlvbnM7aWYobyYmbyE9PWkpe3ZhciBjPWxhc3RTd2FwRWw7ITEhPT1uKG8pPyh0b2dnbGVDbGFzcyhvLHMuc3dhcENsYXNzLCEwKSxsYXN0U3dhcEVsPW8pOmxhc3RTd2FwRWw9bnVsbCxjJiZjIT09bGFzdFN3YXBFbCYmdG9nZ2xlQ2xhc3MoYyxzLnN3YXBDbGFzcywhMSl9bCgpLGUoITApLGEoKX19LGRyb3A6ZnVuY3Rpb24odCl7dmFyIGU9dC5hY3RpdmVTb3J0YWJsZSxvPXQucHV0U29ydGFibGUsbj10LmRyYWdFbCxyPW98fHRoaXMuc29ydGFibGUsbD10aGlzLm9wdGlvbnM7bGFzdFN3YXBFbCYmdG9nZ2xlQ2xhc3MobGFzdFN3YXBFbCxsLnN3YXBDbGFzcywhMSksbGFzdFN3YXBFbCYmKGwuc3dhcHx8byYmby5vcHRpb25zLnN3YXApJiZuIT09bGFzdFN3YXBFbCYmKHIuY2FwdHVyZUFuaW1hdGlvblN0YXRlKCksciE9PWUmJmUuY2FwdHVyZUFuaW1hdGlvblN0YXRlKCksc3dhcE5vZGVzKG4sbGFzdFN3YXBFbCksci5hbmltYXRlQWxsKCksciE9PWUmJmUuYW5pbWF0ZUFsbCgpKX0sbnVsbGluZzpmdW5jdGlvbigpe2xhc3RTd2FwRWw9bnVsbH19LF9leHRlbmRzKHQse3BsdWdpbk5hbWU6XCJzd2FwXCIsZXZlbnRQcm9wZXJ0aWVzOmZ1bmN0aW9uKCl7cmV0dXJue3N3YXBJdGVtOmxhc3RTd2FwRWx9fX0pfWZ1bmN0aW9uIHN3YXBOb2Rlcyh0LGUpe3ZhciBvLG4scj10LnBhcmVudE5vZGUsbD1lLnBhcmVudE5vZGU7ciYmbCYmIXIuaXNFcXVhbE5vZGUoZSkmJiFsLmlzRXF1YWxOb2RlKHQpJiYobz1pbmRleCh0KSxuPWluZGV4KGUpLHIuaXNFcXVhbE5vZGUobCkmJm88biYmbisrLHIuaW5zZXJ0QmVmb3JlKGUsci5jaGlsZHJlbltvXSksbC5pbnNlcnRCZWZvcmUodCxsLmNoaWxkcmVuW25dKSl9UmV2ZXJ0LnByb3RvdHlwZT17c3RhcnRJbmRleDpudWxsLGRyYWdTdGFydDpmdW5jdGlvbih0KXt2YXIgZT10Lm9sZERyYWdnYWJsZUluZGV4O3RoaXMuc3RhcnRJbmRleD1lfSxvblNwaWxsOmZ1bmN0aW9uKHQpe3ZhciBlPXQuZHJhZ0VsLG89dC5wdXRTb3J0YWJsZTt0aGlzLnNvcnRhYmxlLmNhcHR1cmVBbmltYXRpb25TdGF0ZSgpLG8mJm8uY2FwdHVyZUFuaW1hdGlvblN0YXRlKCk7dmFyIG49Z2V0Q2hpbGQodGhpcy5zb3J0YWJsZS5lbCx0aGlzLnN0YXJ0SW5kZXgsdGhpcy5vcHRpb25zKTtuP3RoaXMuc29ydGFibGUuZWwuaW5zZXJ0QmVmb3JlKGUsbik6dGhpcy5zb3J0YWJsZS5lbC5hcHBlbmRDaGlsZChlKSx0aGlzLnNvcnRhYmxlLmFuaW1hdGVBbGwoKSxvJiZvLmFuaW1hdGVBbGwoKX0sZHJvcDpkcm9wfSxfZXh0ZW5kcyhSZXZlcnQse3BsdWdpbk5hbWU6XCJyZXZlcnRPblNwaWxsXCJ9KSxSZW1vdmUucHJvdG90eXBlPXtvblNwaWxsOmZ1bmN0aW9uKHQpe3ZhciBlPXQuZHJhZ0VsLG89dC5wdXRTb3J0YWJsZXx8dGhpcy5zb3J0YWJsZTtvLmNhcHR1cmVBbmltYXRpb25TdGF0ZSgpLGUucGFyZW50Tm9kZSYmZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGUpLG8uYW5pbWF0ZUFsbCgpfSxkcm9wOmRyb3B9LF9leHRlbmRzKFJlbW92ZSx7cGx1Z2luTmFtZTpcInJlbW92ZU9uU3BpbGxcIn0pO3ZhciBsYXN0TXVsdGlEcmFnU2VsZWN0LG11bHRpRHJhZ1NvcnRhYmxlLGRyYWdFbCQxLGNsb25lc0Zyb21SZWN0LGNsb25lc0hpZGRlbixtdWx0aURyYWdFbGVtZW50cz1bXSxtdWx0aURyYWdDbG9uZXM9W10saW5pdGlhbEZvbGRpbmc9ITEsZm9sZGluZz0hMSxkcmFnU3RhcnRlZD0hMTtmdW5jdGlvbiBNdWx0aURyYWdQbHVnaW4oKXtmdW5jdGlvbiB0KHQpe2Zvcih2YXIgZSBpbiB0aGlzKVwiX1wiPT09ZS5jaGFyQXQoMCkmJlwiZnVuY3Rpb25cIj09dHlwZW9mIHRoaXNbZV0mJih0aGlzW2VdPXRoaXNbZV0uYmluZCh0aGlzKSk7dC5vcHRpb25zLmF2b2lkSW1wbGljaXREZXNlbGVjdHx8KHQub3B0aW9ucy5zdXBwb3J0UG9pbnRlcj9vbihkb2N1bWVudCxcInBvaW50ZXJ1cFwiLHRoaXMuX2Rlc2VsZWN0TXVsdGlEcmFnKToob24oZG9jdW1lbnQsXCJtb3VzZXVwXCIsdGhpcy5fZGVzZWxlY3RNdWx0aURyYWcpLG9uKGRvY3VtZW50LFwidG91Y2hlbmRcIix0aGlzLl9kZXNlbGVjdE11bHRpRHJhZykpKSxvbihkb2N1bWVudCxcImtleWRvd25cIix0aGlzLl9jaGVja0tleURvd24pLG9uKGRvY3VtZW50LFwia2V5dXBcIix0aGlzLl9jaGVja0tleVVwKSx0aGlzLmRlZmF1bHRzPXtzZWxlY3RlZENsYXNzOlwic29ydGFibGUtc2VsZWN0ZWRcIixtdWx0aURyYWdLZXk6bnVsbCxhdm9pZEltcGxpY2l0RGVzZWxlY3Q6ITEsc2V0RGF0YTpmdW5jdGlvbihlLG8pe3ZhciBuPVwiXCI7bXVsdGlEcmFnRWxlbWVudHMubGVuZ3RoJiZtdWx0aURyYWdTb3J0YWJsZT09PXQ/bXVsdGlEcmFnRWxlbWVudHMuZm9yRWFjaCgoZnVuY3Rpb24odCxlKXtuKz0oZT9cIiwgXCI6XCJcIikrdC50ZXh0Q29udGVudH0pKTpuPW8udGV4dENvbnRlbnQsZS5zZXREYXRhKFwiVGV4dFwiLG4pfX19cmV0dXJuIHQucHJvdG90eXBlPXttdWx0aURyYWdLZXlEb3duOiExLGlzTXVsdGlEcmFnOiExLGRlbGF5U3RhcnRHbG9iYWw6ZnVuY3Rpb24odCl7dmFyIGU9dC5kcmFnRWw7ZHJhZ0VsJDE9ZX0sZGVsYXlFbmRlZDpmdW5jdGlvbigpe3RoaXMuaXNNdWx0aURyYWc9fm11bHRpRHJhZ0VsZW1lbnRzLmluZGV4T2YoZHJhZ0VsJDEpfSxzZXR1cENsb25lOmZ1bmN0aW9uKHQpe3ZhciBlPXQuc29ydGFibGUsbz10LmNhbmNlbDtpZih0aGlzLmlzTXVsdGlEcmFnKXtmb3IodmFyIG49MDtuPG11bHRpRHJhZ0VsZW1lbnRzLmxlbmd0aDtuKyspbXVsdGlEcmFnQ2xvbmVzLnB1c2goY2xvbmUobXVsdGlEcmFnRWxlbWVudHNbbl0pKSxtdWx0aURyYWdDbG9uZXNbbl0uc29ydGFibGVJbmRleD1tdWx0aURyYWdFbGVtZW50c1tuXS5zb3J0YWJsZUluZGV4LG11bHRpRHJhZ0Nsb25lc1tuXS5kcmFnZ2FibGU9ITEsbXVsdGlEcmFnQ2xvbmVzW25dLnN0eWxlW1wid2lsbC1jaGFuZ2VcIl09XCJcIix0b2dnbGVDbGFzcyhtdWx0aURyYWdDbG9uZXNbbl0sdGhpcy5vcHRpb25zLnNlbGVjdGVkQ2xhc3MsITEpLG11bHRpRHJhZ0VsZW1lbnRzW25dPT09ZHJhZ0VsJDEmJnRvZ2dsZUNsYXNzKG11bHRpRHJhZ0Nsb25lc1tuXSx0aGlzLm9wdGlvbnMuY2hvc2VuQ2xhc3MsITEpO2UuX2hpZGVDbG9uZSgpLG8oKX19LGNsb25lOmZ1bmN0aW9uKHQpe3ZhciBlPXQuc29ydGFibGUsbz10LnJvb3RFbCxuPXQuZGlzcGF0Y2hTb3J0YWJsZUV2ZW50LHI9dC5jYW5jZWw7dGhpcy5pc011bHRpRHJhZyYmKHRoaXMub3B0aW9ucy5yZW1vdmVDbG9uZU9uSGlkZXx8bXVsdGlEcmFnRWxlbWVudHMubGVuZ3RoJiZtdWx0aURyYWdTb3J0YWJsZT09PWUmJihpbnNlcnRNdWx0aURyYWdDbG9uZXMoITAsbyksbihcImNsb25lXCIpLHIoKSkpfSxzaG93Q2xvbmU6ZnVuY3Rpb24odCl7dmFyIGU9dC5jbG9uZU5vd1Nob3duLG89dC5yb290RWwsbj10LmNhbmNlbDt0aGlzLmlzTXVsdGlEcmFnJiYoaW5zZXJ0TXVsdGlEcmFnQ2xvbmVzKCExLG8pLG11bHRpRHJhZ0Nsb25lcy5mb3JFYWNoKChmdW5jdGlvbih0KXtjc3ModCxcImRpc3BsYXlcIixcIlwiKX0pKSxlKCksY2xvbmVzSGlkZGVuPSExLG4oKSl9LGhpZGVDbG9uZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLG89KHQuc29ydGFibGUsdC5jbG9uZU5vd0hpZGRlbiksbj10LmNhbmNlbDt0aGlzLmlzTXVsdGlEcmFnJiYobXVsdGlEcmFnQ2xvbmVzLmZvckVhY2goKGZ1bmN0aW9uKHQpe2Nzcyh0LFwiZGlzcGxheVwiLFwibm9uZVwiKSxlLm9wdGlvbnMucmVtb3ZlQ2xvbmVPbkhpZGUmJnQucGFyZW50Tm9kZSYmdC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHQpfSkpLG8oKSxjbG9uZXNIaWRkZW49ITAsbigpKX0sZHJhZ1N0YXJ0R2xvYmFsOmZ1bmN0aW9uKHQpe3Quc29ydGFibGU7IXRoaXMuaXNNdWx0aURyYWcmJm11bHRpRHJhZ1NvcnRhYmxlJiZtdWx0aURyYWdTb3J0YWJsZS5tdWx0aURyYWcuX2Rlc2VsZWN0TXVsdGlEcmFnKCksbXVsdGlEcmFnRWxlbWVudHMuZm9yRWFjaCgoZnVuY3Rpb24odCl7dC5zb3J0YWJsZUluZGV4PWluZGV4KHQpfSkpLG11bHRpRHJhZ0VsZW1lbnRzPW11bHRpRHJhZ0VsZW1lbnRzLnNvcnQoKGZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQuc29ydGFibGVJbmRleC1lLnNvcnRhYmxlSW5kZXh9KSksZHJhZ1N0YXJ0ZWQ9ITB9LGRyYWdTdGFydGVkOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMsbz10LnNvcnRhYmxlO2lmKHRoaXMuaXNNdWx0aURyYWcpe2lmKHRoaXMub3B0aW9ucy5zb3J0JiYoby5jYXB0dXJlQW5pbWF0aW9uU3RhdGUoKSx0aGlzLm9wdGlvbnMuYW5pbWF0aW9uKSl7bXVsdGlEcmFnRWxlbWVudHMuZm9yRWFjaCgoZnVuY3Rpb24odCl7dCE9PWRyYWdFbCQxJiZjc3ModCxcInBvc2l0aW9uXCIsXCJhYnNvbHV0ZVwiKX0pKTt2YXIgbj1nZXRSZWN0KGRyYWdFbCQxLCExLCEwLCEwKTttdWx0aURyYWdFbGVtZW50cy5mb3JFYWNoKChmdW5jdGlvbih0KXt0IT09ZHJhZ0VsJDEmJnNldFJlY3QodCxuKX0pKSxmb2xkaW5nPSEwLGluaXRpYWxGb2xkaW5nPSEwfW8uYW5pbWF0ZUFsbCgoZnVuY3Rpb24oKXtmb2xkaW5nPSExLGluaXRpYWxGb2xkaW5nPSExLGUub3B0aW9ucy5hbmltYXRpb24mJm11bHRpRHJhZ0VsZW1lbnRzLmZvckVhY2goKGZ1bmN0aW9uKHQpe3Vuc2V0UmVjdCh0KX0pKSxlLm9wdGlvbnMuc29ydCYmcmVtb3ZlTXVsdGlEcmFnRWxlbWVudHMoKX0pKX19LGRyYWdPdmVyOmZ1bmN0aW9uKHQpe3ZhciBlPXQudGFyZ2V0LG89dC5jb21wbGV0ZWQsbj10LmNhbmNlbDtmb2xkaW5nJiZ+bXVsdGlEcmFnRWxlbWVudHMuaW5kZXhPZihlKSYmKG8oITEpLG4oKSl9LHJldmVydDpmdW5jdGlvbih0KXt2YXIgZT10LmZyb21Tb3J0YWJsZSxvPXQucm9vdEVsLG49dC5zb3J0YWJsZSxyPXQuZHJhZ1JlY3Q7bXVsdGlEcmFnRWxlbWVudHMubGVuZ3RoPjEmJihtdWx0aURyYWdFbGVtZW50cy5mb3JFYWNoKChmdW5jdGlvbih0KXtuLmFkZEFuaW1hdGlvblN0YXRlKHt0YXJnZXQ6dCxyZWN0OmZvbGRpbmc/Z2V0UmVjdCh0KTpyfSksdW5zZXRSZWN0KHQpLHQuZnJvbVJlY3Q9cixlLnJlbW92ZUFuaW1hdGlvblN0YXRlKHQpfSkpLGZvbGRpbmc9ITEsaW5zZXJ0TXVsdGlEcmFnRWxlbWVudHMoIXRoaXMub3B0aW9ucy5yZW1vdmVDbG9uZU9uSGlkZSxvKSl9LGRyYWdPdmVyQ29tcGxldGVkOmZ1bmN0aW9uKHQpe3ZhciBlPXQuc29ydGFibGUsbz10LmlzT3duZXIsbj10Lmluc2VydGlvbixyPXQuYWN0aXZlU29ydGFibGUsbD10LnBhcmVudEVsLGE9dC5wdXRTb3J0YWJsZSxpPXRoaXMub3B0aW9ucztpZihuKXtpZihvJiZyLl9oaWRlQ2xvbmUoKSxpbml0aWFsRm9sZGluZz0hMSxpLmFuaW1hdGlvbiYmbXVsdGlEcmFnRWxlbWVudHMubGVuZ3RoPjEmJihmb2xkaW5nfHwhbyYmIXIub3B0aW9ucy5zb3J0JiYhYSkpe3ZhciBzPWdldFJlY3QoZHJhZ0VsJDEsITEsITAsITApO211bHRpRHJhZ0VsZW1lbnRzLmZvckVhY2goKGZ1bmN0aW9uKHQpe3QhPT1kcmFnRWwkMSYmKHNldFJlY3QodCxzKSxsLmFwcGVuZENoaWxkKHQpKX0pKSxmb2xkaW5nPSEwfWlmKCFvKWlmKGZvbGRpbmd8fHJlbW92ZU11bHRpRHJhZ0VsZW1lbnRzKCksbXVsdGlEcmFnRWxlbWVudHMubGVuZ3RoPjEpe3ZhciBjPWNsb25lc0hpZGRlbjtyLl9zaG93Q2xvbmUoZSksci5vcHRpb25zLmFuaW1hdGlvbiYmIWNsb25lc0hpZGRlbiYmYyYmbXVsdGlEcmFnQ2xvbmVzLmZvckVhY2goKGZ1bmN0aW9uKHQpe3IuYWRkQW5pbWF0aW9uU3RhdGUoe3RhcmdldDp0LHJlY3Q6Y2xvbmVzRnJvbVJlY3R9KSx0LmZyb21SZWN0PWNsb25lc0Zyb21SZWN0LHQudGhpc0FuaW1hdGlvbkR1cmF0aW9uPW51bGx9KSl9ZWxzZSByLl9zaG93Q2xvbmUoZSl9fSxkcmFnT3ZlckFuaW1hdGlvbkNhcHR1cmU6ZnVuY3Rpb24odCl7dmFyIGU9dC5kcmFnUmVjdCxvPXQuaXNPd25lcixuPXQuYWN0aXZlU29ydGFibGU7aWYobXVsdGlEcmFnRWxlbWVudHMuZm9yRWFjaCgoZnVuY3Rpb24odCl7dC50aGlzQW5pbWF0aW9uRHVyYXRpb249bnVsbH0pKSxuLm9wdGlvbnMuYW5pbWF0aW9uJiYhbyYmbi5tdWx0aURyYWcuaXNNdWx0aURyYWcpe2Nsb25lc0Zyb21SZWN0PV9leHRlbmRzKHt9LGUpO3ZhciByPW1hdHJpeChkcmFnRWwkMSwhMCk7Y2xvbmVzRnJvbVJlY3QudG9wLT1yLmYsY2xvbmVzRnJvbVJlY3QubGVmdC09ci5lfX0sZHJhZ092ZXJBbmltYXRpb25Db21wbGV0ZTpmdW5jdGlvbigpe2ZvbGRpbmcmJihmb2xkaW5nPSExLHJlbW92ZU11bHRpRHJhZ0VsZW1lbnRzKCkpfSxkcm9wOmZ1bmN0aW9uKHQpe3ZhciBlPXQub3JpZ2luYWxFdmVudCxvPXQucm9vdEVsLG49dC5wYXJlbnRFbCxyPXQuc29ydGFibGUsbD10LmRpc3BhdGNoU29ydGFibGVFdmVudCxhPXQub2xkSW5kZXgsaT10LnB1dFNvcnRhYmxlLHM9aXx8dGhpcy5zb3J0YWJsZTtpZihlKXt2YXIgYz10aGlzLm9wdGlvbnMsZD1uLmNoaWxkcmVuO2lmKCFkcmFnU3RhcnRlZClpZihjLm11bHRpRHJhZ0tleSYmIXRoaXMubXVsdGlEcmFnS2V5RG93biYmdGhpcy5fZGVzZWxlY3RNdWx0aURyYWcoKSx0b2dnbGVDbGFzcyhkcmFnRWwkMSxjLnNlbGVjdGVkQ2xhc3MsIX5tdWx0aURyYWdFbGVtZW50cy5pbmRleE9mKGRyYWdFbCQxKSksfm11bHRpRHJhZ0VsZW1lbnRzLmluZGV4T2YoZHJhZ0VsJDEpKW11bHRpRHJhZ0VsZW1lbnRzLnNwbGljZShtdWx0aURyYWdFbGVtZW50cy5pbmRleE9mKGRyYWdFbCQxKSwxKSxsYXN0TXVsdGlEcmFnU2VsZWN0PW51bGwsZGlzcGF0Y2hFdmVudCh7c29ydGFibGU6cixyb290RWw6byxuYW1lOlwiZGVzZWxlY3RcIix0YXJnZXRFbDpkcmFnRWwkMSxvcmlnaW5hbEV2ZW50OmV9KTtlbHNle2lmKG11bHRpRHJhZ0VsZW1lbnRzLnB1c2goZHJhZ0VsJDEpLGRpc3BhdGNoRXZlbnQoe3NvcnRhYmxlOnIscm9vdEVsOm8sbmFtZTpcInNlbGVjdFwiLHRhcmdldEVsOmRyYWdFbCQxLG9yaWdpbmFsRXZlbnQ6ZX0pLGUuc2hpZnRLZXkmJmxhc3RNdWx0aURyYWdTZWxlY3QmJnIuZWwuY29udGFpbnMobGFzdE11bHRpRHJhZ1NlbGVjdCkpe3ZhciB1LGcsaD1pbmRleChsYXN0TXVsdGlEcmFnU2VsZWN0KSxwPWluZGV4KGRyYWdFbCQxKTtpZih+aCYmfnAmJmghPT1wKWZvcihwPmg/KGc9aCx1PXApOihnPXAsdT1oKzEpO2c8dTtnKyspfm11bHRpRHJhZ0VsZW1lbnRzLmluZGV4T2YoZFtnXSl8fCh0b2dnbGVDbGFzcyhkW2ddLGMuc2VsZWN0ZWRDbGFzcywhMCksbXVsdGlEcmFnRWxlbWVudHMucHVzaChkW2ddKSxkaXNwYXRjaEV2ZW50KHtzb3J0YWJsZTpyLHJvb3RFbDpvLG5hbWU6XCJzZWxlY3RcIix0YXJnZXRFbDpkW2ddLG9yaWdpbmFsRXZlbnQ6ZX0pKX1lbHNlIGxhc3RNdWx0aURyYWdTZWxlY3Q9ZHJhZ0VsJDE7bXVsdGlEcmFnU29ydGFibGU9c31pZihkcmFnU3RhcnRlZCYmdGhpcy5pc011bHRpRHJhZyl7aWYoZm9sZGluZz0hMSwobltleHBhbmRvXS5vcHRpb25zLnNvcnR8fG4hPT1vKSYmbXVsdGlEcmFnRWxlbWVudHMubGVuZ3RoPjEpe3ZhciBmPWdldFJlY3QoZHJhZ0VsJDEpLG09aW5kZXgoZHJhZ0VsJDEsXCI6bm90KC5cIit0aGlzLm9wdGlvbnMuc2VsZWN0ZWRDbGFzcytcIilcIik7aWYoIWluaXRpYWxGb2xkaW5nJiZjLmFuaW1hdGlvbiYmKGRyYWdFbCQxLnRoaXNBbmltYXRpb25EdXJhdGlvbj1udWxsKSxzLmNhcHR1cmVBbmltYXRpb25TdGF0ZSgpLCFpbml0aWFsRm9sZGluZyYmKGMuYW5pbWF0aW9uJiYoZHJhZ0VsJDEuZnJvbVJlY3Q9ZixtdWx0aURyYWdFbGVtZW50cy5mb3JFYWNoKChmdW5jdGlvbih0KXtpZih0LnRoaXNBbmltYXRpb25EdXJhdGlvbj1udWxsLHQhPT1kcmFnRWwkMSl7dmFyIGU9Zm9sZGluZz9nZXRSZWN0KHQpOmY7dC5mcm9tUmVjdD1lLHMuYWRkQW5pbWF0aW9uU3RhdGUoe3RhcmdldDp0LHJlY3Q6ZX0pfX0pKSkscmVtb3ZlTXVsdGlEcmFnRWxlbWVudHMoKSxtdWx0aURyYWdFbGVtZW50cy5mb3JFYWNoKChmdW5jdGlvbih0KXtkW21dP24uaW5zZXJ0QmVmb3JlKHQsZFttXSk6bi5hcHBlbmRDaGlsZCh0KSxtKyt9KSksYT09PWluZGV4KGRyYWdFbCQxKSkpe3ZhciB2PSExO211bHRpRHJhZ0VsZW1lbnRzLmZvckVhY2goKGZ1bmN0aW9uKHQpe3Quc29ydGFibGVJbmRleD09PWluZGV4KHQpfHwodj0hMCl9KSksdiYmbChcInVwZGF0ZVwiKX1tdWx0aURyYWdFbGVtZW50cy5mb3JFYWNoKChmdW5jdGlvbih0KXt1bnNldFJlY3QodCl9KSkscy5hbmltYXRlQWxsKCl9bXVsdGlEcmFnU29ydGFibGU9c30obz09PW58fGkmJlwiY2xvbmVcIiE9PWkubGFzdFB1dE1vZGUpJiZtdWx0aURyYWdDbG9uZXMuZm9yRWFjaCgoZnVuY3Rpb24odCl7dC5wYXJlbnROb2RlJiZ0LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodCl9KSl9fSxudWxsaW5nR2xvYmFsOmZ1bmN0aW9uKCl7dGhpcy5pc011bHRpRHJhZz1kcmFnU3RhcnRlZD0hMSxtdWx0aURyYWdDbG9uZXMubGVuZ3RoPTB9LGRlc3Ryb3lHbG9iYWw6ZnVuY3Rpb24oKXt0aGlzLl9kZXNlbGVjdE11bHRpRHJhZygpLG9mZihkb2N1bWVudCxcInBvaW50ZXJ1cFwiLHRoaXMuX2Rlc2VsZWN0TXVsdGlEcmFnKSxvZmYoZG9jdW1lbnQsXCJtb3VzZXVwXCIsdGhpcy5fZGVzZWxlY3RNdWx0aURyYWcpLG9mZihkb2N1bWVudCxcInRvdWNoZW5kXCIsdGhpcy5fZGVzZWxlY3RNdWx0aURyYWcpLG9mZihkb2N1bWVudCxcImtleWRvd25cIix0aGlzLl9jaGVja0tleURvd24pLG9mZihkb2N1bWVudCxcImtleXVwXCIsdGhpcy5fY2hlY2tLZXlVcCl9LF9kZXNlbGVjdE11bHRpRHJhZzpmdW5jdGlvbih0KXtpZighKHZvaWQgMCE9PWRyYWdTdGFydGVkJiZkcmFnU3RhcnRlZHx8bXVsdGlEcmFnU29ydGFibGUhPT10aGlzLnNvcnRhYmxlfHx0JiZjbG9zZXN0KHQudGFyZ2V0LHRoaXMub3B0aW9ucy5kcmFnZ2FibGUsdGhpcy5zb3J0YWJsZS5lbCwhMSl8fHQmJjAhPT10LmJ1dHRvbikpZm9yKDttdWx0aURyYWdFbGVtZW50cy5sZW5ndGg7KXt2YXIgZT1tdWx0aURyYWdFbGVtZW50c1swXTt0b2dnbGVDbGFzcyhlLHRoaXMub3B0aW9ucy5zZWxlY3RlZENsYXNzLCExKSxtdWx0aURyYWdFbGVtZW50cy5zaGlmdCgpLGRpc3BhdGNoRXZlbnQoe3NvcnRhYmxlOnRoaXMuc29ydGFibGUscm9vdEVsOnRoaXMuc29ydGFibGUuZWwsbmFtZTpcImRlc2VsZWN0XCIsdGFyZ2V0RWw6ZSxvcmlnaW5hbEV2ZW50OnR9KX19LF9jaGVja0tleURvd246ZnVuY3Rpb24odCl7dC5rZXk9PT10aGlzLm9wdGlvbnMubXVsdGlEcmFnS2V5JiYodGhpcy5tdWx0aURyYWdLZXlEb3duPSEwKX0sX2NoZWNrS2V5VXA6ZnVuY3Rpb24odCl7dC5rZXk9PT10aGlzLm9wdGlvbnMubXVsdGlEcmFnS2V5JiYodGhpcy5tdWx0aURyYWdLZXlEb3duPSExKX19LF9leHRlbmRzKHQse3BsdWdpbk5hbWU6XCJtdWx0aURyYWdcIix1dGlsczp7c2VsZWN0OmZ1bmN0aW9uKHQpe3ZhciBlPXQucGFyZW50Tm9kZVtleHBhbmRvXTtlJiZlLm9wdGlvbnMubXVsdGlEcmFnJiYhfm11bHRpRHJhZ0VsZW1lbnRzLmluZGV4T2YodCkmJihtdWx0aURyYWdTb3J0YWJsZSYmbXVsdGlEcmFnU29ydGFibGUhPT1lJiYobXVsdGlEcmFnU29ydGFibGUubXVsdGlEcmFnLl9kZXNlbGVjdE11bHRpRHJhZygpLG11bHRpRHJhZ1NvcnRhYmxlPWUpLHRvZ2dsZUNsYXNzKHQsZS5vcHRpb25zLnNlbGVjdGVkQ2xhc3MsITApLG11bHRpRHJhZ0VsZW1lbnRzLnB1c2godCkpfSxkZXNlbGVjdDpmdW5jdGlvbih0KXt2YXIgZT10LnBhcmVudE5vZGVbZXhwYW5kb10sbz1tdWx0aURyYWdFbGVtZW50cy5pbmRleE9mKHQpO2UmJmUub3B0aW9ucy5tdWx0aURyYWcmJn5vJiYodG9nZ2xlQ2xhc3ModCxlLm9wdGlvbnMuc2VsZWN0ZWRDbGFzcywhMSksbXVsdGlEcmFnRWxlbWVudHMuc3BsaWNlKG8sMSkpfX0sZXZlbnRQcm9wZXJ0aWVzOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxlPVtdLG89W107cmV0dXJuIG11bHRpRHJhZ0VsZW1lbnRzLmZvckVhY2goKGZ1bmN0aW9uKG4pe3ZhciByO2UucHVzaCh7bXVsdGlEcmFnRWxlbWVudDpuLGluZGV4Om4uc29ydGFibGVJbmRleH0pLHI9Zm9sZGluZyYmbiE9PWRyYWdFbCQxPy0xOmZvbGRpbmc/aW5kZXgobixcIjpub3QoLlwiK3Qub3B0aW9ucy5zZWxlY3RlZENsYXNzK1wiKVwiKTppbmRleChuKSxvLnB1c2goe211bHRpRHJhZ0VsZW1lbnQ6bixpbmRleDpyfSl9KSkse2l0ZW1zOl90b0NvbnN1bWFibGVBcnJheShtdWx0aURyYWdFbGVtZW50cyksY2xvbmVzOltdLmNvbmNhdChtdWx0aURyYWdDbG9uZXMpLG9sZEluZGljaWVzOmUsbmV3SW5kaWNpZXM6b319LG9wdGlvbkxpc3RlbmVyczp7bXVsdGlEcmFnS2V5OmZ1bmN0aW9uKHQpe3JldHVyblwiY3RybFwiPT09KHQ9dC50b0xvd2VyQ2FzZSgpKT90PVwiQ29udHJvbFwiOnQubGVuZ3RoPjEmJih0PXQuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrdC5zdWJzdHIoMSkpLHR9fX0pfWZ1bmN0aW9uIGluc2VydE11bHRpRHJhZ0VsZW1lbnRzKHQsZSl7bXVsdGlEcmFnRWxlbWVudHMuZm9yRWFjaCgoZnVuY3Rpb24obyxuKXt2YXIgcj1lLmNoaWxkcmVuW28uc29ydGFibGVJbmRleCsodD9OdW1iZXIobik6MCldO3I/ZS5pbnNlcnRCZWZvcmUobyxyKTplLmFwcGVuZENoaWxkKG8pfSkpfWZ1bmN0aW9uIGluc2VydE11bHRpRHJhZ0Nsb25lcyh0LGUpe211bHRpRHJhZ0Nsb25lcy5mb3JFYWNoKChmdW5jdGlvbihvLG4pe3ZhciByPWUuY2hpbGRyZW5bby5zb3J0YWJsZUluZGV4Kyh0P051bWJlcihuKTowKV07cj9lLmluc2VydEJlZm9yZShvLHIpOmUuYXBwZW5kQ2hpbGQobyl9KSl9ZnVuY3Rpb24gcmVtb3ZlTXVsdGlEcmFnRWxlbWVudHMoKXttdWx0aURyYWdFbGVtZW50cy5mb3JFYWNoKChmdW5jdGlvbih0KXt0IT09ZHJhZ0VsJDEmJnQucGFyZW50Tm9kZSYmdC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHQpfSkpfVNvcnRhYmxlLm1vdW50KG5ldyBBdXRvU2Nyb2xsUGx1Z2luKSxTb3J0YWJsZS5tb3VudChSZW1vdmUsUmV2ZXJ0KSxTb3J0YWJsZS5tb3VudChuZXcgU3dhcFBsdWdpbiksU29ydGFibGUubW91bnQobmV3IE11bHRpRHJhZ1BsdWdpbik7ZXhwb3J0IGRlZmF1bHQgU29ydGFibGU7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zb3J0YWJsZWpzLmJ1bmRsZS5qcy5tYXBcbiIsImltcG9ydCBTb3J0YWJsZSBmcm9tICcuLi9hZG1pbi10aGVtZS9wbHVnaW5zL2N1c3RvbS9zb3J0YWJsZWpzL3NvcnRhYmxlanMuYnVuZGxlLmpzJztcblxuXG5sZXQgY29udGFpbmVycyA9IG51bGw7XG5sZXQgZHJvcHpvbmVzID0gbnVsbDtcbmxldCBjb250ZW50VHlwZUxpc3QgPSBudWxsO1xubGV0IENNU1JvdXRpbmcgPSBhd2FpdCBDTVNBZG1pbi5nZXRSb3V0aW5nKCk7XG5sZXQgYWRkQmxvY2tVcmwgPSBDTVNSb3V0aW5nLmdlbmVyYXRlKCdhZG1pbl9uZXR3b3JraW5nX2luaXRjbXNfbGF5b3V0YmxvY2tfYWRkQmxvY2snKTtcbmxldCBzb3J0VXJsID0gQ01TUm91dGluZy5nZW5lcmF0ZSgnYWRtaW5fbmV0d29ya2luZ19pbml0Y21zX2xheW91dGJsb2NrX3VwZGF0ZUxheW91dEJsb2NrU29ydCcpO1xubGV0IGRlbGV0ZVVybCA9IENNU1JvdXRpbmcuZ2VuZXJhdGUoJ2FkbWluX25ldHdvcmtpbmdfaW5pdGNtc19sYXlvdXRibG9ja19kZWxldGVBamF4Jyk7XG5sZXQgbGFzdFRyYW5zbGF0aW9uU2V0dGluZ3NIdG1sID0gbnVsbDtcbmxldCBwYWdlSWQgPSBudWxsO1xubGV0IGVycm9yZWRDb250YWluZXJzID0gbmV3IFNldCgpO1xuXG5mdW5jdGlvbiBpbml0RHJvcFpvbmUoKSB7XG5cbiAgICBjb250YWluZXJzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5kcmFnZ2FibGUtem9uZVwiKTtcbiAgICBkcm9wem9uZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmRyb3B6b25lXCIpO1xuICAgIGNvbnRlbnRUeXBlTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY29udGVudF9pdGVtX2xpc3RcIik7XG4gICAgcGFnZUlkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIm1ldGFbbmFtZT0naW5pdC1jbXMtcGFnZS1pZCddXCIpLmdldEF0dHJpYnV0ZShcImNvbnRlbnRcIik7XG5cbiAgICBpZiAoY29udGFpbmVycy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGxldCBjb250ZW50SXRlbXMgPSBuZXcgU29ydGFibGUoY29udGVudFR5cGVMaXN0LCB7XG4gICAgICAgIGdyb3VwOiB7XG4gICAgICAgICAgICBuYW1lOiAnc2hhcmVkJyxcbiAgICAgICAgICAgIHB1bGw6ICdjbG9uZScsXG4gICAgICAgICAgICBwdXQ6IGZhbHNlLFxuICAgICAgICAgICAgcmV2ZXJ0Q2xvbmU6IHRydWUsXG5cbiAgICAgICAgfSxzb3J0OiBmYWxzZSxcbiAgICAgICAgb25FbmQ6IGZ1bmN0aW9uICgvKipFdmVudCovZXZ0KSB7XG4gICAgICAgICAgICBoaWRlQ29udGFpbmVyRXJyb3JzKClcbiAgICAgICAgfSxcbiAgICB9KVxuXG4gICAgY29udGFpbmVycy5mb3JFYWNoKGZ1bmN0aW9uIChjb250YWluZXIpIHtcblxuICAgICAgICBsZXQgc3dhcHBhYmxlID0gbmV3IFNvcnRhYmxlKGNvbnRhaW5lciwge1xuICAgICAgICAgICAgZ3JvdXA6IHtuYW1lOiAnc2hhcmVkJywgcHVsbDogdHJ1ZSwgcHV0OiBhY2NlcHRMYXlvdXRCbG9ja30sXG4gICAgICAgICAgICBhbmltYXRpb246IDE1MCxcbiAgICAgICAgICAgIG9uRW5kOiBmdW5jdGlvbiAoLyoqRXZlbnQqL2V2dCkge1xuXG4gICAgICAgICAgICAgICAgaGlkZUNvbnRhaW5lckVycm9ycygpXG5cbiAgICAgICAgICAgICAgICBpZihldnQubmV3SW5kZXggPT09IGV2dC5vbGRJbmRleCl7XG4gICAgICAgICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHNhdmVMYXlvdXRCbG9ja1NvcnQoZXZ0LCAocmVzcG9uc2UpID0+IHtcbiAgICAgICAgICAgICAgICAgICAvLyBDTVNBZG1pbi5jcmVhdGVJbml0Q21zTWVzc2FnZUJveChyZXNwb25zZS5kYXRhLm1lc3NhZ2VTdGF0dXMsIHJlc3BvbnNlLmRhdGEubWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvbkFkZDogZnVuY3Rpb24gKC8qKkN1c3RvbUV2ZW50Ki9ldnQsIGRyYWdFbCkge1xuXG4gICAgICAgICAgICAgICAgbGV0IGNvdW50ID0gZXZ0LnRvLnF1ZXJ5U2VsZWN0b3JBbGwoJy5kcmFnZ2FibGUnKS5sZW5ndGg7XG4gICAgICAgICAgICAgICAgbGV0IGl0ZW0gPSBldnQuaXRlbTtcblxuICAgICAgICAgICAgICAgIGlmICghaXRlbS5pZCkge1xuXG4gICAgICAgICAgICAgICAgICAgIGxldCBkcm9wem9uZSA9IGNvbnRhaW5lci5wYXJlbnRFbGVtZW50XG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZUl0ZW0oaXRlbS5kYXRhc2V0LmNvbnRlbnRUeXBlLCBkcm9wem9uZS5kYXRhc2V0LnBhZ2VJZCwgZHJvcHpvbmUuZGF0YXNldC56b25lLCBldnQubmV3SW5kZXgpXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtLm91dGVySFRNTCA9IHJlc3BvbnNlLmRhdGEuaHRtbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIENNU0FkbWluLmNyZWF0ZUluaXRDbXNNZXNzYWdlQm94KHJlc3BvbnNlLmRhdGEubWVzc2FnZVN0YXR1cywgcmVzcG9uc2UuZGF0YS5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYXZlTGF5b3V0QmxvY2tTb3J0KGV2dCwgKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENNU0FkbWluLmNyZWF0ZUluaXRDbXNNZXNzYWdlQm94KHJlc3BvbnNlLmRhdGEubWVzc2FnZVN0YXR1cywgcmVzcG9uc2UuZGF0YS5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBtZXNzYWdlID0gZXJyb3IucmVzcG9uc2UuZGF0YS5kZXRhaWxcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIENNU0FkbWluLmNyZWF0ZUluaXRDbXNNZXNzYWdlQm94KCdlcnJvcicsIG1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoY291bnQpIHtcbiAgICAgICAgICAgICAgICAgICAgZXZ0LnRvLnF1ZXJ5U2VsZWN0b3IoJy5lbXB0eV9sYXlvdXRfYmxvY2snKS5jbGFzc0xpc3QuYWRkKFwiZC1ub25lXCIpXG4gICAgICAgICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGV2dC50by5xdWVyeVNlbGVjdG9yKCcuZW1wdHlfbGF5b3V0X2Jsb2NrJykuY2xhc3NMaXN0LnJlbW92ZShcImQtbm9uZVwiKVxuXG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvblJlbW92ZTogZnVuY3Rpb24gKC8qKkV2ZW50Ki9ldnQpIHtcbiAgICAgICAgICAgICAgICBsZXQgY291bnQgPSBldnQuZnJvbS5xdWVyeVNlbGVjdG9yQWxsKCcuZHJhZ2dhYmxlJykubGVuZ3RoO1xuICAgICAgICAgICAgICAgIGlmIChjb3VudCkge1xuICAgICAgICAgICAgICAgICAgICBldnQuZnJvbS5xdWVyeVNlbGVjdG9yKCcuZW1wdHlfbGF5b3V0X2Jsb2NrJykuY2xhc3NMaXN0LmFkZChcImQtbm9uZVwiKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBldnQuZnJvbS5xdWVyeVNlbGVjdG9yKCcuZW1wdHlfbGF5b3V0X2Jsb2NrJykuY2xhc3NMaXN0LnJlbW92ZShcImQtbm9uZVwiKVxuXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pXG59XG5cblxuXG5sZXQgc2hvd0NvbnRhaW5lckVycm9yID0gKGNvbnRhaW5lcikgPT4ge1xuICAgIGxldCBkcm9wem9uZSA9IGNvbnRhaW5lci5jbG9zZXN0KCcuZHJvcHpvbmUnKVxuICAgIGRyb3B6b25lLmNsYXNzTGlzdC5hZGQoJ2JnLWxpZ2h0LWRhbmdlcicpXG4gICAgZHJvcHpvbmUuY2xvc2VzdCgnLmRyb3B6b25lJykuY2xhc3NMaXN0LmFkZCgnYm9yZGVyLWRhbmdlcicpXG4gICAgZXJyb3JlZENvbnRhaW5lcnMuYWRkKGRyb3B6b25lKVxufVxuXG5sZXQgaGlkZUNvbnRhaW5lckVycm9ycyA9ICgpID0+IHtcbiAgICBlcnJvcmVkQ29udGFpbmVycy5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICAgIGl0ZW0uY2xhc3NMaXN0LnJlbW92ZSgnYmctbGlnaHQtZGFuZ2VyJylcbiAgICAgICAgaXRlbS5jbGFzc0xpc3QucmVtb3ZlKCdib3JkZXItZGFuZ2VyJylcbiAgICB9KVxufVxuXG5sZXQgYWNjZXB0TGF5b3V0QmxvY2sgPSAodG8sIGZyb20sIGRyYWdFbCkgPT4ge1xuICAgIGxldCBjb250YWluZXIgPSB0by5lbFxuICAgIGxldCBjb250ZW50QmxvY2sgPSBkcmFnRWxcbiAgICBsZXQgY29udGVudFR5cGVzID0gSlNPTi5wYXJzZShjb250YWluZXIuZGF0YXNldC5jb250ZW50VHlwZXMpO1xuICAgIGlmIChjb250ZW50VHlwZXMubGVuZ3RoID4gMCkge1xuICAgICAgICBpZiAoIWNvbnRlbnRUeXBlcy5pbmNsdWRlcyhjb250ZW50QmxvY2suZGF0YXNldC5jb250ZW50VHlwZSkpIHtcbiAgICAgICAgICAgIHNob3dDb250YWluZXJFcnJvcihjb250YWluZXIpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2VcblxuICAgICAgICB9XG4gICAgfVxuXG4gICAgbGV0IG1heEl0ZW1zID0gY29udGFpbmVyLmRhdGFzZXQubWF4SXRlbXM7XG5cbiAgICBsZXQgY291bnQgPSBjb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLmRyYWdnYWJsZScpLmxlbmd0aDtcblxuICAgIGlmIChtYXhJdGVtcyA+IDApIHtcbiAgICAgICAgaWYgKGNvdW50ID49IG1heEl0ZW1zKSB7XG4gICAgICAgICAgICBzaG93Q29udGFpbmVyRXJyb3IoY29udGFpbmVyKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgIH1cbiAgICB9XG4gICAgaGlkZUNvbnRhaW5lckVycm9ycygpXG4gICAgcmV0dXJuIHRydWVcbn1cblxubGV0IHNhdmVMYXlvdXRCbG9ja1NvcnQgPSAoZXZlbnQsIGNhbGxiYWNrKSA9PiB7XG4gICAgLy8gQ01TQWRtaW4uY3JlYXRlSW5pdENtc01lc3NhZ2VCb3goeGhyLm1lc3NhZ2VTdGF0dXMsIHhoci5tZXNzYWdlKTtcblxuICAgIGxldCB6b25lcyA9IFtdO1xuICAgIGxldCBwYWdlSWQgPSBudWxsO1xuICAgIGxldCBhZG1pbkNvZGUgPSBudWxsO1xuXG4gICAgZHJvcHpvbmVzLmZvckVhY2goZnVuY3Rpb24gKGRyb3B6b25lKSB7XG4gICAgICAgIGxldCBsYXlvdXRCbG9ja3MgPSBkcm9wem9uZS5xdWVyeVNlbGVjdG9yQWxsKFwiLmRyYWdnYWJsZVwiKTtcbiAgICAgICAgbGV0IGFkZEJ1dHRvbnMgPSBkcm9wem9uZS5xdWVyeVNlbGVjdG9yQWxsKFwiLmFkZC1sYXlvdXRcIik7XG4gICAgICAgIGxldCB6b25lID0gZHJvcHpvbmUuZGF0YXNldC56b25lXG5cbiAgICAgICAgaWYgKCFwYWdlSWQpIHtcbiAgICAgICAgICAgIHBhZ2VJZCA9IGRyb3B6b25lLmRhdGFzZXQucGFnZUlkXG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWFkbWluQ29kZSkge1xuICAgICAgICAgICAgYWRtaW5Db2RlID0gZHJvcHpvbmUuZGF0YXNldC5hZG1pbkNvZGVcbiAgICAgICAgfVxuXG5cbiAgICAgICAgbGV0IGxheW91dEJsb2NrSWRzID0gW107XG5cbiAgICAgICAgbGF5b3V0QmxvY2tzLmZvckVhY2goZnVuY3Rpb24gKGxheW91dEJsb2NrLCBpbmRleCkge1xuICAgICAgICAgICAgbGF5b3V0QmxvY2suZGF0YXNldC5zb3J0T3JkZXIgPSBpbmRleDtcbiAgICAgICAgICAgIGxheW91dEJsb2NrSWRzLnB1c2gobGF5b3V0QmxvY2suaWQpO1xuICAgICAgICB9KVxuICAgICAgICB6b25lcy5wdXNoKHtcbiAgICAgICAgICAgIHpvbmU6IHpvbmUsXG4gICAgICAgICAgICBsYXlvdXRCbG9ja3M6IGxheW91dEJsb2NrSWRzXG4gICAgICAgIH0pXG4gICAgfSlcblxuICAgIHN1Ym1pdExheW91dFNvcnQoem9uZXMsIHBhZ2VJZCwgYWRtaW5Db2RlKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuXG4gICAgICAgIGxldCBldmVudCA9IG5ldyBDdXN0b21FdmVudCgncGFnZS11cGRhdGVkJylcbiAgICAgICAgZG9jdW1lbnQuYm9keS5kaXNwYXRjaEV2ZW50KGV2ZW50KVxuICAgICAgICBpZiAoY2FsbGJhY2sgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY2FsbGJhY2socmVzcG9uc2UpXG4gICAgICAgIH1cbiAgICB9KVxuXG59O1xuXG5sZXQgY3JlYXRlSXRlbSA9IGFzeW5jIChjb250ZW50VHlwZSwgcGFnZUlkLCB6b25lLCBzb3J0T3JkZXIpID0+IHtcblxuICAgIHJldHVybiBhd2FpdCBheGlvcy5nZXQoYWRkQmxvY2tVcmwsIHtcbiAgICAgICAgcGFyYW1zOiB7XG4gICAgICAgICAgICBzdWJjbGFzczogY29udGVudFR5cGUsXG4gICAgICAgICAgICB6b25lOiB6b25lLFxuICAgICAgICAgICAgcGFnZUlkOiBwYWdlSWQsXG4gICAgICAgICAgICBzb3J0T3JkZXI6IHNvcnRPcmRlclxuICAgICAgICB9XG4gICAgfSwgYXhpb3NDb25maWcpXG59XG5cbmxldCBzdWJtaXRMYXlvdXRTb3J0ID0gYXN5bmMgKHpvbmVzLCBwYWdlSWQsIGFkbWluQ29kZSkgPT4ge1xuICAgIHJldHVybiBhd2FpdCBheGlvcy5wb3N0KHNvcnRVcmwsIHtcbiAgICAgICAgem9uZXM6IHpvbmVzLFxuICAgICAgICBwYWdlSWQ6IHBhZ2VJZCxcbiAgICAgICAgY29kZTogYWRtaW5Db2RlLFxuICAgIH0sIGF4aW9zQ29uZmlnKVxufVxubGV0IGVkaXRCbG9jayA9IChlKSA9PiB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGxldCBlbCA9IGUudGFyZ2V0O1xuXG4gICAgaWYgKGVsLmNsYXNzTGlzdC5jb250YWlucygnZmEtcGVuLXRvLXNxdWFyZScpKSB7XG4gICAgICAgIGVsID0gZWwucGFyZW50RWxlbWVudFxuICAgIH1cblxuICAgIGxldCBpZCA9IGVsLmRhdGFzZXQudmFsdWVcblxuXG4gICAgbGV0IGxheW91dEJsb2NrID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xheW91dEJsb2NrXycgKyBpZClcbiAgICBsYXlvdXRCbG9jay5xdWVyeVNlbGVjdG9yKCcuZWRpdF9ibG9jaycpLnNldEF0dHJpYnV0ZSgnZGlzYWJsZWQnLCB0cnVlKVxuICAgIGxheW91dEJsb2NrLnF1ZXJ5U2VsZWN0b3IoJy5kZWxldGVfYmxvY2snKS5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgdHJ1ZSlcblxuICAgIGxldCBlZGl0VXJsID0gQ01TUm91dGluZy5nZW5lcmF0ZSgnYWRtaW5fbmV0d29ya2luZ19pbml0Y21zX2xheW91dGJsb2NrX2VkaXQnLCB7aWQ6IGlkfSlcbiAgICBsZXQgZGlzcGxheUJsb2NrID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xheW91dEJsb2NrSHRtbCcgKyBpZClcbiAgICBsZXQgZWRpdEJsb2NrID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VkaXRCbG9ja0h0bWwnICsgaWQpXG5cbiAgICBheGlvcy5nZXQoZWRpdFVybCwgYXhpb3NDb25maWcpLnRoZW4oKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgIGVkaXRCbG9jay5pbm5lckhUTUwgPSByZXNwb25zZS5kYXRhLmh0bWxcbiAgICAgICAgZGlzcGxheUJsb2NrLmNsYXNzTGlzdC5hZGQoJ2Qtbm9uZScpXG4gICAgICAgIGVkaXRCbG9jay5jbGFzc0xpc3QucmVtb3ZlKCdkLW5vbmUnKVxuICAgICAgICBkb2N1bWVudC5ib2R5LmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KCdmaWVsZHM6YWRkZWQnKSlcbiAgICB9KS5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgbGV0IG1lc3NhZ2UgPSBlcnJvci5yZXNwb25zZS5kYXRhLmRldGFpbFxuICAgICAgICBDTVNBZG1pbi5jcmVhdGVJbml0Q21zTWVzc2FnZUJveCgnZXJyb3InLCBtZXNzYWdlKTtcbiAgICB9KVxufVxuXG5sZXQgY3JlYXRlQmxvY2sgPSAoZSkgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBsZXQgZWwgPSBlLnRhcmdldDtcblxuICAgIGlmIChlbC5jbGFzc0xpc3QuY29udGFpbnMoJ2ZhLXBlbi10by1zcXVhcmUnKSkge1xuICAgICAgICBlbCA9IGVsLnBhcmVudEVsZW1lbnRcbiAgICB9XG5cbiAgICBsZXQgaWQgPSBlbC5kYXRhc2V0LnZhbHVlXG5cblxuICAgIGxldCBsYXlvdXRCbG9jayA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsYXlvdXRCbG9ja18nICsgaWQpXG4gICAgbGF5b3V0QmxvY2sucXVlcnlTZWxlY3RvcignLmNyZWF0ZV9ibG9jaycpLnNldEF0dHJpYnV0ZSgnZGlzYWJsZWQnLCB0cnVlKVxuXG4gICAgbGV0IGNyZWF0ZVVybCA9IENNU1JvdXRpbmcuZ2VuZXJhdGUoJ2FkbWluX25ldHdvcmtpbmdfaW5pdGNtc19sYXlvdXRibG9ja19jcmVhdGUnLHtcbiAgICAgICAgc3ViY2xhc3M6IGxheW91dEJsb2NrLmRhdGFzZXQuY29udGVudFR5cGUsXG4gICAgICAgIHpvbmU6IGxheW91dEJsb2NrLmRhdGFzZXQuem9uZSxcbiAgICAgICAgcGFnZUlkOiBsYXlvdXRCbG9jay5kYXRhc2V0LnBhZ2VJZCxcbiAgICAgICAgc29ydE9yZGVyOiBsYXlvdXRCbG9jay5kYXRhc2V0LnNvcnRPcmRlclxuICAgIH0pXG5cbiAgICBsZXQgZGlzcGxheUJsb2NrID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xheW91dEJsb2NrSHRtbCcgKyBpZClcbiAgICBsZXQgZWRpdEJsb2NrID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VkaXRCbG9ja0h0bWwnICsgaWQpXG5cbiAgICBheGlvcy5nZXQoY3JlYXRlVXJsLCBheGlvc0NvbmZpZykudGhlbigocmVzcG9uc2UpID0+IHtcbiAgICAgICAgZWRpdEJsb2NrLmlubmVySFRNTCA9IHJlc3BvbnNlLmRhdGEuaHRtbFxuICAgICAgICBkaXNwbGF5QmxvY2suY2xhc3NMaXN0LmFkZCgnZC1ub25lJylcbiAgICAgICAgZWRpdEJsb2NrLmNsYXNzTGlzdC5yZW1vdmUoJ2Qtbm9uZScpXG4gICAgICAgIGRvY3VtZW50LmJvZHkuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoJ2ZpZWxkczphZGRlZCcpKVxuICAgIH0pLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICBpZighZXJyb3IucmVzcG9uc2Upe1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcilcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG5cbiAgICAgICAgbGV0IG1lc3NhZ2UgPSBlcnJvci5yZXNwb25zZS5kYXRhLmRldGFpbFxuICAgICAgICBDTVNBZG1pbi5jcmVhdGVJbml0Q21zTWVzc2FnZUJveCgnZXJyb3InLCBtZXNzYWdlKTtcbiAgICB9KVxufVxuXG5sZXQgY2FuY2VsRWRpdEJsb2NrID0gKGUpID0+IHtcbiAgICBsZXQgaWQgPSBlLnRhcmdldC5kYXRhc2V0LnZhbHVlXG4gICAgbGV0IGRpc3BsYXlCbG9jayA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsYXlvdXRCbG9ja0h0bWwnICsgaWQpXG4gICAgbGV0IGVkaXRCbG9jayA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlZGl0QmxvY2tIdG1sJyArIGlkKVxuICAgIGxldCBsYXlvdXRCbG9jayA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsYXlvdXRCbG9ja18nICsgaWQpXG4gICAgbGF5b3V0QmxvY2sucXVlcnlTZWxlY3RvcignLmVkaXRfYmxvY2snKS5yZW1vdmVBdHRyaWJ1dGUoJ2Rpc2FibGVkJylcbiAgICBsYXlvdXRCbG9jay5xdWVyeVNlbGVjdG9yKCcuZGVsZXRlX2Jsb2NrJykucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcpXG4gICAgZWRpdEJsb2NrLmNsYXNzTGlzdC5hZGQoJ2Qtbm9uZScpXG4gICAgZWRpdEJsb2NrLmlubmVySFRNTCA9ICcnXG4gICAgZGlzcGxheUJsb2NrLmNsYXNzTGlzdC5yZW1vdmUoJ2Qtbm9uZScpXG5cbn1cblxubGV0IGNhbmNlbENyZWF0ZUJsb2NrID0gKGUpID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgbGV0IGZvcm0gPSBlLnRhcmdldC5jbG9zZXN0KCdmb3JtJylcbiAgICBsZXQgZGl2ID0gZm9ybS5jbG9zZXN0KCdbZGF0YS16b25lXScpXG4gICAgbGV0IGlkID0gZGl2LmdldEF0dHJpYnV0ZSgnaWQnKS5yZXBsYWNlKCdsYXlvdXRCbG9ja18nLCAnJylcbiAgICBsZXQgZGlzcGxheUJsb2NrID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xheW91dEJsb2NrSHRtbCcgKyBpZClcbiAgICBsZXQgZWRpdEJsb2NrID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VkaXRCbG9ja0h0bWwnICsgaWQpXG4gICAgbGV0IGxheW91dEJsb2NrID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xheW91dEJsb2NrXycgKyBpZClcbiAgICBsYXlvdXRCbG9jay5xdWVyeVNlbGVjdG9yKCcuY3JlYXRlX2Jsb2NrJykucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcpXG4gICAgZWRpdEJsb2NrLmNsYXNzTGlzdC5hZGQoJ2Qtbm9uZScpXG4gICAgZWRpdEJsb2NrLmlubmVySFRNTCA9ICcnXG4gICAgZGlzcGxheUJsb2NrLmNsYXNzTGlzdC5yZW1vdmUoJ2Qtbm9uZScpXG59XG5cbmxldCBzYXZlTGF5b3V0QmxvY2sgPSAoZSkgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBsZXQgZm9ybSA9IGUudGFyZ2V0LmNsb3Nlc3QoJ2Zvcm0nKVxuICAgIGxldCBjb25maWcgPSB7XG4gICAgICAgIHVybDogZm9ybS5hY3Rpb24sXG4gICAgICAgIG1ldGhvZDogZm9ybS5tZXRob2QsXG4gICAgICAgIGRhdGE6IG5ldyBGb3JtRGF0YShmb3JtKSxcbiAgICAgICAgLi4uYXhpb3NDb25maWdcbiAgICB9XG5cbiAgICBpZiAoZm9ybS5lbmN0eXBlID09PSAnbXVsdGlwYXJ0L2Zvcm0tZGF0YScpIHtcbiAgICAgICAgY29uZmlnLmhlYWRlcnNbJ0NvbnRlbnQtVHlwZSddID0gJ211bHRpcGFydC9mb3JtLWRhdGEnXG4gICAgfVxuICAgIGF4aW9zLnJlcXVlc3QoY29uZmlnKS50aGVuKChyZXNwb25zZSkgPT4ge1xuICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSAyMDApIHtcbiAgICAgICAgICAgIGxldCBpZCA9IHJlc3BvbnNlLmRhdGEuaWRcbiAgICAgICAgICAgIGxldCBkaXNwbGF5QmxvY2sgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGF5b3V0QmxvY2tIdG1sJyArIGlkKVxuICAgICAgICAgICAgbGV0IGVkaXRCbG9jayA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlZGl0QmxvY2tIdG1sJyArIGlkKVxuICAgICAgICAgICAgbGV0IGxheW91dEJsb2NrID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xheW91dEJsb2NrXycgKyBpZClcbiAgICAgICAgICAgIGxheW91dEJsb2NrLnF1ZXJ5U2VsZWN0b3IoJy5lZGl0X2Jsb2NrJykucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcpXG4gICAgICAgICAgICBsYXlvdXRCbG9jay5xdWVyeVNlbGVjdG9yKCcuZGVsZXRlX2Jsb2NrJykucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcpXG4gICAgICAgICAgICBlZGl0QmxvY2suY2xhc3NMaXN0LmFkZCgnZC1ub25lJylcbiAgICAgICAgICAgIGVkaXRCbG9jay5pbm5lckhUTUwgPSAnJ1xuICAgICAgICAgICAgZGlzcGxheUJsb2NrLmNsYXNzTGlzdC5yZW1vdmUoJ2Qtbm9uZScpXG4gICAgICAgICAgICBkaXNwbGF5QmxvY2suaW5uZXJIVE1MID0gcmVzcG9uc2UuZGF0YS5odG1sXG4gICAgICAgICAgICBDTVNBZG1pbi5jcmVhdGVJbml0Q21zTWVzc2FnZUJveChyZXNwb25zZS5kYXRhLnN0YXR1cywgcmVzcG9uc2UuZGF0YS5tZXNzYWdlKTtcbiAgICAgICAgICAgIGxldCBldmVudCA9IG5ldyBDdXN0b21FdmVudCgncGFnZS11cGRhdGVkJylcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuZGlzcGF0Y2hFdmVudChldmVudClcbiAgICAgICAgfVxuICAgIH0pLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICBpZighZXJyb3IucmVzcG9uc2Upe1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcilcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGlkID0gZXJyb3IucmVzcG9uc2UuZGF0YS5pZFxuICAgICAgICBsZXQgZWRpdEJsb2NrID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VkaXRCbG9ja0h0bWwnICsgaWQpXG4gICAgICAgIGVkaXRCbG9jay5pbm5lckhUTUwgPSBlcnJvci5yZXNwb25zZS5kYXRhLmh0bWxcbiAgICAgICAgQ01TQWRtaW4uY3JlYXRlSW5pdENtc01lc3NhZ2VCb3goJ2Vycm9yJywgZXJyb3IucmVzcG9uc2UuZGF0YS5tZXNzYWdlKTtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgnZmllbGRzOmFkZGVkJykpXG4gICAgfSlcblxufVxuXG5sZXQgY3JlYXRlTGF5b3V0QmxvY2sgPSAoZSkgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBsZXQgZm9ybSA9IGUudGFyZ2V0LmNsb3Nlc3QoJ2Zvcm0nKVxuICAgIGxldCBjb25maWcgPSB7XG4gICAgICAgIHVybDogZm9ybS5hY3Rpb24sXG4gICAgICAgIG1ldGhvZDogZm9ybS5tZXRob2QsXG4gICAgICAgIGRhdGE6IG5ldyBGb3JtRGF0YShmb3JtKSxcbiAgICAgICAgLi4uYXhpb3NDb25maWdcbiAgICB9XG5cbiAgICBpZiAoZm9ybS5lbmN0eXBlID09PSAnbXVsdGlwYXJ0L2Zvcm0tZGF0YScpIHtcbiAgICAgICAgY29uZmlnLmhlYWRlcnNbJ0NvbnRlbnQtVHlwZSddID0gJ211bHRpcGFydC9mb3JtLWRhdGEnXG4gICAgfVxuXG4gICAgbGV0IGRpdiA9IGZvcm0uY2xvc2VzdCgnW2RhdGEtem9uZV0nKVxuXG4gICAgbGV0IGlkID0gZGl2LmdldEF0dHJpYnV0ZSgnaWQnKS5yZXBsYWNlKCdsYXlvdXRCbG9ja18nLCAnJylcbiAgICBheGlvcy5yZXF1ZXN0KGNvbmZpZykudGhlbigocmVzcG9uc2UpID0+IHtcbiAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gMjAwKSB7XG4gICAgICAgICAgICBsZXQgdGVtcGxhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZW1wbGF0ZScpO1xuICAgICAgICAgICAgdGVtcGxhdGUuaW5uZXJIVE1MID0gcmVzcG9uc2UuZGF0YS5odG1sLnRyaW0oKTs7XG4gICAgICAgICAgICBkaXYucmVwbGFjZVdpdGgodGVtcGxhdGUuY29udGVudC5maXJzdENoaWxkKVxuICAgICAgICAgICAgQ01TQWRtaW4uY3JlYXRlSW5pdENtc01lc3NhZ2VCb3gocmVzcG9uc2UuZGF0YS5zdGF0dXMsIHJlc3BvbnNlLmRhdGEubWVzc2FnZSk7XG4gICAgICAgICAgICBsZXQgZXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoJ3BhZ2UtdXBkYXRlZCcpXG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LmRpc3BhdGNoRXZlbnQoZXZlbnQpXG4gICAgICAgIH1cbiAgICB9KS5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgaWYoIWVycm9yLnJlc3BvbnNlKXtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpXG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBlZGl0QmxvY2sgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZWRpdEJsb2NrSHRtbCcgKyBpZClcbiAgICAgICAgZWRpdEJsb2NrLmlubmVySFRNTCA9IGVycm9yLnJlc3BvbnNlLmRhdGEuaHRtbFxuICAgICAgICBDTVNBZG1pbi5jcmVhdGVJbml0Q21zTWVzc2FnZUJveCgnZXJyb3InLCBlcnJvci5yZXNwb25zZS5kYXRhLm1lc3NhZ2UpO1xuICAgICAgICBkb2N1bWVudC5ib2R5LmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KCdmaWVsZHM6YWRkZWQnKSlcbiAgICB9KVxuXG59XG5cbmxldCB0b2dnbGVBY3RpdmUgPSAoZSkgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBsZXQgZWwgPSBlLnRhcmdldDtcbiAgICBpZiAoZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdraS1vdXRsaW5lJykpIHtcbiAgICAgICAgZWwgPSBlbC5wYXJlbnRFbGVtZW50XG4gICAgfVxuICAgIGxldCBpY29uID0gZWwucXVlcnlTZWxlY3RvcignaScpXG4gICAgbGV0IGlkID0gZWwuZGF0YXNldC52YWx1ZVxuICAgIGxldCBkaXNwbGF5QmxvY2sgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGF5b3V0QmxvY2tIdG1sJyArIGlkKVxuICAgIGxldCB1cmwgPSBDTVNSb3V0aW5nLmdlbmVyYXRlKCdhZG1pbl9uZXR3b3JraW5nX2luaXRjbXNfbGF5b3V0YmxvY2tfdG9nZ2xlQWN0aXZlJylcblxuICAgIGF4aW9zLnBvc3QodXJsLCB7aWQ6IGlkfSwgYXhpb3NDb25maWcpLnRoZW4oKHJlc3BvbnNlKSA9PiB7XG5cblxuICAgICAgICBDTVNBZG1pbi5jcmVhdGVJbml0Q21zTWVzc2FnZUJveCgnc3VjY2VzcycsIHJlc3BvbnNlLmRhdGEubWVzc2FnZSk7XG4gICAgICAgIGlmIChyZXNwb25zZS5kYXRhLmFjdGl2ZSkge1xuICAgICAgICAgICAgaWNvbi5jbGFzc0xpc3QucmVtb3ZlKCdraS1taW51cy1jaXJjbGUnKVxuICAgICAgICAgICAgaWNvbi5jbGFzc0xpc3QuYWRkKCdraS1jaGVjay1jaXJjbGUnKVxuICAgICAgICAgICAgZWwuY2xhc3NMaXN0LnJlbW92ZSgnYnRuLWxpZ2h0LWRhbmdlcicpXG4gICAgICAgICAgICBlbC5jbGFzc0xpc3QuYWRkKCdidG4tbGlnaHQtc3VjY2VzcycpXG4gICAgICAgICAgICBkaXNwbGF5QmxvY2suY2xhc3NMaXN0LnJlbW92ZSgnb3BhY2l0eS0yNScpXG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuICAgICAgICBpY29uLmNsYXNzTGlzdC5hZGQoJ2tpLW1pbnVzLWNpcmNsZScpXG4gICAgICAgIGljb24uY2xhc3NMaXN0LnJlbW92ZSgna2ktY2hlY2stY2lyY2xlJylcbiAgICAgICAgZWwuY2xhc3NMaXN0LmFkZCgnYnRuLWxpZ2h0LWRhbmdlcicpXG4gICAgICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoJ2J0bi1saWdodC1zdWNjZXNzJylcbiAgICAgICAgZGlzcGxheUJsb2NrLmNsYXNzTGlzdC5hZGQoJ29wYWNpdHktMjUnKVxuICAgICAgICBsZXQgZXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoJ3BhZ2UtdXBkYXRlZCcpXG4gICAgICAgIGRvY3VtZW50LmJvZHkuZGlzcGF0Y2hFdmVudChldmVudClcbiAgICB9KS5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgQ01TQWRtaW4uY3JlYXRlSW5pdENtc01lc3NhZ2VCb3goJ2Vycm9yJywgZXJyb3IucmVzcG9uc2UuZGF0YS5tZXNzYWdlKTtcbiAgICB9KVxuXG59XG5cblxubGV0IGRlbGV0ZUJsb2NrID0gKGUpID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgbGV0IGVsID0gZS50YXJnZXQ7XG5cbiAgICBpZiAoZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdmYS10cmFzaCcpKSB7XG4gICAgICAgIGVsID0gZWwucGFyZW50RWxlbWVudFxuICAgIH1cblxuICAgIGxldCBjb250YWluZXIgPSBlbC5jbG9zZXN0KCcuZHJhZ2dhYmxlLXpvbmUnKVxuXG5cbiAgICBTd2FsLmZpcmUoe1xuICAgICAgICBodG1sOiBgQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGRlbGV0ZSB0aGlzIGJsb2NrP2AsXG4gICAgICAgIGljb246IFwid2FybmluZ1wiLFxuICAgICAgICBidXR0b25zU3R5bGluZzogZmFsc2UsXG4gICAgICAgIHNob3dDYW5jZWxCdXR0b246IHRydWUsXG4gICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiBcIk9rLCBnb3QgaXQhXCIsXG4gICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICdOb3BlLCBjYW5jZWwgaXQnLFxuICAgICAgICBjdXN0b21DbGFzczoge1xuICAgICAgICAgICAgY29uZmlybUJ1dHRvbjogXCJidG4gYnRuLWRhbmdlclwiLFxuICAgICAgICAgICAgY2FuY2VsQnV0dG9uOiAnYnRuIGJ0bi1wcmltYXJ5J1xuICAgICAgICB9XG4gICAgfSkudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICAgIGlmIChyZXN1bHQuaXNDb25maXJtZWQpIHtcbiAgICAgICAgICAgIGF4aW9zLnBvc3QoZGVsZXRlVXJsLCB7XG4gICAgICAgICAgICAgICAgaWQ6IGVsLmRhdGFzZXQudmFsdWUsXG4gICAgICAgICAgICAgICAgX21ldGhvZDogJ0RFTEVURSdcbiAgICAgICAgICAgIH0pLnRoZW4oKHJlc3BvbnNlKSA9PiB7XG5cbiAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbGF5b3V0QmxvY2tfJyArIGVsLmRhdGFzZXQudmFsdWUpLnJlbW92ZSgpXG4gICAgICAgICAgICAgICAgQ01TQWRtaW4uY3JlYXRlSW5pdENtc01lc3NhZ2VCb3gocmVzcG9uc2UuZGF0YS5tZXNzYWdlU3RhdHVzLCByZXNwb25zZS5kYXRhLm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIHNhdmVMYXlvdXRCbG9ja1NvcnQoKTtcbiAgICAgICAgICAgICAgICBpZiAoY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5kcmFnZ2FibGUnKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5lbXB0eV9sYXlvdXRfYmxvY2snKS5jbGFzc0xpc3QuYWRkKFwiZC1ub25lXCIpXG4gICAgICAgICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuZW1wdHlfbGF5b3V0X2Jsb2NrJykuY2xhc3NMaXN0LnJlbW92ZShcImQtbm9uZVwiKVxuXG4gICAgICAgICAgICB9KS5jYXRjaCgoZXJyKSA9PiB7XG5cbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpXG4gICAgICAgICAgICAgICAgQ01TQWRtaW4uY3JlYXRlSW5pdENtc01lc3NhZ2VCb3goJ2Vycm9yJywgJ1NvbWV0aGluZyB3ZW50IHdyb25nJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgfSlcbn1cblxubGV0IHVubGlua1RyYW5zbGF0aW9uID0gKGUpID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgbGV0IGVsID0gZS50YXJnZXQ7XG5cbiAgICBsZXQgdGV4dCA9IGVsLmRhdGFzZXQudGV4dFxuICAgIGxldCBpZCA9IGVsLmRhdGFzZXQub2JqZWN0SWRcblxuICAgIFN3YWwuZmlyZSh7XG4gICAgICAgIGh0bWw6IHRleHQsXG4gICAgICAgIGljb246IFwid2FybmluZ1wiLFxuICAgICAgICBidXR0b25zU3R5bGluZzogZmFsc2UsXG4gICAgICAgIHNob3dDYW5jZWxCdXR0b246IHRydWUsXG4gICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiBcIk9rLCBnb3QgaXQhXCIsXG4gICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICdOb3BlLCBjYW5jZWwgaXQnLFxuICAgICAgICBjdXN0b21DbGFzczoge1xuICAgICAgICAgICAgY29uZmlybUJ1dHRvbjogXCJidG4gYnRuLWRhbmdlclwiLFxuICAgICAgICAgICAgY2FuY2VsQnV0dG9uOiAnYnRuIGJ0bi1wcmltYXJ5J1xuICAgICAgICB9XG4gICAgfSkudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICAgIGlmIChyZXN1bHQuaXNDb25maXJtZWQpIHtcblxuICAgICAgICAgICAgbGV0IGhlYWRlcnMgPSB7XCJYLUhUVFAtTWV0aG9kLU92ZXJyaWRlXCI6IFwiREVMRVRFXCIsIC4uLmF4aW9zQ29uZmlnLmhlYWRlcnN9XG5cbiAgICAgICAgICAgIGF4aW9zLnBvc3QoZWwuaHJlZiwge30sIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzXG4gICAgICAgICAgICB9KS50aGVuKChyZXNwb25zZSkgPT4ge1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN0cmFuc2xhdGlvbnMnKS5pbm5lckhUTUwgPSByZXNwb25zZS5kYXRhLmh0bWxcbiAgICAgICAgICAgICAgICBDTVNBZG1pbi5jcmVhdGVJbml0Q21zTWVzc2FnZUJveCgnc3VjY2VzcycsIHJlc3BvbnNlLmRhdGEubWVzc2FnZSk7XG4gICAgICAgICAgICB9KS5jYXRjaCgoZXJyKSA9PiB7XG5cbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpXG4gICAgICAgICAgICAgICAgQ01TQWRtaW4uY3JlYXRlSW5pdENtc01lc3NhZ2VCb3goJ2Vycm9yJywgJ1NvbWV0aGluZyB3ZW50IHdyb25nJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgfSlcbn1cblxubGV0IGxpbmtUcmFuc2xhdGlvbiA9IChlKSA9PiB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpXG5cbiAgICBsZXQgZWwgPSBlLnRhcmdldDtcblxuICAgIGF4aW9zLmdldChlbC5ocmVmLCBheGlvc0NvbmZpZykudGhlbigocmVzcG9uc2UpID0+IHtcbiAgICAgICAgbGFzdFRyYW5zbGF0aW9uU2V0dGluZ3NIdG1sID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3RyYW5zbGF0aW9ucycpLmlubmVySFRNTFxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdHJhbnNsYXRpb25zJykuaW5uZXJIVE1MID0gcmVzcG9uc2UuZGF0YS5odG1sXG4gICAgfSkuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhlcnIpXG4gICAgICAgIENNU0FkbWluLmNyZWF0ZUluaXRDbXNNZXNzYWdlQm94KCdlcnJvcicsICdTb21ldGhpbmcgd2VudCB3cm9uZycpO1xuICAgIH0pXG59XG5cbmxldCBzdWJtaXRUcmFuc2xhdGlvbkxpbmsgPSAoZSkgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKVxuXG4gICAgbGV0IGZvcm0gPSBlLnRhcmdldC5jbG9zZXN0KCdmb3JtJylcblxuICAgIGlmIChlLnN1Ym1pdHRlci5jbGFzc0xpc3QuY29udGFpbnMoJ2J0bi1jYW5jZWwnKSB8fCBlLnN1Ym1pdHRlci5jbGFzc0xpc3QuY29udGFpbnMoJ2NhbmNlbCcpKSB7XG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN0cmFuc2xhdGlvbnMnKS5pbm5lckhUTUwgPSBsYXN0VHJhbnNsYXRpb25TZXR0aW5nc0h0bWxcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGF4aW9zLnBvc3QoZm9ybS5hY3Rpb24sIG5ldyBGb3JtRGF0YShmb3JtKSwgYXhpb3NDb25maWcpLnRoZW4oKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN0cmFuc2xhdGlvbnMnKS5pbm5lckhUTUwgPSByZXNwb25zZS5kYXRhLmh0bWxcbiAgICAgICAgQ01TQWRtaW4uY3JlYXRlSW5pdENtc01lc3NhZ2VCb3goJ3N1Y2Nlc3MnLCByZXNwb25zZS5kYXRhLm1lc3NhZ2UpO1xuICAgIH0sIGF4aW9zQ29uZmlnKS5jYXRjaCgoZXJyKSA9PiB7XG5cbiAgICAgICAgaWYgKGVyci5yZXNwb25zZS5kYXRhLm1lc3NhZ2UpIHtcbiAgICAgICAgICAgIHJldHVybiBDTVNBZG1pbi5jcmVhdGVJbml0Q21zTWVzc2FnZUJveCgnZXJyb3InLCBlcnIucmVzcG9uc2UuZGF0YS5tZXNzYWdlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIENNU0FkbWluLmNyZWF0ZUluaXRDbXNNZXNzYWdlQm94KCdlcnJvcicsIGVyci5yZXNwb25zZS5kYXRhLmRldGFpbCk7XG4gICAgfSlcbn1cblxubGV0IHN1Ym1pdFBhZ2VTZXR0aW5ncyA9IChlKSA9PiB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgbGV0IGZvcm0gPSBlLnRhcmdldC5jbG9zZXN0KCdmb3JtJylcblxuICAgIGZvcm0uZWxlbWVudHMuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgICBpdGVtLmNsYXNzTGlzdC5yZW1vdmUoJ2lzLWludmFsaWQnKVxuICAgIH0pXG5cbiAgICBheGlvcy5wb3N0KGZvcm0uYWN0aW9uLCBuZXcgRm9ybURhdGEoZm9ybSksIGF4aW9zQ29uZmlnKS50aGVuKChyZXNwb25zZSkgPT4ge1xuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcGFnZVN0YXR1c1NldHRpbmdzJykuaW5uZXJIVE1MID0gcmVzcG9uc2UuZGF0YS5wYWdlU3RhdHVzU2V0dGluZ3NcblxuICAgICAgICBpZihyZXNwb25zZS5kYXRhLmxheW91dEJsb2NrU2V0dGluZ3NIdG1sKXtcbiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwYWdlX2NvbnRlbnQnKS5pbm5lckhUTUwgPSByZXNwb25zZS5kYXRhLmxheW91dEJsb2NrU2V0dGluZ3NIdG1sXG4gICAgICAgICAgICBpbml0RHJvcFpvbmUoKVxuICAgICAgICB9XG5cbiAgICAgICAgQ01TQWRtaW4uY3JlYXRlSW5pdENtc01lc3NhZ2VCb3goJ3N1Y2Nlc3MnLCByZXNwb25zZS5kYXRhLm1lc3NhZ2UpO1xuICAgIH0pLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgbGV0IGRhdGEgPSBlcnIucmVzcG9uc2UuZGF0YVxuXG4gICAgICAgIGRhdGEudmlvbGF0aW9ucy5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICAgICAgICBsZXQgcGF0aCA9IGl0ZW0ucHJvcGVydHlQYXRoXG4gICAgICAgICAgICBsZXQgbWVzc2FnZSA9IGl0ZW0udGl0bGVcbiAgICAgICAgICAgIGxldCBmaWVsZCA9IGZvcm0ucXVlcnlTZWxlY3RvcignW25hbWU9XCInICsgcGF0aCArICdcIl0nKVxuICAgICAgICAgICAgZmllbGQuY2xhc3NMaXN0LmFkZCgnaXMtaW52YWxpZCcpXG4gICAgICAgICAgICBmaWVsZC5zZXRBdHRyaWJ1dGUoJ3JlcXVpcmVkJywgJ3JlcXVpcmVkJylcblxuICAgICAgICAgICAgaWYgKGZpZWxkLm5leHRFbGVtZW50U2libGluZyAmJiBmaWVsZC5uZXh0RWxlbWVudFNpYmxpbmcuY2xhc3NMaXN0LmNvbnRhaW5zKCdpbnZhbGlkLWZlZWRiYWNrJykpIHtcbiAgICAgICAgICAgICAgICBmaWVsZC5uZXh0RWxlbWVudFNpYmxpbmcuaW5uZXJIdG1sID0gbWVzc2FnZTtcbiAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZpZWxkLmluc2VydEFkamFjZW50SFRNTCgnYWZ0ZXJlbmQnLCAnPGRpdiBjbGFzcz1cImludmFsaWQtZmVlZGJhY2tcIj4nICsgbWVzc2FnZSArICc8L2Rpdj4nKVxuICAgICAgICB9KVxuICAgIH0pXG59XG5cbmxldCB1cGRhdGVQYWdlU3RhdHVzID0gKCkgPT4ge1xuICAgIGF4aW9zLmdldChDTVNSb3V0aW5nLmdlbmVyYXRlKCdhZG1pbl9uZXR3b3JraW5nX2luaXRjbXNfcGFnZV9nZXRQYWdlU3RhdHVzJywge2lkOiBwYWdlSWR9KSwgYXhpb3NDb25maWcpXG4gICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4ge1xuICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3BhZ2VTdGF0dXNTZXR0aW5ncycpLmlubmVySFRNTCA9IHJlc3BvbnNlLmRhdGEucGFnZVN0YXR1c1NldHRpbmdzXG4gICAgICAgIH0pLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgaWYgKGVyci5yZXNwb25zZS5kYXRhLm1lc3NhZ2UpIHtcbiAgICAgICAgICAgIHJldHVybiBDTVNBZG1pbi5jcmVhdGVJbml0Q21zTWVzc2FnZUJveCgnZXJyb3InLCBlcnIucmVzcG9uc2UuZGF0YS5tZXNzYWdlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIENNU0FkbWluLmNyZWF0ZUluaXRDbXNNZXNzYWdlQm94KCdlcnJvcicsIGVyci5yZXNwb25zZS5kYXRhLmRldGFpbCk7XG4gICAgfSlcbn1cblxubGV0IHN0YXR1c0RpYWxvZyA9IChlKSA9PiB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpXG5cbiAgICBsZXQgZWwgPSBlLnRhcmdldDtcblxuICAgIGlmICghZWwuaHJlZikge1xuICAgICAgICBlbCA9IGVsLmNsb3Nlc3QoJ2EnKVxuICAgIH1cbiAgICBsZXQgdGV4dCA9IGVsLmRhdGFzZXQudGV4dFxuICAgIFN3YWwuZmlyZSh7XG4gICAgICAgIGh0bWw6IHRleHQsXG4gICAgICAgIGljb246IFwid2FybmluZ1wiLFxuICAgICAgICBidXR0b25zU3R5bGluZzogZmFsc2UsXG4gICAgICAgIHNob3dDYW5jZWxCdXR0b246IHRydWUsXG4gICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiBcIk9rLCBnb3QgaXQhXCIsXG4gICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICdOb3BlLCBjYW5jZWwgaXQnLFxuICAgICAgICBjdXN0b21DbGFzczoge1xuICAgICAgICAgICAgY29uZmlybUJ1dHRvbjogXCJidG4gYnRuLWRhbmdlclwiLFxuICAgICAgICAgICAgY2FuY2VsQnV0dG9uOiAnYnRuIGJ0bi1wcmltYXJ5J1xuICAgICAgICB9XG4gICAgfSkudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICAgIGlmIChyZXN1bHQuaXNDb25maXJtZWQpIHtcbiAgICAgICAgICAgIGF4aW9zLnBvc3QoZWwuaHJlZiwgYXhpb3NDb25maWcpLnRoZW4oKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEucmVkaXJlY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdpbmRvdy5sb2NhdGlvbiA9IHJlc3BvbnNlLmRhdGEucmVkaXJlY3RcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KS5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGVyci5yZXNwb25zZS5kYXRhLm1lc3NhZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIENNU0FkbWluLmNyZWF0ZUluaXRDbXNNZXNzYWdlQm94KCdlcnJvcicsIGVyci5yZXNwb25zZS5kYXRhLm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIENNU0FkbWluLmNyZWF0ZUluaXRDbXNNZXNzYWdlQm94KCdlcnJvcicsIGVyci5yZXNwb25zZS5kYXRhLmRldGFpbCk7XG4gICAgICAgICAgICB9KVxuXG4gICAgICAgIH1cbiAgICB9KVxuXG59XG5cblxuS1RVdGlsLm9uRE9NQ29udGVudExvYWRlZChmdW5jdGlvbiAoKSB7XG5cbiAgICBLVFV0aWwub24oZG9jdW1lbnQuYm9keSwgJy5kZWxldGVfYmxvY2snLCAnY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICBkZWxldGVCbG9jayhlKVxuICAgIH0pXG5cbiAgICBLVFV0aWwub24oZG9jdW1lbnQuYm9keSwgJy5lZGl0X2Jsb2NrJywgJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgZWRpdEJsb2NrKGUpXG4gICAgfSlcblxuICAgIEtUVXRpbC5vbihkb2N1bWVudC5ib2R5LCAnLmNyZWF0ZV9ibG9jaycsICdjbGljaycsIChlKSA9PiB7XG4gICAgICAgIGNyZWF0ZUJsb2NrKGUpXG4gICAgfSlcblxuICAgIEtUVXRpbC5vbihkb2N1bWVudC5ib2R5LCAnLnRvZ2dsZS1hY3RpdmUnLCAnY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICB0b2dnbGVBY3RpdmUoZSlcbiAgICB9KVxuXG4gICAgS1RVdGlsLm9uKGRvY3VtZW50LmJvZHksICdbZGF0YS1kaXNtaXNzPVwiZWRpdFwiXScsICdjbGljaycsIChlKSA9PiB7XG4gICAgICAgIGNhbmNlbEVkaXRCbG9jayhlKVxuICAgIH0pXG5cblxuICAgIEtUVXRpbC5vbihkb2N1bWVudC5ib2R5LCAnW2RhdGEtZGlzbWlzcz1cImNyZWF0ZVwiXScsICdjbGljaycsIChlKSA9PiB7XG4gICAgICAgIGNhbmNlbENyZWF0ZUJsb2NrKGUpXG4gICAgfSlcblxuICAgIEtUVXRpbC5vbihkb2N1bWVudC5ib2R5LCAnW2RhdGEtc2F2ZT1cImVkaXRcIl0nLCAnY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICBzYXZlTGF5b3V0QmxvY2soZSlcbiAgICB9KVxuXG4gICAgS1RVdGlsLm9uKGRvY3VtZW50LmJvZHksICdbZGF0YS1zYXZlPVwiY3JlYXRlXCJdJywgJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgY3JlYXRlTGF5b3V0QmxvY2soZSlcbiAgICB9KVxuXG4gICAgS1RVdGlsLm9uKGRvY3VtZW50LmJvZHksICcudHJhbnNsYXRpb24tZGlhbG9nLXVubGluaycsICdjbGljaycsIChlKSA9PiB7XG4gICAgICAgIHVubGlua1RyYW5zbGF0aW9uKGUpXG4gICAgfSk7XG5cbiAgICBLVFV0aWwub24oZG9jdW1lbnQuYm9keSwgJy50cmFuc2xhdGlvbi1kaWFsb2ctbGluaycsICdjbGljaycsIChlKSA9PiB7XG4gICAgICAgIGxpbmtUcmFuc2xhdGlvbihlKVxuICAgIH0pO1xuXG4gICAgS1RVdGlsLm9uKGRvY3VtZW50LmJvZHksICcjdHJhbnNsYXRpb24tbGluay1mb3JtJywgJ3N1Ym1pdCcsIChlKSA9PiB7XG4gICAgICAgIHN1Ym1pdFRyYW5zbGF0aW9uTGluayhlKVxuICAgIH0pO1xuXG4gICAgS1RVdGlsLm9uKGRvY3VtZW50LmJvZHksICcjdHJhbnNsYXRlLWNvcHktcGFnZS1mb3JtJywgJ3N1Ym1pdCcsIChlKSA9PiB7XG4gICAgICAgIHN1Ym1pdFRyYW5zbGF0aW9uTGluayhlKVxuICAgIH0pO1xuXG4gICAgS1RVdGlsLm9uKGRvY3VtZW50LmJvZHksICcjcGFnZS1zZXR0aW5ncy1mb3JtJywgJ3N1Ym1pdCcsIChlKSA9PiB7XG4gICAgICAgIHN1Ym1pdFBhZ2VTZXR0aW5ncyhlKVxuICAgIH0pO1xuXG4gICAgS1RVdGlsLm9uKGRvY3VtZW50LmJvZHksICcjcGFnZS1tZXRhZGF0YS1mb3JtJywgJ3N1Ym1pdCcsIChlKSA9PiB7XG4gICAgICAgIHN1Ym1pdFBhZ2VTZXR0aW5ncyhlKVxuICAgIH0pO1xuXG4gICAgS1RVdGlsLm9uKGRvY3VtZW50LmJvZHksICcuc3RhdHVzLWRpYWxvZy1saW5rJywgJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgc3RhdHVzRGlhbG9nKGUpXG4gICAgfSk7XG5cbiAgICBkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ3BhZ2UtdXBkYXRlZCcsIChlKSA9PiB7XG4gICAgICAgIHVwZGF0ZVBhZ2VTdGF0dXMoKVxuICAgIH0pXG5cblxuICAgIGluaXREcm9wWm9uZSgpO1xufSkiLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwidmFyIHdlYnBhY2tRdWV1ZXMgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgPyBTeW1ib2woXCJ3ZWJwYWNrIHF1ZXVlc1wiKSA6IFwiX193ZWJwYWNrX3F1ZXVlc19fXCI7XG52YXIgd2VicGFja0V4cG9ydHMgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgPyBTeW1ib2woXCJ3ZWJwYWNrIGV4cG9ydHNcIikgOiBcIl9fd2VicGFja19leHBvcnRzX19cIjtcbnZhciB3ZWJwYWNrRXJyb3IgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgPyBTeW1ib2woXCJ3ZWJwYWNrIGVycm9yXCIpIDogXCJfX3dlYnBhY2tfZXJyb3JfX1wiO1xudmFyIHJlc29sdmVRdWV1ZSA9IChxdWV1ZSkgPT4ge1xuXHRpZihxdWV1ZSAmJiBxdWV1ZS5kIDwgMSkge1xuXHRcdHF1ZXVlLmQgPSAxO1xuXHRcdHF1ZXVlLmZvckVhY2goKGZuKSA9PiAoZm4uci0tKSk7XG5cdFx0cXVldWUuZm9yRWFjaCgoZm4pID0+IChmbi5yLS0gPyBmbi5yKysgOiBmbigpKSk7XG5cdH1cbn1cbnZhciB3cmFwRGVwcyA9IChkZXBzKSA9PiAoZGVwcy5tYXAoKGRlcCkgPT4ge1xuXHRpZihkZXAgIT09IG51bGwgJiYgdHlwZW9mIGRlcCA9PT0gXCJvYmplY3RcIikge1xuXHRcdGlmKGRlcFt3ZWJwYWNrUXVldWVzXSkgcmV0dXJuIGRlcDtcblx0XHRpZihkZXAudGhlbikge1xuXHRcdFx0dmFyIHF1ZXVlID0gW107XG5cdFx0XHRxdWV1ZS5kID0gMDtcblx0XHRcdGRlcC50aGVuKChyKSA9PiB7XG5cdFx0XHRcdG9ialt3ZWJwYWNrRXhwb3J0c10gPSByO1xuXHRcdFx0XHRyZXNvbHZlUXVldWUocXVldWUpO1xuXHRcdFx0fSwgKGUpID0+IHtcblx0XHRcdFx0b2JqW3dlYnBhY2tFcnJvcl0gPSBlO1xuXHRcdFx0XHRyZXNvbHZlUXVldWUocXVldWUpO1xuXHRcdFx0fSk7XG5cdFx0XHR2YXIgb2JqID0ge307XG5cdFx0XHRvYmpbd2VicGFja1F1ZXVlc10gPSAoZm4pID0+IChmbihxdWV1ZSkpO1xuXHRcdFx0cmV0dXJuIG9iajtcblx0XHR9XG5cdH1cblx0dmFyIHJldCA9IHt9O1xuXHRyZXRbd2VicGFja1F1ZXVlc10gPSB4ID0+IHt9O1xuXHRyZXRbd2VicGFja0V4cG9ydHNdID0gZGVwO1xuXHRyZXR1cm4gcmV0O1xufSkpO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5hID0gKG1vZHVsZSwgYm9keSwgaGFzQXdhaXQpID0+IHtcblx0dmFyIHF1ZXVlO1xuXHRoYXNBd2FpdCAmJiAoKHF1ZXVlID0gW10pLmQgPSAtMSk7XG5cdHZhciBkZXBRdWV1ZXMgPSBuZXcgU2V0KCk7XG5cdHZhciBleHBvcnRzID0gbW9kdWxlLmV4cG9ydHM7XG5cdHZhciBjdXJyZW50RGVwcztcblx0dmFyIG91dGVyUmVzb2x2ZTtcblx0dmFyIHJlamVjdDtcblx0dmFyIHByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqKSA9PiB7XG5cdFx0cmVqZWN0ID0gcmVqO1xuXHRcdG91dGVyUmVzb2x2ZSA9IHJlc29sdmU7XG5cdH0pO1xuXHRwcm9taXNlW3dlYnBhY2tFeHBvcnRzXSA9IGV4cG9ydHM7XG5cdHByb21pc2Vbd2VicGFja1F1ZXVlc10gPSAoZm4pID0+IChxdWV1ZSAmJiBmbihxdWV1ZSksIGRlcFF1ZXVlcy5mb3JFYWNoKGZuKSwgcHJvbWlzZVtcImNhdGNoXCJdKHggPT4ge30pKTtcblx0bW9kdWxlLmV4cG9ydHMgPSBwcm9taXNlO1xuXHRib2R5KChkZXBzKSA9PiB7XG5cdFx0Y3VycmVudERlcHMgPSB3cmFwRGVwcyhkZXBzKTtcblx0XHR2YXIgZm47XG5cdFx0dmFyIGdldFJlc3VsdCA9ICgpID0+IChjdXJyZW50RGVwcy5tYXAoKGQpID0+IHtcblx0XHRcdGlmKGRbd2VicGFja0Vycm9yXSkgdGhyb3cgZFt3ZWJwYWNrRXJyb3JdO1xuXHRcdFx0cmV0dXJuIGRbd2VicGFja0V4cG9ydHNdO1xuXHRcdH0pKVxuXHRcdHZhciBwcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcblx0XHRcdGZuID0gKCkgPT4gKHJlc29sdmUoZ2V0UmVzdWx0KSk7XG5cdFx0XHRmbi5yID0gMDtcblx0XHRcdHZhciBmblF1ZXVlID0gKHEpID0+IChxICE9PSBxdWV1ZSAmJiAhZGVwUXVldWVzLmhhcyhxKSAmJiAoZGVwUXVldWVzLmFkZChxKSwgcSAmJiAhcS5kICYmIChmbi5yKyssIHEucHVzaChmbikpKSk7XG5cdFx0XHRjdXJyZW50RGVwcy5tYXAoKGRlcCkgPT4gKGRlcFt3ZWJwYWNrUXVldWVzXShmblF1ZXVlKSkpO1xuXHRcdH0pO1xuXHRcdHJldHVybiBmbi5yID8gcHJvbWlzZSA6IGdldFJlc3VsdCgpO1xuXHR9LCAoZXJyKSA9PiAoKGVyciA/IHJlamVjdChwcm9taXNlW3dlYnBhY2tFcnJvcl0gPSBlcnIpIDogb3V0ZXJSZXNvbHZlKGV4cG9ydHMpKSwgcmVzb2x2ZVF1ZXVlKHF1ZXVlKSkpO1xuXHRxdWV1ZSAmJiBxdWV1ZS5kIDwgMCAmJiAocXVldWUuZCA9IDApO1xufTsiLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiLy8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yID0gKGV4cG9ydHMpID0+IHtcblx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG5cdH1cblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbn07IiwiIiwiLy8gc3RhcnR1cFxuLy8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4vLyBUaGlzIGVudHJ5IG1vZHVsZSB1c2VkICdtb2R1bGUnIHNvIGl0IGNhbid0IGJlIGlubGluZWRcbnZhciBfX3dlYnBhY2tfZXhwb3J0c19fID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vYXNzZXRzL2Ntcy9wYWdlLWFkbWluLmpzXCIpO1xuIiwiIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9