/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./assets/admin-theme/plugins/custom/sortablejs/sortablejs.bundle.js":
/*!***************************************************************************!*\
  !*** ./assets/admin-theme/plugins/custom/sortablejs/sortablejs.bundle.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/**!
 * Sortable 1.15.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */
function ownKeys(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,n)}return o}function _objectSpread2(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(o),!0).forEach((function(e){_defineProperty(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):ownKeys(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _defineProperty(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}function _extends(){return _extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t},_extends.apply(this,arguments)}function _objectWithoutPropertiesLoose(t,e){if(null==t)return{};var o,n,r={},l=Object.keys(t);for(n=0;n<l.length;n++)o=l[n],e.indexOf(o)>=0||(r[o]=t[o]);return r}function _objectWithoutProperties(t,e){if(null==t)return{};var o,n,r=_objectWithoutPropertiesLoose(t,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(n=0;n<l.length;n++)o=l[n],e.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(t,o)&&(r[o]=t[o])}return r}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var o=Object.prototype.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var o=0,n=new Array(e);o<e;o++)n[o]=t[o];return n}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var version="1.15.0";function userAgent(t){if("undefined"!=typeof window&&window.navigator)return!!navigator.userAgent.match(t)}var IE11OrLess=userAgent(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Edge=userAgent(/Edge/i),FireFox=userAgent(/firefox/i),Safari=userAgent(/safari/i)&&!userAgent(/chrome/i)&&!userAgent(/android/i),IOS=userAgent(/iP(ad|od|hone)/i),ChromeForAndroid=userAgent(/chrome/i)&&userAgent(/android/i),captureMode={capture:!1,passive:!1};function on(t,e,o){t.addEventListener(e,o,!IE11OrLess&&captureMode)}function off(t,e,o){t.removeEventListener(e,o,!IE11OrLess&&captureMode)}function matches(t,e){if(e){if(">"===e[0]&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch(t){return!1}return!1}}function getParentOrHost(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function closest(t,e,o,n){if(t){o=o||document;do{if(null!=e&&(">"===e[0]?t.parentNode===o&&matches(t,e):matches(t,e))||n&&t===o)return t;if(t===o)break}while(t=getParentOrHost(t))}return null}var _throttleTimeout,R_SPACE=/\s+/g;function toggleClass(t,e,o){if(t&&e)if(t.classList)t.classList[o?"add":"remove"](e);else{var n=(" "+t.className+" ").replace(R_SPACE," ").replace(" "+e+" "," ");t.className=(n+(o?" "+e:"")).replace(R_SPACE," ")}}function css(t,e,o){var n=t&&t.style;if(n){if(void 0===o)return document.defaultView&&document.defaultView.getComputedStyle?o=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(o=t.currentStyle),void 0===e?o:o[e];e in n||-1!==e.indexOf("webkit")||(e="-webkit-"+e),n[e]=o+("string"==typeof o?"":"px")}}function matrix(t,e){var o="";if("string"==typeof t)o=t;else do{var n=css(t,"transform");n&&"none"!==n&&(o=n+" "+o)}while(!e&&(t=t.parentNode));var r=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return r&&new r(o)}function find(t,e,o){if(t){var n=t.getElementsByTagName(e),r=0,l=n.length;if(o)for(;r<l;r++)o(n[r],r);return n}return[]}function getWindowScrollingElement(){var t=document.scrollingElement;return t||document.documentElement}function getRect(t,e,o,n,r){if(t.getBoundingClientRect||t===window){var l,a,i,s,c,d,u;if(t!==window&&t.parentNode&&t!==getWindowScrollingElement()?(a=(l=t.getBoundingClientRect()).top,i=l.left,s=l.bottom,c=l.right,d=l.height,u=l.width):(a=0,i=0,s=window.innerHeight,c=window.innerWidth,d=window.innerHeight,u=window.innerWidth),(e||o)&&t!==window&&(r=r||t.parentNode,!IE11OrLess))do{if(r&&r.getBoundingClientRect&&("none"!==css(r,"transform")||o&&"static"!==css(r,"position"))){var g=r.getBoundingClientRect();a-=g.top+parseInt(css(r,"border-top-width")),i-=g.left+parseInt(css(r,"border-left-width")),s=a+l.height,c=i+l.width;break}}while(r=r.parentNode);if(n&&t!==window){var h=matrix(r||t),p=h&&h.a,f=h&&h.d;h&&(s=(a/=f)+(d/=f),c=(i/=p)+(u/=p))}return{top:a,left:i,bottom:s,right:c,width:u,height:d}}}function isScrolledPast(t,e,o){for(var n=getParentAutoScrollElement(t,!0),r=getRect(t)[e];n;){var l=getRect(n)[o];if(!("top"===o||"left"===o?r>=l:r<=l))return n;if(n===getWindowScrollingElement())break;n=getParentAutoScrollElement(n,!1)}return!1}function getChild(t,e,o,n){for(var r=0,l=0,a=t.children;l<a.length;){if("none"!==a[l].style.display&&a[l]!==Sortable.ghost&&(n||a[l]!==Sortable.dragged)&&closest(a[l],o.draggable,t,!1)){if(r===e)return a[l];r++}l++}return null}function lastChild(t,e){for(var o=t.lastElementChild;o&&(o===Sortable.ghost||"none"===css(o,"display")||e&&!matches(o,e));)o=o.previousElementSibling;return o||null}function index(t,e){var o=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)"TEMPLATE"===t.nodeName.toUpperCase()||t===Sortable.clone||e&&!matches(t,e)||o++;return o}function getRelativeScrollOffset(t){var e=0,o=0,n=getWindowScrollingElement();if(t)do{var r=matrix(t),l=r.a,a=r.d;e+=t.scrollLeft*l,o+=t.scrollTop*a}while(t!==n&&(t=t.parentNode));return[e,o]}function indexOfObject(t,e){for(var o in t)if(t.hasOwnProperty(o))for(var n in e)if(e.hasOwnProperty(n)&&e[n]===t[o][n])return Number(o);return-1}function getParentAutoScrollElement(t,e){if(!t||!t.getBoundingClientRect)return getWindowScrollingElement();var o=t,n=!1;do{if(o.clientWidth<o.scrollWidth||o.clientHeight<o.scrollHeight){var r=css(o);if(o.clientWidth<o.scrollWidth&&("auto"==r.overflowX||"scroll"==r.overflowX)||o.clientHeight<o.scrollHeight&&("auto"==r.overflowY||"scroll"==r.overflowY)){if(!o.getBoundingClientRect||o===document.body)return getWindowScrollingElement();if(n||e)return o;n=!0}}}while(o=o.parentNode);return getWindowScrollingElement()}function extend(t,e){if(t&&e)for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);return t}function isRectEqual(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}function throttle(t,e){return function(){if(!_throttleTimeout){var o=arguments;1===o.length?t.call(this,o[0]):t.apply(this,o),_throttleTimeout=setTimeout((function(){_throttleTimeout=void 0}),e)}}}function cancelThrottle(){clearTimeout(_throttleTimeout),_throttleTimeout=void 0}function scrollBy(t,e,o){t.scrollLeft+=e,t.scrollTop+=o}function clone(t){var e=window.Polymer,o=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):o?o(t).clone(!0)[0]:t.cloneNode(!0)}function setRect(t,e){css(t,"position","absolute"),css(t,"top",e.top),css(t,"left",e.left),css(t,"width",e.width),css(t,"height",e.height)}function unsetRect(t){css(t,"position",""),css(t,"top",""),css(t,"left",""),css(t,"width",""),css(t,"height","")}var expando="Sortable"+(new Date).getTime();function AnimationStateManager(){var t,e=[];return{captureAnimationState:function(){(e=[],this.options.animation)&&[].slice.call(this.el.children).forEach((function(t){if("none"!==css(t,"display")&&t!==Sortable.ghost){e.push({target:t,rect:getRect(t)});var o=_objectSpread2({},e[e.length-1].rect);if(t.thisAnimationDuration){var n=matrix(t,!0);n&&(o.top-=n.f,o.left-=n.e)}t.fromRect=o}}))},addAnimationState:function(t){e.push(t)},removeAnimationState:function(t){e.splice(indexOfObject(e,{target:t}),1)},animateAll:function(o){var n=this;if(!this.options.animation)return clearTimeout(t),void("function"==typeof o&&o());var r=!1,l=0;e.forEach((function(t){var e=0,o=t.target,a=o.fromRect,i=getRect(o),s=o.prevFromRect,c=o.prevToRect,d=t.rect,u=matrix(o,!0);u&&(i.top-=u.f,i.left-=u.e),o.toRect=i,o.thisAnimationDuration&&isRectEqual(s,i)&&!isRectEqual(a,i)&&(d.top-i.top)/(d.left-i.left)==(a.top-i.top)/(a.left-i.left)&&(e=calculateRealTime(d,s,c,n.options)),isRectEqual(i,a)||(o.prevFromRect=a,o.prevToRect=i,e||(e=n.options.animation),n.animate(o,d,i,e)),e&&(r=!0,l=Math.max(l,e),clearTimeout(o.animationResetTimer),o.animationResetTimer=setTimeout((function(){o.animationTime=0,o.prevFromRect=null,o.fromRect=null,o.prevToRect=null,o.thisAnimationDuration=null}),e),o.thisAnimationDuration=e)})),clearTimeout(t),r?t=setTimeout((function(){"function"==typeof o&&o()}),l):"function"==typeof o&&o(),e=[]},animate:function(t,e,o,n){if(n){css(t,"transition",""),css(t,"transform","");var r=matrix(this.el),l=r&&r.a,a=r&&r.d,i=(e.left-o.left)/(l||1),s=(e.top-o.top)/(a||1);t.animatingX=!!i,t.animatingY=!!s,css(t,"transform","translate3d("+i+"px,"+s+"px,0)"),this.forRepaintDummy=repaint(t),css(t,"transition","transform "+n+"ms"+(this.options.easing?" "+this.options.easing:"")),css(t,"transform","translate3d(0,0,0)"),"number"==typeof t.animated&&clearTimeout(t.animated),t.animated=setTimeout((function(){css(t,"transition",""),css(t,"transform",""),t.animated=!1,t.animatingX=!1,t.animatingY=!1}),n)}}}}function repaint(t){return t.offsetWidth}function calculateRealTime(t,e,o,n){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-o.top,2)+Math.pow(e.left-o.left,2))*n.animation}var plugins=[],defaults={initializeByDefault:!0},PluginManager={mount:function(t){for(var e in defaults)defaults.hasOwnProperty(e)&&!(e in t)&&(t[e]=defaults[e]);plugins.forEach((function(e){if(e.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")})),plugins.push(t)},pluginEvent:function(t,e,o){var n=this;this.eventCanceled=!1,o.cancel=function(){n.eventCanceled=!0};var r=t+"Global";plugins.forEach((function(n){e[n.pluginName]&&(e[n.pluginName][r]&&e[n.pluginName][r](_objectSpread2({sortable:e},o)),e.options[n.pluginName]&&e[n.pluginName][t]&&e[n.pluginName][t](_objectSpread2({sortable:e},o)))}))},initializePlugins:function(t,e,o,n){for(var r in plugins.forEach((function(n){var r=n.pluginName;if(t.options[r]||n.initializeByDefault){var l=new n(t,e,t.options);l.sortable=t,l.options=t.options,t[r]=l,_extends(o,l.defaults)}})),t.options)if(t.options.hasOwnProperty(r)){var l=this.modifyOption(t,r,t.options[r]);void 0!==l&&(t.options[r]=l)}},getEventProperties:function(t,e){var o={};return plugins.forEach((function(n){"function"==typeof n.eventProperties&&_extends(o,n.eventProperties.call(e[n.pluginName],t))})),o},modifyOption:function(t,e,o){var n;return plugins.forEach((function(r){t[r.pluginName]&&r.optionListeners&&"function"==typeof r.optionListeners[e]&&(n=r.optionListeners[e].call(t[r.pluginName],o))})),n}};function dispatchEvent(t){var e=t.sortable,o=t.rootEl,n=t.name,r=t.targetEl,l=t.cloneEl,a=t.toEl,i=t.fromEl,s=t.oldIndex,c=t.newIndex,d=t.oldDraggableIndex,u=t.newDraggableIndex,g=t.originalEvent,h=t.putSortable,p=t.extraEventProperties;if(e=e||o&&o[expando]){var f,m=e.options,v="on"+n.charAt(0).toUpperCase()+n.substr(1);!window.CustomEvent||IE11OrLess||Edge?(f=document.createEvent("Event")).initEvent(n,!0,!0):f=new CustomEvent(n,{bubbles:!0,cancelable:!0}),f.to=a||o,f.from=i||o,f.item=r||o,f.clone=l,f.oldIndex=s,f.newIndex=c,f.oldDraggableIndex=d,f.newDraggableIndex=u,f.originalEvent=g,f.pullMode=h?h.lastPutMode:void 0;var E=_objectSpread2(_objectSpread2({},p),PluginManager.getEventProperties(n,e));for(var b in E)f[b]=E[b];o&&o.dispatchEvent(f),m[v]&&m[v].call(e,f)}}var _excluded=["evt"],pluginEvent=function(t,e){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=o.evt,r=_objectWithoutProperties(o,_excluded);PluginManager.pluginEvent.bind(Sortable)(t,e,_objectSpread2({dragEl:dragEl,parentEl:parentEl,ghostEl:ghostEl,rootEl:rootEl,nextEl:nextEl,lastDownEl:lastDownEl,cloneEl:cloneEl,cloneHidden:cloneHidden,dragStarted:moved,putSortable:putSortable,activeSortable:Sortable.active,originalEvent:n,oldIndex:oldIndex,oldDraggableIndex:oldDraggableIndex,newIndex:newIndex,newDraggableIndex:newDraggableIndex,hideGhostForTarget:_hideGhostForTarget,unhideGhostForTarget:_unhideGhostForTarget,cloneNowHidden:function(){cloneHidden=!0},cloneNowShown:function(){cloneHidden=!1},dispatchSortableEvent:function(t){_dispatchEvent({sortable:e,name:t,originalEvent:n})}},r))};function _dispatchEvent(t){dispatchEvent(_objectSpread2({putSortable:putSortable,cloneEl:cloneEl,targetEl:dragEl,rootEl:rootEl,oldIndex:oldIndex,oldDraggableIndex:oldDraggableIndex,newIndex:newIndex,newDraggableIndex:newDraggableIndex},t))}var dragEl,parentEl,ghostEl,rootEl,nextEl,lastDownEl,cloneEl,cloneHidden,oldIndex,newIndex,oldDraggableIndex,newDraggableIndex,activeGroup,putSortable,tapEvt,touchEvt,lastDx,lastDy,tapDistanceLeft,tapDistanceTop,moved,lastTarget,lastDirection,targetMoveDistance,ghostRelativeParent,awaitingDragStarted=!1,ignoreNextClick=!1,sortables=[],pastFirstInvertThresh=!1,isCircumstantialInvert=!1,ghostRelativeParentInitialScroll=[],_silent=!1,savedInputChecked=[],documentExists="undefined"!=typeof document,PositionGhostAbsolutely=IOS,CSSFloatProperty=Edge||IE11OrLess?"cssFloat":"float",supportDraggable=documentExists&&!ChromeForAndroid&&!IOS&&"draggable"in document.createElement("div"),supportCssPointerEvents=function(){if(documentExists){if(IE11OrLess)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto","auto"===t.style.pointerEvents}}(),_detectDirection=function(t,e){var o=css(t),n=parseInt(o.width)-parseInt(o.paddingLeft)-parseInt(o.paddingRight)-parseInt(o.borderLeftWidth)-parseInt(o.borderRightWidth),r=getChild(t,0,e),l=getChild(t,1,e),a=r&&css(r),i=l&&css(l),s=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+getRect(r).width,c=i&&parseInt(i.marginLeft)+parseInt(i.marginRight)+getRect(l).width;if("flex"===o.display)return"column"===o.flexDirection||"column-reverse"===o.flexDirection?"vertical":"horizontal";if("grid"===o.display)return o.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(r&&a.float&&"none"!==a.float){var d="left"===a.float?"left":"right";return!l||"both"!==i.clear&&i.clear!==d?"horizontal":"vertical"}return r&&("block"===a.display||"flex"===a.display||"table"===a.display||"grid"===a.display||s>=n&&"none"===o[CSSFloatProperty]||l&&"none"===o[CSSFloatProperty]&&s+c>n)?"vertical":"horizontal"},_dragElInRowColumn=function(t,e,o){var n=o?t.left:t.top,r=o?t.right:t.bottom,l=o?t.width:t.height,a=o?e.left:e.top,i=o?e.right:e.bottom,s=o?e.width:e.height;return n===a||r===i||n+l/2===a+s/2},_detectNearestEmptySortable=function(t,e){var o;return sortables.some((function(n){var r=n[expando].options.emptyInsertThreshold;if(r&&!lastChild(n)){var l=getRect(n),a=t>=l.left-r&&t<=l.right+r,i=e>=l.top-r&&e<=l.bottom+r;return a&&i?o=n:void 0}})),o},_prepareGroup=function(t){function e(t,o){return function(n,r,l,a){var i=n.options.group.name&&r.options.group.name&&n.options.group.name===r.options.group.name;if(null==t&&(o||i))return!0;if(null==t||!1===t)return!1;if(o&&"clone"===t)return t;if("function"==typeof t)return e(t(n,r,l,a),o)(n,r,l,a);var s=(o?n:r).options.group.name;return!0===t||"string"==typeof t&&t===s||t.join&&t.indexOf(s)>-1}}var o={},n=t.group;n&&"object"==_typeof(n)||(n={name:n}),o.name=n.name,o.checkPull=e(n.pull,!0),o.checkPut=e(n.put),o.revertClone=n.revertClone,t.group=o},_hideGhostForTarget=function(){!supportCssPointerEvents&&ghostEl&&css(ghostEl,"display","none")},_unhideGhostForTarget=function(){!supportCssPointerEvents&&ghostEl&&css(ghostEl,"display","")};documentExists&&!ChromeForAndroid&&document.addEventListener("click",(function(t){if(ignoreNextClick)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),ignoreNextClick=!1,!1}),!0);var nearestEmptyInsertDetectEvent=function(t){if(dragEl){t=t.touches?t.touches[0]:t;var e=_detectNearestEmptySortable(t.clientX,t.clientY);if(e){var o={};for(var n in t)t.hasOwnProperty(n)&&(o[n]=t[n]);o.target=o.rootEl=e,o.preventDefault=void 0,o.stopPropagation=void 0,e[expando]._onDragOver(o)}}},_checkOutsideTargetEl=function(t){dragEl&&dragEl.parentNode[expando]._isOutsideThisEl(t.target)};function Sortable(t,e){if(!t||!t.nodeType||1!==t.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=_extends({},e),t[expando]=this;var o={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return _detectDirection(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(t,e){t.setData("Text",e.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==Sortable.supportPointer&&"PointerEvent"in window&&!Safari,emptyInsertThreshold:5};for(var n in PluginManager.initializePlugins(this,t,o),o)!(n in e)&&(e[n]=o[n]);for(var r in _prepareGroup(e),this)"_"===r.charAt(0)&&"function"==typeof this[r]&&(this[r]=this[r].bind(this));this.nativeDraggable=!e.forceFallback&&supportDraggable,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?on(t,"pointerdown",this._onTapStart):(on(t,"mousedown",this._onTapStart),on(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(on(t,"dragover",this),on(t,"dragenter",this)),sortables.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),_extends(this,AnimationStateManager())}function _globalDragOver(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function _onMove(t,e,o,n,r,l,a,i){var s,c,d=t[expando],u=d.options.onMove;return!window.CustomEvent||IE11OrLess||Edge?(s=document.createEvent("Event")).initEvent("move",!0,!0):s=new CustomEvent("move",{bubbles:!0,cancelable:!0}),s.to=e,s.from=t,s.dragged=o,s.draggedRect=n,s.related=r||e,s.relatedRect=l||getRect(e),s.willInsertAfter=i,s.originalEvent=a,t.dispatchEvent(s),u&&(c=u.call(d,s,a)),c}function _disableDraggable(t){t.draggable=!1}function _unsilent(){_silent=!1}function _ghostIsFirst(t,e,o){var n=getRect(getChild(o.el,0,o.options,!0));return e?t.clientX<n.left-10||t.clientY<n.top&&t.clientX<n.right:t.clientY<n.top-10||t.clientY<n.bottom&&t.clientX<n.left}function _ghostIsLast(t,e,o){var n=getRect(lastChild(o.el,o.options.draggable));return e?t.clientX>n.right+10||t.clientX<=n.right&&t.clientY>n.bottom&&t.clientX>=n.left:t.clientX>n.right&&t.clientY>n.top||t.clientX<=n.right&&t.clientY>n.bottom+10}function _getSwapDirection(t,e,o,n,r,l,a,i){var s=n?t.clientY:t.clientX,c=n?o.height:o.width,d=n?o.top:o.left,u=n?o.bottom:o.right,g=!1;if(!a)if(i&&targetMoveDistance<c*r){if(!pastFirstInvertThresh&&(1===lastDirection?s>d+c*l/2:s<u-c*l/2)&&(pastFirstInvertThresh=!0),pastFirstInvertThresh)g=!0;else if(1===lastDirection?s<d+targetMoveDistance:s>u-targetMoveDistance)return-lastDirection}else if(s>d+c*(1-r)/2&&s<u-c*(1-r)/2)return _getInsertDirection(e);return(g=g||a)&&(s<d+c*l/2||s>u-c*l/2)?s>d+c/2?1:-1:0}function _getInsertDirection(t){return index(dragEl)<index(t)?1:-1}function _generateId(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,o=e.length,n=0;o--;)n+=e.charCodeAt(o);return n.toString(36)}function _saveInputCheckedState(t){savedInputChecked.length=0;for(var e=t.getElementsByTagName("input"),o=e.length;o--;){var n=e[o];n.checked&&savedInputChecked.push(n)}}function _nextTick(t){return setTimeout(t,0)}function _cancelNextTick(t){return clearTimeout(t)}Sortable.prototype={constructor:Sortable,_isOutsideThisEl:function(t){this.el.contains(t)||t===this.el||(lastTarget=null)},_getDirection:function(t,e){return"function"==typeof this.options.direction?this.options.direction.call(this,t,e,dragEl):this.options.direction},_onTapStart:function(t){if(t.cancelable){var e=this,o=this.el,n=this.options,r=n.preventOnFilter,l=t.type,a=t.touches&&t.touches[0]||t.pointerType&&"touch"===t.pointerType&&t,i=(a||t).target,s=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||i,c=n.filter;if(_saveInputCheckedState(o),!dragEl&&!(/mousedown|pointerdown/.test(l)&&0!==t.button||n.disabled)&&!s.isContentEditable&&(this.nativeDraggable||!Safari||!i||"SELECT"!==i.tagName.toUpperCase())&&!((i=closest(i,n.draggable,o,!1))&&i.animated||lastDownEl===i)){if(oldIndex=index(i),oldDraggableIndex=index(i,n.draggable),"function"==typeof c){if(c.call(this,t,i,this))return _dispatchEvent({sortable:e,rootEl:s,name:"filter",targetEl:i,toEl:o,fromEl:o}),pluginEvent("filter",e,{evt:t}),void(r&&t.cancelable&&t.preventDefault())}else if(c&&(c=c.split(",").some((function(n){if(n=closest(s,n.trim(),o,!1))return _dispatchEvent({sortable:e,rootEl:n,name:"filter",targetEl:i,fromEl:o,toEl:o}),pluginEvent("filter",e,{evt:t}),!0}))))return void(r&&t.cancelable&&t.preventDefault());n.handle&&!closest(s,n.handle,o,!1)||this._prepareDragStart(t,a,i)}}},_prepareDragStart:function(t,e,o){var n,r=this,l=r.el,a=r.options,i=l.ownerDocument;if(o&&!dragEl&&o.parentNode===l){var s=getRect(o);if(rootEl=l,parentEl=(dragEl=o).parentNode,nextEl=dragEl.nextSibling,lastDownEl=o,activeGroup=a.group,Sortable.dragged=dragEl,tapEvt={target:dragEl,clientX:(e||t).clientX,clientY:(e||t).clientY},tapDistanceLeft=tapEvt.clientX-s.left,tapDistanceTop=tapEvt.clientY-s.top,this._lastX=(e||t).clientX,this._lastY=(e||t).clientY,dragEl.style["will-change"]="all",n=function(){pluginEvent("delayEnded",r,{evt:t}),Sortable.eventCanceled?r._onDrop():(r._disableDelayedDragEvents(),!FireFox&&r.nativeDraggable&&(dragEl.draggable=!0),r._triggerDragStart(t,e),_dispatchEvent({sortable:r,name:"choose",originalEvent:t}),toggleClass(dragEl,a.chosenClass,!0))},a.ignore.split(",").forEach((function(t){find(dragEl,t.trim(),_disableDraggable)})),on(i,"dragover",nearestEmptyInsertDetectEvent),on(i,"mousemove",nearestEmptyInsertDetectEvent),on(i,"touchmove",nearestEmptyInsertDetectEvent),on(i,"mouseup",r._onDrop),on(i,"touchend",r._onDrop),on(i,"touchcancel",r._onDrop),FireFox&&this.nativeDraggable&&(this.options.touchStartThreshold=4,dragEl.draggable=!0),pluginEvent("delayStart",this,{evt:t}),!a.delay||a.delayOnTouchOnly&&!e||this.nativeDraggable&&(Edge||IE11OrLess))n();else{if(Sortable.eventCanceled)return void this._onDrop();on(i,"mouseup",r._disableDelayedDrag),on(i,"touchend",r._disableDelayedDrag),on(i,"touchcancel",r._disableDelayedDrag),on(i,"mousemove",r._delayedDragTouchMoveHandler),on(i,"touchmove",r._delayedDragTouchMoveHandler),a.supportPointer&&on(i,"pointermove",r._delayedDragTouchMoveHandler),r._dragStartTimer=setTimeout(n,a.delay)}}},_delayedDragTouchMoveHandler:function(t){var e=t.touches?t.touches[0]:t;Math.max(Math.abs(e.clientX-this._lastX),Math.abs(e.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){dragEl&&_disableDraggable(dragEl),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;off(t,"mouseup",this._disableDelayedDrag),off(t,"touchend",this._disableDelayedDrag),off(t,"touchcancel",this._disableDelayedDrag),off(t,"mousemove",this._delayedDragTouchMoveHandler),off(t,"touchmove",this._delayedDragTouchMoveHandler),off(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,e){e=e||"touch"==t.pointerType&&t,!this.nativeDraggable||e?this.options.supportPointer?on(document,"pointermove",this._onTouchMove):on(document,e?"touchmove":"mousemove",this._onTouchMove):(on(dragEl,"dragend",this),on(rootEl,"dragstart",this._onDragStart));try{document.selection?_nextTick((function(){document.selection.empty()})):window.getSelection().removeAllRanges()}catch(t){}},_dragStarted:function(t,e){if(awaitingDragStarted=!1,rootEl&&dragEl){pluginEvent("dragStarted",this,{evt:e}),this.nativeDraggable&&on(document,"dragover",_checkOutsideTargetEl);var o=this.options;!t&&toggleClass(dragEl,o.dragClass,!1),toggleClass(dragEl,o.ghostClass,!0),Sortable.active=this,t&&this._appendGhost(),_dispatchEvent({sortable:this,name:"start",originalEvent:e})}else this._nulling()},_emulateDragOver:function(){if(touchEvt){this._lastX=touchEvt.clientX,this._lastY=touchEvt.clientY,_hideGhostForTarget();for(var t=document.elementFromPoint(touchEvt.clientX,touchEvt.clientY),e=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(touchEvt.clientX,touchEvt.clientY))!==e;)e=t;if(dragEl.parentNode[expando]._isOutsideThisEl(t),e)do{if(e[expando]){if(e[expando]._onDragOver({clientX:touchEvt.clientX,clientY:touchEvt.clientY,target:t,rootEl:e})&&!this.options.dragoverBubble)break}t=e}while(e=e.parentNode);_unhideGhostForTarget()}},_onTouchMove:function(t){if(tapEvt){var e=this.options,o=e.fallbackTolerance,n=e.fallbackOffset,r=t.touches?t.touches[0]:t,l=ghostEl&&matrix(ghostEl,!0),a=ghostEl&&l&&l.a,i=ghostEl&&l&&l.d,s=PositionGhostAbsolutely&&ghostRelativeParent&&getRelativeScrollOffset(ghostRelativeParent),c=(r.clientX-tapEvt.clientX+n.x)/(a||1)+(s?s[0]-ghostRelativeParentInitialScroll[0]:0)/(a||1),d=(r.clientY-tapEvt.clientY+n.y)/(i||1)+(s?s[1]-ghostRelativeParentInitialScroll[1]:0)/(i||1);if(!Sortable.active&&!awaitingDragStarted){if(o&&Math.max(Math.abs(r.clientX-this._lastX),Math.abs(r.clientY-this._lastY))<o)return;this._onDragStart(t,!0)}if(ghostEl){l?(l.e+=c-(lastDx||0),l.f+=d-(lastDy||0)):l={a:1,b:0,c:0,d:1,e:c,f:d};var u="matrix(".concat(l.a,",").concat(l.b,",").concat(l.c,",").concat(l.d,",").concat(l.e,",").concat(l.f,")");css(ghostEl,"webkitTransform",u),css(ghostEl,"mozTransform",u),css(ghostEl,"msTransform",u),css(ghostEl,"transform",u),lastDx=c,lastDy=d,touchEvt=r}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!ghostEl){var t=this.options.fallbackOnBody?document.body:rootEl,e=getRect(dragEl,!0,PositionGhostAbsolutely,!0,t),o=this.options;if(PositionGhostAbsolutely){for(ghostRelativeParent=t;"static"===css(ghostRelativeParent,"position")&&"none"===css(ghostRelativeParent,"transform")&&ghostRelativeParent!==document;)ghostRelativeParent=ghostRelativeParent.parentNode;ghostRelativeParent!==document.body&&ghostRelativeParent!==document.documentElement?(ghostRelativeParent===document&&(ghostRelativeParent=getWindowScrollingElement()),e.top+=ghostRelativeParent.scrollTop,e.left+=ghostRelativeParent.scrollLeft):ghostRelativeParent=getWindowScrollingElement(),ghostRelativeParentInitialScroll=getRelativeScrollOffset(ghostRelativeParent)}toggleClass(ghostEl=dragEl.cloneNode(!0),o.ghostClass,!1),toggleClass(ghostEl,o.fallbackClass,!0),toggleClass(ghostEl,o.dragClass,!0),css(ghostEl,"transition",""),css(ghostEl,"transform",""),css(ghostEl,"box-sizing","border-box"),css(ghostEl,"margin",0),css(ghostEl,"top",e.top),css(ghostEl,"left",e.left),css(ghostEl,"width",e.width),css(ghostEl,"height",e.height),css(ghostEl,"opacity","0.8"),css(ghostEl,"position",PositionGhostAbsolutely?"absolute":"fixed"),css(ghostEl,"zIndex","100000"),css(ghostEl,"pointerEvents","none"),Sortable.ghost=ghostEl,t.appendChild(ghostEl),css(ghostEl,"transform-origin",tapDistanceLeft/parseInt(ghostEl.style.width)*100+"% "+tapDistanceTop/parseInt(ghostEl.style.height)*100+"%")}},_onDragStart:function(t,e){var o=this,n=t.dataTransfer,r=o.options;pluginEvent("dragStart",this,{evt:t}),Sortable.eventCanceled?this._onDrop():(pluginEvent("setupClone",this),Sortable.eventCanceled||((cloneEl=clone(dragEl)).removeAttribute("id"),cloneEl.draggable=!1,cloneEl.style["will-change"]="",this._hideClone(),toggleClass(cloneEl,this.options.chosenClass,!1),Sortable.clone=cloneEl),o.cloneId=_nextTick((function(){pluginEvent("clone",o),Sortable.eventCanceled||(o.options.removeCloneOnHide||rootEl.insertBefore(cloneEl,dragEl),o._hideClone(),_dispatchEvent({sortable:o,name:"clone"}))})),!e&&toggleClass(dragEl,r.dragClass,!0),e?(ignoreNextClick=!0,o._loopId=setInterval(o._emulateDragOver,50)):(off(document,"mouseup",o._onDrop),off(document,"touchend",o._onDrop),off(document,"touchcancel",o._onDrop),n&&(n.effectAllowed="move",r.setData&&r.setData.call(o,n,dragEl)),on(document,"drop",o),css(dragEl,"transform","translateZ(0)")),awaitingDragStarted=!0,o._dragStartId=_nextTick(o._dragStarted.bind(o,e,t)),on(document,"selectstart",o),moved=!0,Safari&&css(document.body,"user-select","none"))},_onDragOver:function(t){var e,o,n,r,l=this.el,a=t.target,i=this.options,s=i.group,c=Sortable.active,d=activeGroup===s,u=i.sort,g=putSortable||c,h=this,p=!1;if(!_silent){if(void 0!==t.preventDefault&&t.cancelable&&t.preventDefault(),a=closest(a,i.draggable,l,!0),A("dragOver"),Sortable.eventCanceled)return p;if(dragEl.contains(t.target)||a.animated&&a.animatingX&&a.animatingY||h._ignoreWhileAnimating===a)return M(!1);if(ignoreNextClick=!1,c&&!i.disabled&&(d?u||(n=parentEl!==rootEl):putSortable===this||(this.lastPutMode=activeGroup.checkPull(this,c,dragEl,t))&&s.checkPut(this,c,dragEl,t))){if(r="vertical"===this._getDirection(t,a),e=getRect(dragEl),A("dragOverValid"),Sortable.eventCanceled)return p;if(n)return parentEl=rootEl,P(),this._hideClone(),A("revert"),Sortable.eventCanceled||(nextEl?rootEl.insertBefore(dragEl,nextEl):rootEl.appendChild(dragEl)),M(!0);var f=lastChild(l,i.draggable);if(!f||_ghostIsLast(t,r,this)&&!f.animated){if(f===dragEl)return M(!1);if(f&&l===t.target&&(a=f),a&&(o=getRect(a)),!1!==_onMove(rootEl,l,dragEl,e,a,o,t,!!a))return P(),f&&f.nextSibling?l.insertBefore(dragEl,f.nextSibling):l.appendChild(dragEl),parentEl=l,R(),M(!0)}else if(f&&_ghostIsFirst(t,r,this)){var m=getChild(l,0,i,!0);if(m===dragEl)return M(!1);if(o=getRect(a=m),!1!==_onMove(rootEl,l,dragEl,e,a,o,t,!1))return P(),l.insertBefore(dragEl,m),parentEl=l,R(),M(!0)}else if(a.parentNode===l){o=getRect(a);var v,E,b,S=dragEl.parentNode!==l,D=!_dragElInRowColumn(dragEl.animated&&dragEl.toRect||e,a.animated&&a.toRect||o,r),w=r?"top":"left",_=isScrolledPast(a,"top","top")||isScrolledPast(dragEl,"top","top"),y=_?_.scrollTop:void 0;if(lastTarget!==a&&(E=o[w],pastFirstInvertThresh=!1,isCircumstantialInvert=!D&&i.invertSwap||S),0!==(v=_getSwapDirection(t,a,o,r,D?1:i.swapThreshold,null==i.invertedSwapThreshold?i.swapThreshold:i.invertedSwapThreshold,isCircumstantialInvert,lastTarget===a))){var x=index(dragEl);do{x-=v,b=parentEl.children[x]}while(b&&("none"===css(b,"display")||b===ghostEl))}if(0===v||b===a)return M(!1);lastTarget=a,lastDirection=v;var C=a.nextElementSibling,I=!1,T=_onMove(rootEl,l,dragEl,e,a,o,t,I=1===v);if(!1!==T)return 1!==T&&-1!==T||(I=1===T),_silent=!0,setTimeout(_unsilent,30),P(),I&&!C?l.appendChild(dragEl):a.parentNode.insertBefore(dragEl,I?C:a),_&&scrollBy(_,0,y-_.scrollTop),parentEl=dragEl.parentNode,void 0===E||isCircumstantialInvert||(targetMoveDistance=Math.abs(E-getRect(a)[w])),R(),M(!0)}if(l.contains(dragEl))return M(!1)}return!1}function A(i,s){pluginEvent(i,h,_objectSpread2({evt:t,isOwner:d,axis:r?"vertical":"horizontal",revert:n,dragRect:e,targetRect:o,canSort:u,fromSortable:g,target:a,completed:M,onMove:function(o,n){return _onMove(rootEl,l,dragEl,e,o,getRect(o),t,n)},changed:R},s))}function P(){A("dragOverAnimationCapture"),h.captureAnimationState(),h!==g&&g.captureAnimationState()}function M(e){return A("dragOverCompleted",{insertion:e}),e&&(d?c._hideClone():c._showClone(h),h!==g&&(toggleClass(dragEl,putSortable?putSortable.options.ghostClass:c.options.ghostClass,!1),toggleClass(dragEl,i.ghostClass,!0)),putSortable!==h&&h!==Sortable.active?putSortable=h:h===Sortable.active&&putSortable&&(putSortable=null),g===h&&(h._ignoreWhileAnimating=a),h.animateAll((function(){A("dragOverAnimationComplete"),h._ignoreWhileAnimating=null})),h!==g&&(g.animateAll(),g._ignoreWhileAnimating=null)),(a===dragEl&&!dragEl.animated||a===l&&!a.animated)&&(lastTarget=null),i.dragoverBubble||t.rootEl||a===document||(dragEl.parentNode[expando]._isOutsideThisEl(t.target),!e&&nearestEmptyInsertDetectEvent(t)),!i.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),p=!0}function R(){newIndex=index(dragEl),newDraggableIndex=index(dragEl,i.draggable),_dispatchEvent({sortable:h,name:"change",toEl:l,newIndex:newIndex,newDraggableIndex:newDraggableIndex,originalEvent:t})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){off(document,"mousemove",this._onTouchMove),off(document,"touchmove",this._onTouchMove),off(document,"pointermove",this._onTouchMove),off(document,"dragover",nearestEmptyInsertDetectEvent),off(document,"mousemove",nearestEmptyInsertDetectEvent),off(document,"touchmove",nearestEmptyInsertDetectEvent)},_offUpEvents:function(){var t=this.el.ownerDocument;off(t,"mouseup",this._onDrop),off(t,"touchend",this._onDrop),off(t,"pointerup",this._onDrop),off(t,"touchcancel",this._onDrop),off(document,"selectstart",this)},_onDrop:function(t){var e=this.el,o=this.options;newIndex=index(dragEl),newDraggableIndex=index(dragEl,o.draggable),pluginEvent("drop",this,{evt:t}),parentEl=dragEl&&dragEl.parentNode,newIndex=index(dragEl),newDraggableIndex=index(dragEl,o.draggable),Sortable.eventCanceled||(awaitingDragStarted=!1,isCircumstantialInvert=!1,pastFirstInvertThresh=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),_cancelNextTick(this.cloneId),_cancelNextTick(this._dragStartId),this.nativeDraggable&&(off(document,"drop",this),off(e,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Safari&&css(document.body,"user-select",""),css(dragEl,"transform",""),t&&(moved&&(t.cancelable&&t.preventDefault(),!o.dropBubble&&t.stopPropagation()),ghostEl&&ghostEl.parentNode&&ghostEl.parentNode.removeChild(ghostEl),(rootEl===parentEl||putSortable&&"clone"!==putSortable.lastPutMode)&&cloneEl&&cloneEl.parentNode&&cloneEl.parentNode.removeChild(cloneEl),dragEl&&(this.nativeDraggable&&off(dragEl,"dragend",this),_disableDraggable(dragEl),dragEl.style["will-change"]="",moved&&!awaitingDragStarted&&toggleClass(dragEl,putSortable?putSortable.options.ghostClass:this.options.ghostClass,!1),toggleClass(dragEl,this.options.chosenClass,!1),_dispatchEvent({sortable:this,name:"unchoose",toEl:parentEl,newIndex:null,newDraggableIndex:null,originalEvent:t}),rootEl!==parentEl?(newIndex>=0&&(_dispatchEvent({rootEl:parentEl,name:"add",toEl:parentEl,fromEl:rootEl,originalEvent:t}),_dispatchEvent({sortable:this,name:"remove",toEl:parentEl,originalEvent:t}),_dispatchEvent({rootEl:parentEl,name:"sort",toEl:parentEl,fromEl:rootEl,originalEvent:t}),_dispatchEvent({sortable:this,name:"sort",toEl:parentEl,originalEvent:t})),putSortable&&putSortable.save()):newIndex!==oldIndex&&newIndex>=0&&(_dispatchEvent({sortable:this,name:"update",toEl:parentEl,originalEvent:t}),_dispatchEvent({sortable:this,name:"sort",toEl:parentEl,originalEvent:t})),Sortable.active&&(null!=newIndex&&-1!==newIndex||(newIndex=oldIndex,newDraggableIndex=oldDraggableIndex),_dispatchEvent({sortable:this,name:"end",toEl:parentEl,originalEvent:t}),this.save())))),this._nulling()},_nulling:function(){pluginEvent("nulling",this),rootEl=dragEl=parentEl=ghostEl=nextEl=cloneEl=lastDownEl=cloneHidden=tapEvt=touchEvt=moved=newIndex=newDraggableIndex=oldIndex=oldDraggableIndex=lastTarget=lastDirection=putSortable=activeGroup=Sortable.dragged=Sortable.ghost=Sortable.clone=Sortable.active=null,savedInputChecked.forEach((function(t){t.checked=!0})),savedInputChecked.length=lastDx=lastDy=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":dragEl&&(this._onDragOver(t),_globalDragOver(t));break;case"selectstart":t.preventDefault()}},toArray:function(){for(var t,e=[],o=this.el.children,n=0,r=o.length,l=this.options;n<r;n++)closest(t=o[n],l.draggable,this.el,!1)&&e.push(t.getAttribute(l.dataIdAttr)||_generateId(t));return e},sort:function(t,e){var o={},n=this.el;this.toArray().forEach((function(t,e){var r=n.children[e];closest(r,this.options.draggable,n,!1)&&(o[t]=r)}),this),e&&this.captureAnimationState(),t.forEach((function(t){o[t]&&(n.removeChild(o[t]),n.appendChild(o[t]))})),e&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,e){return closest(t,e||this.options.draggable,this.el,!1)},option:function(t,e){var o=this.options;if(void 0===e)return o[t];var n=PluginManager.modifyOption(this,t,e);o[t]=void 0!==n?n:e,"group"===t&&_prepareGroup(o)},destroy:function(){pluginEvent("destroy",this);var t=this.el;t[expando]=null,off(t,"mousedown",this._onTapStart),off(t,"touchstart",this._onTapStart),off(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(off(t,"dragover",this),off(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),(function(t){t.removeAttribute("draggable")})),this._onDrop(),this._disableDelayedDragEvents(),sortables.splice(sortables.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!cloneHidden){if(pluginEvent("hideClone",this),Sortable.eventCanceled)return;css(cloneEl,"display","none"),this.options.removeCloneOnHide&&cloneEl.parentNode&&cloneEl.parentNode.removeChild(cloneEl),cloneHidden=!0}},_showClone:function(t){if("clone"===t.lastPutMode){if(cloneHidden){if(pluginEvent("showClone",this),Sortable.eventCanceled)return;dragEl.parentNode!=rootEl||this.options.group.revertClone?nextEl?rootEl.insertBefore(cloneEl,nextEl):rootEl.appendChild(cloneEl):rootEl.insertBefore(cloneEl,dragEl),this.options.group.revertClone&&this.animate(dragEl,cloneEl),css(cloneEl,"display",""),cloneHidden=!1}}else this._hideClone()}},documentExists&&on(document,"touchmove",(function(t){(Sortable.active||awaitingDragStarted)&&t.cancelable&&t.preventDefault()})),Sortable.utils={on:on,off:off,css:css,find:find,is:function(t,e){return!!closest(t,e,t,!1)},extend:extend,throttle:throttle,closest:closest,toggleClass:toggleClass,clone:clone,index:index,nextTick:_nextTick,cancelNextTick:_cancelNextTick,detectDirection:_detectDirection,getChild:getChild},Sortable.get=function(t){return t[expando]},Sortable.mount=function(){for(var t=arguments.length,e=new Array(t),o=0;o<t;o++)e[o]=arguments[o];e[0].constructor===Array&&(e=e[0]),e.forEach((function(t){if(!t.prototype||!t.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(t));t.utils&&(Sortable.utils=_objectSpread2(_objectSpread2({},Sortable.utils),t.utils)),PluginManager.mount(t)}))},Sortable.create=function(t,e){return new Sortable(t,e)},Sortable.version=version;var scrollEl,scrollRootEl,lastAutoScrollX,lastAutoScrollY,touchEvt$1,pointerElemChangedInterval,autoScrolls=[],scrolling=!1;function AutoScrollPlugin(){function t(){for(var t in this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===t.charAt(0)&&"function"==typeof this[t]&&(this[t]=this[t].bind(this))}return t.prototype={dragStarted:function(t){var e=t.originalEvent;this.sortable.nativeDraggable?on(document,"dragover",this._handleAutoScroll):this.options.supportPointer?on(document,"pointermove",this._handleFallbackAutoScroll):e.touches?on(document,"touchmove",this._handleFallbackAutoScroll):on(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var e=t.originalEvent;this.options.dragOverBubble||e.rootEl||this._handleAutoScroll(e)},drop:function(){this.sortable.nativeDraggable?off(document,"dragover",this._handleAutoScroll):(off(document,"pointermove",this._handleFallbackAutoScroll),off(document,"touchmove",this._handleFallbackAutoScroll),off(document,"mousemove",this._handleFallbackAutoScroll)),clearPointerElemChangedInterval(),clearAutoScrolls(),cancelThrottle()},nulling:function(){touchEvt$1=scrollRootEl=scrollEl=scrolling=pointerElemChangedInterval=lastAutoScrollX=lastAutoScrollY=null,autoScrolls.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(t,e){var o=this,n=(t.touches?t.touches[0]:t).clientX,r=(t.touches?t.touches[0]:t).clientY,l=document.elementFromPoint(n,r);if(touchEvt$1=t,e||this.options.forceAutoScrollFallback||Edge||IE11OrLess||Safari){autoScroll(t,this.options,l,e);var a=getParentAutoScrollElement(l,!0);!scrolling||pointerElemChangedInterval&&n===lastAutoScrollX&&r===lastAutoScrollY||(pointerElemChangedInterval&&clearPointerElemChangedInterval(),pointerElemChangedInterval=setInterval((function(){var l=getParentAutoScrollElement(document.elementFromPoint(n,r),!0);l!==a&&(a=l,clearAutoScrolls()),autoScroll(t,o.options,l,e)}),10),lastAutoScrollX=n,lastAutoScrollY=r)}else{if(!this.options.bubbleScroll||getParentAutoScrollElement(l,!0)===getWindowScrollingElement())return void clearAutoScrolls();autoScroll(t,this.options,getParentAutoScrollElement(l,!1),!1)}}},_extends(t,{pluginName:"scroll",initializeByDefault:!0})}function clearAutoScrolls(){autoScrolls.forEach((function(t){clearInterval(t.pid)})),autoScrolls=[]}function clearPointerElemChangedInterval(){clearInterval(pointerElemChangedInterval)}var lastSwapEl,autoScroll=throttle((function(t,e,o,n){if(e.scroll){var r,l=(t.touches?t.touches[0]:t).clientX,a=(t.touches?t.touches[0]:t).clientY,i=e.scrollSensitivity,s=e.scrollSpeed,c=getWindowScrollingElement(),d=!1;scrollRootEl!==o&&(scrollRootEl=o,clearAutoScrolls(),scrollEl=e.scroll,r=e.scrollFn,!0===scrollEl&&(scrollEl=getParentAutoScrollElement(o,!0)));var u=0,g=scrollEl;do{var h=g,p=getRect(h),f=p.top,m=p.bottom,v=p.left,E=p.right,b=p.width,S=p.height,D=void 0,w=void 0,_=h.scrollWidth,y=h.scrollHeight,x=css(h),C=h.scrollLeft,I=h.scrollTop;h===c?(D=b<_&&("auto"===x.overflowX||"scroll"===x.overflowX||"visible"===x.overflowX),w=S<y&&("auto"===x.overflowY||"scroll"===x.overflowY||"visible"===x.overflowY)):(D=b<_&&("auto"===x.overflowX||"scroll"===x.overflowX),w=S<y&&("auto"===x.overflowY||"scroll"===x.overflowY));var T=D&&(Math.abs(E-l)<=i&&C+b<_)-(Math.abs(v-l)<=i&&!!C),A=w&&(Math.abs(m-a)<=i&&I+S<y)-(Math.abs(f-a)<=i&&!!I);if(!autoScrolls[u])for(var P=0;P<=u;P++)autoScrolls[P]||(autoScrolls[P]={});autoScrolls[u].vx==T&&autoScrolls[u].vy==A&&autoScrolls[u].el===h||(autoScrolls[u].el=h,autoScrolls[u].vx=T,autoScrolls[u].vy=A,clearInterval(autoScrolls[u].pid),0==T&&0==A||(d=!0,autoScrolls[u].pid=setInterval(function(){n&&0===this.layer&&Sortable.active._onTouchMove(touchEvt$1);var e=autoScrolls[this.layer].vy?autoScrolls[this.layer].vy*s:0,o=autoScrolls[this.layer].vx?autoScrolls[this.layer].vx*s:0;"function"==typeof r&&"continue"!==r.call(Sortable.dragged.parentNode[expando],o,e,t,touchEvt$1,autoScrolls[this.layer].el)||scrollBy(autoScrolls[this.layer].el,o,e)}.bind({layer:u}),24))),u++}while(e.bubbleScroll&&g!==c&&(g=getParentAutoScrollElement(g,!1)));scrolling=d}}),30),drop=function(t){var e=t.originalEvent,o=t.putSortable,n=t.dragEl,r=t.activeSortable,l=t.dispatchSortableEvent,a=t.hideGhostForTarget,i=t.unhideGhostForTarget;if(e){var s=o||r;a();var c=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e,d=document.elementFromPoint(c.clientX,c.clientY);i(),s&&!s.el.contains(d)&&(l("spill"),this.onSpill({dragEl:n,putSortable:o}))}};function Revert(){}function Remove(){}function SwapPlugin(){function t(){this.defaults={swapClass:"sortable-swap-highlight"}}return t.prototype={dragStart:function(t){var e=t.dragEl;lastSwapEl=e},dragOverValid:function(t){var e=t.completed,o=t.target,n=t.onMove,r=t.activeSortable,l=t.changed,a=t.cancel;if(r.options.swap){var i=this.sortable.el,s=this.options;if(o&&o!==i){var c=lastSwapEl;!1!==n(o)?(toggleClass(o,s.swapClass,!0),lastSwapEl=o):lastSwapEl=null,c&&c!==lastSwapEl&&toggleClass(c,s.swapClass,!1)}l(),e(!0),a()}},drop:function(t){var e=t.activeSortable,o=t.putSortable,n=t.dragEl,r=o||this.sortable,l=this.options;lastSwapEl&&toggleClass(lastSwapEl,l.swapClass,!1),lastSwapEl&&(l.swap||o&&o.options.swap)&&n!==lastSwapEl&&(r.captureAnimationState(),r!==e&&e.captureAnimationState(),swapNodes(n,lastSwapEl),r.animateAll(),r!==e&&e.animateAll())},nulling:function(){lastSwapEl=null}},_extends(t,{pluginName:"swap",eventProperties:function(){return{swapItem:lastSwapEl}}})}function swapNodes(t,e){var o,n,r=t.parentNode,l=e.parentNode;r&&l&&!r.isEqualNode(e)&&!l.isEqualNode(t)&&(o=index(t),n=index(e),r.isEqualNode(l)&&o<n&&n++,r.insertBefore(e,r.children[o]),l.insertBefore(t,l.children[n]))}Revert.prototype={startIndex:null,dragStart:function(t){var e=t.oldDraggableIndex;this.startIndex=e},onSpill:function(t){var e=t.dragEl,o=t.putSortable;this.sortable.captureAnimationState(),o&&o.captureAnimationState();var n=getChild(this.sortable.el,this.startIndex,this.options);n?this.sortable.el.insertBefore(e,n):this.sortable.el.appendChild(e),this.sortable.animateAll(),o&&o.animateAll()},drop:drop},_extends(Revert,{pluginName:"revertOnSpill"}),Remove.prototype={onSpill:function(t){var e=t.dragEl,o=t.putSortable||this.sortable;o.captureAnimationState(),e.parentNode&&e.parentNode.removeChild(e),o.animateAll()},drop:drop},_extends(Remove,{pluginName:"removeOnSpill"});var lastMultiDragSelect,multiDragSortable,dragEl$1,clonesFromRect,clonesHidden,multiDragElements=[],multiDragClones=[],initialFolding=!1,folding=!1,dragStarted=!1;function MultiDragPlugin(){function t(t){for(var e in this)"_"===e.charAt(0)&&"function"==typeof this[e]&&(this[e]=this[e].bind(this));t.options.avoidImplicitDeselect||(t.options.supportPointer?on(document,"pointerup",this._deselectMultiDrag):(on(document,"mouseup",this._deselectMultiDrag),on(document,"touchend",this._deselectMultiDrag))),on(document,"keydown",this._checkKeyDown),on(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,avoidImplicitDeselect:!1,setData:function(e,o){var n="";multiDragElements.length&&multiDragSortable===t?multiDragElements.forEach((function(t,e){n+=(e?", ":"")+t.textContent})):n=o.textContent,e.setData("Text",n)}}}return t.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(t){var e=t.dragEl;dragEl$1=e},delayEnded:function(){this.isMultiDrag=~multiDragElements.indexOf(dragEl$1)},setupClone:function(t){var e=t.sortable,o=t.cancel;if(this.isMultiDrag){for(var n=0;n<multiDragElements.length;n++)multiDragClones.push(clone(multiDragElements[n])),multiDragClones[n].sortableIndex=multiDragElements[n].sortableIndex,multiDragClones[n].draggable=!1,multiDragClones[n].style["will-change"]="",toggleClass(multiDragClones[n],this.options.selectedClass,!1),multiDragElements[n]===dragEl$1&&toggleClass(multiDragClones[n],this.options.chosenClass,!1);e._hideClone(),o()}},clone:function(t){var e=t.sortable,o=t.rootEl,n=t.dispatchSortableEvent,r=t.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||multiDragElements.length&&multiDragSortable===e&&(insertMultiDragClones(!0,o),n("clone"),r()))},showClone:function(t){var e=t.cloneNowShown,o=t.rootEl,n=t.cancel;this.isMultiDrag&&(insertMultiDragClones(!1,o),multiDragClones.forEach((function(t){css(t,"display","")})),e(),clonesHidden=!1,n())},hideClone:function(t){var e=this,o=(t.sortable,t.cloneNowHidden),n=t.cancel;this.isMultiDrag&&(multiDragClones.forEach((function(t){css(t,"display","none"),e.options.removeCloneOnHide&&t.parentNode&&t.parentNode.removeChild(t)})),o(),clonesHidden=!0,n())},dragStartGlobal:function(t){t.sortable;!this.isMultiDrag&&multiDragSortable&&multiDragSortable.multiDrag._deselectMultiDrag(),multiDragElements.forEach((function(t){t.sortableIndex=index(t)})),multiDragElements=multiDragElements.sort((function(t,e){return t.sortableIndex-e.sortableIndex})),dragStarted=!0},dragStarted:function(t){var e=this,o=t.sortable;if(this.isMultiDrag){if(this.options.sort&&(o.captureAnimationState(),this.options.animation)){multiDragElements.forEach((function(t){t!==dragEl$1&&css(t,"position","absolute")}));var n=getRect(dragEl$1,!1,!0,!0);multiDragElements.forEach((function(t){t!==dragEl$1&&setRect(t,n)})),folding=!0,initialFolding=!0}o.animateAll((function(){folding=!1,initialFolding=!1,e.options.animation&&multiDragElements.forEach((function(t){unsetRect(t)})),e.options.sort&&removeMultiDragElements()}))}},dragOver:function(t){var e=t.target,o=t.completed,n=t.cancel;folding&&~multiDragElements.indexOf(e)&&(o(!1),n())},revert:function(t){var e=t.fromSortable,o=t.rootEl,n=t.sortable,r=t.dragRect;multiDragElements.length>1&&(multiDragElements.forEach((function(t){n.addAnimationState({target:t,rect:folding?getRect(t):r}),unsetRect(t),t.fromRect=r,e.removeAnimationState(t)})),folding=!1,insertMultiDragElements(!this.options.removeCloneOnHide,o))},dragOverCompleted:function(t){var e=t.sortable,o=t.isOwner,n=t.insertion,r=t.activeSortable,l=t.parentEl,a=t.putSortable,i=this.options;if(n){if(o&&r._hideClone(),initialFolding=!1,i.animation&&multiDragElements.length>1&&(folding||!o&&!r.options.sort&&!a)){var s=getRect(dragEl$1,!1,!0,!0);multiDragElements.forEach((function(t){t!==dragEl$1&&(setRect(t,s),l.appendChild(t))})),folding=!0}if(!o)if(folding||removeMultiDragElements(),multiDragElements.length>1){var c=clonesHidden;r._showClone(e),r.options.animation&&!clonesHidden&&c&&multiDragClones.forEach((function(t){r.addAnimationState({target:t,rect:clonesFromRect}),t.fromRect=clonesFromRect,t.thisAnimationDuration=null}))}else r._showClone(e)}},dragOverAnimationCapture:function(t){var e=t.dragRect,o=t.isOwner,n=t.activeSortable;if(multiDragElements.forEach((function(t){t.thisAnimationDuration=null})),n.options.animation&&!o&&n.multiDrag.isMultiDrag){clonesFromRect=_extends({},e);var r=matrix(dragEl$1,!0);clonesFromRect.top-=r.f,clonesFromRect.left-=r.e}},dragOverAnimationComplete:function(){folding&&(folding=!1,removeMultiDragElements())},drop:function(t){var e=t.originalEvent,o=t.rootEl,n=t.parentEl,r=t.sortable,l=t.dispatchSortableEvent,a=t.oldIndex,i=t.putSortable,s=i||this.sortable;if(e){var c=this.options,d=n.children;if(!dragStarted)if(c.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),toggleClass(dragEl$1,c.selectedClass,!~multiDragElements.indexOf(dragEl$1)),~multiDragElements.indexOf(dragEl$1))multiDragElements.splice(multiDragElements.indexOf(dragEl$1),1),lastMultiDragSelect=null,dispatchEvent({sortable:r,rootEl:o,name:"deselect",targetEl:dragEl$1,originalEvent:e});else{if(multiDragElements.push(dragEl$1),dispatchEvent({sortable:r,rootEl:o,name:"select",targetEl:dragEl$1,originalEvent:e}),e.shiftKey&&lastMultiDragSelect&&r.el.contains(lastMultiDragSelect)){var u,g,h=index(lastMultiDragSelect),p=index(dragEl$1);if(~h&&~p&&h!==p)for(p>h?(g=h,u=p):(g=p,u=h+1);g<u;g++)~multiDragElements.indexOf(d[g])||(toggleClass(d[g],c.selectedClass,!0),multiDragElements.push(d[g]),dispatchEvent({sortable:r,rootEl:o,name:"select",targetEl:d[g],originalEvent:e}))}else lastMultiDragSelect=dragEl$1;multiDragSortable=s}if(dragStarted&&this.isMultiDrag){if(folding=!1,(n[expando].options.sort||n!==o)&&multiDragElements.length>1){var f=getRect(dragEl$1),m=index(dragEl$1,":not(."+this.options.selectedClass+")");if(!initialFolding&&c.animation&&(dragEl$1.thisAnimationDuration=null),s.captureAnimationState(),!initialFolding&&(c.animation&&(dragEl$1.fromRect=f,multiDragElements.forEach((function(t){if(t.thisAnimationDuration=null,t!==dragEl$1){var e=folding?getRect(t):f;t.fromRect=e,s.addAnimationState({target:t,rect:e})}}))),removeMultiDragElements(),multiDragElements.forEach((function(t){d[m]?n.insertBefore(t,d[m]):n.appendChild(t),m++})),a===index(dragEl$1))){var v=!1;multiDragElements.forEach((function(t){t.sortableIndex===index(t)||(v=!0)})),v&&l("update")}multiDragElements.forEach((function(t){unsetRect(t)})),s.animateAll()}multiDragSortable=s}(o===n||i&&"clone"!==i.lastPutMode)&&multiDragClones.forEach((function(t){t.parentNode&&t.parentNode.removeChild(t)}))}},nullingGlobal:function(){this.isMultiDrag=dragStarted=!1,multiDragClones.length=0},destroyGlobal:function(){this._deselectMultiDrag(),off(document,"pointerup",this._deselectMultiDrag),off(document,"mouseup",this._deselectMultiDrag),off(document,"touchend",this._deselectMultiDrag),off(document,"keydown",this._checkKeyDown),off(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(t){if(!(void 0!==dragStarted&&dragStarted||multiDragSortable!==this.sortable||t&&closest(t.target,this.options.draggable,this.sortable.el,!1)||t&&0!==t.button))for(;multiDragElements.length;){var e=multiDragElements[0];toggleClass(e,this.options.selectedClass,!1),multiDragElements.shift(),dispatchEvent({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:e,originalEvent:t})}},_checkKeyDown:function(t){t.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(t){t.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},_extends(t,{pluginName:"multiDrag",utils:{select:function(t){var e=t.parentNode[expando];e&&e.options.multiDrag&&!~multiDragElements.indexOf(t)&&(multiDragSortable&&multiDragSortable!==e&&(multiDragSortable.multiDrag._deselectMultiDrag(),multiDragSortable=e),toggleClass(t,e.options.selectedClass,!0),multiDragElements.push(t))},deselect:function(t){var e=t.parentNode[expando],o=multiDragElements.indexOf(t);e&&e.options.multiDrag&&~o&&(toggleClass(t,e.options.selectedClass,!1),multiDragElements.splice(o,1))}},eventProperties:function(){var t=this,e=[],o=[];return multiDragElements.forEach((function(n){var r;e.push({multiDragElement:n,index:n.sortableIndex}),r=folding&&n!==dragEl$1?-1:folding?index(n,":not(."+t.options.selectedClass+")"):index(n),o.push({multiDragElement:n,index:r})})),{items:_toConsumableArray(multiDragElements),clones:[].concat(multiDragClones),oldIndicies:e,newIndicies:o}},optionListeners:{multiDragKey:function(t){return"ctrl"===(t=t.toLowerCase())?t="Control":t.length>1&&(t=t.charAt(0).toUpperCase()+t.substr(1)),t}}})}function insertMultiDragElements(t,e){multiDragElements.forEach((function(o,n){var r=e.children[o.sortableIndex+(t?Number(n):0)];r?e.insertBefore(o,r):e.appendChild(o)}))}function insertMultiDragClones(t,e){multiDragClones.forEach((function(o,n){var r=e.children[o.sortableIndex+(t?Number(n):0)];r?e.insertBefore(o,r):e.appendChild(o)}))}function removeMultiDragElements(){multiDragElements.forEach((function(t){t!==dragEl$1&&t.parentNode&&t.parentNode.removeChild(t)}))}Sortable.mount(new AutoScrollPlugin),Sortable.mount(Remove,Revert),Sortable.mount(new SwapPlugin),Sortable.mount(new MultiDragPlugin);/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Sortable);
//# sourceMappingURL=sortablejs.bundle.js.map


/***/ }),

/***/ "./assets/cms/page-admin.js":
/*!**********************************!*\
  !*** ./assets/cms/page-admin.js ***!
  \**********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _admin_theme_plugins_custom_sortablejs_sortablejs_bundle_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../admin-theme/plugins/custom/sortablejs/sortablejs.bundle.js */ "./assets/admin-theme/plugins/custom/sortablejs/sortablejs.bundle.js");



let containers = null;
let dropzones = null;
let contentTypeList = null;
let CMSRouting = await CMSAdmin.getRouting();
let addBlockUrl = CMSRouting.generate('admin_networking_initcms_layoutblock_create');
let sortUrl = CMSRouting.generate('admin_networking_initcms_layoutblock_updateLayoutBlockSort');
let deleteUrl = CMSRouting.generate('admin_networking_initcms_layoutblock_deleteAjax');
let lastTranslationSettingsHtml = null;
let pageId = null;

function initDropZone() {


    if (containers.length === 0) {
        return false;
    }

    let contentItems = new _admin_theme_plugins_custom_sortablejs_sortablejs_bundle_js__WEBPACK_IMPORTED_MODULE_0__["default"](contentTypeList, {
        group: {name: 'shared', pull: 'clone', put: false},
        onEnd: function (/**Event*/evt) {
            evt.to.classList.remove('bg-light-primary')
        },
        onChange: function (/**Event*/evt) {
            evt.to.classList.add('bg-light-primary')
        }
    })

    containers.forEach(function (container) {

        let swappable = new _admin_theme_plugins_custom_sortablejs_sortablejs_bundle_js__WEBPACK_IMPORTED_MODULE_0__["default"](container, {
            group: {name: 'shared', pull: true, put: acceptLayoutBlock},
            animation: 150,
            onEnd: function (/**Event*/evt) {
                saveLayoutBlockSort(evt, (response) => {
                    CMSAdmin.createInitCmsMessageBox(response.data.messageStatus, response.data.message);
                })
            },
            onAdd: function (/**CustomEvent*/evt, dragEl) {

                let count = evt.to.querySelectorAll('.draggable').length;
                let item = evt.item;

                if (!item.id) {

                    let dropzone = container.parentElement
                    createItem(item.dataset.contentType, dropzone.dataset.pageId, dropzone.dataset.zone, evt.newIndex - 1)
                        .then((response) => {
                            item.outerHTML = response.data.html
                            CMSAdmin.createInitCmsMessageBox(response.data.messageStatus, response.data.message);
                            saveLayoutBlockSort(evt, (response) => {
                                CMSAdmin.createInitCmsMessageBox(response.data.messageStatus, response.data.message);
                            })

                        })
                        .catch((error) => {
                            let message = error.response.data.detail

                            CMSAdmin.createInitCmsMessageBox('error', message);
                        })
                }

                if (count) {
                    evt.to.querySelector('.empty_layout_block').classList.add("d-none")
                    return
                }

                evt.to.querySelector('.empty_layout_block').classList.remove("d-none")


            },
            onRemove: function (/**Event*/evt) {
                let count = evt.from.querySelectorAll('.draggable').length;
                if (count) {
                    evt.from.querySelector('.empty_layout_block').classList.add("d-none")
                    return
                }

                evt.from.querySelector('.empty_layout_block').classList.remove("d-none")

            }
        });
    })
}

let acceptLayoutBlock = (to, from, dragEl) => {
    let container = to.el
    let contentBlock = dragEl
    let contentTypes = JSON.parse(container.dataset.contentTypes);
    if (contentTypes.length > 0) {
        if (!contentTypes.includes(contentBlock.dataset.contentType)) {
            return false
        }
    }

    let maxItems = container.dataset.maxItems;

    let count = container.querySelectorAll('.draggable').length;

    if (maxItems > 0) {
        if (count >= maxItems) {
            return false
        }
    }

    return true
}

let saveLayoutBlockSort = (event, callback) => {
    // CMSAdmin.createInitCmsMessageBox(xhr.messageStatus, xhr.message);

    let zones = [];
    let pageId = null;
    let adminCode = null;

    dropzones.forEach(function (dropzone) {
        let layoutBlocks = dropzone.querySelectorAll(".draggable");
        let addButtons = dropzone.querySelectorAll(".add-layout");
        let zone = dropzone.dataset.zone

        if (!pageId) {
            pageId = dropzone.dataset.pageId
        }

        if (!adminCode) {
            adminCode = dropzone.dataset.adminCode
        }

        addButtons.forEach(function (addButton, index) {
            addButton.dataset.zone = zone;
            addButton.dataset.sortOrder = index;
        })

        let layoutBlockIds = [];

        layoutBlocks.forEach(function (layoutBlock, index) {
            layoutBlockIds.push(layoutBlock.id);
        })
        zones.push({
            zone: zone,
            layoutBlocks: layoutBlockIds
        })
    })

    submitLayoutSort(zones, pageId, adminCode).then(function (response) {

        let event = new CustomEvent('page-updated')
        document.body.dispatchEvent(event)
        if (callback !== undefined) {
            callback(response)
        }
    })

};

let createItem = async (contentType, pageId, zone, sortOrder) => {

    return await axios.post(addBlockUrl + '?subclass=' + contentType, {
        zone: zone,
        pageId: pageId,
        sortOrder: sortOrder
    }, axiosConfig)
}

let submitLayoutSort = async (zones, pageId, adminCode) => {
    return await axios.post(sortUrl, {
        zones: zones,
        pageId: pageId,
        code: adminCode,
    }, axiosConfig)
}
let editBlock = (e) => {
    e.preventDefault();
    let el = e.target;

    if (el.classList.contains('fa-pen-to-square')) {
        el = el.parentElement
    }

    let id = el.dataset.value


    let layoutBlock = document.getElementById('layoutBlock_' + id)
    layoutBlock.querySelector('.edit_block').setAttribute('disabled', true)
    layoutBlock.querySelector('.delete_block').setAttribute('disabled', true)

    let editUrl = CMSRouting.generate('admin_networking_initcms_layoutblock_edit', {id: id})
    let displayBlock = document.getElementById('layoutBlockHtml' + id)
    let editBlock = document.getElementById('editBlockHtml' + id)

    axios.get(editUrl, axiosConfig).then((response) => {
        editBlock.innerHTML = response.data.html
        displayBlock.classList.add('d-none')
        editBlock.classList.remove('d-none')
        document.body.dispatchEvent(new CustomEvent('fields:added'))
    }).catch((error) => {
        let message = error.response.data.detail
        CMSAdmin.createInitCmsMessageBox('error', message);
    })
}

let cancelEditBlock = (e) => {
    let id = e.target.dataset.value
    let displayBlock = document.getElementById('layoutBlockHtml' + id)
    let editBlock = document.getElementById('editBlockHtml' + id)
    let layoutBlock = document.getElementById('layoutBlock_' + id)
    layoutBlock.querySelector('.edit_block').removeAttribute('disabled')
    layoutBlock.querySelector('.delete_block').removeAttribute('disabled')
    editBlock.classList.add('d-none')
    editBlock.innerHTML = ''
    displayBlock.classList.remove('d-none')

}

let saveLayoutBlock = (e) => {
    e.preventDefault();
    let form = e.target.closest('form')
    let config = {
        url: form.action,
        method: form.method,
        data: new FormData(form),
        ...axiosConfig
    }

    if (form.enctype === 'multipart/form-data') {
        config.headers['Content-Type'] = 'multipart/form-data'
    }
    axios.request(config).then((response) => {
        if (response.status === 200) {
            let id = response.data.id
            let displayBlock = document.getElementById('layoutBlockHtml' + id)
            let editBlock = document.getElementById('editBlockHtml' + id)
            let layoutBlock = document.getElementById('layoutBlock_' + id)
            layoutBlock.querySelector('.edit_block').removeAttribute('disabled')
            layoutBlock.querySelector('.delete_block').removeAttribute('disabled')
            editBlock.classList.add('d-none')
            editBlock.innerHTML = ''
            displayBlock.classList.remove('d-none')
            displayBlock.innerHTML = response.data.html
            CMSAdmin.createInitCmsMessageBox(response.data.status, response.data.message);
            let event = new CustomEvent('page-updated')
            document.body.dispatchEvent(event)
        }
    }).catch((error) => {
        let id = error.response.data.id
        let editBlock = document.getElementById('editBlockHtml' + id)
        editBlock.innerHTML = error.response.data.html
        CMSAdmin.createInitCmsMessageBox('error', error.response.data.message);
        document.body.dispatchEvent(new CustomEvent('fields:added'))
    })

}

let toggleActive = (e) => {
    e.preventDefault();
    let el = e.target;
    if (el.classList.contains('ki-outline')) {
        el = el.parentElement
    }
    let icon = el.querySelector('i')
    let id = el.dataset.value
    let displayBlock = document.getElementById('layoutBlockHtml' + id)
    let url = CMSRouting.generate('admin_networking_initcms_layoutblock_toggleActive')

    axios.post(url, {id: id}, axiosConfig).then((response) => {


        CMSAdmin.createInitCmsMessageBox('success', response.data.message);
        if (response.data.active) {
            icon.classList.remove('ki-minus-circle')
            icon.classList.add('ki-check-circle')
            el.classList.remove('btn-light-danger')
            el.classList.add('btn-light-success')
            displayBlock.classList.remove('opacity-25')
            return
        }
        icon.classList.add('ki-minus-circle')
        icon.classList.remove('ki-check-circle')
        el.classList.add('btn-light-danger')
        el.classList.remove('btn-light-success')
        displayBlock.classList.add('opacity-25')
        let event = new CustomEvent('page-updated')
        document.body.dispatchEvent(event)
    }).catch((error) => {
        CMSAdmin.createInitCmsMessageBox('error', error.response.data.message);
    })

}


let deleteBlock = (e) => {
    e.preventDefault();
    let el = e.target;

    if (el.classList.contains('fa-trash')) {
        el = el.parentElement
    }

    let container = el.closest('.draggable-zone')


    Swal.fire({
        html: `Are you sure you want to delete this block?`,
        icon: "warning",
        buttonsStyling: false,
        showCancelButton: true,
        confirmButtonText: "Ok, got it!",
        cancelButtonText: 'Nope, cancel it',
        customClass: {
            confirmButton: "btn btn-danger",
            cancelButton: 'btn btn-primary'
        }
    }).then((result) => {
        if (result.isConfirmed) {
            axios.post(deleteUrl, {
                id: el.dataset.value,
                _method: 'DELETE'
            }).then((response) => {

                document.querySelector('#layoutBlock_' + el.dataset.value).remove()
                CMSAdmin.createInitCmsMessageBox(response.data.messageStatus, response.data.message);
                saveLayoutBlockSort();
                if (container.querySelectorAll('.draggable').length) {
                    container.querySelector('.empty_layout_block').classList.add("d-none")
                    return
                }

                container.querySelector('.empty_layout_block').classList.remove("d-none")

            }).catch((err) => {

                console.log(err)
                CMSAdmin.createInitCmsMessageBox('error', 'Something went wrong');
            })
        }
    })
}

let unlinkTranslation = (e) => {
    e.preventDefault();
    let el = e.target;

    let text = el.dataset.text
    let id = el.dataset.objectId

    Swal.fire({
        html: text,
        icon: "warning",
        buttonsStyling: false,
        showCancelButton: true,
        confirmButtonText: "Ok, got it!",
        cancelButtonText: 'Nope, cancel it',
        customClass: {
            confirmButton: "btn btn-danger",
            cancelButton: 'btn btn-primary'
        }
    }).then((result) => {
        if (result.isConfirmed) {

            let headers = {"X-HTTP-Method-Override": "DELETE", ...axiosConfig.headers}

            axios.post(el.href, {}, {
                headers: headers
            }).then((response) => {
                document.querySelector('#translations').innerHTML = response.data.html
                CMSAdmin.createInitCmsMessageBox('success', response.data.message);
            }).catch((err) => {

                console.log(err)
                CMSAdmin.createInitCmsMessageBox('error', 'Something went wrong');
            })
        }
    })
}

let linkTranslation = (e) => {
    e.preventDefault()

    let el = e.target;

    axios.get(el.href, axiosConfig).then((response) => {
        lastTranslationSettingsHtml = document.querySelector('#translations').innerHTML
        document.querySelector('#translations').innerHTML = response.data.html
    }).catch((err) => {
        console.log(err)
        CMSAdmin.createInitCmsMessageBox('error', 'Something went wrong');
    })
}

let submitTranslationLink = (e) => {
    e.preventDefault()

    let form = e.target.closest('form')

    if (e.submitter.classList.contains('btn-cancel') || e.submitter.classList.contains('cancel')) {
        document.querySelector('#translations').innerHTML = lastTranslationSettingsHtml
        return;
    }

    axios.post(form.action, new FormData(form), axiosConfig).then((response) => {
        document.querySelector('#translations').innerHTML = response.data.html
        CMSAdmin.createInitCmsMessageBox('success', response.data.message);
    }, axiosConfig).catch((err) => {

        if (err.response.data.message) {
            return CMSAdmin.createInitCmsMessageBox('error', err.response.data.message);
        }

        CMSAdmin.createInitCmsMessageBox('error', err.response.data.detail);
    })
}

let submitPageSettings = (e) => {
    e.preventDefault()
    let form = e.target.closest('form')

    form.elements.forEach((item) => {
        item.classList.remove('is-invalid')
    })

    axios.post(form.action, new FormData(form), axiosConfig).then((response) => {
        document.querySelector('#pageStatusSettings').innerHTML = response.data.pageStatusSettings
        CMSAdmin.createInitCmsMessageBox('success', response.data.message);
    }).catch((err) => {
        let data = err.response.data

        data.violations.forEach((item) => {
            let path = item.propertyPath
            let message = item.title
            let field = form.querySelector('[name="' + path + '"]')
            field.classList.add('is-invalid')
            field.setAttribute('required', 'required')

            if (field.nextElementSibling && field.nextElementSibling.classList.contains('invalid-feedback')) {
                field.nextElementSibling.innerHtml = message;
                return
            }
            field.insertAdjacentHTML('afterend', '<div class="invalid-feedback">' + message + '</div>')
        })
    })
}

let updatePageStatus = () => {
    axios.get(CMSRouting.generate('admin_networking_initcms_page_getPageStatus', {id: pageId}), axiosConfig)
        .then((response) => {
            document.querySelector('#pageStatusSettings').innerHTML = response.data.pageStatusSettings
        }).catch((err) => {
        if (err.response.data.message) {
            return CMSAdmin.createInitCmsMessageBox('error', err.response.data.message);
        }

        CMSAdmin.createInitCmsMessageBox('error', err.response.data.detail);
    })
}

let statusDialog = (e) => {
    e.preventDefault()

    let el = e.target;

    if (!el.href) {
        el = el.closest('a')
    }
    let text = el.dataset.text
    Swal.fire({
        html: text,
        icon: "warning",
        buttonsStyling: false,
        showCancelButton: true,
        confirmButtonText: "Ok, got it!",
        cancelButtonText: 'Nope, cancel it',
        customClass: {
            confirmButton: "btn btn-danger",
            cancelButton: 'btn btn-primary'
        }
    }).then((result) => {
        if (result.isConfirmed) {
            axios.post(el.href, axiosConfig).then((response) => {
                if (response.data.redirect) {
                    return window.location = response.data.redirect
                }
            }).catch((err) => {
                if (err.response.data.message) {
                    return CMSAdmin.createInitCmsMessageBox('error', err.response.data.message);
                }

                CMSAdmin.createInitCmsMessageBox('error', err.response.data.detail);
            })

        }
    })

}


KTUtil.onDOMContentLoaded(function () {
    containers = document.querySelectorAll(".draggable-zone");
    dropzones = document.querySelectorAll(".dropzone");
    contentTypeList = document.querySelector("#content_item_list");
    pageId = document.querySelector("meta[name='init-cms-page-id']").getAttribute("content");

    KTUtil.on(document.body, '.delete_block', 'click', (e) => {
        deleteBlock(e)
    })

    KTUtil.on(document.body, '.edit_block', 'click', (e) => {
        editBlock(e)
    })

    KTUtil.on(document.body, '.toggle-active', 'click', (e) => {
        toggleActive(e)
    })

    KTUtil.on(document.body, '[data-dismiss="edit"]', 'click', (e) => {
        cancelEditBlock(e)
    })

    KTUtil.on(document.body, '[data-save="edit"]', 'click', (e) => {
        saveLayoutBlock(e)
    })

    KTUtil.on(document.body, '.translation-dialog-unlink', 'click', (e) => {
        unlinkTranslation(e)
    });

    KTUtil.on(document.body, '.translation-dialog-link', 'click', (e) => {
        linkTranslation(e)
    });

    KTUtil.on(document.body, '#translation-link-form', 'submit', (e) => {
        submitTranslationLink(e)
    });

    KTUtil.on(document.body, '#translate-copy-page-form', 'submit', (e) => {
        submitTranslationLink(e)
    });

    KTUtil.on(document.body, '#page-settings-form', 'submit', (e) => {
        submitPageSettings(e)
    });

    KTUtil.on(document.body, '#page-metadata-form', 'submit', (e) => {
        submitPageSettings(e)
    });

    KTUtil.on(document.body, '.status-dialog-link', 'click', (e) => {
        statusDialog(e)
    });

    document.body.addEventListener('page-updated', (e) => {
        updatePageStatus()
    })


    initDropZone();
})
__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } }, 1);

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/async module */
/******/ 	(() => {
/******/ 		var webpackQueues = typeof Symbol === "function" ? Symbol("webpack queues") : "__webpack_queues__";
/******/ 		var webpackExports = typeof Symbol === "function" ? Symbol("webpack exports") : "__webpack_exports__";
/******/ 		var webpackError = typeof Symbol === "function" ? Symbol("webpack error") : "__webpack_error__";
/******/ 		var resolveQueue = (queue) => {
/******/ 			if(queue && queue.d < 1) {
/******/ 				queue.d = 1;
/******/ 				queue.forEach((fn) => (fn.r--));
/******/ 				queue.forEach((fn) => (fn.r-- ? fn.r++ : fn()));
/******/ 			}
/******/ 		}
/******/ 		var wrapDeps = (deps) => (deps.map((dep) => {
/******/ 			if(dep !== null && typeof dep === "object") {
/******/ 				if(dep[webpackQueues]) return dep;
/******/ 				if(dep.then) {
/******/ 					var queue = [];
/******/ 					queue.d = 0;
/******/ 					dep.then((r) => {
/******/ 						obj[webpackExports] = r;
/******/ 						resolveQueue(queue);
/******/ 					}, (e) => {
/******/ 						obj[webpackError] = e;
/******/ 						resolveQueue(queue);
/******/ 					});
/******/ 					var obj = {};
/******/ 					obj[webpackQueues] = (fn) => (fn(queue));
/******/ 					return obj;
/******/ 				}
/******/ 			}
/******/ 			var ret = {};
/******/ 			ret[webpackQueues] = x => {};
/******/ 			ret[webpackExports] = dep;
/******/ 			return ret;
/******/ 		}));
/******/ 		__webpack_require__.a = (module, body, hasAwait) => {
/******/ 			var queue;
/******/ 			hasAwait && ((queue = []).d = -1);
/******/ 			var depQueues = new Set();
/******/ 			var exports = module.exports;
/******/ 			var currentDeps;
/******/ 			var outerResolve;
/******/ 			var reject;
/******/ 			var promise = new Promise((resolve, rej) => {
/******/ 				reject = rej;
/******/ 				outerResolve = resolve;
/******/ 			});
/******/ 			promise[webpackExports] = exports;
/******/ 			promise[webpackQueues] = (fn) => (queue && fn(queue), depQueues.forEach(fn), promise["catch"](x => {}));
/******/ 			module.exports = promise;
/******/ 			body((deps) => {
/******/ 				currentDeps = wrapDeps(deps);
/******/ 				var fn;
/******/ 				var getResult = () => (currentDeps.map((d) => {
/******/ 					if(d[webpackError]) throw d[webpackError];
/******/ 					return d[webpackExports];
/******/ 				}))
/******/ 				var promise = new Promise((resolve) => {
/******/ 					fn = () => (resolve(getResult));
/******/ 					fn.r = 0;
/******/ 					var fnQueue = (q) => (q !== queue && !depQueues.has(q) && (depQueues.add(q), q && !q.d && (fn.r++, q.push(fn))));
/******/ 					currentDeps.map((dep) => (dep[webpackQueues](fnQueue)));
/******/ 				});
/******/ 				return fn.r ? promise : getResult();
/******/ 			}, (err) => ((err ? reject(promise[webpackError] = err) : outerResolve(exports)), resolveQueue(queue)));
/******/ 			queue && queue.d < 0 && (queue.d = 0);
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module used 'module' so it can't be inlined
/******/ 	var __webpack_exports__ = __webpack_require__("./assets/cms/page-admin.js");
/******/ 	
/******/ })()
;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLHFCQUFxQixPQUFPOzs7QUFHNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxLQUFLOztBQUVMOzs7QUFHQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTs7QUFFYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQSxhQUFhOztBQUViO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQSwyQkFBMkI7O0FBRTNCLGtDQUFrQztBQUNsQztBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsYUFBYTs7QUFFYjtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULEtBQUs7QUFDTDs7QUFFQTtBQUNBLGtGQUFrRixXQUFXO0FBQzdGO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBOztBQUVBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBOztBQUVBO0FBQ0EsYUFBYTs7QUFFYjtBQUNBLEtBQUs7O0FBRUw7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBLEtBQUs7OztBQUdMO0FBQ0EsQ0FBQzs7Ozs7Ozs7VUM3aUJEO1VBQ0E7O1VBRUE7VUFDQTtVQUNBO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7O1VBRUE7VUFDQTs7VUFFQTtVQUNBO1VBQ0E7Ozs7O1dDdEJBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0EsSUFBSTtXQUNKO1dBQ0E7V0FDQSxJQUFJO1dBQ0o7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0EsQ0FBQztXQUNEO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQSxFQUFFO1dBQ0Y7V0FDQSxzR0FBc0c7V0FDdEc7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQSxHQUFHO1dBQ0g7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBLEdBQUc7V0FDSDtXQUNBLEVBQUU7V0FDRjtXQUNBOzs7OztXQ2hFQTtXQUNBO1dBQ0E7V0FDQTtXQUNBLHlDQUF5Qyx3Q0FBd0M7V0FDakY7V0FDQTtXQUNBOzs7OztXQ1BBOzs7OztXQ0FBO1dBQ0E7V0FDQTtXQUNBLHVEQUF1RCxpQkFBaUI7V0FDeEU7V0FDQSxnREFBZ0QsYUFBYTtXQUM3RDs7Ozs7VUVOQTtVQUNBO1VBQ0E7VUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2luaXQtY21zLWJ1bmRsZS8uL2Fzc2V0cy9hZG1pbi10aGVtZS9wbHVnaW5zL2N1c3RvbS9zb3J0YWJsZWpzL3NvcnRhYmxlanMuYnVuZGxlLmpzIiwid2VicGFjazovL2luaXQtY21zLWJ1bmRsZS8uL2Fzc2V0cy9jbXMvcGFnZS1hZG1pbi5qcyIsIndlYnBhY2s6Ly9pbml0LWNtcy1idW5kbGUvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vaW5pdC1jbXMtYnVuZGxlL3dlYnBhY2svcnVudGltZS9hc3luYyBtb2R1bGUiLCJ3ZWJwYWNrOi8vaW5pdC1jbXMtYnVuZGxlL3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly9pbml0LWNtcy1idW5kbGUvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly9pbml0LWNtcy1idW5kbGUvd2VicGFjay9ydW50aW1lL21ha2UgbmFtZXNwYWNlIG9iamVjdCIsIndlYnBhY2s6Ly9pbml0LWNtcy1idW5kbGUvd2VicGFjay9iZWZvcmUtc3RhcnR1cCIsIndlYnBhY2s6Ly9pbml0LWNtcy1idW5kbGUvd2VicGFjay9zdGFydHVwIiwid2VicGFjazovL2luaXQtY21zLWJ1bmRsZS93ZWJwYWNrL2FmdGVyLXN0YXJ0dXAiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqIVxuICogU29ydGFibGUgMS4xNS4wXG4gKiBAYXV0aG9yXHRSdWJhWGEgICA8dHJhc2hAcnViYXhhLm9yZz5cbiAqIEBhdXRob3JcdG93ZW5tICAgIDxvd2VuMjMzNTVAZ21haWwuY29tPlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cbmZ1bmN0aW9uIG93bktleXModCxlKXt2YXIgbz1PYmplY3Qua2V5cyh0KTtpZihPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKXt2YXIgbj1PYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHQpO2UmJihuPW4uZmlsdGVyKChmdW5jdGlvbihlKXtyZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGUpLmVudW1lcmFibGV9KSkpLG8ucHVzaC5hcHBseShvLG4pfXJldHVybiBvfWZ1bmN0aW9uIF9vYmplY3RTcHJlYWQyKHQpe2Zvcih2YXIgZT0xO2U8YXJndW1lbnRzLmxlbmd0aDtlKyspe3ZhciBvPW51bGwhPWFyZ3VtZW50c1tlXT9hcmd1bWVudHNbZV06e307ZSUyP293bktleXMoT2JqZWN0KG8pLCEwKS5mb3JFYWNoKChmdW5jdGlvbihlKXtfZGVmaW5lUHJvcGVydHkodCxlLG9bZV0pfSkpOk9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzP09iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHQsT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMobykpOm93bktleXMoT2JqZWN0KG8pKS5mb3JFYWNoKChmdW5jdGlvbihlKXtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxlLE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IobyxlKSl9KSl9cmV0dXJuIHR9ZnVuY3Rpb24gX3R5cGVvZih0KXtyZXR1cm4gX3R5cGVvZj1cImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJlwic3ltYm9sXCI9PXR5cGVvZiBTeW1ib2wuaXRlcmF0b3I/ZnVuY3Rpb24odCl7cmV0dXJuIHR5cGVvZiB0fTpmdW5jdGlvbih0KXtyZXR1cm4gdCYmXCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZ0LmNvbnN0cnVjdG9yPT09U3ltYm9sJiZ0IT09U3ltYm9sLnByb3RvdHlwZT9cInN5bWJvbFwiOnR5cGVvZiB0fSxfdHlwZW9mKHQpfWZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eSh0LGUsbyl7cmV0dXJuIGUgaW4gdD9PYmplY3QuZGVmaW5lUHJvcGVydHkodCxlLHt2YWx1ZTpvLGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwfSk6dFtlXT1vLHR9ZnVuY3Rpb24gX2V4dGVuZHMoKXtyZXR1cm4gX2V4dGVuZHM9T2JqZWN0LmFzc2lnbnx8ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTE7ZTxhcmd1bWVudHMubGVuZ3RoO2UrKyl7dmFyIG89YXJndW1lbnRzW2VdO2Zvcih2YXIgbiBpbiBvKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvLG4pJiYodFtuXT1vW25dKX1yZXR1cm4gdH0sX2V4dGVuZHMuYXBwbHkodGhpcyxhcmd1bWVudHMpfWZ1bmN0aW9uIF9vYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlKHQsZSl7aWYobnVsbD09dClyZXR1cm57fTt2YXIgbyxuLHI9e30sbD1PYmplY3Qua2V5cyh0KTtmb3Iobj0wO248bC5sZW5ndGg7bisrKW89bFtuXSxlLmluZGV4T2Yobyk+PTB8fChyW29dPXRbb10pO3JldHVybiByfWZ1bmN0aW9uIF9vYmplY3RXaXRob3V0UHJvcGVydGllcyh0LGUpe2lmKG51bGw9PXQpcmV0dXJue307dmFyIG8sbixyPV9vYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlKHQsZSk7aWYoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyl7dmFyIGw9T2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyh0KTtmb3Iobj0wO248bC5sZW5ndGg7bisrKW89bFtuXSxlLmluZGV4T2Yobyk+PTB8fE9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbCh0LG8pJiYocltvXT10W29dKX1yZXR1cm4gcn1mdW5jdGlvbiBfdG9Db25zdW1hYmxlQXJyYXkodCl7cmV0dXJuIF9hcnJheVdpdGhvdXRIb2xlcyh0KXx8X2l0ZXJhYmxlVG9BcnJheSh0KXx8X3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KHQpfHxfbm9uSXRlcmFibGVTcHJlYWQoKX1mdW5jdGlvbiBfYXJyYXlXaXRob3V0SG9sZXModCl7aWYoQXJyYXkuaXNBcnJheSh0KSlyZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkodCl9ZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheSh0KXtpZihcInVuZGVmaW5lZFwiIT10eXBlb2YgU3ltYm9sJiZudWxsIT10W1N5bWJvbC5pdGVyYXRvcl18fG51bGwhPXRbXCJAQGl0ZXJhdG9yXCJdKXJldHVybiBBcnJheS5mcm9tKHQpfWZ1bmN0aW9uIF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheSh0LGUpe2lmKHQpe2lmKFwic3RyaW5nXCI9PXR5cGVvZiB0KXJldHVybiBfYXJyYXlMaWtlVG9BcnJheSh0LGUpO3ZhciBvPU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0KS5zbGljZSg4LC0xKTtyZXR1cm5cIk9iamVjdFwiPT09byYmdC5jb25zdHJ1Y3RvciYmKG89dC5jb25zdHJ1Y3Rvci5uYW1lKSxcIk1hcFwiPT09b3x8XCJTZXRcIj09PW8/QXJyYXkuZnJvbSh0KTpcIkFyZ3VtZW50c1wiPT09b3x8L14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3Qobyk/X2FycmF5TGlrZVRvQXJyYXkodCxlKTp2b2lkIDB9fWZ1bmN0aW9uIF9hcnJheUxpa2VUb0FycmF5KHQsZSl7KG51bGw9PWV8fGU+dC5sZW5ndGgpJiYoZT10Lmxlbmd0aCk7Zm9yKHZhciBvPTAsbj1uZXcgQXJyYXkoZSk7bzxlO28rKyluW29dPXRbb107cmV0dXJuIG59ZnVuY3Rpb24gX25vbkl0ZXJhYmxlU3ByZWFkKCl7dGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgYXR0ZW1wdCB0byBzcHJlYWQgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxcbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC5cIil9dmFyIHZlcnNpb249XCIxLjE1LjBcIjtmdW5jdGlvbiB1c2VyQWdlbnQodCl7aWYoXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdyYmd2luZG93Lm5hdmlnYXRvcilyZXR1cm4hIW5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2godCl9dmFyIElFMTFPckxlc3M9dXNlckFnZW50KC8oPzpUcmlkZW50LipydlsgOl0/MTFcXC58bXNpZXxpZW1vYmlsZXxXaW5kb3dzIFBob25lKS9pKSxFZGdlPXVzZXJBZ2VudCgvRWRnZS9pKSxGaXJlRm94PXVzZXJBZ2VudCgvZmlyZWZveC9pKSxTYWZhcmk9dXNlckFnZW50KC9zYWZhcmkvaSkmJiF1c2VyQWdlbnQoL2Nocm9tZS9pKSYmIXVzZXJBZ2VudCgvYW5kcm9pZC9pKSxJT1M9dXNlckFnZW50KC9pUChhZHxvZHxob25lKS9pKSxDaHJvbWVGb3JBbmRyb2lkPXVzZXJBZ2VudCgvY2hyb21lL2kpJiZ1c2VyQWdlbnQoL2FuZHJvaWQvaSksY2FwdHVyZU1vZGU9e2NhcHR1cmU6ITEscGFzc2l2ZTohMX07ZnVuY3Rpb24gb24odCxlLG8pe3QuYWRkRXZlbnRMaXN0ZW5lcihlLG8sIUlFMTFPckxlc3MmJmNhcHR1cmVNb2RlKX1mdW5jdGlvbiBvZmYodCxlLG8pe3QucmVtb3ZlRXZlbnRMaXN0ZW5lcihlLG8sIUlFMTFPckxlc3MmJmNhcHR1cmVNb2RlKX1mdW5jdGlvbiBtYXRjaGVzKHQsZSl7aWYoZSl7aWYoXCI+XCI9PT1lWzBdJiYoZT1lLnN1YnN0cmluZygxKSksdCl0cnl7aWYodC5tYXRjaGVzKXJldHVybiB0Lm1hdGNoZXMoZSk7aWYodC5tc01hdGNoZXNTZWxlY3RvcilyZXR1cm4gdC5tc01hdGNoZXNTZWxlY3RvcihlKTtpZih0LndlYmtpdE1hdGNoZXNTZWxlY3RvcilyZXR1cm4gdC53ZWJraXRNYXRjaGVzU2VsZWN0b3IoZSl9Y2F0Y2godCl7cmV0dXJuITF9cmV0dXJuITF9fWZ1bmN0aW9uIGdldFBhcmVudE9ySG9zdCh0KXtyZXR1cm4gdC5ob3N0JiZ0IT09ZG9jdW1lbnQmJnQuaG9zdC5ub2RlVHlwZT90Lmhvc3Q6dC5wYXJlbnROb2RlfWZ1bmN0aW9uIGNsb3Nlc3QodCxlLG8sbil7aWYodCl7bz1vfHxkb2N1bWVudDtkb3tpZihudWxsIT1lJiYoXCI+XCI9PT1lWzBdP3QucGFyZW50Tm9kZT09PW8mJm1hdGNoZXModCxlKTptYXRjaGVzKHQsZSkpfHxuJiZ0PT09bylyZXR1cm4gdDtpZih0PT09bylicmVha313aGlsZSh0PWdldFBhcmVudE9ySG9zdCh0KSl9cmV0dXJuIG51bGx9dmFyIF90aHJvdHRsZVRpbWVvdXQsUl9TUEFDRT0vXFxzKy9nO2Z1bmN0aW9uIHRvZ2dsZUNsYXNzKHQsZSxvKXtpZih0JiZlKWlmKHQuY2xhc3NMaXN0KXQuY2xhc3NMaXN0W28/XCJhZGRcIjpcInJlbW92ZVwiXShlKTtlbHNle3ZhciBuPShcIiBcIit0LmNsYXNzTmFtZStcIiBcIikucmVwbGFjZShSX1NQQUNFLFwiIFwiKS5yZXBsYWNlKFwiIFwiK2UrXCIgXCIsXCIgXCIpO3QuY2xhc3NOYW1lPShuKyhvP1wiIFwiK2U6XCJcIikpLnJlcGxhY2UoUl9TUEFDRSxcIiBcIil9fWZ1bmN0aW9uIGNzcyh0LGUsbyl7dmFyIG49dCYmdC5zdHlsZTtpZihuKXtpZih2b2lkIDA9PT1vKXJldHVybiBkb2N1bWVudC5kZWZhdWx0VmlldyYmZG9jdW1lbnQuZGVmYXVsdFZpZXcuZ2V0Q29tcHV0ZWRTdHlsZT9vPWRvY3VtZW50LmRlZmF1bHRWaWV3LmdldENvbXB1dGVkU3R5bGUodCxcIlwiKTp0LmN1cnJlbnRTdHlsZSYmKG89dC5jdXJyZW50U3R5bGUpLHZvaWQgMD09PWU/bzpvW2VdO2UgaW4gbnx8LTEhPT1lLmluZGV4T2YoXCJ3ZWJraXRcIil8fChlPVwiLXdlYmtpdC1cIitlKSxuW2VdPW8rKFwic3RyaW5nXCI9PXR5cGVvZiBvP1wiXCI6XCJweFwiKX19ZnVuY3Rpb24gbWF0cml4KHQsZSl7dmFyIG89XCJcIjtpZihcInN0cmluZ1wiPT10eXBlb2YgdClvPXQ7ZWxzZSBkb3t2YXIgbj1jc3ModCxcInRyYW5zZm9ybVwiKTtuJiZcIm5vbmVcIiE9PW4mJihvPW4rXCIgXCIrbyl9d2hpbGUoIWUmJih0PXQucGFyZW50Tm9kZSkpO3ZhciByPXdpbmRvdy5ET01NYXRyaXh8fHdpbmRvdy5XZWJLaXRDU1NNYXRyaXh8fHdpbmRvdy5DU1NNYXRyaXh8fHdpbmRvdy5NU0NTU01hdHJpeDtyZXR1cm4gciYmbmV3IHIobyl9ZnVuY3Rpb24gZmluZCh0LGUsbyl7aWYodCl7dmFyIG49dC5nZXRFbGVtZW50c0J5VGFnTmFtZShlKSxyPTAsbD1uLmxlbmd0aDtpZihvKWZvcig7cjxsO3IrKylvKG5bcl0scik7cmV0dXJuIG59cmV0dXJuW119ZnVuY3Rpb24gZ2V0V2luZG93U2Nyb2xsaW5nRWxlbWVudCgpe3ZhciB0PWRvY3VtZW50LnNjcm9sbGluZ0VsZW1lbnQ7cmV0dXJuIHR8fGRvY3VtZW50LmRvY3VtZW50RWxlbWVudH1mdW5jdGlvbiBnZXRSZWN0KHQsZSxvLG4scil7aWYodC5nZXRCb3VuZGluZ0NsaWVudFJlY3R8fHQ9PT13aW5kb3cpe3ZhciBsLGEsaSxzLGMsZCx1O2lmKHQhPT13aW5kb3cmJnQucGFyZW50Tm9kZSYmdCE9PWdldFdpbmRvd1Njcm9sbGluZ0VsZW1lbnQoKT8oYT0obD10LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpKS50b3AsaT1sLmxlZnQscz1sLmJvdHRvbSxjPWwucmlnaHQsZD1sLmhlaWdodCx1PWwud2lkdGgpOihhPTAsaT0wLHM9d2luZG93LmlubmVySGVpZ2h0LGM9d2luZG93LmlubmVyV2lkdGgsZD13aW5kb3cuaW5uZXJIZWlnaHQsdT13aW5kb3cuaW5uZXJXaWR0aCksKGV8fG8pJiZ0IT09d2luZG93JiYocj1yfHx0LnBhcmVudE5vZGUsIUlFMTFPckxlc3MpKWRve2lmKHImJnIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0JiYoXCJub25lXCIhPT1jc3MocixcInRyYW5zZm9ybVwiKXx8byYmXCJzdGF0aWNcIiE9PWNzcyhyLFwicG9zaXRpb25cIikpKXt2YXIgZz1yLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO2EtPWcudG9wK3BhcnNlSW50KGNzcyhyLFwiYm9yZGVyLXRvcC13aWR0aFwiKSksaS09Zy5sZWZ0K3BhcnNlSW50KGNzcyhyLFwiYm9yZGVyLWxlZnQtd2lkdGhcIikpLHM9YStsLmhlaWdodCxjPWkrbC53aWR0aDticmVha319d2hpbGUocj1yLnBhcmVudE5vZGUpO2lmKG4mJnQhPT13aW5kb3cpe3ZhciBoPW1hdHJpeChyfHx0KSxwPWgmJmguYSxmPWgmJmguZDtoJiYocz0oYS89ZikrKGQvPWYpLGM9KGkvPXApKyh1Lz1wKSl9cmV0dXJue3RvcDphLGxlZnQ6aSxib3R0b206cyxyaWdodDpjLHdpZHRoOnUsaGVpZ2h0OmR9fX1mdW5jdGlvbiBpc1Njcm9sbGVkUGFzdCh0LGUsbyl7Zm9yKHZhciBuPWdldFBhcmVudEF1dG9TY3JvbGxFbGVtZW50KHQsITApLHI9Z2V0UmVjdCh0KVtlXTtuOyl7dmFyIGw9Z2V0UmVjdChuKVtvXTtpZighKFwidG9wXCI9PT1vfHxcImxlZnRcIj09PW8/cj49bDpyPD1sKSlyZXR1cm4gbjtpZihuPT09Z2V0V2luZG93U2Nyb2xsaW5nRWxlbWVudCgpKWJyZWFrO249Z2V0UGFyZW50QXV0b1Njcm9sbEVsZW1lbnQobiwhMSl9cmV0dXJuITF9ZnVuY3Rpb24gZ2V0Q2hpbGQodCxlLG8sbil7Zm9yKHZhciByPTAsbD0wLGE9dC5jaGlsZHJlbjtsPGEubGVuZ3RoOyl7aWYoXCJub25lXCIhPT1hW2xdLnN0eWxlLmRpc3BsYXkmJmFbbF0hPT1Tb3J0YWJsZS5naG9zdCYmKG58fGFbbF0hPT1Tb3J0YWJsZS5kcmFnZ2VkKSYmY2xvc2VzdChhW2xdLG8uZHJhZ2dhYmxlLHQsITEpKXtpZihyPT09ZSlyZXR1cm4gYVtsXTtyKyt9bCsrfXJldHVybiBudWxsfWZ1bmN0aW9uIGxhc3RDaGlsZCh0LGUpe2Zvcih2YXIgbz10Lmxhc3RFbGVtZW50Q2hpbGQ7byYmKG89PT1Tb3J0YWJsZS5naG9zdHx8XCJub25lXCI9PT1jc3MobyxcImRpc3BsYXlcIil8fGUmJiFtYXRjaGVzKG8sZSkpOylvPW8ucHJldmlvdXNFbGVtZW50U2libGluZztyZXR1cm4gb3x8bnVsbH1mdW5jdGlvbiBpbmRleCh0LGUpe3ZhciBvPTA7aWYoIXR8fCF0LnBhcmVudE5vZGUpcmV0dXJuLTE7Zm9yKDt0PXQucHJldmlvdXNFbGVtZW50U2libGluZzspXCJURU1QTEFURVwiPT09dC5ub2RlTmFtZS50b1VwcGVyQ2FzZSgpfHx0PT09U29ydGFibGUuY2xvbmV8fGUmJiFtYXRjaGVzKHQsZSl8fG8rKztyZXR1cm4gb31mdW5jdGlvbiBnZXRSZWxhdGl2ZVNjcm9sbE9mZnNldCh0KXt2YXIgZT0wLG89MCxuPWdldFdpbmRvd1Njcm9sbGluZ0VsZW1lbnQoKTtpZih0KWRve3ZhciByPW1hdHJpeCh0KSxsPXIuYSxhPXIuZDtlKz10LnNjcm9sbExlZnQqbCxvKz10LnNjcm9sbFRvcCphfXdoaWxlKHQhPT1uJiYodD10LnBhcmVudE5vZGUpKTtyZXR1cm5bZSxvXX1mdW5jdGlvbiBpbmRleE9mT2JqZWN0KHQsZSl7Zm9yKHZhciBvIGluIHQpaWYodC5oYXNPd25Qcm9wZXJ0eShvKSlmb3IodmFyIG4gaW4gZSlpZihlLmhhc093blByb3BlcnR5KG4pJiZlW25dPT09dFtvXVtuXSlyZXR1cm4gTnVtYmVyKG8pO3JldHVybi0xfWZ1bmN0aW9uIGdldFBhcmVudEF1dG9TY3JvbGxFbGVtZW50KHQsZSl7aWYoIXR8fCF0LmdldEJvdW5kaW5nQ2xpZW50UmVjdClyZXR1cm4gZ2V0V2luZG93U2Nyb2xsaW5nRWxlbWVudCgpO3ZhciBvPXQsbj0hMTtkb3tpZihvLmNsaWVudFdpZHRoPG8uc2Nyb2xsV2lkdGh8fG8uY2xpZW50SGVpZ2h0PG8uc2Nyb2xsSGVpZ2h0KXt2YXIgcj1jc3Mobyk7aWYoby5jbGllbnRXaWR0aDxvLnNjcm9sbFdpZHRoJiYoXCJhdXRvXCI9PXIub3ZlcmZsb3dYfHxcInNjcm9sbFwiPT1yLm92ZXJmbG93WCl8fG8uY2xpZW50SGVpZ2h0PG8uc2Nyb2xsSGVpZ2h0JiYoXCJhdXRvXCI9PXIub3ZlcmZsb3dZfHxcInNjcm9sbFwiPT1yLm92ZXJmbG93WSkpe2lmKCFvLmdldEJvdW5kaW5nQ2xpZW50UmVjdHx8bz09PWRvY3VtZW50LmJvZHkpcmV0dXJuIGdldFdpbmRvd1Njcm9sbGluZ0VsZW1lbnQoKTtpZihufHxlKXJldHVybiBvO249ITB9fX13aGlsZShvPW8ucGFyZW50Tm9kZSk7cmV0dXJuIGdldFdpbmRvd1Njcm9sbGluZ0VsZW1lbnQoKX1mdW5jdGlvbiBleHRlbmQodCxlKXtpZih0JiZlKWZvcih2YXIgbyBpbiBlKWUuaGFzT3duUHJvcGVydHkobykmJih0W29dPWVbb10pO3JldHVybiB0fWZ1bmN0aW9uIGlzUmVjdEVxdWFsKHQsZSl7cmV0dXJuIE1hdGgucm91bmQodC50b3ApPT09TWF0aC5yb3VuZChlLnRvcCkmJk1hdGgucm91bmQodC5sZWZ0KT09PU1hdGgucm91bmQoZS5sZWZ0KSYmTWF0aC5yb3VuZCh0LmhlaWdodCk9PT1NYXRoLnJvdW5kKGUuaGVpZ2h0KSYmTWF0aC5yb3VuZCh0LndpZHRoKT09PU1hdGgucm91bmQoZS53aWR0aCl9ZnVuY3Rpb24gdGhyb3R0bGUodCxlKXtyZXR1cm4gZnVuY3Rpb24oKXtpZighX3Rocm90dGxlVGltZW91dCl7dmFyIG89YXJndW1lbnRzOzE9PT1vLmxlbmd0aD90LmNhbGwodGhpcyxvWzBdKTp0LmFwcGx5KHRoaXMsbyksX3Rocm90dGxlVGltZW91dD1zZXRUaW1lb3V0KChmdW5jdGlvbigpe190aHJvdHRsZVRpbWVvdXQ9dm9pZCAwfSksZSl9fX1mdW5jdGlvbiBjYW5jZWxUaHJvdHRsZSgpe2NsZWFyVGltZW91dChfdGhyb3R0bGVUaW1lb3V0KSxfdGhyb3R0bGVUaW1lb3V0PXZvaWQgMH1mdW5jdGlvbiBzY3JvbGxCeSh0LGUsbyl7dC5zY3JvbGxMZWZ0Kz1lLHQuc2Nyb2xsVG9wKz1vfWZ1bmN0aW9uIGNsb25lKHQpe3ZhciBlPXdpbmRvdy5Qb2x5bWVyLG89d2luZG93LmpRdWVyeXx8d2luZG93LlplcHRvO3JldHVybiBlJiZlLmRvbT9lLmRvbSh0KS5jbG9uZU5vZGUoITApOm8/byh0KS5jbG9uZSghMClbMF06dC5jbG9uZU5vZGUoITApfWZ1bmN0aW9uIHNldFJlY3QodCxlKXtjc3ModCxcInBvc2l0aW9uXCIsXCJhYnNvbHV0ZVwiKSxjc3ModCxcInRvcFwiLGUudG9wKSxjc3ModCxcImxlZnRcIixlLmxlZnQpLGNzcyh0LFwid2lkdGhcIixlLndpZHRoKSxjc3ModCxcImhlaWdodFwiLGUuaGVpZ2h0KX1mdW5jdGlvbiB1bnNldFJlY3QodCl7Y3NzKHQsXCJwb3NpdGlvblwiLFwiXCIpLGNzcyh0LFwidG9wXCIsXCJcIiksY3NzKHQsXCJsZWZ0XCIsXCJcIiksY3NzKHQsXCJ3aWR0aFwiLFwiXCIpLGNzcyh0LFwiaGVpZ2h0XCIsXCJcIil9dmFyIGV4cGFuZG89XCJTb3J0YWJsZVwiKyhuZXcgRGF0ZSkuZ2V0VGltZSgpO2Z1bmN0aW9uIEFuaW1hdGlvblN0YXRlTWFuYWdlcigpe3ZhciB0LGU9W107cmV0dXJue2NhcHR1cmVBbmltYXRpb25TdGF0ZTpmdW5jdGlvbigpeyhlPVtdLHRoaXMub3B0aW9ucy5hbmltYXRpb24pJiZbXS5zbGljZS5jYWxsKHRoaXMuZWwuY2hpbGRyZW4pLmZvckVhY2goKGZ1bmN0aW9uKHQpe2lmKFwibm9uZVwiIT09Y3NzKHQsXCJkaXNwbGF5XCIpJiZ0IT09U29ydGFibGUuZ2hvc3Qpe2UucHVzaCh7dGFyZ2V0OnQscmVjdDpnZXRSZWN0KHQpfSk7dmFyIG89X29iamVjdFNwcmVhZDIoe30sZVtlLmxlbmd0aC0xXS5yZWN0KTtpZih0LnRoaXNBbmltYXRpb25EdXJhdGlvbil7dmFyIG49bWF0cml4KHQsITApO24mJihvLnRvcC09bi5mLG8ubGVmdC09bi5lKX10LmZyb21SZWN0PW99fSkpfSxhZGRBbmltYXRpb25TdGF0ZTpmdW5jdGlvbih0KXtlLnB1c2godCl9LHJlbW92ZUFuaW1hdGlvblN0YXRlOmZ1bmN0aW9uKHQpe2Uuc3BsaWNlKGluZGV4T2ZPYmplY3QoZSx7dGFyZ2V0OnR9KSwxKX0sYW5pbWF0ZUFsbDpmdW5jdGlvbihvKXt2YXIgbj10aGlzO2lmKCF0aGlzLm9wdGlvbnMuYW5pbWF0aW9uKXJldHVybiBjbGVhclRpbWVvdXQodCksdm9pZChcImZ1bmN0aW9uXCI9PXR5cGVvZiBvJiZvKCkpO3ZhciByPSExLGw9MDtlLmZvckVhY2goKGZ1bmN0aW9uKHQpe3ZhciBlPTAsbz10LnRhcmdldCxhPW8uZnJvbVJlY3QsaT1nZXRSZWN0KG8pLHM9by5wcmV2RnJvbVJlY3QsYz1vLnByZXZUb1JlY3QsZD10LnJlY3QsdT1tYXRyaXgobywhMCk7dSYmKGkudG9wLT11LmYsaS5sZWZ0LT11LmUpLG8udG9SZWN0PWksby50aGlzQW5pbWF0aW9uRHVyYXRpb24mJmlzUmVjdEVxdWFsKHMsaSkmJiFpc1JlY3RFcXVhbChhLGkpJiYoZC50b3AtaS50b3ApLyhkLmxlZnQtaS5sZWZ0KT09KGEudG9wLWkudG9wKS8oYS5sZWZ0LWkubGVmdCkmJihlPWNhbGN1bGF0ZVJlYWxUaW1lKGQscyxjLG4ub3B0aW9ucykpLGlzUmVjdEVxdWFsKGksYSl8fChvLnByZXZGcm9tUmVjdD1hLG8ucHJldlRvUmVjdD1pLGV8fChlPW4ub3B0aW9ucy5hbmltYXRpb24pLG4uYW5pbWF0ZShvLGQsaSxlKSksZSYmKHI9ITAsbD1NYXRoLm1heChsLGUpLGNsZWFyVGltZW91dChvLmFuaW1hdGlvblJlc2V0VGltZXIpLG8uYW5pbWF0aW9uUmVzZXRUaW1lcj1zZXRUaW1lb3V0KChmdW5jdGlvbigpe28uYW5pbWF0aW9uVGltZT0wLG8ucHJldkZyb21SZWN0PW51bGwsby5mcm9tUmVjdD1udWxsLG8ucHJldlRvUmVjdD1udWxsLG8udGhpc0FuaW1hdGlvbkR1cmF0aW9uPW51bGx9KSxlKSxvLnRoaXNBbmltYXRpb25EdXJhdGlvbj1lKX0pKSxjbGVhclRpbWVvdXQodCkscj90PXNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7XCJmdW5jdGlvblwiPT10eXBlb2YgbyYmbygpfSksbCk6XCJmdW5jdGlvblwiPT10eXBlb2YgbyYmbygpLGU9W119LGFuaW1hdGU6ZnVuY3Rpb24odCxlLG8sbil7aWYobil7Y3NzKHQsXCJ0cmFuc2l0aW9uXCIsXCJcIiksY3NzKHQsXCJ0cmFuc2Zvcm1cIixcIlwiKTt2YXIgcj1tYXRyaXgodGhpcy5lbCksbD1yJiZyLmEsYT1yJiZyLmQsaT0oZS5sZWZ0LW8ubGVmdCkvKGx8fDEpLHM9KGUudG9wLW8udG9wKS8oYXx8MSk7dC5hbmltYXRpbmdYPSEhaSx0LmFuaW1hdGluZ1k9ISFzLGNzcyh0LFwidHJhbnNmb3JtXCIsXCJ0cmFuc2xhdGUzZChcIitpK1wicHgsXCIrcytcInB4LDApXCIpLHRoaXMuZm9yUmVwYWludER1bW15PXJlcGFpbnQodCksY3NzKHQsXCJ0cmFuc2l0aW9uXCIsXCJ0cmFuc2Zvcm0gXCIrbitcIm1zXCIrKHRoaXMub3B0aW9ucy5lYXNpbmc/XCIgXCIrdGhpcy5vcHRpb25zLmVhc2luZzpcIlwiKSksY3NzKHQsXCJ0cmFuc2Zvcm1cIixcInRyYW5zbGF0ZTNkKDAsMCwwKVwiKSxcIm51bWJlclwiPT10eXBlb2YgdC5hbmltYXRlZCYmY2xlYXJUaW1lb3V0KHQuYW5pbWF0ZWQpLHQuYW5pbWF0ZWQ9c2V0VGltZW91dCgoZnVuY3Rpb24oKXtjc3ModCxcInRyYW5zaXRpb25cIixcIlwiKSxjc3ModCxcInRyYW5zZm9ybVwiLFwiXCIpLHQuYW5pbWF0ZWQ9ITEsdC5hbmltYXRpbmdYPSExLHQuYW5pbWF0aW5nWT0hMX0pLG4pfX19fWZ1bmN0aW9uIHJlcGFpbnQodCl7cmV0dXJuIHQub2Zmc2V0V2lkdGh9ZnVuY3Rpb24gY2FsY3VsYXRlUmVhbFRpbWUodCxlLG8sbil7cmV0dXJuIE1hdGguc3FydChNYXRoLnBvdyhlLnRvcC10LnRvcCwyKStNYXRoLnBvdyhlLmxlZnQtdC5sZWZ0LDIpKS9NYXRoLnNxcnQoTWF0aC5wb3coZS50b3Atby50b3AsMikrTWF0aC5wb3coZS5sZWZ0LW8ubGVmdCwyKSkqbi5hbmltYXRpb259dmFyIHBsdWdpbnM9W10sZGVmYXVsdHM9e2luaXRpYWxpemVCeURlZmF1bHQ6ITB9LFBsdWdpbk1hbmFnZXI9e21vdW50OmZ1bmN0aW9uKHQpe2Zvcih2YXIgZSBpbiBkZWZhdWx0cylkZWZhdWx0cy5oYXNPd25Qcm9wZXJ0eShlKSYmIShlIGluIHQpJiYodFtlXT1kZWZhdWx0c1tlXSk7cGx1Z2lucy5mb3JFYWNoKChmdW5jdGlvbihlKXtpZihlLnBsdWdpbk5hbWU9PT10LnBsdWdpbk5hbWUpdGhyb3dcIlNvcnRhYmxlOiBDYW5ub3QgbW91bnQgcGx1Z2luIFwiLmNvbmNhdCh0LnBsdWdpbk5hbWUsXCIgbW9yZSB0aGFuIG9uY2VcIil9KSkscGx1Z2lucy5wdXNoKHQpfSxwbHVnaW5FdmVudDpmdW5jdGlvbih0LGUsbyl7dmFyIG49dGhpczt0aGlzLmV2ZW50Q2FuY2VsZWQ9ITEsby5jYW5jZWw9ZnVuY3Rpb24oKXtuLmV2ZW50Q2FuY2VsZWQ9ITB9O3ZhciByPXQrXCJHbG9iYWxcIjtwbHVnaW5zLmZvckVhY2goKGZ1bmN0aW9uKG4pe2Vbbi5wbHVnaW5OYW1lXSYmKGVbbi5wbHVnaW5OYW1lXVtyXSYmZVtuLnBsdWdpbk5hbWVdW3JdKF9vYmplY3RTcHJlYWQyKHtzb3J0YWJsZTplfSxvKSksZS5vcHRpb25zW24ucGx1Z2luTmFtZV0mJmVbbi5wbHVnaW5OYW1lXVt0XSYmZVtuLnBsdWdpbk5hbWVdW3RdKF9vYmplY3RTcHJlYWQyKHtzb3J0YWJsZTplfSxvKSkpfSkpfSxpbml0aWFsaXplUGx1Z2luczpmdW5jdGlvbih0LGUsbyxuKXtmb3IodmFyIHIgaW4gcGx1Z2lucy5mb3JFYWNoKChmdW5jdGlvbihuKXt2YXIgcj1uLnBsdWdpbk5hbWU7aWYodC5vcHRpb25zW3JdfHxuLmluaXRpYWxpemVCeURlZmF1bHQpe3ZhciBsPW5ldyBuKHQsZSx0Lm9wdGlvbnMpO2wuc29ydGFibGU9dCxsLm9wdGlvbnM9dC5vcHRpb25zLHRbcl09bCxfZXh0ZW5kcyhvLGwuZGVmYXVsdHMpfX0pKSx0Lm9wdGlvbnMpaWYodC5vcHRpb25zLmhhc093blByb3BlcnR5KHIpKXt2YXIgbD10aGlzLm1vZGlmeU9wdGlvbih0LHIsdC5vcHRpb25zW3JdKTt2b2lkIDAhPT1sJiYodC5vcHRpb25zW3JdPWwpfX0sZ2V0RXZlbnRQcm9wZXJ0aWVzOmZ1bmN0aW9uKHQsZSl7dmFyIG89e307cmV0dXJuIHBsdWdpbnMuZm9yRWFjaCgoZnVuY3Rpb24obil7XCJmdW5jdGlvblwiPT10eXBlb2Ygbi5ldmVudFByb3BlcnRpZXMmJl9leHRlbmRzKG8sbi5ldmVudFByb3BlcnRpZXMuY2FsbChlW24ucGx1Z2luTmFtZV0sdCkpfSkpLG99LG1vZGlmeU9wdGlvbjpmdW5jdGlvbih0LGUsbyl7dmFyIG47cmV0dXJuIHBsdWdpbnMuZm9yRWFjaCgoZnVuY3Rpb24ocil7dFtyLnBsdWdpbk5hbWVdJiZyLm9wdGlvbkxpc3RlbmVycyYmXCJmdW5jdGlvblwiPT10eXBlb2Ygci5vcHRpb25MaXN0ZW5lcnNbZV0mJihuPXIub3B0aW9uTGlzdGVuZXJzW2VdLmNhbGwodFtyLnBsdWdpbk5hbWVdLG8pKX0pKSxufX07ZnVuY3Rpb24gZGlzcGF0Y2hFdmVudCh0KXt2YXIgZT10LnNvcnRhYmxlLG89dC5yb290RWwsbj10Lm5hbWUscj10LnRhcmdldEVsLGw9dC5jbG9uZUVsLGE9dC50b0VsLGk9dC5mcm9tRWwscz10Lm9sZEluZGV4LGM9dC5uZXdJbmRleCxkPXQub2xkRHJhZ2dhYmxlSW5kZXgsdT10Lm5ld0RyYWdnYWJsZUluZGV4LGc9dC5vcmlnaW5hbEV2ZW50LGg9dC5wdXRTb3J0YWJsZSxwPXQuZXh0cmFFdmVudFByb3BlcnRpZXM7aWYoZT1lfHxvJiZvW2V4cGFuZG9dKXt2YXIgZixtPWUub3B0aW9ucyx2PVwib25cIituLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpK24uc3Vic3RyKDEpOyF3aW5kb3cuQ3VzdG9tRXZlbnR8fElFMTFPckxlc3N8fEVkZ2U/KGY9ZG9jdW1lbnQuY3JlYXRlRXZlbnQoXCJFdmVudFwiKSkuaW5pdEV2ZW50KG4sITAsITApOmY9bmV3IEN1c3RvbUV2ZW50KG4se2J1YmJsZXM6ITAsY2FuY2VsYWJsZTohMH0pLGYudG89YXx8byxmLmZyb209aXx8byxmLml0ZW09cnx8byxmLmNsb25lPWwsZi5vbGRJbmRleD1zLGYubmV3SW5kZXg9YyxmLm9sZERyYWdnYWJsZUluZGV4PWQsZi5uZXdEcmFnZ2FibGVJbmRleD11LGYub3JpZ2luYWxFdmVudD1nLGYucHVsbE1vZGU9aD9oLmxhc3RQdXRNb2RlOnZvaWQgMDt2YXIgRT1fb2JqZWN0U3ByZWFkMihfb2JqZWN0U3ByZWFkMih7fSxwKSxQbHVnaW5NYW5hZ2VyLmdldEV2ZW50UHJvcGVydGllcyhuLGUpKTtmb3IodmFyIGIgaW4gRSlmW2JdPUVbYl07byYmby5kaXNwYXRjaEV2ZW50KGYpLG1bdl0mJm1bdl0uY2FsbChlLGYpfX12YXIgX2V4Y2x1ZGVkPVtcImV2dFwiXSxwbHVnaW5FdmVudD1mdW5jdGlvbih0LGUpe3ZhciBvPWFyZ3VtZW50cy5sZW5ndGg+MiYmdm9pZCAwIT09YXJndW1lbnRzWzJdP2FyZ3VtZW50c1syXTp7fSxuPW8uZXZ0LHI9X29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzKG8sX2V4Y2x1ZGVkKTtQbHVnaW5NYW5hZ2VyLnBsdWdpbkV2ZW50LmJpbmQoU29ydGFibGUpKHQsZSxfb2JqZWN0U3ByZWFkMih7ZHJhZ0VsOmRyYWdFbCxwYXJlbnRFbDpwYXJlbnRFbCxnaG9zdEVsOmdob3N0RWwscm9vdEVsOnJvb3RFbCxuZXh0RWw6bmV4dEVsLGxhc3REb3duRWw6bGFzdERvd25FbCxjbG9uZUVsOmNsb25lRWwsY2xvbmVIaWRkZW46Y2xvbmVIaWRkZW4sZHJhZ1N0YXJ0ZWQ6bW92ZWQscHV0U29ydGFibGU6cHV0U29ydGFibGUsYWN0aXZlU29ydGFibGU6U29ydGFibGUuYWN0aXZlLG9yaWdpbmFsRXZlbnQ6bixvbGRJbmRleDpvbGRJbmRleCxvbGREcmFnZ2FibGVJbmRleDpvbGREcmFnZ2FibGVJbmRleCxuZXdJbmRleDpuZXdJbmRleCxuZXdEcmFnZ2FibGVJbmRleDpuZXdEcmFnZ2FibGVJbmRleCxoaWRlR2hvc3RGb3JUYXJnZXQ6X2hpZGVHaG9zdEZvclRhcmdldCx1bmhpZGVHaG9zdEZvclRhcmdldDpfdW5oaWRlR2hvc3RGb3JUYXJnZXQsY2xvbmVOb3dIaWRkZW46ZnVuY3Rpb24oKXtjbG9uZUhpZGRlbj0hMH0sY2xvbmVOb3dTaG93bjpmdW5jdGlvbigpe2Nsb25lSGlkZGVuPSExfSxkaXNwYXRjaFNvcnRhYmxlRXZlbnQ6ZnVuY3Rpb24odCl7X2Rpc3BhdGNoRXZlbnQoe3NvcnRhYmxlOmUsbmFtZTp0LG9yaWdpbmFsRXZlbnQ6bn0pfX0scikpfTtmdW5jdGlvbiBfZGlzcGF0Y2hFdmVudCh0KXtkaXNwYXRjaEV2ZW50KF9vYmplY3RTcHJlYWQyKHtwdXRTb3J0YWJsZTpwdXRTb3J0YWJsZSxjbG9uZUVsOmNsb25lRWwsdGFyZ2V0RWw6ZHJhZ0VsLHJvb3RFbDpyb290RWwsb2xkSW5kZXg6b2xkSW5kZXgsb2xkRHJhZ2dhYmxlSW5kZXg6b2xkRHJhZ2dhYmxlSW5kZXgsbmV3SW5kZXg6bmV3SW5kZXgsbmV3RHJhZ2dhYmxlSW5kZXg6bmV3RHJhZ2dhYmxlSW5kZXh9LHQpKX12YXIgZHJhZ0VsLHBhcmVudEVsLGdob3N0RWwscm9vdEVsLG5leHRFbCxsYXN0RG93bkVsLGNsb25lRWwsY2xvbmVIaWRkZW4sb2xkSW5kZXgsbmV3SW5kZXgsb2xkRHJhZ2dhYmxlSW5kZXgsbmV3RHJhZ2dhYmxlSW5kZXgsYWN0aXZlR3JvdXAscHV0U29ydGFibGUsdGFwRXZ0LHRvdWNoRXZ0LGxhc3REeCxsYXN0RHksdGFwRGlzdGFuY2VMZWZ0LHRhcERpc3RhbmNlVG9wLG1vdmVkLGxhc3RUYXJnZXQsbGFzdERpcmVjdGlvbix0YXJnZXRNb3ZlRGlzdGFuY2UsZ2hvc3RSZWxhdGl2ZVBhcmVudCxhd2FpdGluZ0RyYWdTdGFydGVkPSExLGlnbm9yZU5leHRDbGljaz0hMSxzb3J0YWJsZXM9W10scGFzdEZpcnN0SW52ZXJ0VGhyZXNoPSExLGlzQ2lyY3Vtc3RhbnRpYWxJbnZlcnQ9ITEsZ2hvc3RSZWxhdGl2ZVBhcmVudEluaXRpYWxTY3JvbGw9W10sX3NpbGVudD0hMSxzYXZlZElucHV0Q2hlY2tlZD1bXSxkb2N1bWVudEV4aXN0cz1cInVuZGVmaW5lZFwiIT10eXBlb2YgZG9jdW1lbnQsUG9zaXRpb25HaG9zdEFic29sdXRlbHk9SU9TLENTU0Zsb2F0UHJvcGVydHk9RWRnZXx8SUUxMU9yTGVzcz9cImNzc0Zsb2F0XCI6XCJmbG9hdFwiLHN1cHBvcnREcmFnZ2FibGU9ZG9jdW1lbnRFeGlzdHMmJiFDaHJvbWVGb3JBbmRyb2lkJiYhSU9TJiZcImRyYWdnYWJsZVwiaW4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSxzdXBwb3J0Q3NzUG9pbnRlckV2ZW50cz1mdW5jdGlvbigpe2lmKGRvY3VtZW50RXhpc3RzKXtpZihJRTExT3JMZXNzKXJldHVybiExO3ZhciB0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ4XCIpO3JldHVybiB0LnN0eWxlLmNzc1RleHQ9XCJwb2ludGVyLWV2ZW50czphdXRvXCIsXCJhdXRvXCI9PT10LnN0eWxlLnBvaW50ZXJFdmVudHN9fSgpLF9kZXRlY3REaXJlY3Rpb249ZnVuY3Rpb24odCxlKXt2YXIgbz1jc3ModCksbj1wYXJzZUludChvLndpZHRoKS1wYXJzZUludChvLnBhZGRpbmdMZWZ0KS1wYXJzZUludChvLnBhZGRpbmdSaWdodCktcGFyc2VJbnQoby5ib3JkZXJMZWZ0V2lkdGgpLXBhcnNlSW50KG8uYm9yZGVyUmlnaHRXaWR0aCkscj1nZXRDaGlsZCh0LDAsZSksbD1nZXRDaGlsZCh0LDEsZSksYT1yJiZjc3MociksaT1sJiZjc3MobCkscz1hJiZwYXJzZUludChhLm1hcmdpbkxlZnQpK3BhcnNlSW50KGEubWFyZ2luUmlnaHQpK2dldFJlY3Qocikud2lkdGgsYz1pJiZwYXJzZUludChpLm1hcmdpbkxlZnQpK3BhcnNlSW50KGkubWFyZ2luUmlnaHQpK2dldFJlY3QobCkud2lkdGg7aWYoXCJmbGV4XCI9PT1vLmRpc3BsYXkpcmV0dXJuXCJjb2x1bW5cIj09PW8uZmxleERpcmVjdGlvbnx8XCJjb2x1bW4tcmV2ZXJzZVwiPT09by5mbGV4RGlyZWN0aW9uP1widmVydGljYWxcIjpcImhvcml6b250YWxcIjtpZihcImdyaWRcIj09PW8uZGlzcGxheSlyZXR1cm4gby5ncmlkVGVtcGxhdGVDb2x1bW5zLnNwbGl0KFwiIFwiKS5sZW5ndGg8PTE/XCJ2ZXJ0aWNhbFwiOlwiaG9yaXpvbnRhbFwiO2lmKHImJmEuZmxvYXQmJlwibm9uZVwiIT09YS5mbG9hdCl7dmFyIGQ9XCJsZWZ0XCI9PT1hLmZsb2F0P1wibGVmdFwiOlwicmlnaHRcIjtyZXR1cm4hbHx8XCJib3RoXCIhPT1pLmNsZWFyJiZpLmNsZWFyIT09ZD9cImhvcml6b250YWxcIjpcInZlcnRpY2FsXCJ9cmV0dXJuIHImJihcImJsb2NrXCI9PT1hLmRpc3BsYXl8fFwiZmxleFwiPT09YS5kaXNwbGF5fHxcInRhYmxlXCI9PT1hLmRpc3BsYXl8fFwiZ3JpZFwiPT09YS5kaXNwbGF5fHxzPj1uJiZcIm5vbmVcIj09PW9bQ1NTRmxvYXRQcm9wZXJ0eV18fGwmJlwibm9uZVwiPT09b1tDU1NGbG9hdFByb3BlcnR5XSYmcytjPm4pP1widmVydGljYWxcIjpcImhvcml6b250YWxcIn0sX2RyYWdFbEluUm93Q29sdW1uPWZ1bmN0aW9uKHQsZSxvKXt2YXIgbj1vP3QubGVmdDp0LnRvcCxyPW8/dC5yaWdodDp0LmJvdHRvbSxsPW8/dC53aWR0aDp0LmhlaWdodCxhPW8/ZS5sZWZ0OmUudG9wLGk9bz9lLnJpZ2h0OmUuYm90dG9tLHM9bz9lLndpZHRoOmUuaGVpZ2h0O3JldHVybiBuPT09YXx8cj09PWl8fG4rbC8yPT09YStzLzJ9LF9kZXRlY3ROZWFyZXN0RW1wdHlTb3J0YWJsZT1mdW5jdGlvbih0LGUpe3ZhciBvO3JldHVybiBzb3J0YWJsZXMuc29tZSgoZnVuY3Rpb24obil7dmFyIHI9bltleHBhbmRvXS5vcHRpb25zLmVtcHR5SW5zZXJ0VGhyZXNob2xkO2lmKHImJiFsYXN0Q2hpbGQobikpe3ZhciBsPWdldFJlY3QobiksYT10Pj1sLmxlZnQtciYmdDw9bC5yaWdodCtyLGk9ZT49bC50b3AtciYmZTw9bC5ib3R0b20rcjtyZXR1cm4gYSYmaT9vPW46dm9pZCAwfX0pKSxvfSxfcHJlcGFyZUdyb3VwPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUodCxvKXtyZXR1cm4gZnVuY3Rpb24obixyLGwsYSl7dmFyIGk9bi5vcHRpb25zLmdyb3VwLm5hbWUmJnIub3B0aW9ucy5ncm91cC5uYW1lJiZuLm9wdGlvbnMuZ3JvdXAubmFtZT09PXIub3B0aW9ucy5ncm91cC5uYW1lO2lmKG51bGw9PXQmJihvfHxpKSlyZXR1cm4hMDtpZihudWxsPT10fHwhMT09PXQpcmV0dXJuITE7aWYobyYmXCJjbG9uZVwiPT09dClyZXR1cm4gdDtpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiB0KXJldHVybiBlKHQobixyLGwsYSksbykobixyLGwsYSk7dmFyIHM9KG8/bjpyKS5vcHRpb25zLmdyb3VwLm5hbWU7cmV0dXJuITA9PT10fHxcInN0cmluZ1wiPT10eXBlb2YgdCYmdD09PXN8fHQuam9pbiYmdC5pbmRleE9mKHMpPi0xfX12YXIgbz17fSxuPXQuZ3JvdXA7biYmXCJvYmplY3RcIj09X3R5cGVvZihuKXx8KG49e25hbWU6bn0pLG8ubmFtZT1uLm5hbWUsby5jaGVja1B1bGw9ZShuLnB1bGwsITApLG8uY2hlY2tQdXQ9ZShuLnB1dCksby5yZXZlcnRDbG9uZT1uLnJldmVydENsb25lLHQuZ3JvdXA9b30sX2hpZGVHaG9zdEZvclRhcmdldD1mdW5jdGlvbigpeyFzdXBwb3J0Q3NzUG9pbnRlckV2ZW50cyYmZ2hvc3RFbCYmY3NzKGdob3N0RWwsXCJkaXNwbGF5XCIsXCJub25lXCIpfSxfdW5oaWRlR2hvc3RGb3JUYXJnZXQ9ZnVuY3Rpb24oKXshc3VwcG9ydENzc1BvaW50ZXJFdmVudHMmJmdob3N0RWwmJmNzcyhnaG9zdEVsLFwiZGlzcGxheVwiLFwiXCIpfTtkb2N1bWVudEV4aXN0cyYmIUNocm9tZUZvckFuZHJvaWQmJmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLChmdW5jdGlvbih0KXtpZihpZ25vcmVOZXh0Q2xpY2spcmV0dXJuIHQucHJldmVudERlZmF1bHQoKSx0LnN0b3BQcm9wYWdhdGlvbiYmdC5zdG9wUHJvcGFnYXRpb24oKSx0LnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbiYmdC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKSxpZ25vcmVOZXh0Q2xpY2s9ITEsITF9KSwhMCk7dmFyIG5lYXJlc3RFbXB0eUluc2VydERldGVjdEV2ZW50PWZ1bmN0aW9uKHQpe2lmKGRyYWdFbCl7dD10LnRvdWNoZXM/dC50b3VjaGVzWzBdOnQ7dmFyIGU9X2RldGVjdE5lYXJlc3RFbXB0eVNvcnRhYmxlKHQuY2xpZW50WCx0LmNsaWVudFkpO2lmKGUpe3ZhciBvPXt9O2Zvcih2YXIgbiBpbiB0KXQuaGFzT3duUHJvcGVydHkobikmJihvW25dPXRbbl0pO28udGFyZ2V0PW8ucm9vdEVsPWUsby5wcmV2ZW50RGVmYXVsdD12b2lkIDAsby5zdG9wUHJvcGFnYXRpb249dm9pZCAwLGVbZXhwYW5kb10uX29uRHJhZ092ZXIobyl9fX0sX2NoZWNrT3V0c2lkZVRhcmdldEVsPWZ1bmN0aW9uKHQpe2RyYWdFbCYmZHJhZ0VsLnBhcmVudE5vZGVbZXhwYW5kb10uX2lzT3V0c2lkZVRoaXNFbCh0LnRhcmdldCl9O2Z1bmN0aW9uIFNvcnRhYmxlKHQsZSl7aWYoIXR8fCF0Lm5vZGVUeXBlfHwxIT09dC5ub2RlVHlwZSl0aHJvd1wiU29ydGFibGU6IGBlbGAgbXVzdCBiZSBhbiBIVE1MRWxlbWVudCwgbm90IFwiLmNvbmNhdCh7fS50b1N0cmluZy5jYWxsKHQpKTt0aGlzLmVsPXQsdGhpcy5vcHRpb25zPWU9X2V4dGVuZHMoe30sZSksdFtleHBhbmRvXT10aGlzO3ZhciBvPXtncm91cDpudWxsLHNvcnQ6ITAsZGlzYWJsZWQ6ITEsc3RvcmU6bnVsbCxoYW5kbGU6bnVsbCxkcmFnZ2FibGU6L15bdW9dbCQvaS50ZXN0KHQubm9kZU5hbWUpP1wiPmxpXCI6XCI+KlwiLHN3YXBUaHJlc2hvbGQ6MSxpbnZlcnRTd2FwOiExLGludmVydGVkU3dhcFRocmVzaG9sZDpudWxsLHJlbW92ZUNsb25lT25IaWRlOiEwLGRpcmVjdGlvbjpmdW5jdGlvbigpe3JldHVybiBfZGV0ZWN0RGlyZWN0aW9uKHQsdGhpcy5vcHRpb25zKX0sZ2hvc3RDbGFzczpcInNvcnRhYmxlLWdob3N0XCIsY2hvc2VuQ2xhc3M6XCJzb3J0YWJsZS1jaG9zZW5cIixkcmFnQ2xhc3M6XCJzb3J0YWJsZS1kcmFnXCIsaWdub3JlOlwiYSwgaW1nXCIsZmlsdGVyOm51bGwscHJldmVudE9uRmlsdGVyOiEwLGFuaW1hdGlvbjowLGVhc2luZzpudWxsLHNldERhdGE6ZnVuY3Rpb24odCxlKXt0LnNldERhdGEoXCJUZXh0XCIsZS50ZXh0Q29udGVudCl9LGRyb3BCdWJibGU6ITEsZHJhZ292ZXJCdWJibGU6ITEsZGF0YUlkQXR0cjpcImRhdGEtaWRcIixkZWxheTowLGRlbGF5T25Ub3VjaE9ubHk6ITEsdG91Y2hTdGFydFRocmVzaG9sZDooTnVtYmVyLnBhcnNlSW50P051bWJlcjp3aW5kb3cpLnBhcnNlSW50KHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvLDEwKXx8MSxmb3JjZUZhbGxiYWNrOiExLGZhbGxiYWNrQ2xhc3M6XCJzb3J0YWJsZS1mYWxsYmFja1wiLGZhbGxiYWNrT25Cb2R5OiExLGZhbGxiYWNrVG9sZXJhbmNlOjAsZmFsbGJhY2tPZmZzZXQ6e3g6MCx5OjB9LHN1cHBvcnRQb2ludGVyOiExIT09U29ydGFibGUuc3VwcG9ydFBvaW50ZXImJlwiUG9pbnRlckV2ZW50XCJpbiB3aW5kb3cmJiFTYWZhcmksZW1wdHlJbnNlcnRUaHJlc2hvbGQ6NX07Zm9yKHZhciBuIGluIFBsdWdpbk1hbmFnZXIuaW5pdGlhbGl6ZVBsdWdpbnModGhpcyx0LG8pLG8pIShuIGluIGUpJiYoZVtuXT1vW25dKTtmb3IodmFyIHIgaW4gX3ByZXBhcmVHcm91cChlKSx0aGlzKVwiX1wiPT09ci5jaGFyQXQoMCkmJlwiZnVuY3Rpb25cIj09dHlwZW9mIHRoaXNbcl0mJih0aGlzW3JdPXRoaXNbcl0uYmluZCh0aGlzKSk7dGhpcy5uYXRpdmVEcmFnZ2FibGU9IWUuZm9yY2VGYWxsYmFjayYmc3VwcG9ydERyYWdnYWJsZSx0aGlzLm5hdGl2ZURyYWdnYWJsZSYmKHRoaXMub3B0aW9ucy50b3VjaFN0YXJ0VGhyZXNob2xkPTEpLGUuc3VwcG9ydFBvaW50ZXI/b24odCxcInBvaW50ZXJkb3duXCIsdGhpcy5fb25UYXBTdGFydCk6KG9uKHQsXCJtb3VzZWRvd25cIix0aGlzLl9vblRhcFN0YXJ0KSxvbih0LFwidG91Y2hzdGFydFwiLHRoaXMuX29uVGFwU3RhcnQpKSx0aGlzLm5hdGl2ZURyYWdnYWJsZSYmKG9uKHQsXCJkcmFnb3ZlclwiLHRoaXMpLG9uKHQsXCJkcmFnZW50ZXJcIix0aGlzKSksc29ydGFibGVzLnB1c2godGhpcy5lbCksZS5zdG9yZSYmZS5zdG9yZS5nZXQmJnRoaXMuc29ydChlLnN0b3JlLmdldCh0aGlzKXx8W10pLF9leHRlbmRzKHRoaXMsQW5pbWF0aW9uU3RhdGVNYW5hZ2VyKCkpfWZ1bmN0aW9uIF9nbG9iYWxEcmFnT3Zlcih0KXt0LmRhdGFUcmFuc2ZlciYmKHQuZGF0YVRyYW5zZmVyLmRyb3BFZmZlY3Q9XCJtb3ZlXCIpLHQuY2FuY2VsYWJsZSYmdC5wcmV2ZW50RGVmYXVsdCgpfWZ1bmN0aW9uIF9vbk1vdmUodCxlLG8sbixyLGwsYSxpKXt2YXIgcyxjLGQ9dFtleHBhbmRvXSx1PWQub3B0aW9ucy5vbk1vdmU7cmV0dXJuIXdpbmRvdy5DdXN0b21FdmVudHx8SUUxMU9yTGVzc3x8RWRnZT8ocz1kb2N1bWVudC5jcmVhdGVFdmVudChcIkV2ZW50XCIpKS5pbml0RXZlbnQoXCJtb3ZlXCIsITAsITApOnM9bmV3IEN1c3RvbUV2ZW50KFwibW92ZVwiLHtidWJibGVzOiEwLGNhbmNlbGFibGU6ITB9KSxzLnRvPWUscy5mcm9tPXQscy5kcmFnZ2VkPW8scy5kcmFnZ2VkUmVjdD1uLHMucmVsYXRlZD1yfHxlLHMucmVsYXRlZFJlY3Q9bHx8Z2V0UmVjdChlKSxzLndpbGxJbnNlcnRBZnRlcj1pLHMub3JpZ2luYWxFdmVudD1hLHQuZGlzcGF0Y2hFdmVudChzKSx1JiYoYz11LmNhbGwoZCxzLGEpKSxjfWZ1bmN0aW9uIF9kaXNhYmxlRHJhZ2dhYmxlKHQpe3QuZHJhZ2dhYmxlPSExfWZ1bmN0aW9uIF91bnNpbGVudCgpe19zaWxlbnQ9ITF9ZnVuY3Rpb24gX2dob3N0SXNGaXJzdCh0LGUsbyl7dmFyIG49Z2V0UmVjdChnZXRDaGlsZChvLmVsLDAsby5vcHRpb25zLCEwKSk7cmV0dXJuIGU/dC5jbGllbnRYPG4ubGVmdC0xMHx8dC5jbGllbnRZPG4udG9wJiZ0LmNsaWVudFg8bi5yaWdodDp0LmNsaWVudFk8bi50b3AtMTB8fHQuY2xpZW50WTxuLmJvdHRvbSYmdC5jbGllbnRYPG4ubGVmdH1mdW5jdGlvbiBfZ2hvc3RJc0xhc3QodCxlLG8pe3ZhciBuPWdldFJlY3QobGFzdENoaWxkKG8uZWwsby5vcHRpb25zLmRyYWdnYWJsZSkpO3JldHVybiBlP3QuY2xpZW50WD5uLnJpZ2h0KzEwfHx0LmNsaWVudFg8PW4ucmlnaHQmJnQuY2xpZW50WT5uLmJvdHRvbSYmdC5jbGllbnRYPj1uLmxlZnQ6dC5jbGllbnRYPm4ucmlnaHQmJnQuY2xpZW50WT5uLnRvcHx8dC5jbGllbnRYPD1uLnJpZ2h0JiZ0LmNsaWVudFk+bi5ib3R0b20rMTB9ZnVuY3Rpb24gX2dldFN3YXBEaXJlY3Rpb24odCxlLG8sbixyLGwsYSxpKXt2YXIgcz1uP3QuY2xpZW50WTp0LmNsaWVudFgsYz1uP28uaGVpZ2h0Om8ud2lkdGgsZD1uP28udG9wOm8ubGVmdCx1PW4/by5ib3R0b206by5yaWdodCxnPSExO2lmKCFhKWlmKGkmJnRhcmdldE1vdmVEaXN0YW5jZTxjKnIpe2lmKCFwYXN0Rmlyc3RJbnZlcnRUaHJlc2gmJigxPT09bGFzdERpcmVjdGlvbj9zPmQrYypsLzI6czx1LWMqbC8yKSYmKHBhc3RGaXJzdEludmVydFRocmVzaD0hMCkscGFzdEZpcnN0SW52ZXJ0VGhyZXNoKWc9ITA7ZWxzZSBpZigxPT09bGFzdERpcmVjdGlvbj9zPGQrdGFyZ2V0TW92ZURpc3RhbmNlOnM+dS10YXJnZXRNb3ZlRGlzdGFuY2UpcmV0dXJuLWxhc3REaXJlY3Rpb259ZWxzZSBpZihzPmQrYyooMS1yKS8yJiZzPHUtYyooMS1yKS8yKXJldHVybiBfZ2V0SW5zZXJ0RGlyZWN0aW9uKGUpO3JldHVybihnPWd8fGEpJiYoczxkK2MqbC8yfHxzPnUtYypsLzIpP3M+ZCtjLzI/MTotMTowfWZ1bmN0aW9uIF9nZXRJbnNlcnREaXJlY3Rpb24odCl7cmV0dXJuIGluZGV4KGRyYWdFbCk8aW5kZXgodCk/MTotMX1mdW5jdGlvbiBfZ2VuZXJhdGVJZCh0KXtmb3IodmFyIGU9dC50YWdOYW1lK3QuY2xhc3NOYW1lK3Quc3JjK3QuaHJlZit0LnRleHRDb250ZW50LG89ZS5sZW5ndGgsbj0wO28tLTspbis9ZS5jaGFyQ29kZUF0KG8pO3JldHVybiBuLnRvU3RyaW5nKDM2KX1mdW5jdGlvbiBfc2F2ZUlucHV0Q2hlY2tlZFN0YXRlKHQpe3NhdmVkSW5wdXRDaGVja2VkLmxlbmd0aD0wO2Zvcih2YXIgZT10LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaW5wdXRcIiksbz1lLmxlbmd0aDtvLS07KXt2YXIgbj1lW29dO24uY2hlY2tlZCYmc2F2ZWRJbnB1dENoZWNrZWQucHVzaChuKX19ZnVuY3Rpb24gX25leHRUaWNrKHQpe3JldHVybiBzZXRUaW1lb3V0KHQsMCl9ZnVuY3Rpb24gX2NhbmNlbE5leHRUaWNrKHQpe3JldHVybiBjbGVhclRpbWVvdXQodCl9U29ydGFibGUucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpTb3J0YWJsZSxfaXNPdXRzaWRlVGhpc0VsOmZ1bmN0aW9uKHQpe3RoaXMuZWwuY29udGFpbnModCl8fHQ9PT10aGlzLmVsfHwobGFzdFRhcmdldD1udWxsKX0sX2dldERpcmVjdGlvbjpmdW5jdGlvbih0LGUpe3JldHVyblwiZnVuY3Rpb25cIj09dHlwZW9mIHRoaXMub3B0aW9ucy5kaXJlY3Rpb24/dGhpcy5vcHRpb25zLmRpcmVjdGlvbi5jYWxsKHRoaXMsdCxlLGRyYWdFbCk6dGhpcy5vcHRpb25zLmRpcmVjdGlvbn0sX29uVGFwU3RhcnQ6ZnVuY3Rpb24odCl7aWYodC5jYW5jZWxhYmxlKXt2YXIgZT10aGlzLG89dGhpcy5lbCxuPXRoaXMub3B0aW9ucyxyPW4ucHJldmVudE9uRmlsdGVyLGw9dC50eXBlLGE9dC50b3VjaGVzJiZ0LnRvdWNoZXNbMF18fHQucG9pbnRlclR5cGUmJlwidG91Y2hcIj09PXQucG9pbnRlclR5cGUmJnQsaT0oYXx8dCkudGFyZ2V0LHM9dC50YXJnZXQuc2hhZG93Um9vdCYmKHQucGF0aCYmdC5wYXRoWzBdfHx0LmNvbXBvc2VkUGF0aCYmdC5jb21wb3NlZFBhdGgoKVswXSl8fGksYz1uLmZpbHRlcjtpZihfc2F2ZUlucHV0Q2hlY2tlZFN0YXRlKG8pLCFkcmFnRWwmJiEoL21vdXNlZG93bnxwb2ludGVyZG93bi8udGVzdChsKSYmMCE9PXQuYnV0dG9ufHxuLmRpc2FibGVkKSYmIXMuaXNDb250ZW50RWRpdGFibGUmJih0aGlzLm5hdGl2ZURyYWdnYWJsZXx8IVNhZmFyaXx8IWl8fFwiU0VMRUNUXCIhPT1pLnRhZ05hbWUudG9VcHBlckNhc2UoKSkmJiEoKGk9Y2xvc2VzdChpLG4uZHJhZ2dhYmxlLG8sITEpKSYmaS5hbmltYXRlZHx8bGFzdERvd25FbD09PWkpKXtpZihvbGRJbmRleD1pbmRleChpKSxvbGREcmFnZ2FibGVJbmRleD1pbmRleChpLG4uZHJhZ2dhYmxlKSxcImZ1bmN0aW9uXCI9PXR5cGVvZiBjKXtpZihjLmNhbGwodGhpcyx0LGksdGhpcykpcmV0dXJuIF9kaXNwYXRjaEV2ZW50KHtzb3J0YWJsZTplLHJvb3RFbDpzLG5hbWU6XCJmaWx0ZXJcIix0YXJnZXRFbDppLHRvRWw6byxmcm9tRWw6b30pLHBsdWdpbkV2ZW50KFwiZmlsdGVyXCIsZSx7ZXZ0OnR9KSx2b2lkKHImJnQuY2FuY2VsYWJsZSYmdC5wcmV2ZW50RGVmYXVsdCgpKX1lbHNlIGlmKGMmJihjPWMuc3BsaXQoXCIsXCIpLnNvbWUoKGZ1bmN0aW9uKG4pe2lmKG49Y2xvc2VzdChzLG4udHJpbSgpLG8sITEpKXJldHVybiBfZGlzcGF0Y2hFdmVudCh7c29ydGFibGU6ZSxyb290RWw6bixuYW1lOlwiZmlsdGVyXCIsdGFyZ2V0RWw6aSxmcm9tRWw6byx0b0VsOm99KSxwbHVnaW5FdmVudChcImZpbHRlclwiLGUse2V2dDp0fSksITB9KSkpKXJldHVybiB2b2lkKHImJnQuY2FuY2VsYWJsZSYmdC5wcmV2ZW50RGVmYXVsdCgpKTtuLmhhbmRsZSYmIWNsb3Nlc3QocyxuLmhhbmRsZSxvLCExKXx8dGhpcy5fcHJlcGFyZURyYWdTdGFydCh0LGEsaSl9fX0sX3ByZXBhcmVEcmFnU3RhcnQ6ZnVuY3Rpb24odCxlLG8pe3ZhciBuLHI9dGhpcyxsPXIuZWwsYT1yLm9wdGlvbnMsaT1sLm93bmVyRG9jdW1lbnQ7aWYobyYmIWRyYWdFbCYmby5wYXJlbnROb2RlPT09bCl7dmFyIHM9Z2V0UmVjdChvKTtpZihyb290RWw9bCxwYXJlbnRFbD0oZHJhZ0VsPW8pLnBhcmVudE5vZGUsbmV4dEVsPWRyYWdFbC5uZXh0U2libGluZyxsYXN0RG93bkVsPW8sYWN0aXZlR3JvdXA9YS5ncm91cCxTb3J0YWJsZS5kcmFnZ2VkPWRyYWdFbCx0YXBFdnQ9e3RhcmdldDpkcmFnRWwsY2xpZW50WDooZXx8dCkuY2xpZW50WCxjbGllbnRZOihlfHx0KS5jbGllbnRZfSx0YXBEaXN0YW5jZUxlZnQ9dGFwRXZ0LmNsaWVudFgtcy5sZWZ0LHRhcERpc3RhbmNlVG9wPXRhcEV2dC5jbGllbnRZLXMudG9wLHRoaXMuX2xhc3RYPShlfHx0KS5jbGllbnRYLHRoaXMuX2xhc3RZPShlfHx0KS5jbGllbnRZLGRyYWdFbC5zdHlsZVtcIndpbGwtY2hhbmdlXCJdPVwiYWxsXCIsbj1mdW5jdGlvbigpe3BsdWdpbkV2ZW50KFwiZGVsYXlFbmRlZFwiLHIse2V2dDp0fSksU29ydGFibGUuZXZlbnRDYW5jZWxlZD9yLl9vbkRyb3AoKTooci5fZGlzYWJsZURlbGF5ZWREcmFnRXZlbnRzKCksIUZpcmVGb3gmJnIubmF0aXZlRHJhZ2dhYmxlJiYoZHJhZ0VsLmRyYWdnYWJsZT0hMCksci5fdHJpZ2dlckRyYWdTdGFydCh0LGUpLF9kaXNwYXRjaEV2ZW50KHtzb3J0YWJsZTpyLG5hbWU6XCJjaG9vc2VcIixvcmlnaW5hbEV2ZW50OnR9KSx0b2dnbGVDbGFzcyhkcmFnRWwsYS5jaG9zZW5DbGFzcywhMCkpfSxhLmlnbm9yZS5zcGxpdChcIixcIikuZm9yRWFjaCgoZnVuY3Rpb24odCl7ZmluZChkcmFnRWwsdC50cmltKCksX2Rpc2FibGVEcmFnZ2FibGUpfSkpLG9uKGksXCJkcmFnb3ZlclwiLG5lYXJlc3RFbXB0eUluc2VydERldGVjdEV2ZW50KSxvbihpLFwibW91c2Vtb3ZlXCIsbmVhcmVzdEVtcHR5SW5zZXJ0RGV0ZWN0RXZlbnQpLG9uKGksXCJ0b3VjaG1vdmVcIixuZWFyZXN0RW1wdHlJbnNlcnREZXRlY3RFdmVudCksb24oaSxcIm1vdXNldXBcIixyLl9vbkRyb3ApLG9uKGksXCJ0b3VjaGVuZFwiLHIuX29uRHJvcCksb24oaSxcInRvdWNoY2FuY2VsXCIsci5fb25Ecm9wKSxGaXJlRm94JiZ0aGlzLm5hdGl2ZURyYWdnYWJsZSYmKHRoaXMub3B0aW9ucy50b3VjaFN0YXJ0VGhyZXNob2xkPTQsZHJhZ0VsLmRyYWdnYWJsZT0hMCkscGx1Z2luRXZlbnQoXCJkZWxheVN0YXJ0XCIsdGhpcyx7ZXZ0OnR9KSwhYS5kZWxheXx8YS5kZWxheU9uVG91Y2hPbmx5JiYhZXx8dGhpcy5uYXRpdmVEcmFnZ2FibGUmJihFZGdlfHxJRTExT3JMZXNzKSluKCk7ZWxzZXtpZihTb3J0YWJsZS5ldmVudENhbmNlbGVkKXJldHVybiB2b2lkIHRoaXMuX29uRHJvcCgpO29uKGksXCJtb3VzZXVwXCIsci5fZGlzYWJsZURlbGF5ZWREcmFnKSxvbihpLFwidG91Y2hlbmRcIixyLl9kaXNhYmxlRGVsYXllZERyYWcpLG9uKGksXCJ0b3VjaGNhbmNlbFwiLHIuX2Rpc2FibGVEZWxheWVkRHJhZyksb24oaSxcIm1vdXNlbW92ZVwiLHIuX2RlbGF5ZWREcmFnVG91Y2hNb3ZlSGFuZGxlciksb24oaSxcInRvdWNobW92ZVwiLHIuX2RlbGF5ZWREcmFnVG91Y2hNb3ZlSGFuZGxlciksYS5zdXBwb3J0UG9pbnRlciYmb24oaSxcInBvaW50ZXJtb3ZlXCIsci5fZGVsYXllZERyYWdUb3VjaE1vdmVIYW5kbGVyKSxyLl9kcmFnU3RhcnRUaW1lcj1zZXRUaW1lb3V0KG4sYS5kZWxheSl9fX0sX2RlbGF5ZWREcmFnVG91Y2hNb3ZlSGFuZGxlcjpmdW5jdGlvbih0KXt2YXIgZT10LnRvdWNoZXM/dC50b3VjaGVzWzBdOnQ7TWF0aC5tYXgoTWF0aC5hYnMoZS5jbGllbnRYLXRoaXMuX2xhc3RYKSxNYXRoLmFicyhlLmNsaWVudFktdGhpcy5fbGFzdFkpKT49TWF0aC5mbG9vcih0aGlzLm9wdGlvbnMudG91Y2hTdGFydFRocmVzaG9sZC8odGhpcy5uYXRpdmVEcmFnZ2FibGUmJndpbmRvdy5kZXZpY2VQaXhlbFJhdGlvfHwxKSkmJnRoaXMuX2Rpc2FibGVEZWxheWVkRHJhZygpfSxfZGlzYWJsZURlbGF5ZWREcmFnOmZ1bmN0aW9uKCl7ZHJhZ0VsJiZfZGlzYWJsZURyYWdnYWJsZShkcmFnRWwpLGNsZWFyVGltZW91dCh0aGlzLl9kcmFnU3RhcnRUaW1lciksdGhpcy5fZGlzYWJsZURlbGF5ZWREcmFnRXZlbnRzKCl9LF9kaXNhYmxlRGVsYXllZERyYWdFdmVudHM6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmVsLm93bmVyRG9jdW1lbnQ7b2ZmKHQsXCJtb3VzZXVwXCIsdGhpcy5fZGlzYWJsZURlbGF5ZWREcmFnKSxvZmYodCxcInRvdWNoZW5kXCIsdGhpcy5fZGlzYWJsZURlbGF5ZWREcmFnKSxvZmYodCxcInRvdWNoY2FuY2VsXCIsdGhpcy5fZGlzYWJsZURlbGF5ZWREcmFnKSxvZmYodCxcIm1vdXNlbW92ZVwiLHRoaXMuX2RlbGF5ZWREcmFnVG91Y2hNb3ZlSGFuZGxlciksb2ZmKHQsXCJ0b3VjaG1vdmVcIix0aGlzLl9kZWxheWVkRHJhZ1RvdWNoTW92ZUhhbmRsZXIpLG9mZih0LFwicG9pbnRlcm1vdmVcIix0aGlzLl9kZWxheWVkRHJhZ1RvdWNoTW92ZUhhbmRsZXIpfSxfdHJpZ2dlckRyYWdTdGFydDpmdW5jdGlvbih0LGUpe2U9ZXx8XCJ0b3VjaFwiPT10LnBvaW50ZXJUeXBlJiZ0LCF0aGlzLm5hdGl2ZURyYWdnYWJsZXx8ZT90aGlzLm9wdGlvbnMuc3VwcG9ydFBvaW50ZXI/b24oZG9jdW1lbnQsXCJwb2ludGVybW92ZVwiLHRoaXMuX29uVG91Y2hNb3ZlKTpvbihkb2N1bWVudCxlP1widG91Y2htb3ZlXCI6XCJtb3VzZW1vdmVcIix0aGlzLl9vblRvdWNoTW92ZSk6KG9uKGRyYWdFbCxcImRyYWdlbmRcIix0aGlzKSxvbihyb290RWwsXCJkcmFnc3RhcnRcIix0aGlzLl9vbkRyYWdTdGFydCkpO3RyeXtkb2N1bWVudC5zZWxlY3Rpb24/X25leHRUaWNrKChmdW5jdGlvbigpe2RvY3VtZW50LnNlbGVjdGlvbi5lbXB0eSgpfSkpOndpbmRvdy5nZXRTZWxlY3Rpb24oKS5yZW1vdmVBbGxSYW5nZXMoKX1jYXRjaCh0KXt9fSxfZHJhZ1N0YXJ0ZWQ6ZnVuY3Rpb24odCxlKXtpZihhd2FpdGluZ0RyYWdTdGFydGVkPSExLHJvb3RFbCYmZHJhZ0VsKXtwbHVnaW5FdmVudChcImRyYWdTdGFydGVkXCIsdGhpcyx7ZXZ0OmV9KSx0aGlzLm5hdGl2ZURyYWdnYWJsZSYmb24oZG9jdW1lbnQsXCJkcmFnb3ZlclwiLF9jaGVja091dHNpZGVUYXJnZXRFbCk7dmFyIG89dGhpcy5vcHRpb25zOyF0JiZ0b2dnbGVDbGFzcyhkcmFnRWwsby5kcmFnQ2xhc3MsITEpLHRvZ2dsZUNsYXNzKGRyYWdFbCxvLmdob3N0Q2xhc3MsITApLFNvcnRhYmxlLmFjdGl2ZT10aGlzLHQmJnRoaXMuX2FwcGVuZEdob3N0KCksX2Rpc3BhdGNoRXZlbnQoe3NvcnRhYmxlOnRoaXMsbmFtZTpcInN0YXJ0XCIsb3JpZ2luYWxFdmVudDplfSl9ZWxzZSB0aGlzLl9udWxsaW5nKCl9LF9lbXVsYXRlRHJhZ092ZXI6ZnVuY3Rpb24oKXtpZih0b3VjaEV2dCl7dGhpcy5fbGFzdFg9dG91Y2hFdnQuY2xpZW50WCx0aGlzLl9sYXN0WT10b3VjaEV2dC5jbGllbnRZLF9oaWRlR2hvc3RGb3JUYXJnZXQoKTtmb3IodmFyIHQ9ZG9jdW1lbnQuZWxlbWVudEZyb21Qb2ludCh0b3VjaEV2dC5jbGllbnRYLHRvdWNoRXZ0LmNsaWVudFkpLGU9dDt0JiZ0LnNoYWRvd1Jvb3QmJih0PXQuc2hhZG93Um9vdC5lbGVtZW50RnJvbVBvaW50KHRvdWNoRXZ0LmNsaWVudFgsdG91Y2hFdnQuY2xpZW50WSkpIT09ZTspZT10O2lmKGRyYWdFbC5wYXJlbnROb2RlW2V4cGFuZG9dLl9pc091dHNpZGVUaGlzRWwodCksZSlkb3tpZihlW2V4cGFuZG9dKXtpZihlW2V4cGFuZG9dLl9vbkRyYWdPdmVyKHtjbGllbnRYOnRvdWNoRXZ0LmNsaWVudFgsY2xpZW50WTp0b3VjaEV2dC5jbGllbnRZLHRhcmdldDp0LHJvb3RFbDplfSkmJiF0aGlzLm9wdGlvbnMuZHJhZ292ZXJCdWJibGUpYnJlYWt9dD1lfXdoaWxlKGU9ZS5wYXJlbnROb2RlKTtfdW5oaWRlR2hvc3RGb3JUYXJnZXQoKX19LF9vblRvdWNoTW92ZTpmdW5jdGlvbih0KXtpZih0YXBFdnQpe3ZhciBlPXRoaXMub3B0aW9ucyxvPWUuZmFsbGJhY2tUb2xlcmFuY2Usbj1lLmZhbGxiYWNrT2Zmc2V0LHI9dC50b3VjaGVzP3QudG91Y2hlc1swXTp0LGw9Z2hvc3RFbCYmbWF0cml4KGdob3N0RWwsITApLGE9Z2hvc3RFbCYmbCYmbC5hLGk9Z2hvc3RFbCYmbCYmbC5kLHM9UG9zaXRpb25HaG9zdEFic29sdXRlbHkmJmdob3N0UmVsYXRpdmVQYXJlbnQmJmdldFJlbGF0aXZlU2Nyb2xsT2Zmc2V0KGdob3N0UmVsYXRpdmVQYXJlbnQpLGM9KHIuY2xpZW50WC10YXBFdnQuY2xpZW50WCtuLngpLyhhfHwxKSsocz9zWzBdLWdob3N0UmVsYXRpdmVQYXJlbnRJbml0aWFsU2Nyb2xsWzBdOjApLyhhfHwxKSxkPShyLmNsaWVudFktdGFwRXZ0LmNsaWVudFkrbi55KS8oaXx8MSkrKHM/c1sxXS1naG9zdFJlbGF0aXZlUGFyZW50SW5pdGlhbFNjcm9sbFsxXTowKS8oaXx8MSk7aWYoIVNvcnRhYmxlLmFjdGl2ZSYmIWF3YWl0aW5nRHJhZ1N0YXJ0ZWQpe2lmKG8mJk1hdGgubWF4KE1hdGguYWJzKHIuY2xpZW50WC10aGlzLl9sYXN0WCksTWF0aC5hYnMoci5jbGllbnRZLXRoaXMuX2xhc3RZKSk8bylyZXR1cm47dGhpcy5fb25EcmFnU3RhcnQodCwhMCl9aWYoZ2hvc3RFbCl7bD8obC5lKz1jLShsYXN0RHh8fDApLGwuZis9ZC0obGFzdER5fHwwKSk6bD17YToxLGI6MCxjOjAsZDoxLGU6YyxmOmR9O3ZhciB1PVwibWF0cml4KFwiLmNvbmNhdChsLmEsXCIsXCIpLmNvbmNhdChsLmIsXCIsXCIpLmNvbmNhdChsLmMsXCIsXCIpLmNvbmNhdChsLmQsXCIsXCIpLmNvbmNhdChsLmUsXCIsXCIpLmNvbmNhdChsLmYsXCIpXCIpO2NzcyhnaG9zdEVsLFwid2Via2l0VHJhbnNmb3JtXCIsdSksY3NzKGdob3N0RWwsXCJtb3pUcmFuc2Zvcm1cIix1KSxjc3MoZ2hvc3RFbCxcIm1zVHJhbnNmb3JtXCIsdSksY3NzKGdob3N0RWwsXCJ0cmFuc2Zvcm1cIix1KSxsYXN0RHg9YyxsYXN0RHk9ZCx0b3VjaEV2dD1yfXQuY2FuY2VsYWJsZSYmdC5wcmV2ZW50RGVmYXVsdCgpfX0sX2FwcGVuZEdob3N0OmZ1bmN0aW9uKCl7aWYoIWdob3N0RWwpe3ZhciB0PXRoaXMub3B0aW9ucy5mYWxsYmFja09uQm9keT9kb2N1bWVudC5ib2R5OnJvb3RFbCxlPWdldFJlY3QoZHJhZ0VsLCEwLFBvc2l0aW9uR2hvc3RBYnNvbHV0ZWx5LCEwLHQpLG89dGhpcy5vcHRpb25zO2lmKFBvc2l0aW9uR2hvc3RBYnNvbHV0ZWx5KXtmb3IoZ2hvc3RSZWxhdGl2ZVBhcmVudD10O1wic3RhdGljXCI9PT1jc3MoZ2hvc3RSZWxhdGl2ZVBhcmVudCxcInBvc2l0aW9uXCIpJiZcIm5vbmVcIj09PWNzcyhnaG9zdFJlbGF0aXZlUGFyZW50LFwidHJhbnNmb3JtXCIpJiZnaG9zdFJlbGF0aXZlUGFyZW50IT09ZG9jdW1lbnQ7KWdob3N0UmVsYXRpdmVQYXJlbnQ9Z2hvc3RSZWxhdGl2ZVBhcmVudC5wYXJlbnROb2RlO2dob3N0UmVsYXRpdmVQYXJlbnQhPT1kb2N1bWVudC5ib2R5JiZnaG9zdFJlbGF0aXZlUGFyZW50IT09ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50PyhnaG9zdFJlbGF0aXZlUGFyZW50PT09ZG9jdW1lbnQmJihnaG9zdFJlbGF0aXZlUGFyZW50PWdldFdpbmRvd1Njcm9sbGluZ0VsZW1lbnQoKSksZS50b3ArPWdob3N0UmVsYXRpdmVQYXJlbnQuc2Nyb2xsVG9wLGUubGVmdCs9Z2hvc3RSZWxhdGl2ZVBhcmVudC5zY3JvbGxMZWZ0KTpnaG9zdFJlbGF0aXZlUGFyZW50PWdldFdpbmRvd1Njcm9sbGluZ0VsZW1lbnQoKSxnaG9zdFJlbGF0aXZlUGFyZW50SW5pdGlhbFNjcm9sbD1nZXRSZWxhdGl2ZVNjcm9sbE9mZnNldChnaG9zdFJlbGF0aXZlUGFyZW50KX10b2dnbGVDbGFzcyhnaG9zdEVsPWRyYWdFbC5jbG9uZU5vZGUoITApLG8uZ2hvc3RDbGFzcywhMSksdG9nZ2xlQ2xhc3MoZ2hvc3RFbCxvLmZhbGxiYWNrQ2xhc3MsITApLHRvZ2dsZUNsYXNzKGdob3N0RWwsby5kcmFnQ2xhc3MsITApLGNzcyhnaG9zdEVsLFwidHJhbnNpdGlvblwiLFwiXCIpLGNzcyhnaG9zdEVsLFwidHJhbnNmb3JtXCIsXCJcIiksY3NzKGdob3N0RWwsXCJib3gtc2l6aW5nXCIsXCJib3JkZXItYm94XCIpLGNzcyhnaG9zdEVsLFwibWFyZ2luXCIsMCksY3NzKGdob3N0RWwsXCJ0b3BcIixlLnRvcCksY3NzKGdob3N0RWwsXCJsZWZ0XCIsZS5sZWZ0KSxjc3MoZ2hvc3RFbCxcIndpZHRoXCIsZS53aWR0aCksY3NzKGdob3N0RWwsXCJoZWlnaHRcIixlLmhlaWdodCksY3NzKGdob3N0RWwsXCJvcGFjaXR5XCIsXCIwLjhcIiksY3NzKGdob3N0RWwsXCJwb3NpdGlvblwiLFBvc2l0aW9uR2hvc3RBYnNvbHV0ZWx5P1wiYWJzb2x1dGVcIjpcImZpeGVkXCIpLGNzcyhnaG9zdEVsLFwiekluZGV4XCIsXCIxMDAwMDBcIiksY3NzKGdob3N0RWwsXCJwb2ludGVyRXZlbnRzXCIsXCJub25lXCIpLFNvcnRhYmxlLmdob3N0PWdob3N0RWwsdC5hcHBlbmRDaGlsZChnaG9zdEVsKSxjc3MoZ2hvc3RFbCxcInRyYW5zZm9ybS1vcmlnaW5cIix0YXBEaXN0YW5jZUxlZnQvcGFyc2VJbnQoZ2hvc3RFbC5zdHlsZS53aWR0aCkqMTAwK1wiJSBcIit0YXBEaXN0YW5jZVRvcC9wYXJzZUludChnaG9zdEVsLnN0eWxlLmhlaWdodCkqMTAwK1wiJVwiKX19LF9vbkRyYWdTdGFydDpmdW5jdGlvbih0LGUpe3ZhciBvPXRoaXMsbj10LmRhdGFUcmFuc2ZlcixyPW8ub3B0aW9ucztwbHVnaW5FdmVudChcImRyYWdTdGFydFwiLHRoaXMse2V2dDp0fSksU29ydGFibGUuZXZlbnRDYW5jZWxlZD90aGlzLl9vbkRyb3AoKToocGx1Z2luRXZlbnQoXCJzZXR1cENsb25lXCIsdGhpcyksU29ydGFibGUuZXZlbnRDYW5jZWxlZHx8KChjbG9uZUVsPWNsb25lKGRyYWdFbCkpLnJlbW92ZUF0dHJpYnV0ZShcImlkXCIpLGNsb25lRWwuZHJhZ2dhYmxlPSExLGNsb25lRWwuc3R5bGVbXCJ3aWxsLWNoYW5nZVwiXT1cIlwiLHRoaXMuX2hpZGVDbG9uZSgpLHRvZ2dsZUNsYXNzKGNsb25lRWwsdGhpcy5vcHRpb25zLmNob3NlbkNsYXNzLCExKSxTb3J0YWJsZS5jbG9uZT1jbG9uZUVsKSxvLmNsb25lSWQ9X25leHRUaWNrKChmdW5jdGlvbigpe3BsdWdpbkV2ZW50KFwiY2xvbmVcIixvKSxTb3J0YWJsZS5ldmVudENhbmNlbGVkfHwoby5vcHRpb25zLnJlbW92ZUNsb25lT25IaWRlfHxyb290RWwuaW5zZXJ0QmVmb3JlKGNsb25lRWwsZHJhZ0VsKSxvLl9oaWRlQ2xvbmUoKSxfZGlzcGF0Y2hFdmVudCh7c29ydGFibGU6byxuYW1lOlwiY2xvbmVcIn0pKX0pKSwhZSYmdG9nZ2xlQ2xhc3MoZHJhZ0VsLHIuZHJhZ0NsYXNzLCEwKSxlPyhpZ25vcmVOZXh0Q2xpY2s9ITAsby5fbG9vcElkPXNldEludGVydmFsKG8uX2VtdWxhdGVEcmFnT3Zlciw1MCkpOihvZmYoZG9jdW1lbnQsXCJtb3VzZXVwXCIsby5fb25Ecm9wKSxvZmYoZG9jdW1lbnQsXCJ0b3VjaGVuZFwiLG8uX29uRHJvcCksb2ZmKGRvY3VtZW50LFwidG91Y2hjYW5jZWxcIixvLl9vbkRyb3ApLG4mJihuLmVmZmVjdEFsbG93ZWQ9XCJtb3ZlXCIsci5zZXREYXRhJiZyLnNldERhdGEuY2FsbChvLG4sZHJhZ0VsKSksb24oZG9jdW1lbnQsXCJkcm9wXCIsbyksY3NzKGRyYWdFbCxcInRyYW5zZm9ybVwiLFwidHJhbnNsYXRlWigwKVwiKSksYXdhaXRpbmdEcmFnU3RhcnRlZD0hMCxvLl9kcmFnU3RhcnRJZD1fbmV4dFRpY2soby5fZHJhZ1N0YXJ0ZWQuYmluZChvLGUsdCkpLG9uKGRvY3VtZW50LFwic2VsZWN0c3RhcnRcIixvKSxtb3ZlZD0hMCxTYWZhcmkmJmNzcyhkb2N1bWVudC5ib2R5LFwidXNlci1zZWxlY3RcIixcIm5vbmVcIikpfSxfb25EcmFnT3ZlcjpmdW5jdGlvbih0KXt2YXIgZSxvLG4scixsPXRoaXMuZWwsYT10LnRhcmdldCxpPXRoaXMub3B0aW9ucyxzPWkuZ3JvdXAsYz1Tb3J0YWJsZS5hY3RpdmUsZD1hY3RpdmVHcm91cD09PXMsdT1pLnNvcnQsZz1wdXRTb3J0YWJsZXx8YyxoPXRoaXMscD0hMTtpZighX3NpbGVudCl7aWYodm9pZCAwIT09dC5wcmV2ZW50RGVmYXVsdCYmdC5jYW5jZWxhYmxlJiZ0LnByZXZlbnREZWZhdWx0KCksYT1jbG9zZXN0KGEsaS5kcmFnZ2FibGUsbCwhMCksQShcImRyYWdPdmVyXCIpLFNvcnRhYmxlLmV2ZW50Q2FuY2VsZWQpcmV0dXJuIHA7aWYoZHJhZ0VsLmNvbnRhaW5zKHQudGFyZ2V0KXx8YS5hbmltYXRlZCYmYS5hbmltYXRpbmdYJiZhLmFuaW1hdGluZ1l8fGguX2lnbm9yZVdoaWxlQW5pbWF0aW5nPT09YSlyZXR1cm4gTSghMSk7aWYoaWdub3JlTmV4dENsaWNrPSExLGMmJiFpLmRpc2FibGVkJiYoZD91fHwobj1wYXJlbnRFbCE9PXJvb3RFbCk6cHV0U29ydGFibGU9PT10aGlzfHwodGhpcy5sYXN0UHV0TW9kZT1hY3RpdmVHcm91cC5jaGVja1B1bGwodGhpcyxjLGRyYWdFbCx0KSkmJnMuY2hlY2tQdXQodGhpcyxjLGRyYWdFbCx0KSkpe2lmKHI9XCJ2ZXJ0aWNhbFwiPT09dGhpcy5fZ2V0RGlyZWN0aW9uKHQsYSksZT1nZXRSZWN0KGRyYWdFbCksQShcImRyYWdPdmVyVmFsaWRcIiksU29ydGFibGUuZXZlbnRDYW5jZWxlZClyZXR1cm4gcDtpZihuKXJldHVybiBwYXJlbnRFbD1yb290RWwsUCgpLHRoaXMuX2hpZGVDbG9uZSgpLEEoXCJyZXZlcnRcIiksU29ydGFibGUuZXZlbnRDYW5jZWxlZHx8KG5leHRFbD9yb290RWwuaW5zZXJ0QmVmb3JlKGRyYWdFbCxuZXh0RWwpOnJvb3RFbC5hcHBlbmRDaGlsZChkcmFnRWwpKSxNKCEwKTt2YXIgZj1sYXN0Q2hpbGQobCxpLmRyYWdnYWJsZSk7aWYoIWZ8fF9naG9zdElzTGFzdCh0LHIsdGhpcykmJiFmLmFuaW1hdGVkKXtpZihmPT09ZHJhZ0VsKXJldHVybiBNKCExKTtpZihmJiZsPT09dC50YXJnZXQmJihhPWYpLGEmJihvPWdldFJlY3QoYSkpLCExIT09X29uTW92ZShyb290RWwsbCxkcmFnRWwsZSxhLG8sdCwhIWEpKXJldHVybiBQKCksZiYmZi5uZXh0U2libGluZz9sLmluc2VydEJlZm9yZShkcmFnRWwsZi5uZXh0U2libGluZyk6bC5hcHBlbmRDaGlsZChkcmFnRWwpLHBhcmVudEVsPWwsUigpLE0oITApfWVsc2UgaWYoZiYmX2dob3N0SXNGaXJzdCh0LHIsdGhpcykpe3ZhciBtPWdldENoaWxkKGwsMCxpLCEwKTtpZihtPT09ZHJhZ0VsKXJldHVybiBNKCExKTtpZihvPWdldFJlY3QoYT1tKSwhMSE9PV9vbk1vdmUocm9vdEVsLGwsZHJhZ0VsLGUsYSxvLHQsITEpKXJldHVybiBQKCksbC5pbnNlcnRCZWZvcmUoZHJhZ0VsLG0pLHBhcmVudEVsPWwsUigpLE0oITApfWVsc2UgaWYoYS5wYXJlbnROb2RlPT09bCl7bz1nZXRSZWN0KGEpO3ZhciB2LEUsYixTPWRyYWdFbC5wYXJlbnROb2RlIT09bCxEPSFfZHJhZ0VsSW5Sb3dDb2x1bW4oZHJhZ0VsLmFuaW1hdGVkJiZkcmFnRWwudG9SZWN0fHxlLGEuYW5pbWF0ZWQmJmEudG9SZWN0fHxvLHIpLHc9cj9cInRvcFwiOlwibGVmdFwiLF89aXNTY3JvbGxlZFBhc3QoYSxcInRvcFwiLFwidG9wXCIpfHxpc1Njcm9sbGVkUGFzdChkcmFnRWwsXCJ0b3BcIixcInRvcFwiKSx5PV8/Xy5zY3JvbGxUb3A6dm9pZCAwO2lmKGxhc3RUYXJnZXQhPT1hJiYoRT1vW3ddLHBhc3RGaXJzdEludmVydFRocmVzaD0hMSxpc0NpcmN1bXN0YW50aWFsSW52ZXJ0PSFEJiZpLmludmVydFN3YXB8fFMpLDAhPT0odj1fZ2V0U3dhcERpcmVjdGlvbih0LGEsbyxyLEQ/MTppLnN3YXBUaHJlc2hvbGQsbnVsbD09aS5pbnZlcnRlZFN3YXBUaHJlc2hvbGQ/aS5zd2FwVGhyZXNob2xkOmkuaW52ZXJ0ZWRTd2FwVGhyZXNob2xkLGlzQ2lyY3Vtc3RhbnRpYWxJbnZlcnQsbGFzdFRhcmdldD09PWEpKSl7dmFyIHg9aW5kZXgoZHJhZ0VsKTtkb3t4LT12LGI9cGFyZW50RWwuY2hpbGRyZW5beF19d2hpbGUoYiYmKFwibm9uZVwiPT09Y3NzKGIsXCJkaXNwbGF5XCIpfHxiPT09Z2hvc3RFbCkpfWlmKDA9PT12fHxiPT09YSlyZXR1cm4gTSghMSk7bGFzdFRhcmdldD1hLGxhc3REaXJlY3Rpb249djt2YXIgQz1hLm5leHRFbGVtZW50U2libGluZyxJPSExLFQ9X29uTW92ZShyb290RWwsbCxkcmFnRWwsZSxhLG8sdCxJPTE9PT12KTtpZighMSE9PVQpcmV0dXJuIDEhPT1UJiYtMSE9PVR8fChJPTE9PT1UKSxfc2lsZW50PSEwLHNldFRpbWVvdXQoX3Vuc2lsZW50LDMwKSxQKCksSSYmIUM/bC5hcHBlbmRDaGlsZChkcmFnRWwpOmEucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoZHJhZ0VsLEk/QzphKSxfJiZzY3JvbGxCeShfLDAseS1fLnNjcm9sbFRvcCkscGFyZW50RWw9ZHJhZ0VsLnBhcmVudE5vZGUsdm9pZCAwPT09RXx8aXNDaXJjdW1zdGFudGlhbEludmVydHx8KHRhcmdldE1vdmVEaXN0YW5jZT1NYXRoLmFicyhFLWdldFJlY3QoYSlbd10pKSxSKCksTSghMCl9aWYobC5jb250YWlucyhkcmFnRWwpKXJldHVybiBNKCExKX1yZXR1cm4hMX1mdW5jdGlvbiBBKGkscyl7cGx1Z2luRXZlbnQoaSxoLF9vYmplY3RTcHJlYWQyKHtldnQ6dCxpc093bmVyOmQsYXhpczpyP1widmVydGljYWxcIjpcImhvcml6b250YWxcIixyZXZlcnQ6bixkcmFnUmVjdDplLHRhcmdldFJlY3Q6byxjYW5Tb3J0OnUsZnJvbVNvcnRhYmxlOmcsdGFyZ2V0OmEsY29tcGxldGVkOk0sb25Nb3ZlOmZ1bmN0aW9uKG8sbil7cmV0dXJuIF9vbk1vdmUocm9vdEVsLGwsZHJhZ0VsLGUsbyxnZXRSZWN0KG8pLHQsbil9LGNoYW5nZWQ6Un0scykpfWZ1bmN0aW9uIFAoKXtBKFwiZHJhZ092ZXJBbmltYXRpb25DYXB0dXJlXCIpLGguY2FwdHVyZUFuaW1hdGlvblN0YXRlKCksaCE9PWcmJmcuY2FwdHVyZUFuaW1hdGlvblN0YXRlKCl9ZnVuY3Rpb24gTShlKXtyZXR1cm4gQShcImRyYWdPdmVyQ29tcGxldGVkXCIse2luc2VydGlvbjplfSksZSYmKGQ/Yy5faGlkZUNsb25lKCk6Yy5fc2hvd0Nsb25lKGgpLGghPT1nJiYodG9nZ2xlQ2xhc3MoZHJhZ0VsLHB1dFNvcnRhYmxlP3B1dFNvcnRhYmxlLm9wdGlvbnMuZ2hvc3RDbGFzczpjLm9wdGlvbnMuZ2hvc3RDbGFzcywhMSksdG9nZ2xlQ2xhc3MoZHJhZ0VsLGkuZ2hvc3RDbGFzcywhMCkpLHB1dFNvcnRhYmxlIT09aCYmaCE9PVNvcnRhYmxlLmFjdGl2ZT9wdXRTb3J0YWJsZT1oOmg9PT1Tb3J0YWJsZS5hY3RpdmUmJnB1dFNvcnRhYmxlJiYocHV0U29ydGFibGU9bnVsbCksZz09PWgmJihoLl9pZ25vcmVXaGlsZUFuaW1hdGluZz1hKSxoLmFuaW1hdGVBbGwoKGZ1bmN0aW9uKCl7QShcImRyYWdPdmVyQW5pbWF0aW9uQ29tcGxldGVcIiksaC5faWdub3JlV2hpbGVBbmltYXRpbmc9bnVsbH0pKSxoIT09ZyYmKGcuYW5pbWF0ZUFsbCgpLGcuX2lnbm9yZVdoaWxlQW5pbWF0aW5nPW51bGwpKSwoYT09PWRyYWdFbCYmIWRyYWdFbC5hbmltYXRlZHx8YT09PWwmJiFhLmFuaW1hdGVkKSYmKGxhc3RUYXJnZXQ9bnVsbCksaS5kcmFnb3ZlckJ1YmJsZXx8dC5yb290RWx8fGE9PT1kb2N1bWVudHx8KGRyYWdFbC5wYXJlbnROb2RlW2V4cGFuZG9dLl9pc091dHNpZGVUaGlzRWwodC50YXJnZXQpLCFlJiZuZWFyZXN0RW1wdHlJbnNlcnREZXRlY3RFdmVudCh0KSksIWkuZHJhZ292ZXJCdWJibGUmJnQuc3RvcFByb3BhZ2F0aW9uJiZ0LnN0b3BQcm9wYWdhdGlvbigpLHA9ITB9ZnVuY3Rpb24gUigpe25ld0luZGV4PWluZGV4KGRyYWdFbCksbmV3RHJhZ2dhYmxlSW5kZXg9aW5kZXgoZHJhZ0VsLGkuZHJhZ2dhYmxlKSxfZGlzcGF0Y2hFdmVudCh7c29ydGFibGU6aCxuYW1lOlwiY2hhbmdlXCIsdG9FbDpsLG5ld0luZGV4Om5ld0luZGV4LG5ld0RyYWdnYWJsZUluZGV4Om5ld0RyYWdnYWJsZUluZGV4LG9yaWdpbmFsRXZlbnQ6dH0pfX0sX2lnbm9yZVdoaWxlQW5pbWF0aW5nOm51bGwsX29mZk1vdmVFdmVudHM6ZnVuY3Rpb24oKXtvZmYoZG9jdW1lbnQsXCJtb3VzZW1vdmVcIix0aGlzLl9vblRvdWNoTW92ZSksb2ZmKGRvY3VtZW50LFwidG91Y2htb3ZlXCIsdGhpcy5fb25Ub3VjaE1vdmUpLG9mZihkb2N1bWVudCxcInBvaW50ZXJtb3ZlXCIsdGhpcy5fb25Ub3VjaE1vdmUpLG9mZihkb2N1bWVudCxcImRyYWdvdmVyXCIsbmVhcmVzdEVtcHR5SW5zZXJ0RGV0ZWN0RXZlbnQpLG9mZihkb2N1bWVudCxcIm1vdXNlbW92ZVwiLG5lYXJlc3RFbXB0eUluc2VydERldGVjdEV2ZW50KSxvZmYoZG9jdW1lbnQsXCJ0b3VjaG1vdmVcIixuZWFyZXN0RW1wdHlJbnNlcnREZXRlY3RFdmVudCl9LF9vZmZVcEV2ZW50czpmdW5jdGlvbigpe3ZhciB0PXRoaXMuZWwub3duZXJEb2N1bWVudDtvZmYodCxcIm1vdXNldXBcIix0aGlzLl9vbkRyb3ApLG9mZih0LFwidG91Y2hlbmRcIix0aGlzLl9vbkRyb3ApLG9mZih0LFwicG9pbnRlcnVwXCIsdGhpcy5fb25Ecm9wKSxvZmYodCxcInRvdWNoY2FuY2VsXCIsdGhpcy5fb25Ecm9wKSxvZmYoZG9jdW1lbnQsXCJzZWxlY3RzdGFydFwiLHRoaXMpfSxfb25Ecm9wOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuZWwsbz10aGlzLm9wdGlvbnM7bmV3SW5kZXg9aW5kZXgoZHJhZ0VsKSxuZXdEcmFnZ2FibGVJbmRleD1pbmRleChkcmFnRWwsby5kcmFnZ2FibGUpLHBsdWdpbkV2ZW50KFwiZHJvcFwiLHRoaXMse2V2dDp0fSkscGFyZW50RWw9ZHJhZ0VsJiZkcmFnRWwucGFyZW50Tm9kZSxuZXdJbmRleD1pbmRleChkcmFnRWwpLG5ld0RyYWdnYWJsZUluZGV4PWluZGV4KGRyYWdFbCxvLmRyYWdnYWJsZSksU29ydGFibGUuZXZlbnRDYW5jZWxlZHx8KGF3YWl0aW5nRHJhZ1N0YXJ0ZWQ9ITEsaXNDaXJjdW1zdGFudGlhbEludmVydD0hMSxwYXN0Rmlyc3RJbnZlcnRUaHJlc2g9ITEsY2xlYXJJbnRlcnZhbCh0aGlzLl9sb29wSWQpLGNsZWFyVGltZW91dCh0aGlzLl9kcmFnU3RhcnRUaW1lciksX2NhbmNlbE5leHRUaWNrKHRoaXMuY2xvbmVJZCksX2NhbmNlbE5leHRUaWNrKHRoaXMuX2RyYWdTdGFydElkKSx0aGlzLm5hdGl2ZURyYWdnYWJsZSYmKG9mZihkb2N1bWVudCxcImRyb3BcIix0aGlzKSxvZmYoZSxcImRyYWdzdGFydFwiLHRoaXMuX29uRHJhZ1N0YXJ0KSksdGhpcy5fb2ZmTW92ZUV2ZW50cygpLHRoaXMuX29mZlVwRXZlbnRzKCksU2FmYXJpJiZjc3MoZG9jdW1lbnQuYm9keSxcInVzZXItc2VsZWN0XCIsXCJcIiksY3NzKGRyYWdFbCxcInRyYW5zZm9ybVwiLFwiXCIpLHQmJihtb3ZlZCYmKHQuY2FuY2VsYWJsZSYmdC5wcmV2ZW50RGVmYXVsdCgpLCFvLmRyb3BCdWJibGUmJnQuc3RvcFByb3BhZ2F0aW9uKCkpLGdob3N0RWwmJmdob3N0RWwucGFyZW50Tm9kZSYmZ2hvc3RFbC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGdob3N0RWwpLChyb290RWw9PT1wYXJlbnRFbHx8cHV0U29ydGFibGUmJlwiY2xvbmVcIiE9PXB1dFNvcnRhYmxlLmxhc3RQdXRNb2RlKSYmY2xvbmVFbCYmY2xvbmVFbC5wYXJlbnROb2RlJiZjbG9uZUVsLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoY2xvbmVFbCksZHJhZ0VsJiYodGhpcy5uYXRpdmVEcmFnZ2FibGUmJm9mZihkcmFnRWwsXCJkcmFnZW5kXCIsdGhpcyksX2Rpc2FibGVEcmFnZ2FibGUoZHJhZ0VsKSxkcmFnRWwuc3R5bGVbXCJ3aWxsLWNoYW5nZVwiXT1cIlwiLG1vdmVkJiYhYXdhaXRpbmdEcmFnU3RhcnRlZCYmdG9nZ2xlQ2xhc3MoZHJhZ0VsLHB1dFNvcnRhYmxlP3B1dFNvcnRhYmxlLm9wdGlvbnMuZ2hvc3RDbGFzczp0aGlzLm9wdGlvbnMuZ2hvc3RDbGFzcywhMSksdG9nZ2xlQ2xhc3MoZHJhZ0VsLHRoaXMub3B0aW9ucy5jaG9zZW5DbGFzcywhMSksX2Rpc3BhdGNoRXZlbnQoe3NvcnRhYmxlOnRoaXMsbmFtZTpcInVuY2hvb3NlXCIsdG9FbDpwYXJlbnRFbCxuZXdJbmRleDpudWxsLG5ld0RyYWdnYWJsZUluZGV4Om51bGwsb3JpZ2luYWxFdmVudDp0fSkscm9vdEVsIT09cGFyZW50RWw/KG5ld0luZGV4Pj0wJiYoX2Rpc3BhdGNoRXZlbnQoe3Jvb3RFbDpwYXJlbnRFbCxuYW1lOlwiYWRkXCIsdG9FbDpwYXJlbnRFbCxmcm9tRWw6cm9vdEVsLG9yaWdpbmFsRXZlbnQ6dH0pLF9kaXNwYXRjaEV2ZW50KHtzb3J0YWJsZTp0aGlzLG5hbWU6XCJyZW1vdmVcIix0b0VsOnBhcmVudEVsLG9yaWdpbmFsRXZlbnQ6dH0pLF9kaXNwYXRjaEV2ZW50KHtyb290RWw6cGFyZW50RWwsbmFtZTpcInNvcnRcIix0b0VsOnBhcmVudEVsLGZyb21FbDpyb290RWwsb3JpZ2luYWxFdmVudDp0fSksX2Rpc3BhdGNoRXZlbnQoe3NvcnRhYmxlOnRoaXMsbmFtZTpcInNvcnRcIix0b0VsOnBhcmVudEVsLG9yaWdpbmFsRXZlbnQ6dH0pKSxwdXRTb3J0YWJsZSYmcHV0U29ydGFibGUuc2F2ZSgpKTpuZXdJbmRleCE9PW9sZEluZGV4JiZuZXdJbmRleD49MCYmKF9kaXNwYXRjaEV2ZW50KHtzb3J0YWJsZTp0aGlzLG5hbWU6XCJ1cGRhdGVcIix0b0VsOnBhcmVudEVsLG9yaWdpbmFsRXZlbnQ6dH0pLF9kaXNwYXRjaEV2ZW50KHtzb3J0YWJsZTp0aGlzLG5hbWU6XCJzb3J0XCIsdG9FbDpwYXJlbnRFbCxvcmlnaW5hbEV2ZW50OnR9KSksU29ydGFibGUuYWN0aXZlJiYobnVsbCE9bmV3SW5kZXgmJi0xIT09bmV3SW5kZXh8fChuZXdJbmRleD1vbGRJbmRleCxuZXdEcmFnZ2FibGVJbmRleD1vbGREcmFnZ2FibGVJbmRleCksX2Rpc3BhdGNoRXZlbnQoe3NvcnRhYmxlOnRoaXMsbmFtZTpcImVuZFwiLHRvRWw6cGFyZW50RWwsb3JpZ2luYWxFdmVudDp0fSksdGhpcy5zYXZlKCkpKSkpLHRoaXMuX251bGxpbmcoKX0sX251bGxpbmc6ZnVuY3Rpb24oKXtwbHVnaW5FdmVudChcIm51bGxpbmdcIix0aGlzKSxyb290RWw9ZHJhZ0VsPXBhcmVudEVsPWdob3N0RWw9bmV4dEVsPWNsb25lRWw9bGFzdERvd25FbD1jbG9uZUhpZGRlbj10YXBFdnQ9dG91Y2hFdnQ9bW92ZWQ9bmV3SW5kZXg9bmV3RHJhZ2dhYmxlSW5kZXg9b2xkSW5kZXg9b2xkRHJhZ2dhYmxlSW5kZXg9bGFzdFRhcmdldD1sYXN0RGlyZWN0aW9uPXB1dFNvcnRhYmxlPWFjdGl2ZUdyb3VwPVNvcnRhYmxlLmRyYWdnZWQ9U29ydGFibGUuZ2hvc3Q9U29ydGFibGUuY2xvbmU9U29ydGFibGUuYWN0aXZlPW51bGwsc2F2ZWRJbnB1dENoZWNrZWQuZm9yRWFjaCgoZnVuY3Rpb24odCl7dC5jaGVja2VkPSEwfSkpLHNhdmVkSW5wdXRDaGVja2VkLmxlbmd0aD1sYXN0RHg9bGFzdER5PTB9LGhhbmRsZUV2ZW50OmZ1bmN0aW9uKHQpe3N3aXRjaCh0LnR5cGUpe2Nhc2VcImRyb3BcIjpjYXNlXCJkcmFnZW5kXCI6dGhpcy5fb25Ecm9wKHQpO2JyZWFrO2Nhc2VcImRyYWdlbnRlclwiOmNhc2VcImRyYWdvdmVyXCI6ZHJhZ0VsJiYodGhpcy5fb25EcmFnT3Zlcih0KSxfZ2xvYmFsRHJhZ092ZXIodCkpO2JyZWFrO2Nhc2VcInNlbGVjdHN0YXJ0XCI6dC5wcmV2ZW50RGVmYXVsdCgpfX0sdG9BcnJheTpmdW5jdGlvbigpe2Zvcih2YXIgdCxlPVtdLG89dGhpcy5lbC5jaGlsZHJlbixuPTAscj1vLmxlbmd0aCxsPXRoaXMub3B0aW9ucztuPHI7bisrKWNsb3Nlc3QodD1vW25dLGwuZHJhZ2dhYmxlLHRoaXMuZWwsITEpJiZlLnB1c2godC5nZXRBdHRyaWJ1dGUobC5kYXRhSWRBdHRyKXx8X2dlbmVyYXRlSWQodCkpO3JldHVybiBlfSxzb3J0OmZ1bmN0aW9uKHQsZSl7dmFyIG89e30sbj10aGlzLmVsO3RoaXMudG9BcnJheSgpLmZvckVhY2goKGZ1bmN0aW9uKHQsZSl7dmFyIHI9bi5jaGlsZHJlbltlXTtjbG9zZXN0KHIsdGhpcy5vcHRpb25zLmRyYWdnYWJsZSxuLCExKSYmKG9bdF09cil9KSx0aGlzKSxlJiZ0aGlzLmNhcHR1cmVBbmltYXRpb25TdGF0ZSgpLHQuZm9yRWFjaCgoZnVuY3Rpb24odCl7b1t0XSYmKG4ucmVtb3ZlQ2hpbGQob1t0XSksbi5hcHBlbmRDaGlsZChvW3RdKSl9KSksZSYmdGhpcy5hbmltYXRlQWxsKCl9LHNhdmU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLm9wdGlvbnMuc3RvcmU7dCYmdC5zZXQmJnQuc2V0KHRoaXMpfSxjbG9zZXN0OmZ1bmN0aW9uKHQsZSl7cmV0dXJuIGNsb3Nlc3QodCxlfHx0aGlzLm9wdGlvbnMuZHJhZ2dhYmxlLHRoaXMuZWwsITEpfSxvcHRpb246ZnVuY3Rpb24odCxlKXt2YXIgbz10aGlzLm9wdGlvbnM7aWYodm9pZCAwPT09ZSlyZXR1cm4gb1t0XTt2YXIgbj1QbHVnaW5NYW5hZ2VyLm1vZGlmeU9wdGlvbih0aGlzLHQsZSk7b1t0XT12b2lkIDAhPT1uP246ZSxcImdyb3VwXCI9PT10JiZfcHJlcGFyZUdyb3VwKG8pfSxkZXN0cm95OmZ1bmN0aW9uKCl7cGx1Z2luRXZlbnQoXCJkZXN0cm95XCIsdGhpcyk7dmFyIHQ9dGhpcy5lbDt0W2V4cGFuZG9dPW51bGwsb2ZmKHQsXCJtb3VzZWRvd25cIix0aGlzLl9vblRhcFN0YXJ0KSxvZmYodCxcInRvdWNoc3RhcnRcIix0aGlzLl9vblRhcFN0YXJ0KSxvZmYodCxcInBvaW50ZXJkb3duXCIsdGhpcy5fb25UYXBTdGFydCksdGhpcy5uYXRpdmVEcmFnZ2FibGUmJihvZmYodCxcImRyYWdvdmVyXCIsdGhpcyksb2ZmKHQsXCJkcmFnZW50ZXJcIix0aGlzKSksQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbCh0LnF1ZXJ5U2VsZWN0b3JBbGwoXCJbZHJhZ2dhYmxlXVwiKSwoZnVuY3Rpb24odCl7dC5yZW1vdmVBdHRyaWJ1dGUoXCJkcmFnZ2FibGVcIil9KSksdGhpcy5fb25Ecm9wKCksdGhpcy5fZGlzYWJsZURlbGF5ZWREcmFnRXZlbnRzKCksc29ydGFibGVzLnNwbGljZShzb3J0YWJsZXMuaW5kZXhPZih0aGlzLmVsKSwxKSx0aGlzLmVsPXQ9bnVsbH0sX2hpZGVDbG9uZTpmdW5jdGlvbigpe2lmKCFjbG9uZUhpZGRlbil7aWYocGx1Z2luRXZlbnQoXCJoaWRlQ2xvbmVcIix0aGlzKSxTb3J0YWJsZS5ldmVudENhbmNlbGVkKXJldHVybjtjc3MoY2xvbmVFbCxcImRpc3BsYXlcIixcIm5vbmVcIiksdGhpcy5vcHRpb25zLnJlbW92ZUNsb25lT25IaWRlJiZjbG9uZUVsLnBhcmVudE5vZGUmJmNsb25lRWwucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChjbG9uZUVsKSxjbG9uZUhpZGRlbj0hMH19LF9zaG93Q2xvbmU6ZnVuY3Rpb24odCl7aWYoXCJjbG9uZVwiPT09dC5sYXN0UHV0TW9kZSl7aWYoY2xvbmVIaWRkZW4pe2lmKHBsdWdpbkV2ZW50KFwic2hvd0Nsb25lXCIsdGhpcyksU29ydGFibGUuZXZlbnRDYW5jZWxlZClyZXR1cm47ZHJhZ0VsLnBhcmVudE5vZGUhPXJvb3RFbHx8dGhpcy5vcHRpb25zLmdyb3VwLnJldmVydENsb25lP25leHRFbD9yb290RWwuaW5zZXJ0QmVmb3JlKGNsb25lRWwsbmV4dEVsKTpyb290RWwuYXBwZW5kQ2hpbGQoY2xvbmVFbCk6cm9vdEVsLmluc2VydEJlZm9yZShjbG9uZUVsLGRyYWdFbCksdGhpcy5vcHRpb25zLmdyb3VwLnJldmVydENsb25lJiZ0aGlzLmFuaW1hdGUoZHJhZ0VsLGNsb25lRWwpLGNzcyhjbG9uZUVsLFwiZGlzcGxheVwiLFwiXCIpLGNsb25lSGlkZGVuPSExfX1lbHNlIHRoaXMuX2hpZGVDbG9uZSgpfX0sZG9jdW1lbnRFeGlzdHMmJm9uKGRvY3VtZW50LFwidG91Y2htb3ZlXCIsKGZ1bmN0aW9uKHQpeyhTb3J0YWJsZS5hY3RpdmV8fGF3YWl0aW5nRHJhZ1N0YXJ0ZWQpJiZ0LmNhbmNlbGFibGUmJnQucHJldmVudERlZmF1bHQoKX0pKSxTb3J0YWJsZS51dGlscz17b246b24sb2ZmOm9mZixjc3M6Y3NzLGZpbmQ6ZmluZCxpczpmdW5jdGlvbih0LGUpe3JldHVybiEhY2xvc2VzdCh0LGUsdCwhMSl9LGV4dGVuZDpleHRlbmQsdGhyb3R0bGU6dGhyb3R0bGUsY2xvc2VzdDpjbG9zZXN0LHRvZ2dsZUNsYXNzOnRvZ2dsZUNsYXNzLGNsb25lOmNsb25lLGluZGV4OmluZGV4LG5leHRUaWNrOl9uZXh0VGljayxjYW5jZWxOZXh0VGljazpfY2FuY2VsTmV4dFRpY2ssZGV0ZWN0RGlyZWN0aW9uOl9kZXRlY3REaXJlY3Rpb24sZ2V0Q2hpbGQ6Z2V0Q2hpbGR9LFNvcnRhYmxlLmdldD1mdW5jdGlvbih0KXtyZXR1cm4gdFtleHBhbmRvXX0sU29ydGFibGUubW91bnQ9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9YXJndW1lbnRzLmxlbmd0aCxlPW5ldyBBcnJheSh0KSxvPTA7bzx0O28rKyllW29dPWFyZ3VtZW50c1tvXTtlWzBdLmNvbnN0cnVjdG9yPT09QXJyYXkmJihlPWVbMF0pLGUuZm9yRWFjaCgoZnVuY3Rpb24odCl7aWYoIXQucHJvdG90eXBlfHwhdC5wcm90b3R5cGUuY29uc3RydWN0b3IpdGhyb3dcIlNvcnRhYmxlOiBNb3VudGVkIHBsdWdpbiBtdXN0IGJlIGEgY29uc3RydWN0b3IgZnVuY3Rpb24sIG5vdCBcIi5jb25jYXQoe30udG9TdHJpbmcuY2FsbCh0KSk7dC51dGlscyYmKFNvcnRhYmxlLnV0aWxzPV9vYmplY3RTcHJlYWQyKF9vYmplY3RTcHJlYWQyKHt9LFNvcnRhYmxlLnV0aWxzKSx0LnV0aWxzKSksUGx1Z2luTWFuYWdlci5tb3VudCh0KX0pKX0sU29ydGFibGUuY3JlYXRlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIG5ldyBTb3J0YWJsZSh0LGUpfSxTb3J0YWJsZS52ZXJzaW9uPXZlcnNpb247dmFyIHNjcm9sbEVsLHNjcm9sbFJvb3RFbCxsYXN0QXV0b1Njcm9sbFgsbGFzdEF1dG9TY3JvbGxZLHRvdWNoRXZ0JDEscG9pbnRlckVsZW1DaGFuZ2VkSW50ZXJ2YWwsYXV0b1Njcm9sbHM9W10sc2Nyb2xsaW5nPSExO2Z1bmN0aW9uIEF1dG9TY3JvbGxQbHVnaW4oKXtmdW5jdGlvbiB0KCl7Zm9yKHZhciB0IGluIHRoaXMuZGVmYXVsdHM9e3Njcm9sbDohMCxmb3JjZUF1dG9TY3JvbGxGYWxsYmFjazohMSxzY3JvbGxTZW5zaXRpdml0eTozMCxzY3JvbGxTcGVlZDoxMCxidWJibGVTY3JvbGw6ITB9LHRoaXMpXCJfXCI9PT10LmNoYXJBdCgwKSYmXCJmdW5jdGlvblwiPT10eXBlb2YgdGhpc1t0XSYmKHRoaXNbdF09dGhpc1t0XS5iaW5kKHRoaXMpKX1yZXR1cm4gdC5wcm90b3R5cGU9e2RyYWdTdGFydGVkOmZ1bmN0aW9uKHQpe3ZhciBlPXQub3JpZ2luYWxFdmVudDt0aGlzLnNvcnRhYmxlLm5hdGl2ZURyYWdnYWJsZT9vbihkb2N1bWVudCxcImRyYWdvdmVyXCIsdGhpcy5faGFuZGxlQXV0b1Njcm9sbCk6dGhpcy5vcHRpb25zLnN1cHBvcnRQb2ludGVyP29uKGRvY3VtZW50LFwicG9pbnRlcm1vdmVcIix0aGlzLl9oYW5kbGVGYWxsYmFja0F1dG9TY3JvbGwpOmUudG91Y2hlcz9vbihkb2N1bWVudCxcInRvdWNobW92ZVwiLHRoaXMuX2hhbmRsZUZhbGxiYWNrQXV0b1Njcm9sbCk6b24oZG9jdW1lbnQsXCJtb3VzZW1vdmVcIix0aGlzLl9oYW5kbGVGYWxsYmFja0F1dG9TY3JvbGwpfSxkcmFnT3ZlckNvbXBsZXRlZDpmdW5jdGlvbih0KXt2YXIgZT10Lm9yaWdpbmFsRXZlbnQ7dGhpcy5vcHRpb25zLmRyYWdPdmVyQnViYmxlfHxlLnJvb3RFbHx8dGhpcy5faGFuZGxlQXV0b1Njcm9sbChlKX0sZHJvcDpmdW5jdGlvbigpe3RoaXMuc29ydGFibGUubmF0aXZlRHJhZ2dhYmxlP29mZihkb2N1bWVudCxcImRyYWdvdmVyXCIsdGhpcy5faGFuZGxlQXV0b1Njcm9sbCk6KG9mZihkb2N1bWVudCxcInBvaW50ZXJtb3ZlXCIsdGhpcy5faGFuZGxlRmFsbGJhY2tBdXRvU2Nyb2xsKSxvZmYoZG9jdW1lbnQsXCJ0b3VjaG1vdmVcIix0aGlzLl9oYW5kbGVGYWxsYmFja0F1dG9TY3JvbGwpLG9mZihkb2N1bWVudCxcIm1vdXNlbW92ZVwiLHRoaXMuX2hhbmRsZUZhbGxiYWNrQXV0b1Njcm9sbCkpLGNsZWFyUG9pbnRlckVsZW1DaGFuZ2VkSW50ZXJ2YWwoKSxjbGVhckF1dG9TY3JvbGxzKCksY2FuY2VsVGhyb3R0bGUoKX0sbnVsbGluZzpmdW5jdGlvbigpe3RvdWNoRXZ0JDE9c2Nyb2xsUm9vdEVsPXNjcm9sbEVsPXNjcm9sbGluZz1wb2ludGVyRWxlbUNoYW5nZWRJbnRlcnZhbD1sYXN0QXV0b1Njcm9sbFg9bGFzdEF1dG9TY3JvbGxZPW51bGwsYXV0b1Njcm9sbHMubGVuZ3RoPTB9LF9oYW5kbGVGYWxsYmFja0F1dG9TY3JvbGw6ZnVuY3Rpb24odCl7dGhpcy5faGFuZGxlQXV0b1Njcm9sbCh0LCEwKX0sX2hhbmRsZUF1dG9TY3JvbGw6ZnVuY3Rpb24odCxlKXt2YXIgbz10aGlzLG49KHQudG91Y2hlcz90LnRvdWNoZXNbMF06dCkuY2xpZW50WCxyPSh0LnRvdWNoZXM/dC50b3VjaGVzWzBdOnQpLmNsaWVudFksbD1kb2N1bWVudC5lbGVtZW50RnJvbVBvaW50KG4scik7aWYodG91Y2hFdnQkMT10LGV8fHRoaXMub3B0aW9ucy5mb3JjZUF1dG9TY3JvbGxGYWxsYmFja3x8RWRnZXx8SUUxMU9yTGVzc3x8U2FmYXJpKXthdXRvU2Nyb2xsKHQsdGhpcy5vcHRpb25zLGwsZSk7dmFyIGE9Z2V0UGFyZW50QXV0b1Njcm9sbEVsZW1lbnQobCwhMCk7IXNjcm9sbGluZ3x8cG9pbnRlckVsZW1DaGFuZ2VkSW50ZXJ2YWwmJm49PT1sYXN0QXV0b1Njcm9sbFgmJnI9PT1sYXN0QXV0b1Njcm9sbFl8fChwb2ludGVyRWxlbUNoYW5nZWRJbnRlcnZhbCYmY2xlYXJQb2ludGVyRWxlbUNoYW5nZWRJbnRlcnZhbCgpLHBvaW50ZXJFbGVtQ2hhbmdlZEludGVydmFsPXNldEludGVydmFsKChmdW5jdGlvbigpe3ZhciBsPWdldFBhcmVudEF1dG9TY3JvbGxFbGVtZW50KGRvY3VtZW50LmVsZW1lbnRGcm9tUG9pbnQobixyKSwhMCk7bCE9PWEmJihhPWwsY2xlYXJBdXRvU2Nyb2xscygpKSxhdXRvU2Nyb2xsKHQsby5vcHRpb25zLGwsZSl9KSwxMCksbGFzdEF1dG9TY3JvbGxYPW4sbGFzdEF1dG9TY3JvbGxZPXIpfWVsc2V7aWYoIXRoaXMub3B0aW9ucy5idWJibGVTY3JvbGx8fGdldFBhcmVudEF1dG9TY3JvbGxFbGVtZW50KGwsITApPT09Z2V0V2luZG93U2Nyb2xsaW5nRWxlbWVudCgpKXJldHVybiB2b2lkIGNsZWFyQXV0b1Njcm9sbHMoKTthdXRvU2Nyb2xsKHQsdGhpcy5vcHRpb25zLGdldFBhcmVudEF1dG9TY3JvbGxFbGVtZW50KGwsITEpLCExKX19fSxfZXh0ZW5kcyh0LHtwbHVnaW5OYW1lOlwic2Nyb2xsXCIsaW5pdGlhbGl6ZUJ5RGVmYXVsdDohMH0pfWZ1bmN0aW9uIGNsZWFyQXV0b1Njcm9sbHMoKXthdXRvU2Nyb2xscy5mb3JFYWNoKChmdW5jdGlvbih0KXtjbGVhckludGVydmFsKHQucGlkKX0pKSxhdXRvU2Nyb2xscz1bXX1mdW5jdGlvbiBjbGVhclBvaW50ZXJFbGVtQ2hhbmdlZEludGVydmFsKCl7Y2xlYXJJbnRlcnZhbChwb2ludGVyRWxlbUNoYW5nZWRJbnRlcnZhbCl9dmFyIGxhc3RTd2FwRWwsYXV0b1Njcm9sbD10aHJvdHRsZSgoZnVuY3Rpb24odCxlLG8sbil7aWYoZS5zY3JvbGwpe3ZhciByLGw9KHQudG91Y2hlcz90LnRvdWNoZXNbMF06dCkuY2xpZW50WCxhPSh0LnRvdWNoZXM/dC50b3VjaGVzWzBdOnQpLmNsaWVudFksaT1lLnNjcm9sbFNlbnNpdGl2aXR5LHM9ZS5zY3JvbGxTcGVlZCxjPWdldFdpbmRvd1Njcm9sbGluZ0VsZW1lbnQoKSxkPSExO3Njcm9sbFJvb3RFbCE9PW8mJihzY3JvbGxSb290RWw9byxjbGVhckF1dG9TY3JvbGxzKCksc2Nyb2xsRWw9ZS5zY3JvbGwscj1lLnNjcm9sbEZuLCEwPT09c2Nyb2xsRWwmJihzY3JvbGxFbD1nZXRQYXJlbnRBdXRvU2Nyb2xsRWxlbWVudChvLCEwKSkpO3ZhciB1PTAsZz1zY3JvbGxFbDtkb3t2YXIgaD1nLHA9Z2V0UmVjdChoKSxmPXAudG9wLG09cC5ib3R0b20sdj1wLmxlZnQsRT1wLnJpZ2h0LGI9cC53aWR0aCxTPXAuaGVpZ2h0LEQ9dm9pZCAwLHc9dm9pZCAwLF89aC5zY3JvbGxXaWR0aCx5PWguc2Nyb2xsSGVpZ2h0LHg9Y3NzKGgpLEM9aC5zY3JvbGxMZWZ0LEk9aC5zY3JvbGxUb3A7aD09PWM/KEQ9YjxfJiYoXCJhdXRvXCI9PT14Lm92ZXJmbG93WHx8XCJzY3JvbGxcIj09PXgub3ZlcmZsb3dYfHxcInZpc2libGVcIj09PXgub3ZlcmZsb3dYKSx3PVM8eSYmKFwiYXV0b1wiPT09eC5vdmVyZmxvd1l8fFwic2Nyb2xsXCI9PT14Lm92ZXJmbG93WXx8XCJ2aXNpYmxlXCI9PT14Lm92ZXJmbG93WSkpOihEPWI8XyYmKFwiYXV0b1wiPT09eC5vdmVyZmxvd1h8fFwic2Nyb2xsXCI9PT14Lm92ZXJmbG93WCksdz1TPHkmJihcImF1dG9cIj09PXgub3ZlcmZsb3dZfHxcInNjcm9sbFwiPT09eC5vdmVyZmxvd1kpKTt2YXIgVD1EJiYoTWF0aC5hYnMoRS1sKTw9aSYmQytiPF8pLShNYXRoLmFicyh2LWwpPD1pJiYhIUMpLEE9dyYmKE1hdGguYWJzKG0tYSk8PWkmJkkrUzx5KS0oTWF0aC5hYnMoZi1hKTw9aSYmISFJKTtpZighYXV0b1Njcm9sbHNbdV0pZm9yKHZhciBQPTA7UDw9dTtQKyspYXV0b1Njcm9sbHNbUF18fChhdXRvU2Nyb2xsc1tQXT17fSk7YXV0b1Njcm9sbHNbdV0udng9PVQmJmF1dG9TY3JvbGxzW3VdLnZ5PT1BJiZhdXRvU2Nyb2xsc1t1XS5lbD09PWh8fChhdXRvU2Nyb2xsc1t1XS5lbD1oLGF1dG9TY3JvbGxzW3VdLnZ4PVQsYXV0b1Njcm9sbHNbdV0udnk9QSxjbGVhckludGVydmFsKGF1dG9TY3JvbGxzW3VdLnBpZCksMD09VCYmMD09QXx8KGQ9ITAsYXV0b1Njcm9sbHNbdV0ucGlkPXNldEludGVydmFsKGZ1bmN0aW9uKCl7biYmMD09PXRoaXMubGF5ZXImJlNvcnRhYmxlLmFjdGl2ZS5fb25Ub3VjaE1vdmUodG91Y2hFdnQkMSk7dmFyIGU9YXV0b1Njcm9sbHNbdGhpcy5sYXllcl0udnk/YXV0b1Njcm9sbHNbdGhpcy5sYXllcl0udnkqczowLG89YXV0b1Njcm9sbHNbdGhpcy5sYXllcl0udng/YXV0b1Njcm9sbHNbdGhpcy5sYXllcl0udngqczowO1wiZnVuY3Rpb25cIj09dHlwZW9mIHImJlwiY29udGludWVcIiE9PXIuY2FsbChTb3J0YWJsZS5kcmFnZ2VkLnBhcmVudE5vZGVbZXhwYW5kb10sbyxlLHQsdG91Y2hFdnQkMSxhdXRvU2Nyb2xsc1t0aGlzLmxheWVyXS5lbCl8fHNjcm9sbEJ5KGF1dG9TY3JvbGxzW3RoaXMubGF5ZXJdLmVsLG8sZSl9LmJpbmQoe2xheWVyOnV9KSwyNCkpKSx1Kyt9d2hpbGUoZS5idWJibGVTY3JvbGwmJmchPT1jJiYoZz1nZXRQYXJlbnRBdXRvU2Nyb2xsRWxlbWVudChnLCExKSkpO3Njcm9sbGluZz1kfX0pLDMwKSxkcm9wPWZ1bmN0aW9uKHQpe3ZhciBlPXQub3JpZ2luYWxFdmVudCxvPXQucHV0U29ydGFibGUsbj10LmRyYWdFbCxyPXQuYWN0aXZlU29ydGFibGUsbD10LmRpc3BhdGNoU29ydGFibGVFdmVudCxhPXQuaGlkZUdob3N0Rm9yVGFyZ2V0LGk9dC51bmhpZGVHaG9zdEZvclRhcmdldDtpZihlKXt2YXIgcz1vfHxyO2EoKTt2YXIgYz1lLmNoYW5nZWRUb3VjaGVzJiZlLmNoYW5nZWRUb3VjaGVzLmxlbmd0aD9lLmNoYW5nZWRUb3VjaGVzWzBdOmUsZD1kb2N1bWVudC5lbGVtZW50RnJvbVBvaW50KGMuY2xpZW50WCxjLmNsaWVudFkpO2koKSxzJiYhcy5lbC5jb250YWlucyhkKSYmKGwoXCJzcGlsbFwiKSx0aGlzLm9uU3BpbGwoe2RyYWdFbDpuLHB1dFNvcnRhYmxlOm99KSl9fTtmdW5jdGlvbiBSZXZlcnQoKXt9ZnVuY3Rpb24gUmVtb3ZlKCl7fWZ1bmN0aW9uIFN3YXBQbHVnaW4oKXtmdW5jdGlvbiB0KCl7dGhpcy5kZWZhdWx0cz17c3dhcENsYXNzOlwic29ydGFibGUtc3dhcC1oaWdobGlnaHRcIn19cmV0dXJuIHQucHJvdG90eXBlPXtkcmFnU3RhcnQ6ZnVuY3Rpb24odCl7dmFyIGU9dC5kcmFnRWw7bGFzdFN3YXBFbD1lfSxkcmFnT3ZlclZhbGlkOmZ1bmN0aW9uKHQpe3ZhciBlPXQuY29tcGxldGVkLG89dC50YXJnZXQsbj10Lm9uTW92ZSxyPXQuYWN0aXZlU29ydGFibGUsbD10LmNoYW5nZWQsYT10LmNhbmNlbDtpZihyLm9wdGlvbnMuc3dhcCl7dmFyIGk9dGhpcy5zb3J0YWJsZS5lbCxzPXRoaXMub3B0aW9ucztpZihvJiZvIT09aSl7dmFyIGM9bGFzdFN3YXBFbDshMSE9PW4obyk/KHRvZ2dsZUNsYXNzKG8scy5zd2FwQ2xhc3MsITApLGxhc3RTd2FwRWw9byk6bGFzdFN3YXBFbD1udWxsLGMmJmMhPT1sYXN0U3dhcEVsJiZ0b2dnbGVDbGFzcyhjLHMuc3dhcENsYXNzLCExKX1sKCksZSghMCksYSgpfX0sZHJvcDpmdW5jdGlvbih0KXt2YXIgZT10LmFjdGl2ZVNvcnRhYmxlLG89dC5wdXRTb3J0YWJsZSxuPXQuZHJhZ0VsLHI9b3x8dGhpcy5zb3J0YWJsZSxsPXRoaXMub3B0aW9ucztsYXN0U3dhcEVsJiZ0b2dnbGVDbGFzcyhsYXN0U3dhcEVsLGwuc3dhcENsYXNzLCExKSxsYXN0U3dhcEVsJiYobC5zd2FwfHxvJiZvLm9wdGlvbnMuc3dhcCkmJm4hPT1sYXN0U3dhcEVsJiYoci5jYXB0dXJlQW5pbWF0aW9uU3RhdGUoKSxyIT09ZSYmZS5jYXB0dXJlQW5pbWF0aW9uU3RhdGUoKSxzd2FwTm9kZXMobixsYXN0U3dhcEVsKSxyLmFuaW1hdGVBbGwoKSxyIT09ZSYmZS5hbmltYXRlQWxsKCkpfSxudWxsaW5nOmZ1bmN0aW9uKCl7bGFzdFN3YXBFbD1udWxsfX0sX2V4dGVuZHModCx7cGx1Z2luTmFtZTpcInN3YXBcIixldmVudFByb3BlcnRpZXM6ZnVuY3Rpb24oKXtyZXR1cm57c3dhcEl0ZW06bGFzdFN3YXBFbH19fSl9ZnVuY3Rpb24gc3dhcE5vZGVzKHQsZSl7dmFyIG8sbixyPXQucGFyZW50Tm9kZSxsPWUucGFyZW50Tm9kZTtyJiZsJiYhci5pc0VxdWFsTm9kZShlKSYmIWwuaXNFcXVhbE5vZGUodCkmJihvPWluZGV4KHQpLG49aW5kZXgoZSksci5pc0VxdWFsTm9kZShsKSYmbzxuJiZuKyssci5pbnNlcnRCZWZvcmUoZSxyLmNoaWxkcmVuW29dKSxsLmluc2VydEJlZm9yZSh0LGwuY2hpbGRyZW5bbl0pKX1SZXZlcnQucHJvdG90eXBlPXtzdGFydEluZGV4Om51bGwsZHJhZ1N0YXJ0OmZ1bmN0aW9uKHQpe3ZhciBlPXQub2xkRHJhZ2dhYmxlSW5kZXg7dGhpcy5zdGFydEluZGV4PWV9LG9uU3BpbGw6ZnVuY3Rpb24odCl7dmFyIGU9dC5kcmFnRWwsbz10LnB1dFNvcnRhYmxlO3RoaXMuc29ydGFibGUuY2FwdHVyZUFuaW1hdGlvblN0YXRlKCksbyYmby5jYXB0dXJlQW5pbWF0aW9uU3RhdGUoKTt2YXIgbj1nZXRDaGlsZCh0aGlzLnNvcnRhYmxlLmVsLHRoaXMuc3RhcnRJbmRleCx0aGlzLm9wdGlvbnMpO24/dGhpcy5zb3J0YWJsZS5lbC5pbnNlcnRCZWZvcmUoZSxuKTp0aGlzLnNvcnRhYmxlLmVsLmFwcGVuZENoaWxkKGUpLHRoaXMuc29ydGFibGUuYW5pbWF0ZUFsbCgpLG8mJm8uYW5pbWF0ZUFsbCgpfSxkcm9wOmRyb3B9LF9leHRlbmRzKFJldmVydCx7cGx1Z2luTmFtZTpcInJldmVydE9uU3BpbGxcIn0pLFJlbW92ZS5wcm90b3R5cGU9e29uU3BpbGw6ZnVuY3Rpb24odCl7dmFyIGU9dC5kcmFnRWwsbz10LnB1dFNvcnRhYmxlfHx0aGlzLnNvcnRhYmxlO28uY2FwdHVyZUFuaW1hdGlvblN0YXRlKCksZS5wYXJlbnROb2RlJiZlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZSksby5hbmltYXRlQWxsKCl9LGRyb3A6ZHJvcH0sX2V4dGVuZHMoUmVtb3ZlLHtwbHVnaW5OYW1lOlwicmVtb3ZlT25TcGlsbFwifSk7dmFyIGxhc3RNdWx0aURyYWdTZWxlY3QsbXVsdGlEcmFnU29ydGFibGUsZHJhZ0VsJDEsY2xvbmVzRnJvbVJlY3QsY2xvbmVzSGlkZGVuLG11bHRpRHJhZ0VsZW1lbnRzPVtdLG11bHRpRHJhZ0Nsb25lcz1bXSxpbml0aWFsRm9sZGluZz0hMSxmb2xkaW5nPSExLGRyYWdTdGFydGVkPSExO2Z1bmN0aW9uIE11bHRpRHJhZ1BsdWdpbigpe2Z1bmN0aW9uIHQodCl7Zm9yKHZhciBlIGluIHRoaXMpXCJfXCI9PT1lLmNoYXJBdCgwKSYmXCJmdW5jdGlvblwiPT10eXBlb2YgdGhpc1tlXSYmKHRoaXNbZV09dGhpc1tlXS5iaW5kKHRoaXMpKTt0Lm9wdGlvbnMuYXZvaWRJbXBsaWNpdERlc2VsZWN0fHwodC5vcHRpb25zLnN1cHBvcnRQb2ludGVyP29uKGRvY3VtZW50LFwicG9pbnRlcnVwXCIsdGhpcy5fZGVzZWxlY3RNdWx0aURyYWcpOihvbihkb2N1bWVudCxcIm1vdXNldXBcIix0aGlzLl9kZXNlbGVjdE11bHRpRHJhZyksb24oZG9jdW1lbnQsXCJ0b3VjaGVuZFwiLHRoaXMuX2Rlc2VsZWN0TXVsdGlEcmFnKSkpLG9uKGRvY3VtZW50LFwia2V5ZG93blwiLHRoaXMuX2NoZWNrS2V5RG93biksb24oZG9jdW1lbnQsXCJrZXl1cFwiLHRoaXMuX2NoZWNrS2V5VXApLHRoaXMuZGVmYXVsdHM9e3NlbGVjdGVkQ2xhc3M6XCJzb3J0YWJsZS1zZWxlY3RlZFwiLG11bHRpRHJhZ0tleTpudWxsLGF2b2lkSW1wbGljaXREZXNlbGVjdDohMSxzZXREYXRhOmZ1bmN0aW9uKGUsbyl7dmFyIG49XCJcIjttdWx0aURyYWdFbGVtZW50cy5sZW5ndGgmJm11bHRpRHJhZ1NvcnRhYmxlPT09dD9tdWx0aURyYWdFbGVtZW50cy5mb3JFYWNoKChmdW5jdGlvbih0LGUpe24rPShlP1wiLCBcIjpcIlwiKSt0LnRleHRDb250ZW50fSkpOm49by50ZXh0Q29udGVudCxlLnNldERhdGEoXCJUZXh0XCIsbil9fX1yZXR1cm4gdC5wcm90b3R5cGU9e211bHRpRHJhZ0tleURvd246ITEsaXNNdWx0aURyYWc6ITEsZGVsYXlTdGFydEdsb2JhbDpmdW5jdGlvbih0KXt2YXIgZT10LmRyYWdFbDtkcmFnRWwkMT1lfSxkZWxheUVuZGVkOmZ1bmN0aW9uKCl7dGhpcy5pc011bHRpRHJhZz1+bXVsdGlEcmFnRWxlbWVudHMuaW5kZXhPZihkcmFnRWwkMSl9LHNldHVwQ2xvbmU6ZnVuY3Rpb24odCl7dmFyIGU9dC5zb3J0YWJsZSxvPXQuY2FuY2VsO2lmKHRoaXMuaXNNdWx0aURyYWcpe2Zvcih2YXIgbj0wO248bXVsdGlEcmFnRWxlbWVudHMubGVuZ3RoO24rKyltdWx0aURyYWdDbG9uZXMucHVzaChjbG9uZShtdWx0aURyYWdFbGVtZW50c1tuXSkpLG11bHRpRHJhZ0Nsb25lc1tuXS5zb3J0YWJsZUluZGV4PW11bHRpRHJhZ0VsZW1lbnRzW25dLnNvcnRhYmxlSW5kZXgsbXVsdGlEcmFnQ2xvbmVzW25dLmRyYWdnYWJsZT0hMSxtdWx0aURyYWdDbG9uZXNbbl0uc3R5bGVbXCJ3aWxsLWNoYW5nZVwiXT1cIlwiLHRvZ2dsZUNsYXNzKG11bHRpRHJhZ0Nsb25lc1tuXSx0aGlzLm9wdGlvbnMuc2VsZWN0ZWRDbGFzcywhMSksbXVsdGlEcmFnRWxlbWVudHNbbl09PT1kcmFnRWwkMSYmdG9nZ2xlQ2xhc3MobXVsdGlEcmFnQ2xvbmVzW25dLHRoaXMub3B0aW9ucy5jaG9zZW5DbGFzcywhMSk7ZS5faGlkZUNsb25lKCksbygpfX0sY2xvbmU6ZnVuY3Rpb24odCl7dmFyIGU9dC5zb3J0YWJsZSxvPXQucm9vdEVsLG49dC5kaXNwYXRjaFNvcnRhYmxlRXZlbnQscj10LmNhbmNlbDt0aGlzLmlzTXVsdGlEcmFnJiYodGhpcy5vcHRpb25zLnJlbW92ZUNsb25lT25IaWRlfHxtdWx0aURyYWdFbGVtZW50cy5sZW5ndGgmJm11bHRpRHJhZ1NvcnRhYmxlPT09ZSYmKGluc2VydE11bHRpRHJhZ0Nsb25lcyghMCxvKSxuKFwiY2xvbmVcIikscigpKSl9LHNob3dDbG9uZTpmdW5jdGlvbih0KXt2YXIgZT10LmNsb25lTm93U2hvd24sbz10LnJvb3RFbCxuPXQuY2FuY2VsO3RoaXMuaXNNdWx0aURyYWcmJihpbnNlcnRNdWx0aURyYWdDbG9uZXMoITEsbyksbXVsdGlEcmFnQ2xvbmVzLmZvckVhY2goKGZ1bmN0aW9uKHQpe2Nzcyh0LFwiZGlzcGxheVwiLFwiXCIpfSkpLGUoKSxjbG9uZXNIaWRkZW49ITEsbigpKX0saGlkZUNsb25lOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMsbz0odC5zb3J0YWJsZSx0LmNsb25lTm93SGlkZGVuKSxuPXQuY2FuY2VsO3RoaXMuaXNNdWx0aURyYWcmJihtdWx0aURyYWdDbG9uZXMuZm9yRWFjaCgoZnVuY3Rpb24odCl7Y3NzKHQsXCJkaXNwbGF5XCIsXCJub25lXCIpLGUub3B0aW9ucy5yZW1vdmVDbG9uZU9uSGlkZSYmdC5wYXJlbnROb2RlJiZ0LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodCl9KSksbygpLGNsb25lc0hpZGRlbj0hMCxuKCkpfSxkcmFnU3RhcnRHbG9iYWw6ZnVuY3Rpb24odCl7dC5zb3J0YWJsZTshdGhpcy5pc011bHRpRHJhZyYmbXVsdGlEcmFnU29ydGFibGUmJm11bHRpRHJhZ1NvcnRhYmxlLm11bHRpRHJhZy5fZGVzZWxlY3RNdWx0aURyYWcoKSxtdWx0aURyYWdFbGVtZW50cy5mb3JFYWNoKChmdW5jdGlvbih0KXt0LnNvcnRhYmxlSW5kZXg9aW5kZXgodCl9KSksbXVsdGlEcmFnRWxlbWVudHM9bXVsdGlEcmFnRWxlbWVudHMuc29ydCgoZnVuY3Rpb24odCxlKXtyZXR1cm4gdC5zb3J0YWJsZUluZGV4LWUuc29ydGFibGVJbmRleH0pKSxkcmFnU3RhcnRlZD0hMH0sZHJhZ1N0YXJ0ZWQ6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcyxvPXQuc29ydGFibGU7aWYodGhpcy5pc011bHRpRHJhZyl7aWYodGhpcy5vcHRpb25zLnNvcnQmJihvLmNhcHR1cmVBbmltYXRpb25TdGF0ZSgpLHRoaXMub3B0aW9ucy5hbmltYXRpb24pKXttdWx0aURyYWdFbGVtZW50cy5mb3JFYWNoKChmdW5jdGlvbih0KXt0IT09ZHJhZ0VsJDEmJmNzcyh0LFwicG9zaXRpb25cIixcImFic29sdXRlXCIpfSkpO3ZhciBuPWdldFJlY3QoZHJhZ0VsJDEsITEsITAsITApO211bHRpRHJhZ0VsZW1lbnRzLmZvckVhY2goKGZ1bmN0aW9uKHQpe3QhPT1kcmFnRWwkMSYmc2V0UmVjdCh0LG4pfSkpLGZvbGRpbmc9ITAsaW5pdGlhbEZvbGRpbmc9ITB9by5hbmltYXRlQWxsKChmdW5jdGlvbigpe2ZvbGRpbmc9ITEsaW5pdGlhbEZvbGRpbmc9ITEsZS5vcHRpb25zLmFuaW1hdGlvbiYmbXVsdGlEcmFnRWxlbWVudHMuZm9yRWFjaCgoZnVuY3Rpb24odCl7dW5zZXRSZWN0KHQpfSkpLGUub3B0aW9ucy5zb3J0JiZyZW1vdmVNdWx0aURyYWdFbGVtZW50cygpfSkpfX0sZHJhZ092ZXI6ZnVuY3Rpb24odCl7dmFyIGU9dC50YXJnZXQsbz10LmNvbXBsZXRlZCxuPXQuY2FuY2VsO2ZvbGRpbmcmJn5tdWx0aURyYWdFbGVtZW50cy5pbmRleE9mKGUpJiYobyghMSksbigpKX0scmV2ZXJ0OmZ1bmN0aW9uKHQpe3ZhciBlPXQuZnJvbVNvcnRhYmxlLG89dC5yb290RWwsbj10LnNvcnRhYmxlLHI9dC5kcmFnUmVjdDttdWx0aURyYWdFbGVtZW50cy5sZW5ndGg+MSYmKG11bHRpRHJhZ0VsZW1lbnRzLmZvckVhY2goKGZ1bmN0aW9uKHQpe24uYWRkQW5pbWF0aW9uU3RhdGUoe3RhcmdldDp0LHJlY3Q6Zm9sZGluZz9nZXRSZWN0KHQpOnJ9KSx1bnNldFJlY3QodCksdC5mcm9tUmVjdD1yLGUucmVtb3ZlQW5pbWF0aW9uU3RhdGUodCl9KSksZm9sZGluZz0hMSxpbnNlcnRNdWx0aURyYWdFbGVtZW50cyghdGhpcy5vcHRpb25zLnJlbW92ZUNsb25lT25IaWRlLG8pKX0sZHJhZ092ZXJDb21wbGV0ZWQ6ZnVuY3Rpb24odCl7dmFyIGU9dC5zb3J0YWJsZSxvPXQuaXNPd25lcixuPXQuaW5zZXJ0aW9uLHI9dC5hY3RpdmVTb3J0YWJsZSxsPXQucGFyZW50RWwsYT10LnB1dFNvcnRhYmxlLGk9dGhpcy5vcHRpb25zO2lmKG4pe2lmKG8mJnIuX2hpZGVDbG9uZSgpLGluaXRpYWxGb2xkaW5nPSExLGkuYW5pbWF0aW9uJiZtdWx0aURyYWdFbGVtZW50cy5sZW5ndGg+MSYmKGZvbGRpbmd8fCFvJiYhci5vcHRpb25zLnNvcnQmJiFhKSl7dmFyIHM9Z2V0UmVjdChkcmFnRWwkMSwhMSwhMCwhMCk7bXVsdGlEcmFnRWxlbWVudHMuZm9yRWFjaCgoZnVuY3Rpb24odCl7dCE9PWRyYWdFbCQxJiYoc2V0UmVjdCh0LHMpLGwuYXBwZW5kQ2hpbGQodCkpfSkpLGZvbGRpbmc9ITB9aWYoIW8paWYoZm9sZGluZ3x8cmVtb3ZlTXVsdGlEcmFnRWxlbWVudHMoKSxtdWx0aURyYWdFbGVtZW50cy5sZW5ndGg+MSl7dmFyIGM9Y2xvbmVzSGlkZGVuO3IuX3Nob3dDbG9uZShlKSxyLm9wdGlvbnMuYW5pbWF0aW9uJiYhY2xvbmVzSGlkZGVuJiZjJiZtdWx0aURyYWdDbG9uZXMuZm9yRWFjaCgoZnVuY3Rpb24odCl7ci5hZGRBbmltYXRpb25TdGF0ZSh7dGFyZ2V0OnQscmVjdDpjbG9uZXNGcm9tUmVjdH0pLHQuZnJvbVJlY3Q9Y2xvbmVzRnJvbVJlY3QsdC50aGlzQW5pbWF0aW9uRHVyYXRpb249bnVsbH0pKX1lbHNlIHIuX3Nob3dDbG9uZShlKX19LGRyYWdPdmVyQW5pbWF0aW9uQ2FwdHVyZTpmdW5jdGlvbih0KXt2YXIgZT10LmRyYWdSZWN0LG89dC5pc093bmVyLG49dC5hY3RpdmVTb3J0YWJsZTtpZihtdWx0aURyYWdFbGVtZW50cy5mb3JFYWNoKChmdW5jdGlvbih0KXt0LnRoaXNBbmltYXRpb25EdXJhdGlvbj1udWxsfSkpLG4ub3B0aW9ucy5hbmltYXRpb24mJiFvJiZuLm11bHRpRHJhZy5pc011bHRpRHJhZyl7Y2xvbmVzRnJvbVJlY3Q9X2V4dGVuZHMoe30sZSk7dmFyIHI9bWF0cml4KGRyYWdFbCQxLCEwKTtjbG9uZXNGcm9tUmVjdC50b3AtPXIuZixjbG9uZXNGcm9tUmVjdC5sZWZ0LT1yLmV9fSxkcmFnT3ZlckFuaW1hdGlvbkNvbXBsZXRlOmZ1bmN0aW9uKCl7Zm9sZGluZyYmKGZvbGRpbmc9ITEscmVtb3ZlTXVsdGlEcmFnRWxlbWVudHMoKSl9LGRyb3A6ZnVuY3Rpb24odCl7dmFyIGU9dC5vcmlnaW5hbEV2ZW50LG89dC5yb290RWwsbj10LnBhcmVudEVsLHI9dC5zb3J0YWJsZSxsPXQuZGlzcGF0Y2hTb3J0YWJsZUV2ZW50LGE9dC5vbGRJbmRleCxpPXQucHV0U29ydGFibGUscz1pfHx0aGlzLnNvcnRhYmxlO2lmKGUpe3ZhciBjPXRoaXMub3B0aW9ucyxkPW4uY2hpbGRyZW47aWYoIWRyYWdTdGFydGVkKWlmKGMubXVsdGlEcmFnS2V5JiYhdGhpcy5tdWx0aURyYWdLZXlEb3duJiZ0aGlzLl9kZXNlbGVjdE11bHRpRHJhZygpLHRvZ2dsZUNsYXNzKGRyYWdFbCQxLGMuc2VsZWN0ZWRDbGFzcywhfm11bHRpRHJhZ0VsZW1lbnRzLmluZGV4T2YoZHJhZ0VsJDEpKSx+bXVsdGlEcmFnRWxlbWVudHMuaW5kZXhPZihkcmFnRWwkMSkpbXVsdGlEcmFnRWxlbWVudHMuc3BsaWNlKG11bHRpRHJhZ0VsZW1lbnRzLmluZGV4T2YoZHJhZ0VsJDEpLDEpLGxhc3RNdWx0aURyYWdTZWxlY3Q9bnVsbCxkaXNwYXRjaEV2ZW50KHtzb3J0YWJsZTpyLHJvb3RFbDpvLG5hbWU6XCJkZXNlbGVjdFwiLHRhcmdldEVsOmRyYWdFbCQxLG9yaWdpbmFsRXZlbnQ6ZX0pO2Vsc2V7aWYobXVsdGlEcmFnRWxlbWVudHMucHVzaChkcmFnRWwkMSksZGlzcGF0Y2hFdmVudCh7c29ydGFibGU6cixyb290RWw6byxuYW1lOlwic2VsZWN0XCIsdGFyZ2V0RWw6ZHJhZ0VsJDEsb3JpZ2luYWxFdmVudDplfSksZS5zaGlmdEtleSYmbGFzdE11bHRpRHJhZ1NlbGVjdCYmci5lbC5jb250YWlucyhsYXN0TXVsdGlEcmFnU2VsZWN0KSl7dmFyIHUsZyxoPWluZGV4KGxhc3RNdWx0aURyYWdTZWxlY3QpLHA9aW5kZXgoZHJhZ0VsJDEpO2lmKH5oJiZ+cCYmaCE9PXApZm9yKHA+aD8oZz1oLHU9cCk6KGc9cCx1PWgrMSk7Zzx1O2crKyl+bXVsdGlEcmFnRWxlbWVudHMuaW5kZXhPZihkW2ddKXx8KHRvZ2dsZUNsYXNzKGRbZ10sYy5zZWxlY3RlZENsYXNzLCEwKSxtdWx0aURyYWdFbGVtZW50cy5wdXNoKGRbZ10pLGRpc3BhdGNoRXZlbnQoe3NvcnRhYmxlOnIscm9vdEVsOm8sbmFtZTpcInNlbGVjdFwiLHRhcmdldEVsOmRbZ10sb3JpZ2luYWxFdmVudDplfSkpfWVsc2UgbGFzdE11bHRpRHJhZ1NlbGVjdD1kcmFnRWwkMTttdWx0aURyYWdTb3J0YWJsZT1zfWlmKGRyYWdTdGFydGVkJiZ0aGlzLmlzTXVsdGlEcmFnKXtpZihmb2xkaW5nPSExLChuW2V4cGFuZG9dLm9wdGlvbnMuc29ydHx8biE9PW8pJiZtdWx0aURyYWdFbGVtZW50cy5sZW5ndGg+MSl7dmFyIGY9Z2V0UmVjdChkcmFnRWwkMSksbT1pbmRleChkcmFnRWwkMSxcIjpub3QoLlwiK3RoaXMub3B0aW9ucy5zZWxlY3RlZENsYXNzK1wiKVwiKTtpZighaW5pdGlhbEZvbGRpbmcmJmMuYW5pbWF0aW9uJiYoZHJhZ0VsJDEudGhpc0FuaW1hdGlvbkR1cmF0aW9uPW51bGwpLHMuY2FwdHVyZUFuaW1hdGlvblN0YXRlKCksIWluaXRpYWxGb2xkaW5nJiYoYy5hbmltYXRpb24mJihkcmFnRWwkMS5mcm9tUmVjdD1mLG11bHRpRHJhZ0VsZW1lbnRzLmZvckVhY2goKGZ1bmN0aW9uKHQpe2lmKHQudGhpc0FuaW1hdGlvbkR1cmF0aW9uPW51bGwsdCE9PWRyYWdFbCQxKXt2YXIgZT1mb2xkaW5nP2dldFJlY3QodCk6Zjt0LmZyb21SZWN0PWUscy5hZGRBbmltYXRpb25TdGF0ZSh7dGFyZ2V0OnQscmVjdDplfSl9fSkpKSxyZW1vdmVNdWx0aURyYWdFbGVtZW50cygpLG11bHRpRHJhZ0VsZW1lbnRzLmZvckVhY2goKGZ1bmN0aW9uKHQpe2RbbV0/bi5pbnNlcnRCZWZvcmUodCxkW21dKTpuLmFwcGVuZENoaWxkKHQpLG0rK30pKSxhPT09aW5kZXgoZHJhZ0VsJDEpKSl7dmFyIHY9ITE7bXVsdGlEcmFnRWxlbWVudHMuZm9yRWFjaCgoZnVuY3Rpb24odCl7dC5zb3J0YWJsZUluZGV4PT09aW5kZXgodCl8fCh2PSEwKX0pKSx2JiZsKFwidXBkYXRlXCIpfW11bHRpRHJhZ0VsZW1lbnRzLmZvckVhY2goKGZ1bmN0aW9uKHQpe3Vuc2V0UmVjdCh0KX0pKSxzLmFuaW1hdGVBbGwoKX1tdWx0aURyYWdTb3J0YWJsZT1zfShvPT09bnx8aSYmXCJjbG9uZVwiIT09aS5sYXN0UHV0TW9kZSkmJm11bHRpRHJhZ0Nsb25lcy5mb3JFYWNoKChmdW5jdGlvbih0KXt0LnBhcmVudE5vZGUmJnQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0KX0pKX19LG51bGxpbmdHbG9iYWw6ZnVuY3Rpb24oKXt0aGlzLmlzTXVsdGlEcmFnPWRyYWdTdGFydGVkPSExLG11bHRpRHJhZ0Nsb25lcy5sZW5ndGg9MH0sZGVzdHJveUdsb2JhbDpmdW5jdGlvbigpe3RoaXMuX2Rlc2VsZWN0TXVsdGlEcmFnKCksb2ZmKGRvY3VtZW50LFwicG9pbnRlcnVwXCIsdGhpcy5fZGVzZWxlY3RNdWx0aURyYWcpLG9mZihkb2N1bWVudCxcIm1vdXNldXBcIix0aGlzLl9kZXNlbGVjdE11bHRpRHJhZyksb2ZmKGRvY3VtZW50LFwidG91Y2hlbmRcIix0aGlzLl9kZXNlbGVjdE11bHRpRHJhZyksb2ZmKGRvY3VtZW50LFwia2V5ZG93blwiLHRoaXMuX2NoZWNrS2V5RG93biksb2ZmKGRvY3VtZW50LFwia2V5dXBcIix0aGlzLl9jaGVja0tleVVwKX0sX2Rlc2VsZWN0TXVsdGlEcmFnOmZ1bmN0aW9uKHQpe2lmKCEodm9pZCAwIT09ZHJhZ1N0YXJ0ZWQmJmRyYWdTdGFydGVkfHxtdWx0aURyYWdTb3J0YWJsZSE9PXRoaXMuc29ydGFibGV8fHQmJmNsb3Nlc3QodC50YXJnZXQsdGhpcy5vcHRpb25zLmRyYWdnYWJsZSx0aGlzLnNvcnRhYmxlLmVsLCExKXx8dCYmMCE9PXQuYnV0dG9uKSlmb3IoO211bHRpRHJhZ0VsZW1lbnRzLmxlbmd0aDspe3ZhciBlPW11bHRpRHJhZ0VsZW1lbnRzWzBdO3RvZ2dsZUNsYXNzKGUsdGhpcy5vcHRpb25zLnNlbGVjdGVkQ2xhc3MsITEpLG11bHRpRHJhZ0VsZW1lbnRzLnNoaWZ0KCksZGlzcGF0Y2hFdmVudCh7c29ydGFibGU6dGhpcy5zb3J0YWJsZSxyb290RWw6dGhpcy5zb3J0YWJsZS5lbCxuYW1lOlwiZGVzZWxlY3RcIix0YXJnZXRFbDplLG9yaWdpbmFsRXZlbnQ6dH0pfX0sX2NoZWNrS2V5RG93bjpmdW5jdGlvbih0KXt0LmtleT09PXRoaXMub3B0aW9ucy5tdWx0aURyYWdLZXkmJih0aGlzLm11bHRpRHJhZ0tleURvd249ITApfSxfY2hlY2tLZXlVcDpmdW5jdGlvbih0KXt0LmtleT09PXRoaXMub3B0aW9ucy5tdWx0aURyYWdLZXkmJih0aGlzLm11bHRpRHJhZ0tleURvd249ITEpfX0sX2V4dGVuZHModCx7cGx1Z2luTmFtZTpcIm11bHRpRHJhZ1wiLHV0aWxzOntzZWxlY3Q6ZnVuY3Rpb24odCl7dmFyIGU9dC5wYXJlbnROb2RlW2V4cGFuZG9dO2UmJmUub3B0aW9ucy5tdWx0aURyYWcmJiF+bXVsdGlEcmFnRWxlbWVudHMuaW5kZXhPZih0KSYmKG11bHRpRHJhZ1NvcnRhYmxlJiZtdWx0aURyYWdTb3J0YWJsZSE9PWUmJihtdWx0aURyYWdTb3J0YWJsZS5tdWx0aURyYWcuX2Rlc2VsZWN0TXVsdGlEcmFnKCksbXVsdGlEcmFnU29ydGFibGU9ZSksdG9nZ2xlQ2xhc3ModCxlLm9wdGlvbnMuc2VsZWN0ZWRDbGFzcywhMCksbXVsdGlEcmFnRWxlbWVudHMucHVzaCh0KSl9LGRlc2VsZWN0OmZ1bmN0aW9uKHQpe3ZhciBlPXQucGFyZW50Tm9kZVtleHBhbmRvXSxvPW11bHRpRHJhZ0VsZW1lbnRzLmluZGV4T2YodCk7ZSYmZS5vcHRpb25zLm11bHRpRHJhZyYmfm8mJih0b2dnbGVDbGFzcyh0LGUub3B0aW9ucy5zZWxlY3RlZENsYXNzLCExKSxtdWx0aURyYWdFbGVtZW50cy5zcGxpY2UobywxKSl9fSxldmVudFByb3BlcnRpZXM6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLGU9W10sbz1bXTtyZXR1cm4gbXVsdGlEcmFnRWxlbWVudHMuZm9yRWFjaCgoZnVuY3Rpb24obil7dmFyIHI7ZS5wdXNoKHttdWx0aURyYWdFbGVtZW50Om4saW5kZXg6bi5zb3J0YWJsZUluZGV4fSkscj1mb2xkaW5nJiZuIT09ZHJhZ0VsJDE/LTE6Zm9sZGluZz9pbmRleChuLFwiOm5vdCguXCIrdC5vcHRpb25zLnNlbGVjdGVkQ2xhc3MrXCIpXCIpOmluZGV4KG4pLG8ucHVzaCh7bXVsdGlEcmFnRWxlbWVudDpuLGluZGV4OnJ9KX0pKSx7aXRlbXM6X3RvQ29uc3VtYWJsZUFycmF5KG11bHRpRHJhZ0VsZW1lbnRzKSxjbG9uZXM6W10uY29uY2F0KG11bHRpRHJhZ0Nsb25lcyksb2xkSW5kaWNpZXM6ZSxuZXdJbmRpY2llczpvfX0sb3B0aW9uTGlzdGVuZXJzOnttdWx0aURyYWdLZXk6ZnVuY3Rpb24odCl7cmV0dXJuXCJjdHJsXCI9PT0odD10LnRvTG93ZXJDYXNlKCkpP3Q9XCJDb250cm9sXCI6dC5sZW5ndGg+MSYmKHQ9dC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSt0LnN1YnN0cigxKSksdH19fSl9ZnVuY3Rpb24gaW5zZXJ0TXVsdGlEcmFnRWxlbWVudHModCxlKXttdWx0aURyYWdFbGVtZW50cy5mb3JFYWNoKChmdW5jdGlvbihvLG4pe3ZhciByPWUuY2hpbGRyZW5bby5zb3J0YWJsZUluZGV4Kyh0P051bWJlcihuKTowKV07cj9lLmluc2VydEJlZm9yZShvLHIpOmUuYXBwZW5kQ2hpbGQobyl9KSl9ZnVuY3Rpb24gaW5zZXJ0TXVsdGlEcmFnQ2xvbmVzKHQsZSl7bXVsdGlEcmFnQ2xvbmVzLmZvckVhY2goKGZ1bmN0aW9uKG8sbil7dmFyIHI9ZS5jaGlsZHJlbltvLnNvcnRhYmxlSW5kZXgrKHQ/TnVtYmVyKG4pOjApXTtyP2UuaW5zZXJ0QmVmb3JlKG8scik6ZS5hcHBlbmRDaGlsZChvKX0pKX1mdW5jdGlvbiByZW1vdmVNdWx0aURyYWdFbGVtZW50cygpe211bHRpRHJhZ0VsZW1lbnRzLmZvckVhY2goKGZ1bmN0aW9uKHQpe3QhPT1kcmFnRWwkMSYmdC5wYXJlbnROb2RlJiZ0LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodCl9KSl9U29ydGFibGUubW91bnQobmV3IEF1dG9TY3JvbGxQbHVnaW4pLFNvcnRhYmxlLm1vdW50KFJlbW92ZSxSZXZlcnQpLFNvcnRhYmxlLm1vdW50KG5ldyBTd2FwUGx1Z2luKSxTb3J0YWJsZS5tb3VudChuZXcgTXVsdGlEcmFnUGx1Z2luKTtleHBvcnQgZGVmYXVsdCBTb3J0YWJsZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNvcnRhYmxlanMuYnVuZGxlLmpzLm1hcFxuIiwiaW1wb3J0IFNvcnRhYmxlIGZyb20gJy4uL2FkbWluLXRoZW1lL3BsdWdpbnMvY3VzdG9tL3NvcnRhYmxlanMvc29ydGFibGVqcy5idW5kbGUuanMnO1xuXG5cbmxldCBjb250YWluZXJzID0gbnVsbDtcbmxldCBkcm9wem9uZXMgPSBudWxsO1xubGV0IGNvbnRlbnRUeXBlTGlzdCA9IG51bGw7XG5sZXQgQ01TUm91dGluZyA9IGF3YWl0IENNU0FkbWluLmdldFJvdXRpbmcoKTtcbmxldCBhZGRCbG9ja1VybCA9IENNU1JvdXRpbmcuZ2VuZXJhdGUoJ2FkbWluX25ldHdvcmtpbmdfaW5pdGNtc19sYXlvdXRibG9ja19jcmVhdGUnKTtcbmxldCBzb3J0VXJsID0gQ01TUm91dGluZy5nZW5lcmF0ZSgnYWRtaW5fbmV0d29ya2luZ19pbml0Y21zX2xheW91dGJsb2NrX3VwZGF0ZUxheW91dEJsb2NrU29ydCcpO1xubGV0IGRlbGV0ZVVybCA9IENNU1JvdXRpbmcuZ2VuZXJhdGUoJ2FkbWluX25ldHdvcmtpbmdfaW5pdGNtc19sYXlvdXRibG9ja19kZWxldGVBamF4Jyk7XG5sZXQgbGFzdFRyYW5zbGF0aW9uU2V0dGluZ3NIdG1sID0gbnVsbDtcbmxldCBwYWdlSWQgPSBudWxsO1xuXG5mdW5jdGlvbiBpbml0RHJvcFpvbmUoKSB7XG5cblxuICAgIGlmIChjb250YWluZXJzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgbGV0IGNvbnRlbnRJdGVtcyA9IG5ldyBTb3J0YWJsZShjb250ZW50VHlwZUxpc3QsIHtcbiAgICAgICAgZ3JvdXA6IHtuYW1lOiAnc2hhcmVkJywgcHVsbDogJ2Nsb25lJywgcHV0OiBmYWxzZX0sXG4gICAgICAgIG9uRW5kOiBmdW5jdGlvbiAoLyoqRXZlbnQqL2V2dCkge1xuICAgICAgICAgICAgZXZ0LnRvLmNsYXNzTGlzdC5yZW1vdmUoJ2JnLWxpZ2h0LXByaW1hcnknKVxuICAgICAgICB9LFxuICAgICAgICBvbkNoYW5nZTogZnVuY3Rpb24gKC8qKkV2ZW50Ki9ldnQpIHtcbiAgICAgICAgICAgIGV2dC50by5jbGFzc0xpc3QuYWRkKCdiZy1saWdodC1wcmltYXJ5JylcbiAgICAgICAgfVxuICAgIH0pXG5cbiAgICBjb250YWluZXJzLmZvckVhY2goZnVuY3Rpb24gKGNvbnRhaW5lcikge1xuXG4gICAgICAgIGxldCBzd2FwcGFibGUgPSBuZXcgU29ydGFibGUoY29udGFpbmVyLCB7XG4gICAgICAgICAgICBncm91cDoge25hbWU6ICdzaGFyZWQnLCBwdWxsOiB0cnVlLCBwdXQ6IGFjY2VwdExheW91dEJsb2NrfSxcbiAgICAgICAgICAgIGFuaW1hdGlvbjogMTUwLFxuICAgICAgICAgICAgb25FbmQ6IGZ1bmN0aW9uICgvKipFdmVudCovZXZ0KSB7XG4gICAgICAgICAgICAgICAgc2F2ZUxheW91dEJsb2NrU29ydChldnQsIChyZXNwb25zZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBDTVNBZG1pbi5jcmVhdGVJbml0Q21zTWVzc2FnZUJveChyZXNwb25zZS5kYXRhLm1lc3NhZ2VTdGF0dXMsIHJlc3BvbnNlLmRhdGEubWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvbkFkZDogZnVuY3Rpb24gKC8qKkN1c3RvbUV2ZW50Ki9ldnQsIGRyYWdFbCkge1xuXG4gICAgICAgICAgICAgICAgbGV0IGNvdW50ID0gZXZ0LnRvLnF1ZXJ5U2VsZWN0b3JBbGwoJy5kcmFnZ2FibGUnKS5sZW5ndGg7XG4gICAgICAgICAgICAgICAgbGV0IGl0ZW0gPSBldnQuaXRlbTtcblxuICAgICAgICAgICAgICAgIGlmICghaXRlbS5pZCkge1xuXG4gICAgICAgICAgICAgICAgICAgIGxldCBkcm9wem9uZSA9IGNvbnRhaW5lci5wYXJlbnRFbGVtZW50XG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZUl0ZW0oaXRlbS5kYXRhc2V0LmNvbnRlbnRUeXBlLCBkcm9wem9uZS5kYXRhc2V0LnBhZ2VJZCwgZHJvcHpvbmUuZGF0YXNldC56b25lLCBldnQubmV3SW5kZXggLSAxKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5vdXRlckhUTUwgPSByZXNwb25zZS5kYXRhLmh0bWxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBDTVNBZG1pbi5jcmVhdGVJbml0Q21zTWVzc2FnZUJveChyZXNwb25zZS5kYXRhLm1lc3NhZ2VTdGF0dXMsIHJlc3BvbnNlLmRhdGEubWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2F2ZUxheW91dEJsb2NrU29ydChldnQsIChyZXNwb25zZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDTVNBZG1pbi5jcmVhdGVJbml0Q21zTWVzc2FnZUJveChyZXNwb25zZS5kYXRhLm1lc3NhZ2VTdGF0dXMsIHJlc3BvbnNlLmRhdGEubWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgbWVzc2FnZSA9IGVycm9yLnJlc3BvbnNlLmRhdGEuZGV0YWlsXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBDTVNBZG1pbi5jcmVhdGVJbml0Q21zTWVzc2FnZUJveCgnZXJyb3InLCBtZXNzYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGNvdW50KSB7XG4gICAgICAgICAgICAgICAgICAgIGV2dC50by5xdWVyeVNlbGVjdG9yKCcuZW1wdHlfbGF5b3V0X2Jsb2NrJykuY2xhc3NMaXN0LmFkZChcImQtbm9uZVwiKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBldnQudG8ucXVlcnlTZWxlY3RvcignLmVtcHR5X2xheW91dF9ibG9jaycpLmNsYXNzTGlzdC5yZW1vdmUoXCJkLW5vbmVcIilcblxuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb25SZW1vdmU6IGZ1bmN0aW9uICgvKipFdmVudCovZXZ0KSB7XG4gICAgICAgICAgICAgICAgbGV0IGNvdW50ID0gZXZ0LmZyb20ucXVlcnlTZWxlY3RvckFsbCgnLmRyYWdnYWJsZScpLmxlbmd0aDtcbiAgICAgICAgICAgICAgICBpZiAoY291bnQpIHtcbiAgICAgICAgICAgICAgICAgICAgZXZ0LmZyb20ucXVlcnlTZWxlY3RvcignLmVtcHR5X2xheW91dF9ibG9jaycpLmNsYXNzTGlzdC5hZGQoXCJkLW5vbmVcIilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZXZ0LmZyb20ucXVlcnlTZWxlY3RvcignLmVtcHR5X2xheW91dF9ibG9jaycpLmNsYXNzTGlzdC5yZW1vdmUoXCJkLW5vbmVcIilcblxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KVxufVxuXG5sZXQgYWNjZXB0TGF5b3V0QmxvY2sgPSAodG8sIGZyb20sIGRyYWdFbCkgPT4ge1xuICAgIGxldCBjb250YWluZXIgPSB0by5lbFxuICAgIGxldCBjb250ZW50QmxvY2sgPSBkcmFnRWxcbiAgICBsZXQgY29udGVudFR5cGVzID0gSlNPTi5wYXJzZShjb250YWluZXIuZGF0YXNldC5jb250ZW50VHlwZXMpO1xuICAgIGlmIChjb250ZW50VHlwZXMubGVuZ3RoID4gMCkge1xuICAgICAgICBpZiAoIWNvbnRlbnRUeXBlcy5pbmNsdWRlcyhjb250ZW50QmxvY2suZGF0YXNldC5jb250ZW50VHlwZSkpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgbGV0IG1heEl0ZW1zID0gY29udGFpbmVyLmRhdGFzZXQubWF4SXRlbXM7XG5cbiAgICBsZXQgY291bnQgPSBjb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLmRyYWdnYWJsZScpLmxlbmd0aDtcblxuICAgIGlmIChtYXhJdGVtcyA+IDApIHtcbiAgICAgICAgaWYgKGNvdW50ID49IG1heEl0ZW1zKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0cnVlXG59XG5cbmxldCBzYXZlTGF5b3V0QmxvY2tTb3J0ID0gKGV2ZW50LCBjYWxsYmFjaykgPT4ge1xuICAgIC8vIENNU0FkbWluLmNyZWF0ZUluaXRDbXNNZXNzYWdlQm94KHhoci5tZXNzYWdlU3RhdHVzLCB4aHIubWVzc2FnZSk7XG5cbiAgICBsZXQgem9uZXMgPSBbXTtcbiAgICBsZXQgcGFnZUlkID0gbnVsbDtcbiAgICBsZXQgYWRtaW5Db2RlID0gbnVsbDtcblxuICAgIGRyb3B6b25lcy5mb3JFYWNoKGZ1bmN0aW9uIChkcm9wem9uZSkge1xuICAgICAgICBsZXQgbGF5b3V0QmxvY2tzID0gZHJvcHpvbmUucXVlcnlTZWxlY3RvckFsbChcIi5kcmFnZ2FibGVcIik7XG4gICAgICAgIGxldCBhZGRCdXR0b25zID0gZHJvcHpvbmUucXVlcnlTZWxlY3RvckFsbChcIi5hZGQtbGF5b3V0XCIpO1xuICAgICAgICBsZXQgem9uZSA9IGRyb3B6b25lLmRhdGFzZXQuem9uZVxuXG4gICAgICAgIGlmICghcGFnZUlkKSB7XG4gICAgICAgICAgICBwYWdlSWQgPSBkcm9wem9uZS5kYXRhc2V0LnBhZ2VJZFxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFhZG1pbkNvZGUpIHtcbiAgICAgICAgICAgIGFkbWluQ29kZSA9IGRyb3B6b25lLmRhdGFzZXQuYWRtaW5Db2RlXG4gICAgICAgIH1cblxuICAgICAgICBhZGRCdXR0b25zLmZvckVhY2goZnVuY3Rpb24gKGFkZEJ1dHRvbiwgaW5kZXgpIHtcbiAgICAgICAgICAgIGFkZEJ1dHRvbi5kYXRhc2V0LnpvbmUgPSB6b25lO1xuICAgICAgICAgICAgYWRkQnV0dG9uLmRhdGFzZXQuc29ydE9yZGVyID0gaW5kZXg7XG4gICAgICAgIH0pXG5cbiAgICAgICAgbGV0IGxheW91dEJsb2NrSWRzID0gW107XG5cbiAgICAgICAgbGF5b3V0QmxvY2tzLmZvckVhY2goZnVuY3Rpb24gKGxheW91dEJsb2NrLCBpbmRleCkge1xuICAgICAgICAgICAgbGF5b3V0QmxvY2tJZHMucHVzaChsYXlvdXRCbG9jay5pZCk7XG4gICAgICAgIH0pXG4gICAgICAgIHpvbmVzLnB1c2goe1xuICAgICAgICAgICAgem9uZTogem9uZSxcbiAgICAgICAgICAgIGxheW91dEJsb2NrczogbGF5b3V0QmxvY2tJZHNcbiAgICAgICAgfSlcbiAgICB9KVxuXG4gICAgc3VibWl0TGF5b3V0U29ydCh6b25lcywgcGFnZUlkLCBhZG1pbkNvZGUpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG5cbiAgICAgICAgbGV0IGV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KCdwYWdlLXVwZGF0ZWQnKVxuICAgICAgICBkb2N1bWVudC5ib2R5LmRpc3BhdGNoRXZlbnQoZXZlbnQpXG4gICAgICAgIGlmIChjYWxsYmFjayAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjYWxsYmFjayhyZXNwb25zZSlcbiAgICAgICAgfVxuICAgIH0pXG5cbn07XG5cbmxldCBjcmVhdGVJdGVtID0gYXN5bmMgKGNvbnRlbnRUeXBlLCBwYWdlSWQsIHpvbmUsIHNvcnRPcmRlcikgPT4ge1xuXG4gICAgcmV0dXJuIGF3YWl0IGF4aW9zLnBvc3QoYWRkQmxvY2tVcmwgKyAnP3N1YmNsYXNzPScgKyBjb250ZW50VHlwZSwge1xuICAgICAgICB6b25lOiB6b25lLFxuICAgICAgICBwYWdlSWQ6IHBhZ2VJZCxcbiAgICAgICAgc29ydE9yZGVyOiBzb3J0T3JkZXJcbiAgICB9LCBheGlvc0NvbmZpZylcbn1cblxubGV0IHN1Ym1pdExheW91dFNvcnQgPSBhc3luYyAoem9uZXMsIHBhZ2VJZCwgYWRtaW5Db2RlKSA9PiB7XG4gICAgcmV0dXJuIGF3YWl0IGF4aW9zLnBvc3Qoc29ydFVybCwge1xuICAgICAgICB6b25lczogem9uZXMsXG4gICAgICAgIHBhZ2VJZDogcGFnZUlkLFxuICAgICAgICBjb2RlOiBhZG1pbkNvZGUsXG4gICAgfSwgYXhpb3NDb25maWcpXG59XG5sZXQgZWRpdEJsb2NrID0gKGUpID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgbGV0IGVsID0gZS50YXJnZXQ7XG5cbiAgICBpZiAoZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdmYS1wZW4tdG8tc3F1YXJlJykpIHtcbiAgICAgICAgZWwgPSBlbC5wYXJlbnRFbGVtZW50XG4gICAgfVxuXG4gICAgbGV0IGlkID0gZWwuZGF0YXNldC52YWx1ZVxuXG5cbiAgICBsZXQgbGF5b3V0QmxvY2sgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGF5b3V0QmxvY2tfJyArIGlkKVxuICAgIGxheW91dEJsb2NrLnF1ZXJ5U2VsZWN0b3IoJy5lZGl0X2Jsb2NrJykuc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsIHRydWUpXG4gICAgbGF5b3V0QmxvY2sucXVlcnlTZWxlY3RvcignLmRlbGV0ZV9ibG9jaycpLnNldEF0dHJpYnV0ZSgnZGlzYWJsZWQnLCB0cnVlKVxuXG4gICAgbGV0IGVkaXRVcmwgPSBDTVNSb3V0aW5nLmdlbmVyYXRlKCdhZG1pbl9uZXR3b3JraW5nX2luaXRjbXNfbGF5b3V0YmxvY2tfZWRpdCcsIHtpZDogaWR9KVxuICAgIGxldCBkaXNwbGF5QmxvY2sgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGF5b3V0QmxvY2tIdG1sJyArIGlkKVxuICAgIGxldCBlZGl0QmxvY2sgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZWRpdEJsb2NrSHRtbCcgKyBpZClcblxuICAgIGF4aW9zLmdldChlZGl0VXJsLCBheGlvc0NvbmZpZykudGhlbigocmVzcG9uc2UpID0+IHtcbiAgICAgICAgZWRpdEJsb2NrLmlubmVySFRNTCA9IHJlc3BvbnNlLmRhdGEuaHRtbFxuICAgICAgICBkaXNwbGF5QmxvY2suY2xhc3NMaXN0LmFkZCgnZC1ub25lJylcbiAgICAgICAgZWRpdEJsb2NrLmNsYXNzTGlzdC5yZW1vdmUoJ2Qtbm9uZScpXG4gICAgICAgIGRvY3VtZW50LmJvZHkuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoJ2ZpZWxkczphZGRlZCcpKVxuICAgIH0pLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICBsZXQgbWVzc2FnZSA9IGVycm9yLnJlc3BvbnNlLmRhdGEuZGV0YWlsXG4gICAgICAgIENNU0FkbWluLmNyZWF0ZUluaXRDbXNNZXNzYWdlQm94KCdlcnJvcicsIG1lc3NhZ2UpO1xuICAgIH0pXG59XG5cbmxldCBjYW5jZWxFZGl0QmxvY2sgPSAoZSkgPT4ge1xuICAgIGxldCBpZCA9IGUudGFyZ2V0LmRhdGFzZXQudmFsdWVcbiAgICBsZXQgZGlzcGxheUJsb2NrID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xheW91dEJsb2NrSHRtbCcgKyBpZClcbiAgICBsZXQgZWRpdEJsb2NrID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VkaXRCbG9ja0h0bWwnICsgaWQpXG4gICAgbGV0IGxheW91dEJsb2NrID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xheW91dEJsb2NrXycgKyBpZClcbiAgICBsYXlvdXRCbG9jay5xdWVyeVNlbGVjdG9yKCcuZWRpdF9ibG9jaycpLnJlbW92ZUF0dHJpYnV0ZSgnZGlzYWJsZWQnKVxuICAgIGxheW91dEJsb2NrLnF1ZXJ5U2VsZWN0b3IoJy5kZWxldGVfYmxvY2snKS5yZW1vdmVBdHRyaWJ1dGUoJ2Rpc2FibGVkJylcbiAgICBlZGl0QmxvY2suY2xhc3NMaXN0LmFkZCgnZC1ub25lJylcbiAgICBlZGl0QmxvY2suaW5uZXJIVE1MID0gJydcbiAgICBkaXNwbGF5QmxvY2suY2xhc3NMaXN0LnJlbW92ZSgnZC1ub25lJylcblxufVxuXG5sZXQgc2F2ZUxheW91dEJsb2NrID0gKGUpID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgbGV0IGZvcm0gPSBlLnRhcmdldC5jbG9zZXN0KCdmb3JtJylcbiAgICBsZXQgY29uZmlnID0ge1xuICAgICAgICB1cmw6IGZvcm0uYWN0aW9uLFxuICAgICAgICBtZXRob2Q6IGZvcm0ubWV0aG9kLFxuICAgICAgICBkYXRhOiBuZXcgRm9ybURhdGEoZm9ybSksXG4gICAgICAgIC4uLmF4aW9zQ29uZmlnXG4gICAgfVxuXG4gICAgaWYgKGZvcm0uZW5jdHlwZSA9PT0gJ211bHRpcGFydC9mb3JtLWRhdGEnKSB7XG4gICAgICAgIGNvbmZpZy5oZWFkZXJzWydDb250ZW50LVR5cGUnXSA9ICdtdWx0aXBhcnQvZm9ybS1kYXRhJ1xuICAgIH1cbiAgICBheGlvcy5yZXF1ZXN0KGNvbmZpZykudGhlbigocmVzcG9uc2UpID0+IHtcbiAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gMjAwKSB7XG4gICAgICAgICAgICBsZXQgaWQgPSByZXNwb25zZS5kYXRhLmlkXG4gICAgICAgICAgICBsZXQgZGlzcGxheUJsb2NrID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xheW91dEJsb2NrSHRtbCcgKyBpZClcbiAgICAgICAgICAgIGxldCBlZGl0QmxvY2sgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZWRpdEJsb2NrSHRtbCcgKyBpZClcbiAgICAgICAgICAgIGxldCBsYXlvdXRCbG9jayA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsYXlvdXRCbG9ja18nICsgaWQpXG4gICAgICAgICAgICBsYXlvdXRCbG9jay5xdWVyeVNlbGVjdG9yKCcuZWRpdF9ibG9jaycpLnJlbW92ZUF0dHJpYnV0ZSgnZGlzYWJsZWQnKVxuICAgICAgICAgICAgbGF5b3V0QmxvY2sucXVlcnlTZWxlY3RvcignLmRlbGV0ZV9ibG9jaycpLnJlbW92ZUF0dHJpYnV0ZSgnZGlzYWJsZWQnKVxuICAgICAgICAgICAgZWRpdEJsb2NrLmNsYXNzTGlzdC5hZGQoJ2Qtbm9uZScpXG4gICAgICAgICAgICBlZGl0QmxvY2suaW5uZXJIVE1MID0gJydcbiAgICAgICAgICAgIGRpc3BsYXlCbG9jay5jbGFzc0xpc3QucmVtb3ZlKCdkLW5vbmUnKVxuICAgICAgICAgICAgZGlzcGxheUJsb2NrLmlubmVySFRNTCA9IHJlc3BvbnNlLmRhdGEuaHRtbFxuICAgICAgICAgICAgQ01TQWRtaW4uY3JlYXRlSW5pdENtc01lc3NhZ2VCb3gocmVzcG9uc2UuZGF0YS5zdGF0dXMsIHJlc3BvbnNlLmRhdGEubWVzc2FnZSk7XG4gICAgICAgICAgICBsZXQgZXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoJ3BhZ2UtdXBkYXRlZCcpXG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LmRpc3BhdGNoRXZlbnQoZXZlbnQpXG4gICAgICAgIH1cbiAgICB9KS5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgbGV0IGlkID0gZXJyb3IucmVzcG9uc2UuZGF0YS5pZFxuICAgICAgICBsZXQgZWRpdEJsb2NrID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VkaXRCbG9ja0h0bWwnICsgaWQpXG4gICAgICAgIGVkaXRCbG9jay5pbm5lckhUTUwgPSBlcnJvci5yZXNwb25zZS5kYXRhLmh0bWxcbiAgICAgICAgQ01TQWRtaW4uY3JlYXRlSW5pdENtc01lc3NhZ2VCb3goJ2Vycm9yJywgZXJyb3IucmVzcG9uc2UuZGF0YS5tZXNzYWdlKTtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgnZmllbGRzOmFkZGVkJykpXG4gICAgfSlcblxufVxuXG5sZXQgdG9nZ2xlQWN0aXZlID0gKGUpID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgbGV0IGVsID0gZS50YXJnZXQ7XG4gICAgaWYgKGVsLmNsYXNzTGlzdC5jb250YWlucygna2ktb3V0bGluZScpKSB7XG4gICAgICAgIGVsID0gZWwucGFyZW50RWxlbWVudFxuICAgIH1cbiAgICBsZXQgaWNvbiA9IGVsLnF1ZXJ5U2VsZWN0b3IoJ2knKVxuICAgIGxldCBpZCA9IGVsLmRhdGFzZXQudmFsdWVcbiAgICBsZXQgZGlzcGxheUJsb2NrID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xheW91dEJsb2NrSHRtbCcgKyBpZClcbiAgICBsZXQgdXJsID0gQ01TUm91dGluZy5nZW5lcmF0ZSgnYWRtaW5fbmV0d29ya2luZ19pbml0Y21zX2xheW91dGJsb2NrX3RvZ2dsZUFjdGl2ZScpXG5cbiAgICBheGlvcy5wb3N0KHVybCwge2lkOiBpZH0sIGF4aW9zQ29uZmlnKS50aGVuKChyZXNwb25zZSkgPT4ge1xuXG5cbiAgICAgICAgQ01TQWRtaW4uY3JlYXRlSW5pdENtc01lc3NhZ2VCb3goJ3N1Y2Nlc3MnLCByZXNwb25zZS5kYXRhLm1lc3NhZ2UpO1xuICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5hY3RpdmUpIHtcbiAgICAgICAgICAgIGljb24uY2xhc3NMaXN0LnJlbW92ZSgna2ktbWludXMtY2lyY2xlJylcbiAgICAgICAgICAgIGljb24uY2xhc3NMaXN0LmFkZCgna2ktY2hlY2stY2lyY2xlJylcbiAgICAgICAgICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoJ2J0bi1saWdodC1kYW5nZXInKVxuICAgICAgICAgICAgZWwuY2xhc3NMaXN0LmFkZCgnYnRuLWxpZ2h0LXN1Y2Nlc3MnKVxuICAgICAgICAgICAgZGlzcGxheUJsb2NrLmNsYXNzTGlzdC5yZW1vdmUoJ29wYWNpdHktMjUnKVxuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICAgICAgaWNvbi5jbGFzc0xpc3QuYWRkKCdraS1taW51cy1jaXJjbGUnKVxuICAgICAgICBpY29uLmNsYXNzTGlzdC5yZW1vdmUoJ2tpLWNoZWNrLWNpcmNsZScpXG4gICAgICAgIGVsLmNsYXNzTGlzdC5hZGQoJ2J0bi1saWdodC1kYW5nZXInKVxuICAgICAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKCdidG4tbGlnaHQtc3VjY2VzcycpXG4gICAgICAgIGRpc3BsYXlCbG9jay5jbGFzc0xpc3QuYWRkKCdvcGFjaXR5LTI1JylcbiAgICAgICAgbGV0IGV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KCdwYWdlLXVwZGF0ZWQnKVxuICAgICAgICBkb2N1bWVudC5ib2R5LmRpc3BhdGNoRXZlbnQoZXZlbnQpXG4gICAgfSkuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgIENNU0FkbWluLmNyZWF0ZUluaXRDbXNNZXNzYWdlQm94KCdlcnJvcicsIGVycm9yLnJlc3BvbnNlLmRhdGEubWVzc2FnZSk7XG4gICAgfSlcblxufVxuXG5cbmxldCBkZWxldGVCbG9jayA9IChlKSA9PiB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGxldCBlbCA9IGUudGFyZ2V0O1xuXG4gICAgaWYgKGVsLmNsYXNzTGlzdC5jb250YWlucygnZmEtdHJhc2gnKSkge1xuICAgICAgICBlbCA9IGVsLnBhcmVudEVsZW1lbnRcbiAgICB9XG5cbiAgICBsZXQgY29udGFpbmVyID0gZWwuY2xvc2VzdCgnLmRyYWdnYWJsZS16b25lJylcblxuXG4gICAgU3dhbC5maXJlKHtcbiAgICAgICAgaHRtbDogYEFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBkZWxldGUgdGhpcyBibG9jaz9gLFxuICAgICAgICBpY29uOiBcIndhcm5pbmdcIixcbiAgICAgICAgYnV0dG9uc1N0eWxpbmc6IGZhbHNlLFxuICAgICAgICBzaG93Q2FuY2VsQnV0dG9uOiB0cnVlLFxuICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogXCJPaywgZ290IGl0IVwiLFxuICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAnTm9wZSwgY2FuY2VsIGl0JyxcbiAgICAgICAgY3VzdG9tQ2xhc3M6IHtcbiAgICAgICAgICAgIGNvbmZpcm1CdXR0b246IFwiYnRuIGJ0bi1kYW5nZXJcIixcbiAgICAgICAgICAgIGNhbmNlbEJ1dHRvbjogJ2J0biBidG4tcHJpbWFyeSdcbiAgICAgICAgfVxuICAgIH0pLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgICAgICBpZiAocmVzdWx0LmlzQ29uZmlybWVkKSB7XG4gICAgICAgICAgICBheGlvcy5wb3N0KGRlbGV0ZVVybCwge1xuICAgICAgICAgICAgICAgIGlkOiBlbC5kYXRhc2V0LnZhbHVlLFxuICAgICAgICAgICAgICAgIF9tZXRob2Q6ICdERUxFVEUnXG4gICAgICAgICAgICB9KS50aGVuKChyZXNwb25zZSkgPT4ge1xuXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2xheW91dEJsb2NrXycgKyBlbC5kYXRhc2V0LnZhbHVlKS5yZW1vdmUoKVxuICAgICAgICAgICAgICAgIENNU0FkbWluLmNyZWF0ZUluaXRDbXNNZXNzYWdlQm94KHJlc3BvbnNlLmRhdGEubWVzc2FnZVN0YXR1cywgcmVzcG9uc2UuZGF0YS5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICBzYXZlTGF5b3V0QmxvY2tTb3J0KCk7XG4gICAgICAgICAgICAgICAgaWYgKGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcuZHJhZ2dhYmxlJykubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuZW1wdHlfbGF5b3V0X2Jsb2NrJykuY2xhc3NMaXN0LmFkZChcImQtbm9uZVwiKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBjb250YWluZXIucXVlcnlTZWxlY3RvcignLmVtcHR5X2xheW91dF9ibG9jaycpLmNsYXNzTGlzdC5yZW1vdmUoXCJkLW5vbmVcIilcblxuICAgICAgICAgICAgfSkuY2F0Y2goKGVycikgPT4ge1xuXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKVxuICAgICAgICAgICAgICAgIENNU0FkbWluLmNyZWF0ZUluaXRDbXNNZXNzYWdlQm94KCdlcnJvcicsICdTb21ldGhpbmcgd2VudCB3cm9uZycpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgIH0pXG59XG5cbmxldCB1bmxpbmtUcmFuc2xhdGlvbiA9IChlKSA9PiB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGxldCBlbCA9IGUudGFyZ2V0O1xuXG4gICAgbGV0IHRleHQgPSBlbC5kYXRhc2V0LnRleHRcbiAgICBsZXQgaWQgPSBlbC5kYXRhc2V0Lm9iamVjdElkXG5cbiAgICBTd2FsLmZpcmUoe1xuICAgICAgICBodG1sOiB0ZXh0LFxuICAgICAgICBpY29uOiBcIndhcm5pbmdcIixcbiAgICAgICAgYnV0dG9uc1N0eWxpbmc6IGZhbHNlLFxuICAgICAgICBzaG93Q2FuY2VsQnV0dG9uOiB0cnVlLFxuICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogXCJPaywgZ290IGl0IVwiLFxuICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAnTm9wZSwgY2FuY2VsIGl0JyxcbiAgICAgICAgY3VzdG9tQ2xhc3M6IHtcbiAgICAgICAgICAgIGNvbmZpcm1CdXR0b246IFwiYnRuIGJ0bi1kYW5nZXJcIixcbiAgICAgICAgICAgIGNhbmNlbEJ1dHRvbjogJ2J0biBidG4tcHJpbWFyeSdcbiAgICAgICAgfVxuICAgIH0pLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgICAgICBpZiAocmVzdWx0LmlzQ29uZmlybWVkKSB7XG5cbiAgICAgICAgICAgIGxldCBoZWFkZXJzID0ge1wiWC1IVFRQLU1ldGhvZC1PdmVycmlkZVwiOiBcIkRFTEVURVwiLCAuLi5heGlvc0NvbmZpZy5oZWFkZXJzfVxuXG4gICAgICAgICAgICBheGlvcy5wb3N0KGVsLmhyZWYsIHt9LCB7XG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVyc1xuICAgICAgICAgICAgfSkudGhlbigocmVzcG9uc2UpID0+IHtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdHJhbnNsYXRpb25zJykuaW5uZXJIVE1MID0gcmVzcG9uc2UuZGF0YS5odG1sXG4gICAgICAgICAgICAgICAgQ01TQWRtaW4uY3JlYXRlSW5pdENtc01lc3NhZ2VCb3goJ3N1Y2Nlc3MnLCByZXNwb25zZS5kYXRhLm1lc3NhZ2UpO1xuICAgICAgICAgICAgfSkuY2F0Y2goKGVycikgPT4ge1xuXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKVxuICAgICAgICAgICAgICAgIENNU0FkbWluLmNyZWF0ZUluaXRDbXNNZXNzYWdlQm94KCdlcnJvcicsICdTb21ldGhpbmcgd2VudCB3cm9uZycpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgIH0pXG59XG5cbmxldCBsaW5rVHJhbnNsYXRpb24gPSAoZSkgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKVxuXG4gICAgbGV0IGVsID0gZS50YXJnZXQ7XG5cbiAgICBheGlvcy5nZXQoZWwuaHJlZiwgYXhpb3NDb25maWcpLnRoZW4oKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgIGxhc3RUcmFuc2xhdGlvblNldHRpbmdzSHRtbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN0cmFuc2xhdGlvbnMnKS5pbm5lckhUTUxcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3RyYW5zbGF0aW9ucycpLmlubmVySFRNTCA9IHJlc3BvbnNlLmRhdGEuaHRtbFxuICAgIH0pLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyKVxuICAgICAgICBDTVNBZG1pbi5jcmVhdGVJbml0Q21zTWVzc2FnZUJveCgnZXJyb3InLCAnU29tZXRoaW5nIHdlbnQgd3JvbmcnKTtcbiAgICB9KVxufVxuXG5sZXQgc3VibWl0VHJhbnNsYXRpb25MaW5rID0gKGUpID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KClcblxuICAgIGxldCBmb3JtID0gZS50YXJnZXQuY2xvc2VzdCgnZm9ybScpXG5cbiAgICBpZiAoZS5zdWJtaXR0ZXIuY2xhc3NMaXN0LmNvbnRhaW5zKCdidG4tY2FuY2VsJykgfHwgZS5zdWJtaXR0ZXIuY2xhc3NMaXN0LmNvbnRhaW5zKCdjYW5jZWwnKSkge1xuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdHJhbnNsYXRpb25zJykuaW5uZXJIVE1MID0gbGFzdFRyYW5zbGF0aW9uU2V0dGluZ3NIdG1sXG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBheGlvcy5wb3N0KGZvcm0uYWN0aW9uLCBuZXcgRm9ybURhdGEoZm9ybSksIGF4aW9zQ29uZmlnKS50aGVuKChyZXNwb25zZSkgPT4ge1xuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdHJhbnNsYXRpb25zJykuaW5uZXJIVE1MID0gcmVzcG9uc2UuZGF0YS5odG1sXG4gICAgICAgIENNU0FkbWluLmNyZWF0ZUluaXRDbXNNZXNzYWdlQm94KCdzdWNjZXNzJywgcmVzcG9uc2UuZGF0YS5tZXNzYWdlKTtcbiAgICB9LCBheGlvc0NvbmZpZykuY2F0Y2goKGVycikgPT4ge1xuXG4gICAgICAgIGlmIChlcnIucmVzcG9uc2UuZGF0YS5tZXNzYWdlKSB7XG4gICAgICAgICAgICByZXR1cm4gQ01TQWRtaW4uY3JlYXRlSW5pdENtc01lc3NhZ2VCb3goJ2Vycm9yJywgZXJyLnJlc3BvbnNlLmRhdGEubWVzc2FnZSk7XG4gICAgICAgIH1cblxuICAgICAgICBDTVNBZG1pbi5jcmVhdGVJbml0Q21zTWVzc2FnZUJveCgnZXJyb3InLCBlcnIucmVzcG9uc2UuZGF0YS5kZXRhaWwpO1xuICAgIH0pXG59XG5cbmxldCBzdWJtaXRQYWdlU2V0dGluZ3MgPSAoZSkgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgIGxldCBmb3JtID0gZS50YXJnZXQuY2xvc2VzdCgnZm9ybScpXG5cbiAgICBmb3JtLmVsZW1lbnRzLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgICAgaXRlbS5jbGFzc0xpc3QucmVtb3ZlKCdpcy1pbnZhbGlkJylcbiAgICB9KVxuXG4gICAgYXhpb3MucG9zdChmb3JtLmFjdGlvbiwgbmV3IEZvcm1EYXRhKGZvcm0pLCBheGlvc0NvbmZpZykudGhlbigocmVzcG9uc2UpID0+IHtcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3BhZ2VTdGF0dXNTZXR0aW5ncycpLmlubmVySFRNTCA9IHJlc3BvbnNlLmRhdGEucGFnZVN0YXR1c1NldHRpbmdzXG4gICAgICAgIENNU0FkbWluLmNyZWF0ZUluaXRDbXNNZXNzYWdlQm94KCdzdWNjZXNzJywgcmVzcG9uc2UuZGF0YS5tZXNzYWdlKTtcbiAgICB9KS5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGxldCBkYXRhID0gZXJyLnJlc3BvbnNlLmRhdGFcblxuICAgICAgICBkYXRhLnZpb2xhdGlvbnMuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgICAgICAgbGV0IHBhdGggPSBpdGVtLnByb3BlcnR5UGF0aFxuICAgICAgICAgICAgbGV0IG1lc3NhZ2UgPSBpdGVtLnRpdGxlXG4gICAgICAgICAgICBsZXQgZmllbGQgPSBmb3JtLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPVwiJyArIHBhdGggKyAnXCJdJylcbiAgICAgICAgICAgIGZpZWxkLmNsYXNzTGlzdC5hZGQoJ2lzLWludmFsaWQnKVxuICAgICAgICAgICAgZmllbGQuc2V0QXR0cmlidXRlKCdyZXF1aXJlZCcsICdyZXF1aXJlZCcpXG5cbiAgICAgICAgICAgIGlmIChmaWVsZC5uZXh0RWxlbWVudFNpYmxpbmcgJiYgZmllbGQubmV4dEVsZW1lbnRTaWJsaW5nLmNsYXNzTGlzdC5jb250YWlucygnaW52YWxpZC1mZWVkYmFjaycpKSB7XG4gICAgICAgICAgICAgICAgZmllbGQubmV4dEVsZW1lbnRTaWJsaW5nLmlubmVySHRtbCA9IG1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmaWVsZC5pbnNlcnRBZGphY2VudEhUTUwoJ2FmdGVyZW5kJywgJzxkaXYgY2xhc3M9XCJpbnZhbGlkLWZlZWRiYWNrXCI+JyArIG1lc3NhZ2UgKyAnPC9kaXY+JylcbiAgICAgICAgfSlcbiAgICB9KVxufVxuXG5sZXQgdXBkYXRlUGFnZVN0YXR1cyA9ICgpID0+IHtcbiAgICBheGlvcy5nZXQoQ01TUm91dGluZy5nZW5lcmF0ZSgnYWRtaW5fbmV0d29ya2luZ19pbml0Y21zX3BhZ2VfZ2V0UGFnZVN0YXR1cycsIHtpZDogcGFnZUlkfSksIGF4aW9zQ29uZmlnKVxuICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHtcbiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwYWdlU3RhdHVzU2V0dGluZ3MnKS5pbm5lckhUTUwgPSByZXNwb25zZS5kYXRhLnBhZ2VTdGF0dXNTZXR0aW5nc1xuICAgICAgICB9KS5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGlmIChlcnIucmVzcG9uc2UuZGF0YS5tZXNzYWdlKSB7XG4gICAgICAgICAgICByZXR1cm4gQ01TQWRtaW4uY3JlYXRlSW5pdENtc01lc3NhZ2VCb3goJ2Vycm9yJywgZXJyLnJlc3BvbnNlLmRhdGEubWVzc2FnZSk7XG4gICAgICAgIH1cblxuICAgICAgICBDTVNBZG1pbi5jcmVhdGVJbml0Q21zTWVzc2FnZUJveCgnZXJyb3InLCBlcnIucmVzcG9uc2UuZGF0YS5kZXRhaWwpO1xuICAgIH0pXG59XG5cbmxldCBzdGF0dXNEaWFsb2cgPSAoZSkgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKVxuXG4gICAgbGV0IGVsID0gZS50YXJnZXQ7XG5cbiAgICBpZiAoIWVsLmhyZWYpIHtcbiAgICAgICAgZWwgPSBlbC5jbG9zZXN0KCdhJylcbiAgICB9XG4gICAgbGV0IHRleHQgPSBlbC5kYXRhc2V0LnRleHRcbiAgICBTd2FsLmZpcmUoe1xuICAgICAgICBodG1sOiB0ZXh0LFxuICAgICAgICBpY29uOiBcIndhcm5pbmdcIixcbiAgICAgICAgYnV0dG9uc1N0eWxpbmc6IGZhbHNlLFxuICAgICAgICBzaG93Q2FuY2VsQnV0dG9uOiB0cnVlLFxuICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogXCJPaywgZ290IGl0IVwiLFxuICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAnTm9wZSwgY2FuY2VsIGl0JyxcbiAgICAgICAgY3VzdG9tQ2xhc3M6IHtcbiAgICAgICAgICAgIGNvbmZpcm1CdXR0b246IFwiYnRuIGJ0bi1kYW5nZXJcIixcbiAgICAgICAgICAgIGNhbmNlbEJ1dHRvbjogJ2J0biBidG4tcHJpbWFyeSdcbiAgICAgICAgfVxuICAgIH0pLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgICAgICBpZiAocmVzdWx0LmlzQ29uZmlybWVkKSB7XG4gICAgICAgICAgICBheGlvcy5wb3N0KGVsLmhyZWYsIGF4aW9zQ29uZmlnKS50aGVuKChyZXNwb25zZSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLnJlZGlyZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB3aW5kb3cubG9jYXRpb24gPSByZXNwb25zZS5kYXRhLnJlZGlyZWN0XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSkuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChlcnIucmVzcG9uc2UuZGF0YS5tZXNzYWdlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBDTVNBZG1pbi5jcmVhdGVJbml0Q21zTWVzc2FnZUJveCgnZXJyb3InLCBlcnIucmVzcG9uc2UuZGF0YS5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBDTVNBZG1pbi5jcmVhdGVJbml0Q21zTWVzc2FnZUJveCgnZXJyb3InLCBlcnIucmVzcG9uc2UuZGF0YS5kZXRhaWwpO1xuICAgICAgICAgICAgfSlcblxuICAgICAgICB9XG4gICAgfSlcblxufVxuXG5cbktUVXRpbC5vbkRPTUNvbnRlbnRMb2FkZWQoZnVuY3Rpb24gKCkge1xuICAgIGNvbnRhaW5lcnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmRyYWdnYWJsZS16b25lXCIpO1xuICAgIGRyb3B6b25lcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZHJvcHpvbmVcIik7XG4gICAgY29udGVudFR5cGVMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjb250ZW50X2l0ZW1fbGlzdFwiKTtcbiAgICBwYWdlSWQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwibWV0YVtuYW1lPSdpbml0LWNtcy1wYWdlLWlkJ11cIikuZ2V0QXR0cmlidXRlKFwiY29udGVudFwiKTtcblxuICAgIEtUVXRpbC5vbihkb2N1bWVudC5ib2R5LCAnLmRlbGV0ZV9ibG9jaycsICdjbGljaycsIChlKSA9PiB7XG4gICAgICAgIGRlbGV0ZUJsb2NrKGUpXG4gICAgfSlcblxuICAgIEtUVXRpbC5vbihkb2N1bWVudC5ib2R5LCAnLmVkaXRfYmxvY2snLCAnY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICBlZGl0QmxvY2soZSlcbiAgICB9KVxuXG4gICAgS1RVdGlsLm9uKGRvY3VtZW50LmJvZHksICcudG9nZ2xlLWFjdGl2ZScsICdjbGljaycsIChlKSA9PiB7XG4gICAgICAgIHRvZ2dsZUFjdGl2ZShlKVxuICAgIH0pXG5cbiAgICBLVFV0aWwub24oZG9jdW1lbnQuYm9keSwgJ1tkYXRhLWRpc21pc3M9XCJlZGl0XCJdJywgJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgY2FuY2VsRWRpdEJsb2NrKGUpXG4gICAgfSlcblxuICAgIEtUVXRpbC5vbihkb2N1bWVudC5ib2R5LCAnW2RhdGEtc2F2ZT1cImVkaXRcIl0nLCAnY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICBzYXZlTGF5b3V0QmxvY2soZSlcbiAgICB9KVxuXG4gICAgS1RVdGlsLm9uKGRvY3VtZW50LmJvZHksICcudHJhbnNsYXRpb24tZGlhbG9nLXVubGluaycsICdjbGljaycsIChlKSA9PiB7XG4gICAgICAgIHVubGlua1RyYW5zbGF0aW9uKGUpXG4gICAgfSk7XG5cbiAgICBLVFV0aWwub24oZG9jdW1lbnQuYm9keSwgJy50cmFuc2xhdGlvbi1kaWFsb2ctbGluaycsICdjbGljaycsIChlKSA9PiB7XG4gICAgICAgIGxpbmtUcmFuc2xhdGlvbihlKVxuICAgIH0pO1xuXG4gICAgS1RVdGlsLm9uKGRvY3VtZW50LmJvZHksICcjdHJhbnNsYXRpb24tbGluay1mb3JtJywgJ3N1Ym1pdCcsIChlKSA9PiB7XG4gICAgICAgIHN1Ym1pdFRyYW5zbGF0aW9uTGluayhlKVxuICAgIH0pO1xuXG4gICAgS1RVdGlsLm9uKGRvY3VtZW50LmJvZHksICcjdHJhbnNsYXRlLWNvcHktcGFnZS1mb3JtJywgJ3N1Ym1pdCcsIChlKSA9PiB7XG4gICAgICAgIHN1Ym1pdFRyYW5zbGF0aW9uTGluayhlKVxuICAgIH0pO1xuXG4gICAgS1RVdGlsLm9uKGRvY3VtZW50LmJvZHksICcjcGFnZS1zZXR0aW5ncy1mb3JtJywgJ3N1Ym1pdCcsIChlKSA9PiB7XG4gICAgICAgIHN1Ym1pdFBhZ2VTZXR0aW5ncyhlKVxuICAgIH0pO1xuXG4gICAgS1RVdGlsLm9uKGRvY3VtZW50LmJvZHksICcjcGFnZS1tZXRhZGF0YS1mb3JtJywgJ3N1Ym1pdCcsIChlKSA9PiB7XG4gICAgICAgIHN1Ym1pdFBhZ2VTZXR0aW5ncyhlKVxuICAgIH0pO1xuXG4gICAgS1RVdGlsLm9uKGRvY3VtZW50LmJvZHksICcuc3RhdHVzLWRpYWxvZy1saW5rJywgJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgc3RhdHVzRGlhbG9nKGUpXG4gICAgfSk7XG5cbiAgICBkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ3BhZ2UtdXBkYXRlZCcsIChlKSA9PiB7XG4gICAgICAgIHVwZGF0ZVBhZ2VTdGF0dXMoKVxuICAgIH0pXG5cblxuICAgIGluaXREcm9wWm9uZSgpO1xufSkiLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwidmFyIHdlYnBhY2tRdWV1ZXMgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgPyBTeW1ib2woXCJ3ZWJwYWNrIHF1ZXVlc1wiKSA6IFwiX193ZWJwYWNrX3F1ZXVlc19fXCI7XG52YXIgd2VicGFja0V4cG9ydHMgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgPyBTeW1ib2woXCJ3ZWJwYWNrIGV4cG9ydHNcIikgOiBcIl9fd2VicGFja19leHBvcnRzX19cIjtcbnZhciB3ZWJwYWNrRXJyb3IgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgPyBTeW1ib2woXCJ3ZWJwYWNrIGVycm9yXCIpIDogXCJfX3dlYnBhY2tfZXJyb3JfX1wiO1xudmFyIHJlc29sdmVRdWV1ZSA9IChxdWV1ZSkgPT4ge1xuXHRpZihxdWV1ZSAmJiBxdWV1ZS5kIDwgMSkge1xuXHRcdHF1ZXVlLmQgPSAxO1xuXHRcdHF1ZXVlLmZvckVhY2goKGZuKSA9PiAoZm4uci0tKSk7XG5cdFx0cXVldWUuZm9yRWFjaCgoZm4pID0+IChmbi5yLS0gPyBmbi5yKysgOiBmbigpKSk7XG5cdH1cbn1cbnZhciB3cmFwRGVwcyA9IChkZXBzKSA9PiAoZGVwcy5tYXAoKGRlcCkgPT4ge1xuXHRpZihkZXAgIT09IG51bGwgJiYgdHlwZW9mIGRlcCA9PT0gXCJvYmplY3RcIikge1xuXHRcdGlmKGRlcFt3ZWJwYWNrUXVldWVzXSkgcmV0dXJuIGRlcDtcblx0XHRpZihkZXAudGhlbikge1xuXHRcdFx0dmFyIHF1ZXVlID0gW107XG5cdFx0XHRxdWV1ZS5kID0gMDtcblx0XHRcdGRlcC50aGVuKChyKSA9PiB7XG5cdFx0XHRcdG9ialt3ZWJwYWNrRXhwb3J0c10gPSByO1xuXHRcdFx0XHRyZXNvbHZlUXVldWUocXVldWUpO1xuXHRcdFx0fSwgKGUpID0+IHtcblx0XHRcdFx0b2JqW3dlYnBhY2tFcnJvcl0gPSBlO1xuXHRcdFx0XHRyZXNvbHZlUXVldWUocXVldWUpO1xuXHRcdFx0fSk7XG5cdFx0XHR2YXIgb2JqID0ge307XG5cdFx0XHRvYmpbd2VicGFja1F1ZXVlc10gPSAoZm4pID0+IChmbihxdWV1ZSkpO1xuXHRcdFx0cmV0dXJuIG9iajtcblx0XHR9XG5cdH1cblx0dmFyIHJldCA9IHt9O1xuXHRyZXRbd2VicGFja1F1ZXVlc10gPSB4ID0+IHt9O1xuXHRyZXRbd2VicGFja0V4cG9ydHNdID0gZGVwO1xuXHRyZXR1cm4gcmV0O1xufSkpO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5hID0gKG1vZHVsZSwgYm9keSwgaGFzQXdhaXQpID0+IHtcblx0dmFyIHF1ZXVlO1xuXHRoYXNBd2FpdCAmJiAoKHF1ZXVlID0gW10pLmQgPSAtMSk7XG5cdHZhciBkZXBRdWV1ZXMgPSBuZXcgU2V0KCk7XG5cdHZhciBleHBvcnRzID0gbW9kdWxlLmV4cG9ydHM7XG5cdHZhciBjdXJyZW50RGVwcztcblx0dmFyIG91dGVyUmVzb2x2ZTtcblx0dmFyIHJlamVjdDtcblx0dmFyIHByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqKSA9PiB7XG5cdFx0cmVqZWN0ID0gcmVqO1xuXHRcdG91dGVyUmVzb2x2ZSA9IHJlc29sdmU7XG5cdH0pO1xuXHRwcm9taXNlW3dlYnBhY2tFeHBvcnRzXSA9IGV4cG9ydHM7XG5cdHByb21pc2Vbd2VicGFja1F1ZXVlc10gPSAoZm4pID0+IChxdWV1ZSAmJiBmbihxdWV1ZSksIGRlcFF1ZXVlcy5mb3JFYWNoKGZuKSwgcHJvbWlzZVtcImNhdGNoXCJdKHggPT4ge30pKTtcblx0bW9kdWxlLmV4cG9ydHMgPSBwcm9taXNlO1xuXHRib2R5KChkZXBzKSA9PiB7XG5cdFx0Y3VycmVudERlcHMgPSB3cmFwRGVwcyhkZXBzKTtcblx0XHR2YXIgZm47XG5cdFx0dmFyIGdldFJlc3VsdCA9ICgpID0+IChjdXJyZW50RGVwcy5tYXAoKGQpID0+IHtcblx0XHRcdGlmKGRbd2VicGFja0Vycm9yXSkgdGhyb3cgZFt3ZWJwYWNrRXJyb3JdO1xuXHRcdFx0cmV0dXJuIGRbd2VicGFja0V4cG9ydHNdO1xuXHRcdH0pKVxuXHRcdHZhciBwcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcblx0XHRcdGZuID0gKCkgPT4gKHJlc29sdmUoZ2V0UmVzdWx0KSk7XG5cdFx0XHRmbi5yID0gMDtcblx0XHRcdHZhciBmblF1ZXVlID0gKHEpID0+IChxICE9PSBxdWV1ZSAmJiAhZGVwUXVldWVzLmhhcyhxKSAmJiAoZGVwUXVldWVzLmFkZChxKSwgcSAmJiAhcS5kICYmIChmbi5yKyssIHEucHVzaChmbikpKSk7XG5cdFx0XHRjdXJyZW50RGVwcy5tYXAoKGRlcCkgPT4gKGRlcFt3ZWJwYWNrUXVldWVzXShmblF1ZXVlKSkpO1xuXHRcdH0pO1xuXHRcdHJldHVybiBmbi5yID8gcHJvbWlzZSA6IGdldFJlc3VsdCgpO1xuXHR9LCAoZXJyKSA9PiAoKGVyciA/IHJlamVjdChwcm9taXNlW3dlYnBhY2tFcnJvcl0gPSBlcnIpIDogb3V0ZXJSZXNvbHZlKGV4cG9ydHMpKSwgcmVzb2x2ZVF1ZXVlKHF1ZXVlKSkpO1xuXHRxdWV1ZSAmJiBxdWV1ZS5kIDwgMCAmJiAocXVldWUuZCA9IDApO1xufTsiLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiLy8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yID0gKGV4cG9ydHMpID0+IHtcblx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG5cdH1cblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbn07IiwiIiwiLy8gc3RhcnR1cFxuLy8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4vLyBUaGlzIGVudHJ5IG1vZHVsZSB1c2VkICdtb2R1bGUnIHNvIGl0IGNhbid0IGJlIGlubGluZWRcbnZhciBfX3dlYnBhY2tfZXhwb3J0c19fID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vYXNzZXRzL2Ntcy9wYWdlLWFkbWluLmpzXCIpO1xuIiwiIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9