{"version":3,"file":"embedbase.js","names":["CKEDITOR","dialog","add","editor","lang","embedbase","title","minWidth","minHeight","onLoad","that","this","loadContentRequest","unlock","setState","DIALOG_STATE_IDLE","on","evt","data","hide","stop","DIALOG_STATE_BUSY","url","getValueOf","widget","getModel","loadContent","noNotifications","callback","isReady","widgets","finalizeCreation","wrapper","getParent","fire","errorCallback","messageTypeOrMessage","getContentElement","select","alert","getErrorMessage","cancel","contents","id","elements","type","label","common","required","setup","setValue","validate","getDialog","isUrlValid","getValue","unsupportedUrlGiven"],"sources":["embedbase/dialogs/embedbase.js"],"mappings":";;;;AAOAA,SAASC,OAAOC,IAAK,aAAa,SAAUC,GAC3C,aAEA,IAAIC,EAAOD,EAAOC,KAAKC,UAEvB,MAAO,CACNC,MAAOF,EAAKE,MACZC,SAAU,IACVC,UAAW,GAEXC,OAAQ,WACP,IAAIC,EAAOC,KACVC,EAAqB,KA8CtB,SAASC,IAERH,EAAKI,SAAUd,SAASe,mBACxBH,EAAqB,IACtB,CAhDAD,KAAKK,GAAI,MAAM,SAAUC,GAExBA,EAAIC,KAAKC,MAAO,EAGhBF,EAAIG,OAGJV,EAAKI,SAAUd,SAASqB,mBAExB,IAAIC,EAAMZ,EAAKa,WAAY,OAAQ,OAClCC,EAASd,EAAKe,SAAUtB,GAEzBS,EAAqBY,EAAOE,YAAaJ,EAAK,CAC7CK,iBAAiB,EAEjBC,SAAU,WACHJ,EAAOK,WACZ1B,EAAO2B,QAAQC,iBAAkBP,EAAOQ,QAAQC,WAAW,IAG5D9B,EAAO+B,KAAM,gBAEbxB,EAAKS,OACLN,GACD,EAEAsB,cAAe,SAAUC,GACxB1B,EAAK2B,kBAAmB,OAAQ,OAAQC,SAExCC,MAAOf,EAAOgB,gBAAiBJ,EAAsBd,EAAK,UAE1DT,GACD,GAEF,GAAG,KAAM,KAAM,IAEfF,KAAKK,GAAI,UAAU,SAAUC,GACvBA,EAAIC,KAAKC,MAAQP,IACrBA,EAAmB6B,SACnB5B,IAEF,GAOD,EAEA6B,SAAU,CACT,CACCC,GAAI,OAEJC,SAAU,CACT,CACCC,KAAM,OACNF,GAAI,MACJG,MAAO3C,EAAOC,KAAK2C,OAAOzB,IAC1B0B,UAAU,EAEVC,MAAO,SAAUzB,GAChBb,KAAKuC,SAAU1B,EAAON,KAAKI,IAC5B,EAEA6B,SAAU,WAGT,QAFaxC,KAAKyC,YAAY3B,SAAUtB,GAE3BkD,WAAY1C,KAAK2C,aACtBlD,EAAKmD,mBAId,MAMN","sourcesContent":["/**\n * @license Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/* global alert */\n\nCKEDITOR.dialog.add( 'embedBase', function( editor ) {\n\t'use strict';\n\n\tvar lang = editor.lang.embedbase;\n\n\treturn {\n\t\ttitle: lang.title,\n\t\tminWidth: 350,\n\t\tminHeight: 50,\n\n\t\tonLoad: function() {\n\t\t\tvar that = this,\n\t\t\t\tloadContentRequest = null;\n\n\t\t\tthis.on( 'ok', function( evt ) {\n\t\t\t\t// We're going to hide it manually, after remote response is fetched.\n\t\t\t\tevt.data.hide = false;\n\n\t\t\t\t// We don't want the widget system to finalize widget insertion (it happens with priority 20).\n\t\t\t\tevt.stop();\n\n\t\t\t\t// Indicate visually that waiting for the response (https://dev.ckeditor.com/ticket/13213).\n\t\t\t\tthat.setState( CKEDITOR.DIALOG_STATE_BUSY );\n\n\t\t\t\tvar url = that.getValueOf( 'info', 'url' ),\n\t\t\t\t\twidget = that.getModel( editor );\n\n\t\t\t\tloadContentRequest = widget.loadContent( url, {\n\t\t\t\t\tnoNotifications: true,\n\n\t\t\t\t\tcallback: function() {\n\t\t\t\t\t\tif ( !widget.isReady() ) {\n\t\t\t\t\t\t\teditor.widgets.finalizeCreation( widget.wrapper.getParent( true ) );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\teditor.fire( 'saveSnapshot' );\n\n\t\t\t\t\t\tthat.hide();\n\t\t\t\t\t\tunlock();\n\t\t\t\t\t},\n\n\t\t\t\t\terrorCallback: function( messageTypeOrMessage ) {\n\t\t\t\t\t\tthat.getContentElement( 'info', 'url' ).select();\n\n\t\t\t\t\t\talert( widget.getErrorMessage( messageTypeOrMessage, url, 'Given' ) );\n\n\t\t\t\t\t\tunlock();\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t}, null, null, 15 );\n\n\t\t\tthis.on( 'cancel', function( evt ) {\n\t\t\t\tif ( evt.data.hide && loadContentRequest ) {\n\t\t\t\t\tloadContentRequest.cancel();\n\t\t\t\t\tunlock();\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\tfunction unlock() {\n\t\t\t\t// Visual waiting indicator is no longer needed (https://dev.ckeditor.com/ticket/13213).\n\t\t\t\tthat.setState( CKEDITOR.DIALOG_STATE_IDLE );\n\t\t\t\tloadContentRequest = null;\n\t\t\t}\n\t\t},\n\n\t\tcontents: [\n\t\t\t{\n\t\t\t\tid: 'info',\n\n\t\t\t\telements: [\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: 'text',\n\t\t\t\t\t\tid: 'url',\n\t\t\t\t\t\tlabel: editor.lang.common.url,\n\t\t\t\t\t\trequired: true,\n\n\t\t\t\t\t\tsetup: function( widget ) {\n\t\t\t\t\t\t\tthis.setValue( widget.data.url );\n\t\t\t\t\t\t},\n\n\t\t\t\t\t\tvalidate: function() {\n\t\t\t\t\t\t\tvar widget = this.getDialog().getModel( editor );\n\n\t\t\t\t\t\t\tif ( !widget.isUrlValid( this.getValue() ) ) {\n\t\t\t\t\t\t\t\treturn lang.unsupportedUrlGiven;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t}\n\t\t]\n\t};\n} );\n"]}