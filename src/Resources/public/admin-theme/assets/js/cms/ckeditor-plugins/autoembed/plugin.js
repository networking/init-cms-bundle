/**
 * @license Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */
"use strict";!function(){var e=/^<a[^>]+href="([^"]+)"[^>]*>([^<]+)<\/a>$/i;CKEDITOR.plugins.add("autoembed",{requires:"autolink,undo",lang:"ar,az,bg,ca,cs,da,de,de-ch,el,en,en-au,eo,es,es-mx,et,eu,fa,fr,gl,hr,hu,id,it,ja,km,ko,ku,lt,lv,mk,nb,nl,oc,pl,pt,pt-br,ro,ru,sk,sq,sr,sr-latn,sv,tr,ug,uk,vi,zh,zh-cn",init:function(t){var a,n=1;t.on("paste",(function(i){if(i.data.dataTransfer.getTransferType(t)!=CKEDITOR.DATA_TRANSFER_INTERNAL){var o=i.data.dataValue.match(e);(a=null!=o&&decodeURI(o[1])==decodeURI(o[2]))&&(i.data.dataValue='<a data-cke-autoembed="'+ ++n+'"'+i.data.dataValue.substr(2))}else a=0}),null,null,20),t.on("afterPaste",(function(){a&&function(e,t){var a,n=e.editable().findOne('a[data-cke-autoembed="'+t+'"]'),i=e.lang.autoembed;if(!n||!n.data("cke-saved-href"))return;var o=n.data("cke-saved-href"),d=CKEDITOR.plugins.autoEmbed.getWidgetDefinition(e,o);if(!d)return void CKEDITOR.warn("autoembed-no-widget-def");var r,s="function"==typeof d.defaults?d.defaults():d.defaults,u=CKEDITOR.dom.element.createFromHtml(d.template.output(s)),f=e.widgets.wrapElement(u,d.name),l=new CKEDITOR.dom.documentFragment(f.getDocument());if(l.append(f),r=e.widgets.initOn(u,d),!r)return void c();function c(){e.widgets.finalizeCreation(l)}a=e.showNotification(i.embeddingInProgress,"info"),r.loadContent(o,{noNotifications:!0,callback:function(){var n=e.editable().findOne('a[data-cke-autoembed="'+t+'"]');if(n){var i=e.getSelection(),o=e.createRange(),d=e.editable();e.fire("saveSnapshot"),e.fire("lockSnapshot",{dontUpdate:!0});var r=i.createBookmarks(!1)[0],s=r.startNode,u=r.endNode||s;CKEDITOR.env.ie&&CKEDITOR.env.version<9&&!r.endNode&&s.equals(n.getNext())&&n.append(s),o.setStartBefore(n),o.setEndAfter(n),d.insertElement(f,o),d.contains(s)&&d.contains(u)?i.selectBookmarks([r]):(s.remove(),u.remove()),e.fire("unlockSnapshot")}a.hide(),c()},errorCallback:function(){a.hide(),e.widgets.destroy(r,!0),e.showNotification(i.embeddingFailed,"info")}})}(t,n)}))}}),CKEDITOR.plugins.autoEmbed={getWidgetDefinition:function(e,t){var a,n=e.config.autoEmbed_widget||"embed,embedSemantic",i=e.widgets.registered;if("string"==typeof n){for(n=n.split(",");a=n.shift();)if(i[a])return i[a]}else if("function"==typeof n)return i[n(t)];return null}}}();
//# sourceMappingURL=plugin.js.map
